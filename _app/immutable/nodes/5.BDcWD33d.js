import{c as xt,a as A,t as D}from"../chunks/disclose-version.CyzBF5DE.js";import{f as J,p as it,z as k,w as t,A as l,t as o,a as st,c as a,s,r as e,y as V,$ as pe,ad as _e}from"../chunks/runtime.DCDhZAS9.js";import{d as ot,e as yt,s as f,h as fe}from"../chunks/render.GuxJiPpJ.js";import{i as K}from"../chunks/if.CrJYGNN5.js";import{e as wt,r as $t,a as U,H as Qt,I as me,m as be,J as he,K as ge,L as xe,M as ye,t as we,N as $e,O as Ae,P as ke,Q as Ce,R as Se,S as je,T as Ie,U as De,V as Ee,W as Me,X as Pe,Y as Te,Z as Ne}from"../chunks/messages.DrdQHzfr.js";import{d as At,s as kt,t as Oe}from"../chunks/debounce.B0m-GfvZ.js";import{p as C}from"../chunks/proxy.B60m95XX.js";import{o as Ve}from"../chunks/index-client.CpYcptp6.js";import{I as Le,s as Be,g as Fe}from"../chunks/Icon.D1Cmpmcm.js";import{a as lt}from"../chunks/index.C38_imDu.js";import{D as ze}from"../chunks/Dropdown.DnCqYh11.js";import{b as bt}from"../chunks/paths.DBv2nKNz.js";import{P as Ge,M as ht,a as He,T as Re,E as Ue}from"../chunks/Modal.C3GBZGI0.js";import{I as Ct,b as St,G as jt,m as It,C as rt,v as nt,S as Dt,h as Et,a as Mt}from"../chunks/InputResults.ChgnQGK3.js";import{l as Ze,s as qe,p as Je}from"../chunks/props.DNa4puzj.js";import"../chunks/legacy.C8gm2cMg.js";function gt(d,r){const n=Ze(r,["children","$$slots","$$events","$$legacy"]);Le(d,qe({name:"external-link"},()=>n,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(m,b)=>{var j=xt(),B=J(j);Be(B,r,"default",{}),A(m,j)},$$slots:{default:!0}}))}const Ke=()=>jt((d={},r)=>{r.length&&(It(r),rt("name",wt(),()=>{nt(d.name).isNotBlank()}))});function Qe(d,r,n){r.add(d.currentTarget.name),n()}var We=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Xe=D('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ye(d,r){it(r,!0);let n=k(""),S=Ke(),m=k(C(S.get())),b=k(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=At(()=>{S({name:t(n)},Array.from(p)).done(u=>{l(m,C(u))}),p.clear()},300);function G(){p.add("name"),y(),y.flush()}async function H(u){u.preventDefault();try{l(b,!0),l(n,C(t(n).trim())),G(),t(m).isValid()&&r.onCreate(await lt.createApplication({name:t(n)}))}catch(g){await Et(g)}finally{l(b,!1)}}var c=Xe(),w=a(c),h=a(w);$t(h);const F=V(()=>`w-full ${t(B)("name")??""}`);o(()=>U(h,"placeholder",Qt())),h.__input=[Qe,p,y];var E=s(h,2);Ct(E,{name:"name",get result(){return t(m)}}),e(w);var P=s(w,2),L=a(P),T=a(L);{var N=u=>{var g=We(),x=a(g),M=a(x);Dt(M),e(x),e(g),A(u,g)};K(T,u=>{t(b)&&u(N)})}var z=s(T);o(()=>f(z,` ${me()??""}`)),e(L),e(P),e(c),o(()=>{kt(h,t(F)),L.disabled=t(j)}),yt("submit",c,H),St(h,()=>t(n),u=>l(n,u)),A(d,c),st()}ot(["input"]);const ta=()=>jt((d={},r)=>{r.length&&(It(r),rt("nameConfirm",wt(),()=>{nt(d.nameConfirm).isNotBlank()}),rt("nameConfirm",be(),()=>{nt(d.name===d.nameConfirm).isTruthy()}))});function ea(d,r,n){r.add(d.currentTarget.name),n()}var aa=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ra=D('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function na(d,r){it(r,!0);let n=k(""),S=ta(),m=k(C(S.get())),b=k(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=At(()=>{S({name:r.name,nameConfirm:t(n)},Array.from(p)).done(x=>{l(m,C(x))}),p.clear()},300);function G(){p.add("name"),y(),y.flush()}async function H(x){x.preventDefault();try{l(b,!0),l(n,C(t(n).trim())),G(),t(m).isValid()&&(await lt.deleteApplication(r.applicationId),r.onDelete())}catch(M){await Et(M)}finally{l(b,!1)}}var c=ra(),w=a(c),h=a(w,!0);o(()=>f(h,ge())),e(w);var F=s(w,2),E=a(F);$t(E);const P=V(()=>`w-full ${t(B)("nameConfirm")??""}`);o(()=>U(E,"placeholder",he({name:r.name}))),E.__input=[ea,p,y];var L=s(E,2);Ct(L,{name:"nameConfirm",get result(){return t(m)}}),e(F);var T=s(F,2),N=a(T),z=a(N);{var u=x=>{var M=aa(),R=a(M),Q=a(R);Dt(Q),e(R),e(M),A(x,M)};K(z,x=>{t(b)&&x(u)})}var g=s(z);o(()=>f(g,` ${xe()??""}`)),e(N),e(T),e(c),o(()=>{kt(E,t(P)),N.disabled=t(j)}),yt("submit",c,H),St(E,()=>t(n),x=>l(n,x)),A(d,c),st()}ot(["input"]);const ia=()=>jt((d={},r)=>{r.length&&(It(r),rt("name",wt(),()=>{nt(d.name).isNotBlank()}))});function sa(d,r,n){r.add(d.currentTarget.name),n()}var oa=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),la=D('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function da(d,r){it(r,!0);let n=Je(r,"name",15,""),S=ia(),m=k(C(S.get())),b=k(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=At(()=>{S({name:n()},Array.from(p)).done(u=>{l(m,C(u))}),p.clear()},300);function G(){p.add("name"),y(),y.flush()}async function H(u){u.preventDefault();try{l(b,!0),n(n().trim()),G(),t(m).isValid()&&r.onEdit(await lt.updateApplication(r.applicationId,{name:n()}))}catch(g){await Et(g)}finally{l(b,!1)}}var c=la(),w=a(c),h=a(w);$t(h);const F=V(()=>`w-full ${t(B)("name")??""}`);o(()=>U(h,"placeholder",Qt())),h.__input=[sa,p,y];var E=s(h,2);Ct(E,{name:"name",get result(){return t(m)}}),e(w);var P=s(w,2),L=a(P),T=a(L);{var N=u=>{var g=oa(),x=a(g),M=a(x);Dt(M),e(x),e(g),A(u,g)};K(T,u=>{t(b)&&u(N)})}var z=s(T);o(()=>f(z,` ${ye()??""}`)),e(L),e(P),e(c),o(()=>{kt(h,t(F)),L.disabled=t(j)}),yt("submit",c,H),St(h,n),A(d,c),st()}ot(["input"]);const Kt=20;function va(d,r){l(r,!0)}var ua=D('<button class="btn secondary icon lg"><!></button>'),ca=D('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),pa=D('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),_a=D("<h3> </h3>"),fa=D("<h3> </h3>"),ma=D("<h3> </h3>"),ba=D('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-end"><button class="btn primary icon lg"><!></button></div> <table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table></div></div> <!> <!> <!>',1);function Na(d,r){it(r,!0);let n=C([]),S=k(0),m=k(!0);Ve(b);async function b(){if(!t(m))return;const v=await lt.allApplications(t(S)*Kt,Kt);l(m,C(v.hasMore)),l(S,t(S)+1),n.push(...v.items)}let j=k(!1);function B(v){n.unshift(v),l(j,!1)}let p=k(void 0),y=k(!1);function G(v){return()=>{l(p,C(v)),l(y,!0)}}function H(v){const i=n.findIndex(_=>_.id===(v==null?void 0:v.id));i!==-1&&(n[i]=v),l(p,void 0),l(y,!1)}let c=k(void 0),w=k(!1);function h(v){return()=>{l(c,C(v)),l(w,!0)}}function F(){const v=n.findIndex(i=>{var _;return i.id===((_=t(c))==null?void 0:_.id)});v!==-1&&n.splice(v,1),l(c,void 0),l(w,!1)}const E=Fe(),[P,L]=E;var T=ba();fe(v=>{o(()=>pe.title=$e())});var N=J(T),z=a(N),u=a(z),g=a(u);g.__click=[va,j];var x=a(g);Ge(x,{}),e(g),e(u);var M=s(u,2),R=a(M),Q=a(R),dt=a(Q),Wt=a(dt,!0);o(()=>f(Wt,Ce())),e(dt);var vt=s(dt),Xt=a(vt,!0);o(()=>f(Xt,Se())),e(vt);var ut=s(vt),Yt=a(ut,!0);o(()=>f(Yt,je())),e(ut);var Pt=s(ut),te=a(Pt,!0);o(()=>f(te,Ie())),e(Pt),_e(),e(Q),e(R);var Tt=s(R);we(Tt,23,()=>n,v=>v.id,(v,i,_)=>{var $=pa(),I=a($),Z=a(I,!0);e(I);var O=s(I),ae=a(O,!0);e(O);var ct=s(O),re=a(ct,!0);o(()=>f(re,t(i).updatedAt.toLocaleString())),e(ct);var pt=s(ct),ne=a(pt,!0);o(()=>f(ne,t(i).createdAt.toLocaleString())),e(pt);var Vt=s(pt),Lt=a(Vt),ie=a(Lt);ze(ie,{position:"top-right",anchorPosition:"bottom-right",button:_t=>{var W=ua(),X=a(W);Ue(X,{}),e(W),A(_t,W)},children:(_t,W)=>{var X=ca(),Y=J(X);o(()=>U(Y,"href",P(`${bt}/applications/${t(i).id}/users`,void 0)));var Bt=a(Y);gt(Bt,{});var Ft=s(Bt),se=a(Ft,!0);o(()=>f(se,De())),e(Ft),e(Y);var tt=s(Y,2);o(()=>U(tt,"href",P(`${bt}/applications/${t(i).id}/service-accounts`,void 0)));var zt=a(tt);gt(zt,{});var Gt=s(zt),oe=a(Gt,!0);o(()=>f(oe,Ee())),e(Gt),e(tt);var et=s(tt,2);o(()=>U(et,"href",P(`${bt}/applications/${t(i).id}/tenants`,void 0)));var Ht=a(et);gt(Ht,{});var Rt=s(Ht),le=a(Rt,!0);o(()=>f(le,Me())),e(Rt),e(et);var at=s(et,2),de=V(()=>G(t(i)));at.__click=function(...mt){var q;(q=t(de))==null||q.apply(this,mt)};var Ut=a(at);He(Ut,{});var Zt=s(Ut),ve=a(Zt,!0);o(()=>f(ve,Pe())),e(Zt),e(at);var ft=s(at,2),ue=V(()=>h(t(i)));ft.__click=function(...mt){var q;(q=t(ue))==null||q.apply(this,mt)};var qt=a(ft);Re(qt,{});var Jt=s(qt),ce=a(Jt,!0);o(()=>f(ce,Te())),e(Jt),e(ft),A(_t,X)},$$slots:{button:!0,default:!0}}),e(Lt),e(Vt),e($),o(()=>{Oe($,"border-b",t(_)<n.length-1),f(Z,t(i).id),f(ae,t(i).name)}),A(v,$)}),e(Tt),e(M),e(z),e(N);var Nt=s(N,2);ht(Nt,{get open(){return t(j)},set open(i){l(j,C(i))},title:i=>{var _=_a(),$=a(_,!0);o(()=>f($,Ne())),e(_),A(i,_)},children:(i,_)=>{Ye(i,{onCreate:B})},$$slots:{title:!0,default:!0}});var Ot=s(Nt,2);ht(Ot,{get open(){return t(y)},set open(i){l(y,C(i))},title:i=>{var _=fa(),$=a(_,!0);o(()=>{var I;return f($,Ae({name:((I=t(p))==null?void 0:I.name)||""}))}),e(_),A(i,_)},children:(i,_)=>{var $=xt(),I=J($);{var Z=O=>{da(O,{get applicationId(){return t(p).id},get name(){return t(p).name},onEdit:H})};K(I,O=>{t(p)&&O(Z)})}A(i,$)},$$slots:{title:!0,default:!0}});var ee=s(Ot,2);ht(ee,{get open(){return t(w)},set open(i){l(w,C(i))},title:i=>{var _=ma(),$=a(_,!0);o(()=>{var I;return f($,ke({name:((I=t(c))==null?void 0:I.name)||""}))}),e(_),A(i,_)},children:(i,_)=>{var $=xt(),I=J($);{var Z=O=>{na(O,{get applicationId(){return t(c).id},get name(){return t(c).name},onDelete:F})};K(I,O=>{t(c)&&O(Z)})}A(i,$)},$$slots:{title:!0,default:!0}}),A(d,T),st()}ot(["click"]);export{Na as component};
