import{a as B,t as H,c as at}from"../chunks/disclose-version.BR6hquoZ.js";import{p as ge,d as u,b as s,g as e,f as Ee,t as l,a as xe,c as a,r as t,s as i,z as M,u as _t,ao as ft,$ as pt}from"../chunks/runtime.XTayOKyQ.js";import{d as Me,s as _,e as $e,h as bt}from"../chunks/render.DpS1xNCU.js";import{e as te,r as ve,s as W,m as mt,n as ht,o as gt,p as xt,q as yt,v as It,w as St,x as wt,y as Kt,z as kt,A as Et,B as Tt,C as Ct,D as Nt,E as At,F as jt,G as Dt,H as Pt,I as Bt,J as Ot,K as Mt,L as Ht,M as Ft,N as Lt,O as Gt,P as Rt,Q as Ut,R as Vt,S as qt,T as zt,U as Jt,V as Qt,W as Wt,t as Xt,X as Yt}from"../chunks/messages.D-7JLJoP.js";import{p as d}from"../chunks/proxy.BKNo-OHe.js";import{p as V,b as Zt}from"../chunks/props.CLxh3Ck6.js";import{g as nt}from"../chunks/index.BCwrhWKg.js";import{b as it}from"../chunks/paths.Hn01zztd.js";import{i as Te}from"../chunks/runtime.vqD1BrVN.js";import{d as st,e as lt,I as ae,b as _e,G as dt,m as ot,C as J,v as Q,N as Xe,s as se,a as ut,S as et,h as tt,t as $t}from"../chunks/InputResults.I4g3kDNh.js";import{A as Ze,t as He}from"../chunks/index.B-XEKY0d.js";import{M as Ye,D as ea,P as ta,T as aa,E as ra,a as na}from"../chunks/trash.DSd6zT0V.js";import{b as ia}from"../chunks/select.D5OYKfWn.js";import{o as sa}from"../chunks/index-client.DhLDVXYR.js";import{P as la}from"../chunks/Password.jVVJCmGL.js";import{E as da}from"../chunks/external-link.DMGBnnsa.js";import{C as oa}from"../chunks/chevron-left.CLUQG4cV.js";const ct=["HS256","HS384","HS512"],ua=()=>dt((f,r)=>{r.length&&(ot(r),J("algorithm",te(),()=>{Q(f.algorithm).isNotBlank()}),Xe(!f.audience,()=>{J("audience",te(),()=>{Q(f.audience).isNotBlank()})}),J("expiresInSeconds",te(),()=>{Q(f.expiresInSeconds).isNotBlank()}),J("issuer",te(),()=>{Q(f.issuer).isNotBlank()}),Xe(f.isNew,()=>{J("clientId",te(),()=>{Q(f.clientId).isNotBlank()}),J("privateKey",te(),()=>{Q(f.privateKey).isNotBlank()})}),Xe(ct.includes(f.algorithm),()=>{J("publicKey",te(),()=>{Q(f.publicKey).isNotBlank()})}),J("refreshExpiresInSeconds",te(),()=>{Q(f.refreshExpiresInSeconds).isNotBlank()}))});var ca=H("<option> </option>"),va=H('<div class="mb-2"><label for="algorithm"> </label> <select name="algorithm"></select> <!></div> <div class="mb-2"><label for="audience"> </label> <input type="text" name="audience"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="expiresInSeconds"> </label> <input type="number" min="0" name="expiresInSeconds"> <!></div> <div class="mb-2"><label for="issuer"> </label> <input type="text" name="issuer"> <!></div> <div class="mb-2"><label for="publicKey"> </label> <input type="text" name="publicKey"> <!></div> <div class="mb-2"><label for="privateKey"> </label> <!> <!></div> <div class="mb-2"><label for="refreshExpiresInSeconds"> </label> <input type="number" min="0" name="refreshExpiresInSeconds"> <!></div>',1);function vt(f,r){ge(r,!0);let o=V(r,"algorithm",31,()=>d(Ze.Hs256)),I=V(r,"audience",15),O=V(r,"clientId",15),S=V(r,"expiresInSeconds",15,86400),T=V(r,"issuer",15,""),E=V(r,"privateKey",15,""),h=V(r,"publicKey",15),w=V(r,"refreshExpiresInSeconds",15,604800),C=V(r,"isNew",3,!1),K=V(r,"valid",15,!1),g=ua(),x=u(d(g.get())),m=M(()=>ut(e(x),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,y=st(()=>{g({algorithm:o(),audience:I(),clientId:O(),expiresInSeconds:S(),issuer:T(),privateKey:E(),publicKey:h(),refreshExpiresInSeconds:w(),isNew:C()},Array.from(v)).done(U=>{s(x,d(U)),K(e(x).isValid())}),v.clear()},300);function j(){v.add("algorithm"),v.add("audience"),v.add("clientId"),v.add("expiresInSeconds"),v.add("issuer"),v.add("privateKey"),v.add("publicKey"),v.add("refreshExpiresInSeconds"),y(),y.flush()}function k(U){v.add(U.currentTarget.name),y()}sa(j);var G=va(),R=Ee(G),n=a(R),D=a(n,!0);l(()=>_(D,Kt())),t(n);var N=i(n,2);const A=M(()=>`w-full ${e(m)("algorithm")??""}`);l(()=>W(N,"placeholder",mt())),N.__input=k,lt(N,20,()=>Object.values(Ze),U=>U,(U,he)=>{var ie=ca(),Ke={},Qe=a(ie,!0);t(ie),l(()=>{Ke!==(Ke=he)&&(ie.value=(ie.__value=he)==null?"":he),_(Qe,he)}),B(U,ie)}),t(N);var re=i(N,2);ae(re,{name:"algorithm",get result(){return e(x)}}),t(R);var le=i(R,2),de=a(le),Fe=a(de,!0);l(()=>_(Fe,kt())),t(de);var q=i(de,2);ve(q);const Le=M(()=>`w-full ${e(m)("audience")??""}`);l(()=>W(q,"placeholder",ht())),q.__input=k;var ye=i(q,2);ae(ye,{name:"audience",get result(){return e(x)}}),t(le);var Ie=i(le,2),fe=a(Ie),Ge=a(fe,!0);l(()=>_(Ge,Et())),t(fe);var Y=i(fe,2);ve(Y);const Ce=M(()=>`w-full ${e(m)("clientId")??""}`);l(()=>W(Y,"placeholder",gt())),Y.__input=k;var Ne=i(Y,2);ae(Ne,{name:"clientId",get result(){return e(x)}}),t(Ie);var Se=i(Ie,2),p=a(Se),c=a(p,!0);l(()=>_(c,Tt())),t(p);var b=i(p,2);ve(b);const P=M(()=>`w-full ${e(m)("expiresInSeconds")??""}`);l(()=>W(b,"placeholder",xt())),b.__input=k;var F=i(b,2);ae(F,{name:"expiresInSeconds",get result(){return e(x)}}),t(Se);var Z=i(Se,2),L=a(Z),Re=a(L,!0);l(()=>_(Re,Ct())),t(L);var z=i(L,2);ve(z);const Ue=M(()=>`w-full ${e(m)("issuer")??""}`);l(()=>W(z,"placeholder",yt())),z.__input=k;var we=i(z,2);ae(we,{name:"issuer",get result(){return e(x)}}),t(Z);var pe=i(Z,2);l(()=>pe.hidden=ct.includes(o()));var oe=a(pe),Ve=a(oe,!0);l(()=>_(Ve,Nt())),t(oe);var $=i(oe,2);ve($);const Ae=M(()=>`w-full ${e(m)("publicKey")??""}`);l(()=>W($,"placeholder",It())),$.__input=k;var qe=i($,2);ae(qe,{name:"publicKey",get result(){return e(x)}}),t(pe);var je=i(pe,2),ue=a(je),be=a(ue,!0);l(()=>_(be,At())),t(ue);var ce=i(ue,2),me=M(()=>`w-full ${e(m)("privateKey")??""}`),De=M(()=>St());la(ce,{get class(){return e(me)},name:"privateKey",get placeholder(){return e(De)},oninput:k,get value(){return E()},set value(U){E(U)}});var Pe=i(ce,2);ae(Pe,{name:"privateKey",get result(){return e(x)}}),t(je);var Be=i(je,2),ne=a(Be),ze=a(ne,!0);l(()=>_(ze,jt())),t(ne);var ee=i(ne,2);ve(ee);const Oe=M(()=>`w-full ${e(m)("refreshExpiresInSeconds")??""}`);l(()=>W(ee,"placeholder",wt())),ee.__input=k;var Je=i(ee,2);ae(Je,{name:"refreshExpiresInSeconds",get result(){return e(x)}}),t(Be),l(()=>{se(N,e(A)),se(q,e(Le)),se(Y,e(Ce)),se(b,e(P)),se(z,e(Ue)),se($,e(Ae)),se(ee,e(Oe))}),ia(N,o),_e(q,I),_e(Y,O),_e(b,S),_e(z,T),_e($,h),_e(ee,w),B(f,G),xe()}Me(["input"]);var _a=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),fa=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function pa(f,r){ge(r,!0);let o=u(!1),I=u(!1),O=M(()=>e(o)||!e(I)),S=u(d(Ze.Hs256)),T=u(""),E=u(""),h=u(86400),w=u(""),C=u(""),K=u(""),g=u(604800);async function x(n){n.preventDefault();try{s(o,!0),e(I)&&r.onCreate(await He.createTenant({algorithm:e(S),audience:e(T),clientId:e(E)?e(E):void 0,expiresInSeconds:e(h),issuer:e(w),privateKey:e(C)?e(C):void 0,publicKey:e(K)?e(K):void 0,refreshExpiresInSeconds:e(g)},r.applicationId))}catch(D){await tt(D)}finally{s(o,!1)}}var m=fa(),v=a(m);vt(v,{isNew:!0,get algorithm(){return e(S)},set algorithm(n){s(S,d(n))},get audience(){return e(T)},set audience(n){s(T,d(n))},get clientId(){return e(E)},set clientId(n){s(E,d(n))},get expiresInSeconds(){return e(h)},set expiresInSeconds(n){s(h,d(n))},get issuer(){return e(w)},set issuer(n){s(w,d(n))},get privateKey(){return e(C)},set privateKey(n){s(C,d(n))},get publicKey(){return e(K)},set publicKey(n){s(K,d(n))},get refreshExpiresInSeconds(){return e(g)},set refreshExpiresInSeconds(n){s(g,d(n))},get valid(){return e(I)},set valid(n){s(I,d(n))}});var y=i(v,2),j=a(y),k=a(j);{var G=n=>{var D=_a(),N=a(D),A=a(N);et(A),t(N),t(D),B(n,D)};Te(k,n=>{e(o)&&n(G)})}var R=i(k);l(()=>_(R,` ${Dt()??""}`)),t(j),t(y),t(m),l(()=>j.disabled=e(O)),$e("submit",m,x),B(f,m),xe()}const ba=()=>dt((f={},r)=>{r.length&&(ot(r),J("issuerConfirm",te(),()=>{Q(f.issuerConfirm).isNotBlank()}),J("issuerConfirm",Pt(),()=>{Q(f.issuer===f.issuerConfirm).isTruthy()}))});function ma(f,r,o){r.add(f.currentTarget.name),o()}var ha=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ga=H('<form><p> </p> <div class="mb-2"><input type="text" name="issuerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function xa(f,r){ge(r,!0);let o=u(""),I=ba(),O=u(d(I.get())),S=u(!1),T=M(()=>e(S)),E=M(()=>ut(e(O),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,w=st(()=>{I({issuer:r.issuer,issuerConfirm:e(o)},Array.from(h)).done(A=>{s(O,d(A))}),h.clear()},300);function C(){h.add("name"),w(),w.flush()}async function K(A){A.preventDefault();try{s(S,!0),s(o,d(e(o).trim())),C(),e(O).isValid()&&(await He.deleteTenant(r.tenantId,r.applicationId),r.onDelete())}catch(X){await tt(X)}finally{s(S,!1)}}var g=ga(),x=a(g),m=a(x,!0);l(()=>_(m,Ot())),t(x);var v=i(x,2),y=a(v);ve(y);const j=M(()=>`w-full ${e(E)("issuerConfirm")??""}`);l(()=>W(y,"placeholder",Bt({issuer:r.issuer}))),y.__input=[ma,h,w];var k=i(y,2);ae(k,{name:"issuerConfirm",get result(){return e(O)}}),t(v);var G=i(v,2),R=a(G),n=a(R);{var D=A=>{var X=ha(),re=a(X),le=a(re);et(le),t(re),t(X),B(A,X)};Te(n,A=>{e(S)&&A(D)})}var N=i(n);l(()=>_(N,` ${Mt()??""}`)),t(R),t(G),t(g),l(()=>{se(y,e(j)),R.disabled=e(T)}),$e("submit",g,K),_e(y,()=>e(o),A=>s(o,A)),B(f,g),xe()}Me(["input"]);var ya=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ia=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Sa(f,r){ge(r,!0);let o=u(!1),I=u(!1),O=M(()=>e(o)||!e(I)),S=u(d(r.tenant.algorithm)),T=u(d(r.tenant.audience)),E=u(d(r.tenant.clientId)),h=u(d(r.tenant.expiresInSeconds)),w=u(d(r.tenant.issuer)),C=u(d(r.tenant.privateKey)),K=u(d(r.tenant.publicKey)),g=u(d(r.tenant.refreshExpiresInSeconds));async function x(n){n.preventDefault();try{s(o,!0),e(I)&&r.onEdit(await He.updateTenant(r.tenant.id,{algorithm:e(S),audience:e(T),clientId:e(E)?e(E):void 0,expiresInSeconds:e(h),issuer:e(w),privateKey:e(C)?e(C):void 0,publicKey:e(K)?e(K):void 0,refreshExpiresInSeconds:e(g)},r.applicationId))}catch(D){await tt(D)}finally{s(o,!1)}}var m=Ia(),v=a(m);vt(v,{get algorithm(){return e(S)},set algorithm(n){s(S,d(n))},get audience(){return e(T)},set audience(n){s(T,d(n))},get clientId(){return e(E)},set clientId(n){s(E,d(n))},get expiresInSeconds(){return e(h)},set expiresInSeconds(n){s(h,d(n))},get issuer(){return e(w)},set issuer(n){s(w,d(n))},get privateKey(){return e(C)},set privateKey(n){s(C,d(n))},get publicKey(){return e(K)},set publicKey(n){s(K,d(n))},get refreshExpiresInSeconds(){return e(g)},set refreshExpiresInSeconds(n){s(g,d(n))},get valid(){return e(I)},set valid(n){s(I,d(n))}});var y=i(v,2),j=a(y),k=a(j);{var G=n=>{var D=ya(),N=a(D),A=a(N);et(A),t(N),t(D),B(n,D)};Te(k,n=>{e(o)&&n(G)})}var R=i(k);l(()=>_(R,` ${Ht()??""}`)),t(j),t(y),t(m),l(()=>j.disabled=e(O)),$e("submit",m,x),B(f,m),xe()}const rt=20;var wa=H('<button class="btn secondary icon lg"><!></button>'),Ka=H('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ka=H('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Ea=H("<h3> </h3>"),Ta=H("<h3> </h3>"),Ca=H("<h3> </h3>"),Na=H('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Aa(f,r){ge(r,!0);let o=V(r,"tenants",31,()=>d([])),I=u(0),O=u(!0),S=u(!1),T=u(void 0);_t(()=>{e(T)!==r.applicationId&&(s(T,d(r.applicationId)),s(I,0),s(O,!0),s(S,!1),o([]),E())});async function E(){if(!e(O)||e(S))return;let p;s(S,!0);try{p=await He.allTenants(e(I)*rt,rt,!0,r.applicationId)}finally{s(S,!1)}s(O,d(p.hasMore)),s(I,e(I)+1),o().push(...p.items)}let h=u(!1);function w(){s(h,!0)}function C(p){o().unshift(p),s(h,!1)}let K=u(void 0),g=u(!1);function x(p){return()=>{s(K,d(p)),s(g,!0)}}function m(p){const c=o().findIndex(b=>b.id===(p==null?void 0:p.id));c!==-1&&o(o()[c]=p,!0),s(K,void 0),s(g,!1)}let v=u(void 0),y=u(!1);function j(p){return()=>{s(v,d(p)),s(y,!0)}}function k(){const p=o().findIndex(c=>{var b;return c.id===((b=e(v))==null?void 0:b.id)});p!==-1&&o().splice(p,1),s(v,void 0),s(y,!1)}const G=nt(),[R,n]=G;var D=Na(),N=Ee(D),A=a(N),X=a(A),re=a(X),le=a(re,!0);l(()=>_(le,Gt())),t(re);var de=i(re),Fe=a(de,!0);l(()=>_(Fe,Rt())),t(de);var q=i(de),Le=a(q,!0);l(()=>_(Le,Ut())),t(q);var ye=i(q),Ie=a(ye,!0);l(()=>_(Ie,Vt())),t(ye);var fe=i(ye),Ge=a(fe,!0);l(()=>_(Ge,qt())),t(fe),ft(),t(X),t(A);var Y=i(A);lt(Y,23,o,p=>p.id,(p,c,b)=>{var P=ka(),F=a(P),Z=a(F,!0);t(F);var L=i(F),Re=a(L,!0);t(L);var z=i(L),Ue=a(z,!0);t(z);var we=i(z),pe=a(we,!0);l(()=>_(pe,e(c).updatedAt.toLocaleString())),t(we);var oe=i(we),Ve=a(oe,!0);l(()=>_(Ve,e(c).createdAt.toLocaleString())),t(oe);var $=i(oe),Ae=a($),qe=a(Ae);ea(qe,{position:"top-right",anchorPosition:"bottom-right",button:ue=>{var be=wa(),ce=a(be);ra(ce,{}),t(be),B(ue,be)},children:(ue,be)=>{var ce=Ka(),me=Ee(ce);l(()=>W(me,"href",R(`${it}/applications/${r.applicationId}/tenants/${e(c).id}/oauth2-providers`,void 0)));var De=a(me);da(De,{});var Pe=i(De),Be=a(Pe,!0);l(()=>_(Be,zt())),t(Pe),t(me);var ne=i(me,2),ze=M(()=>x(e(c)));ne.__click=function(...We){var ke;(ke=e(ze))==null||ke.apply(this,We)};var ee=a(ne);ta(ee,{});var Oe=i(ee),Je=a(Oe,!0);l(()=>_(Je,Jt())),t(Oe),t(ne);var U=i(ne,2),he=M(()=>j(e(c)));U.__click=function(...We){var ke;(ke=e(he))==null||ke.apply(this,We)};var ie=a(U);aa(ie,{});var Ke=i(ie),Qe=a(Ke,!0);l(()=>_(Qe,Qt())),t(Ke),t(U),B(ue,ce)},$$slots:{button:!0,default:!0}}),t(Ae),t($),t(P),l(()=>{$t(P,"border-b",e(b)<o().length-1),_(Z,e(c).id),_(Re,e(c).issuer),_(Ue,e(c).clientId)}),B(p,P)}),t(Y),t(N);var Ce=i(N,2);Ye(Ce,{get open(){return e(h)},set open(c){s(h,d(c))},title:c=>{var b=Ea(),P=a(b,!0);l(()=>_(P,Wt())),t(b),B(c,b)},children:(c,b)=>{pa(c,{get applicationId(){return r.applicationId},onCreate:C})},$$slots:{title:!0,default:!0}});var Ne=i(Ce,2);Ye(Ne,{get open(){return e(g)},set open(c){s(g,d(c))},title:c=>{var b=Ta(),P=a(b,!0);l(()=>{var F;return _(P,Ft({issuer:((F=e(K))==null?void 0:F.issuer)||""}))}),t(b),B(c,b)},children:(c,b)=>{var P=at(),F=Ee(P);{var Z=L=>{Sa(L,{get applicationId(){return r.applicationId},get tenant(){return e(K)},onEdit:m})};Te(F,L=>{e(K)&&L(Z)})}B(c,P)},$$slots:{title:!0,default:!0}});var Se=i(Ne,2);return Ye(Se,{get open(){return e(y)},set open(c){s(y,d(c))},title:c=>{var b=Ca(),P=a(b,!0);l(()=>{var F;return _(P,Lt({issuer:((F=e(v))==null?void 0:F.issuer)||""}))}),t(b),B(c,b)},children:(c,b)=>{var P=at(),F=Ee(P);{var Z=L=>{xa(L,{get applicationId(){return r.applicationId},get tenantId(){return e(v).id},get issuer(){return e(v).issuer},onDelete:k})};Te(F,L=>{e(v)&&L(Z)})}B(c,P)},$$slots:{title:!0,default:!0}}),B(f,D),xe({onCreate:w})}Me(["click"]);var ja=H('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Xa(f,r){ge(r,!0);let o=u(void 0);const I=nt(),[O,S]=I;var T=ja();bt(j=>{l(()=>pt.title=Xt())});var E=a(T),h=a(E),w=a(h);l(()=>W(w,"href",O(`${it}/`,void 0)));var C=a(w),K=a(C);oa(K,{}),t(C);var g=i(C,2),x=a(g,!0);l(()=>_(x,Yt())),t(g),t(w);var m=i(w,2);m.__click=function(...j){var k,G;(G=(k=e(o))==null?void 0:k.onCreate)==null||G.apply(this,j)};var v=a(m);na(v,{}),t(m),t(h);var y=i(h,2);Zt(Aa(y,{get applicationId(){return r.data.applicationId}}),j=>s(o,d(j)),()=>e(o)),t(E),t(T),B(f,T),xe()}Me(["click"]);export{Xa as component};
