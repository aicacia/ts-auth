import{a as E,t as V,c as me}from"../chunks/disclose-version.BR6hquoZ.js";import{p as W,d as y,g as e,b as r,t as c,a as X,c as a,r as t,s as i,z as L,f as K,u as ut,ao as _t,$ as ft}from"../chunks/runtime.XTayOKyQ.js";import{d as ae,e as ke,s as _,h as mt}from"../chunks/render.DpS1xNCU.js";import{e as se,r as te,s as Z,av as Ce,aw as Pe,ax as bt,ay as Ke,az as Ze,aA as We,aB as pt,aC as Xe,aD as Ye,H as ht,aE as gt,aF as xt,aG as yt,aH as wt,aI as St,aJ as It,aK as At,aL as kt,aM as Ct,aN as Pt,aO as Tt,aP as Dt,aQ as Et,aR as Nt,aS as jt,b as Mt,aT as Ot}from"../chunks/messages.D-7JLJoP.js";import{p as w}from"../chunks/proxy.BKNo-OHe.js";import{l as Bt,s as Ft,p as ce,b as Lt}from"../chunks/props.CLxh3Ck6.js";import{g as Vt}from"../chunks/index.BCwrhWKg.js";import{b as zt}from"../chunks/paths.Hn01zztd.js";import{i as Y}from"../chunks/runtime.vqD1BrVN.js";import{d as Te,I as oe,b as be,G as De,m as Ee,C as $,v as ee,S as Ne,h as je,s as pe,a as Me,f as Gt,g as Ht,e as Rt,t as qt}from"../chunks/InputResults.I4g3kDNh.js";import{e as he}from"../chunks/index.B-XEKY0d.js";import{I as Jt,s as Kt,M as fe,D as Qt,P as Ut,T as Zt,E as Wt,a as Xt}from"../chunks/trash.DSd6zT0V.js";import{o as $e}from"../chunks/index-client.DhLDVXYR.js";import{P as et}from"../chunks/Password.jVVJCmGL.js";import"../chunks/legacy.AZeTKGhb.js";import{C as Yt}from"../chunks/chevron-left.CLUQG4cV.js";const $t=()=>De((v,n)=>{n.length&&(Ee(n),$("name",se(),()=>{ee(v.name).isNotBlank()}))});function ea(v,n,l){n.add(v.currentTarget.name),l()}var ta=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),aa=V('<form><label for="name"> </label> <input type="text" name="name"> <!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function na(v,n){W(n,!0);let l=y(!1),S=y(!1),C=L(()=>e(l)||!e(S)),b=y(""),p=$t(),f=y(w(p.get())),I=L(()=>Me(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,T=Te(()=>{p({name:e(b)},Array.from(d)).done(m=>{r(f,w(m)),r(S,w(e(f).isValid()))}),d.clear()},300);function F(){d.add("name"),T(),T.flush()}$e(F);async function u(m){m.preventDefault();try{r(l,!0),e(S)&&n.onCreate(await he.createServiceAccount({name:e(b)},n.applicationId))}catch(O){await je(O)}finally{r(l,!1)}}var P=aa(),h=a(P),N=a(h,!0);c(()=>_(N,Pe())),t(h);var o=i(h,2);te(o);const g=L(()=>`w-full ${e(I)("name")??""}`);c(()=>Z(o,"placeholder",Ce())),o.__input=[ea,d,T];var k=i(o,2);oe(k,{name:"name",get result(){return e(f)}});var j=i(k,2),z=a(j),q=a(z);{var J=m=>{var O=ta(),B=a(O),G=a(B);Ne(G),t(B),t(O),E(m,O)};Y(q,m=>{e(l)&&m(J)})}var M=i(q);c(()=>_(M,` ${bt()??""}`)),t(z),t(j),t(P),c(()=>{pe(o,e(g)),z.disabled=e(C)}),ke("submit",P,u),be(o,()=>e(b),m=>r(b,m)),E(v,P),X()}ae(["input"]);function Qe(v,n){const l=Bt(n,["children","$$slots","$$events","$$legacy"]);Jt(v,Ft({name:"copy"},()=>l,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(C,b)=>{var p=me(),f=K(p);Kt(f,n,"default",{}),E(C,p)},$$slots:{default:!0}}))}var ra=V('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function ia(v,n){W(n,!0);let l=y(!1);function S(B){return async()=>{try{r(l,!0),await Gt(B),Ht(pt(),"success")}finally{r(l,!1)}}}var C=ra(),b=K(C),p=a(b),f=a(p,!0);c(()=>_(f,Pe())),t(p);var I=i(p,2);te(I),c(()=>Z(I,"placeholder",Ce())),t(b);var d=i(b,2),T=a(d),F=a(T,!0);c(()=>_(F,Xe())),t(T);var u=i(T,2),P=a(u);te(P),c(()=>Z(P,"placeholder",Ze()));var h=i(P,2),N=L(()=>S(n.serviceAccount.clientId));h.__click=function(...B){var G;(G=e(N))==null||G.apply(this,B)};var o=a(h);Qe(o,{}),t(h),t(u),t(d);var g=i(d,2),k=a(g),j=a(k,!0);c(()=>_(j,Ye())),t(k);var z=i(k,2),q=a(z),J=L(()=>We());et(q,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(J)},get value(){return n.serviceAccount.clientSecret}});var M=i(q,2),m=L(()=>S(n.serviceAccount.clientSecret));M.__click=function(...B){var G;(G=e(m))==null||G.apply(this,B)};var O=a(M);Qe(O,{}),t(M),t(z),t(g),c(()=>{Ke(I,n.serviceAccount.name),Ke(P,n.serviceAccount.clientId),h.disabled=e(l),M.disabled=e(l)}),E(v,C),X()}ae(["click"]);const la=()=>De((v={},n)=>{n.length&&(Ee(n),$("nameConfirm",se(),()=>{ee(v.nameConfirm).isNotBlank()}),$("nameConfirm",ht(),()=>{ee(v.name===v.nameConfirm).isTruthy()}))});function ca(v,n,l){n.add(v.currentTarget.name),l()}var sa=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),oa=V('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function da(v,n){W(n,!0);let l=y(""),S=la(),C=y(w(S.get())),b=y(!1),p=L(()=>e(b)),f=L(()=>Me(e(C),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,d=Te(()=>{S({name:n.name,nameConfirm:e(l)},Array.from(I)).done(m=>{r(C,w(m))}),I.clear()},300);function T(){I.add("name"),d(),d.flush()}async function F(m){m.preventDefault();try{r(b,!0),r(l,w(e(l).trim())),T(),e(C).isValid()&&(await he.deleteServiceAccount(n.serviceAccountId,n.applicationId),n.onDelete())}catch(O){await je(O)}finally{r(b,!1)}}var u=oa(),P=a(u),h=a(P,!0);c(()=>_(h,xt())),t(P);var N=i(P,2),o=a(N);te(o);const g=L(()=>`w-full ${e(f)("nameConfirm")??""}`);c(()=>Z(o,"placeholder",gt({name:n.name}))),o.__input=[ca,I,d];var k=i(o,2);oe(k,{name:"nameConfirm",get result(){return e(C)}}),t(N);var j=i(N,2),z=a(j),q=a(z);{var J=m=>{var O=sa(),B=a(O),G=a(B);Ne(G),t(B),t(O),E(m,O)};Y(q,m=>{e(b)&&m(J)})}var M=i(q);c(()=>_(M,` ${yt()??""}`)),t(z),t(j),t(u),c(()=>{pe(o,e(g)),z.disabled=e(p)}),ke("submit",u,F),be(o,()=>e(l),m=>r(l,m)),E(v,u),X()}ae(["input"]);const va=()=>De((v,n)=>{n.length&&(Ee(n),$("name",se(),()=>{ee(v.name).isNotBlank()}),$("clientId",se(),()=>{ee(v.clientId).isNotBlank()}),$("clientSecret",se(),()=>{ee(v.clientSecret).isNotBlank()}))});var ua=V('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function _a(v,n){W(n,!0);let l=ce(n,"name",15),S=ce(n,"clientId",15),C=ce(n,"clientSecret",15),b=ce(n,"valid",15,!1),p=va(),f=y(w(p.get())),I=L(()=>Me(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,T=Te(()=>{p({name:l(),clientId:S(),clientSecret:C()},Array.from(d)).done(Q=>{r(f,w(Q)),b(e(f).isValid())}),d.clear()},300);function F(){d.add("name"),d.add("clientId"),d.add("clientSecret"),T(),T.flush()}function u(Q){d.add(Q.currentTarget.name),T()}$e(F);var P=ua(),h=K(P),N=a(h),o=a(N,!0);c(()=>_(o,Pe())),t(N);var g=i(N,2);te(g);const k=L(()=>`w-full ${e(I)("name")??""}`);c(()=>Z(g,"placeholder",Ce())),g.__input=u;var j=i(g,2);oe(j,{name:"name",get result(){return e(f)}}),t(h);var z=i(h,2),q=a(z),J=a(q,!0);c(()=>_(J,Xe())),t(q);var M=i(q,2);te(M);const m=L(()=>`w-full ${e(I)("clientId")??""}`);c(()=>Z(M,"placeholder",Ze())),M.__input=u;var O=i(M,2);oe(O,{name:"clientId",get result(){return e(f)}}),t(z);var B=i(z,2),G=a(B),ne=a(G,!0);c(()=>_(ne,Ye())),t(G);var de=i(G,2),re=L(()=>e(I)("clientSecret")),ge=L(()=>We());et(de,{get class(){return e(re)},name:"clientSecret",get placeholder(){return e(ge)},oninput:u,get value(){return C()},set value(Q){C(Q)}});var ie=i(de,2);oe(ie,{name:"clientSecret",get result(){return e(f)}}),t(B),c(()=>{pe(g,e(k)),pe(M,e(m))}),be(g,l),be(M,S),E(v,P),X()}ae(["input"]);var fa=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ma=V('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ba(v,n){W(n,!0);let l=y(!1),S=y(!1),C=L(()=>e(l)||!e(S)),b=y(w(n.serviceAccount.name)),p=y(w(n.serviceAccount.clientId)),f=y(w(n.serviceAccount.clientSecret));async function I(o){o.preventDefault();try{r(l,!0),e(S)&&n.onEdit(await he.updateServiceAccount(n.serviceAccount.id,{name:e(b),clientId:e(p)?e(p):void 0,clientSecret:e(f)?e(f):void 0},n.applicationId))}catch(g){await je(g)}finally{r(l,!1)}}var d=ma(),T=a(d);_a(T,{get name(){return e(b)},set name(o){r(b,w(o))},get clientId(){return e(p)},set clientId(o){r(p,w(o))},get clientSecret(){return e(f)},set clientSecret(o){r(f,w(o))},get valid(){return e(S)},set valid(o){r(S,w(o))}});var F=i(T,2),u=a(F),P=a(u);{var h=o=>{var g=fa(),k=a(g),j=a(k);Ne(j),t(k),t(g),E(o,g)};Y(P,o=>{e(l)&&o(h)})}var N=i(P);c(()=>_(N,` ${wt()??""}`)),t(u),t(F),t(d),c(()=>u.disabled=e(C)),ke("submit",d,I),E(v,d),X()}const Ue=20;var pa=V('<button class="btn secondary icon lg"><!></button>'),ha=V('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ga=V('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),xa=V("<h3> </h3>"),ya=V("<h3> </h3>"),wa=V("<h3> </h3>"),Sa=V("<h3> </h3>"),Ia=V('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Aa(v,n){W(n,!0);let l=ce(n,"serviceAccounts",31,()=>w([])),S=y(0),C=y(!0),b=y(!1),p=y(void 0);ut(()=>{e(p)!==n.applicationId&&(r(p,w(n.applicationId)),r(S,0),r(C,!0),r(b,!1),l([]),f())});async function f(){if(!e(C)||e(b))return;let A;r(b,!0);try{A=await he.allServiceAccounts(e(S)*Ue,Ue,n.applicationId)}finally{r(b,!1)}r(C,w(A.hasMore)),r(S,e(S)+1),l().push(...A.items)}let I=y(!1);function d(){r(I,!0)}function T(A){r(F,!0),r(u,w(A)),r(I,!1)}let F=y(!1),u=y(void 0);function P(){e(u)&&(delete e(u).clientSecret,l().unshift(e(u)),r(u,void 0),r(F,!1))}let h=y(void 0),N=y(!1);function o(A){return()=>{r(h,w(A)),r(N,!0)}}function g(A){const s=l().findIndex(x=>x.id===(A==null?void 0:A.id));s!==-1&&l(l()[s]=A,!0),r(h,void 0),r(N,!1)}let k=y(void 0),j=y(!1);function z(A){return()=>{r(k,w(A)),r(j,!0)}}function q(){const A=l().findIndex(s=>{var x;return s.id===((x=e(k))==null?void 0:x.id)});A!==-1&&l().splice(A,1),r(k,void 0),r(j,!1)}var J=Ia(),M=K(J),m=a(M),O=a(m),B=a(O),G=a(B,!0);c(()=>_(G,At())),t(B);var ne=i(B),de=a(ne,!0);c(()=>_(de,kt())),t(ne);var re=i(ne),ge=a(re,!0);c(()=>_(ge,Ct())),t(re);var ie=i(re),Q=a(ie,!0);c(()=>_(Q,Pt())),t(ie);var Oe=i(ie),tt=a(Oe,!0);c(()=>_(tt,Tt())),t(Oe),_t(),t(O),t(m);var Be=i(m);Rt(Be,23,l,A=>A.id,(A,s,x)=>{var D=ga(),H=a(D),U=a(H,!0);t(H);var R=i(H),nt=a(R,!0);t(R);var xe=i(R),rt=a(xe,!0);t(xe);var ye=i(xe),it=a(ye,!0);c(()=>_(it,e(s).updatedAt.toLocaleString())),t(ye);var we=i(ye),lt=a(we,!0);c(()=>_(lt,e(s).createdAt.toLocaleString())),t(we);var ze=i(we),Ge=a(ze),ct=a(Ge);Qt(ct,{position:"top-right",anchorPosition:"bottom-right",button:Se=>{var ve=pa(),ue=a(ve);Wt(ue,{}),t(ve),E(Se,ve)},children:(Se,ve)=>{var ue=ha(),_e=K(ue),st=L(()=>o(e(s)));_e.__click=function(...Ae){var le;(le=e(st))==null||le.apply(this,Ae)};var He=a(_e);Ut(He,{});var Re=i(He),ot=a(Re,!0);c(()=>_(ot,Dt())),t(Re),t(_e);var Ie=i(_e,2),dt=L(()=>z(e(s)));Ie.__click=function(...Ae){var le;(le=e(dt))==null||le.apply(this,Ae)};var qe=a(Ie);Zt(qe,{});var Je=i(qe),vt=a(Je,!0);c(()=>_(vt,Et())),t(Je),t(Ie),E(Se,ue)},$$slots:{button:!0,default:!0}}),t(Ge),t(ze),t(D),c(()=>{qt(D,"border-b",e(x)<l().length-1),_(U,e(s).id),_(nt,e(s).name),_(rt,e(s).clientId)}),E(A,D)}),t(Be),t(M);var Fe=i(M,2);fe(Fe,{get open(){return e(I)},set open(s){r(I,w(s))},title:s=>{var x=xa(),D=a(x,!0);c(()=>_(D,Nt())),t(x),E(s,x)},children:(s,x)=>{na(s,{get applicationId(){return n.applicationId},onCreate:T})},$$slots:{title:!0,default:!0}});var Le=i(Fe,2);fe(Le,{onClose:P,get open(){return e(F)},set open(s){r(F,w(s))},title:s=>{var x=ya(),D=a(x,!0);c(()=>_(D,jt())),t(x),E(s,x)},children:(s,x)=>{var D=me(),H=K(D);{var U=R=>{ia(R,{get serviceAccount(){return e(u)}})};Y(H,R=>{e(u)&&R(U)})}E(s,D)},$$slots:{title:!0,default:!0}});var Ve=i(Le,2);fe(Ve,{get open(){return e(N)},set open(s){r(N,w(s))},title:s=>{var x=wa(),D=a(x,!0);c(()=>{var H;return _(D,St({name:((H=e(h))==null?void 0:H.name)||""}))}),t(x),E(s,x)},children:(s,x)=>{var D=me(),H=K(D);{var U=R=>{ba(R,{get applicationId(){return n.applicationId},get serviceAccount(){return e(h)},onEdit:g})};Y(H,R=>{e(h)&&R(U)})}E(s,D)},$$slots:{title:!0,default:!0}});var at=i(Ve,2);return fe(at,{get open(){return e(j)},set open(s){r(j,w(s))},title:s=>{var x=Sa(),D=a(x,!0);c(()=>{var H;return _(D,It({name:((H=e(k))==null?void 0:H.name)||""}))}),t(x),E(s,x)},children:(s,x)=>{var D=me(),H=K(D);{var U=R=>{da(R,{get applicationId(){return n.applicationId},get serviceAccountId(){return e(k).id},get name(){return e(k).name},onDelete:q})};Y(H,R=>{e(k)&&R(U)})}E(s,D)},$$slots:{title:!0,default:!0}}),E(v,J),X({onCreate:d})}ae(["click"]);var ka=V('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function qa(v,n){W(n,!0);let l=y(void 0);const S=Vt(),[C,b]=S;var p=ka();mt(g=>{c(()=>ft.title=Mt())});var f=a(p),I=a(f),d=a(I);c(()=>Z(d,"href",C(`${zt}/`,void 0)));var T=a(d),F=a(T);Yt(F,{}),t(T);var u=i(T,2),P=a(u,!0);c(()=>_(P,Ot())),t(u),t(d);var h=i(d,2);h.__click=function(...g){var k,j;(j=(k=e(l))==null?void 0:k.onCreate)==null||j.apply(this,g)};var N=a(h);Xt(N,{}),t(h),t(I);var o=i(I,2);Lt(Aa(o,{get applicationId(){return n.data.applicationId}}),g=>r(l,w(g)),()=>e(l)),t(f),t(p),E(v,p),X()}ae(["click"]);export{qa as component};
