import{a as B,t as H,c as tt}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as me,x as c,y as s,j as e,f as je,t as l,a as he,c as a,r as t,s as i,l as O,aj as _t,$ as ft}from"../chunks/runtime.psM0e5Y8.js";import{d as Fe,s as _,e as Xe,h as pt}from"../chunks/render.Cjq5XT8C.js";import{d as rt,u as nt,e as $,r as ve,s as J,c as se,J as bt,K as mt,L as ht,M as gt,N as xt,O as yt,P as It,Q as St,R as wt,S as Kt,T as kt,U as Et,V as Tt,W as Ct,X as Nt,Y as jt,Z as At,n as Pt,_ as Dt,$ as Bt,a0 as Ot,a1 as Mt,v as Ht,a2 as Lt,a3 as Ft,a4 as Gt,a5 as Rt,a6 as Ut,a7 as Vt,a8 as Yt,a9 as Zt,aa as qt,ab as Jt,ac as Qt,ad as Wt,ae as Xt}from"../chunks/debounce.BaQmhekd.js";import{p as d}from"../chunks/proxy.BhkZ7AL-.js";import{p as V,b as zt}from"../chunks/props.DuEunOx7.js";import{g as it,D as $t}from"../chunks/Dropdown.DEEn-y_3.js";import{b as st}from"../chunks/paths.O-eWMSOt.js";import{i as Ae}from"../chunks/runtime.CsaQGn2V.js";import{o as lt}from"../chunks/index-client.DYF3A4K-.js";import{A as We,t as Ge}from"../chunks/index.BFBrPiR5.js";import{M as Je,P as ea,T as ta,E as aa,a as ra}from"../chunks/Modal.DtHF1rvO.js";import{I as ee,b as _e,G as dt,m as ot,C as Z,v as q,N as Qe,a as ut,S as ze,h as $e}from"../chunks/InputResults.CgtxMCGx.js";import{b as na}from"../chunks/select.Cn-LvQI6.js";import{P as ia}from"../chunks/Password.B7jfsSab.js";import{E as sa}from"../chunks/external-link.CNCMC4XC.js";import{C as la}from"../chunks/chevron-left.BVFJI0c3.js";const ct=["HS256","HS384","HS512"],da=()=>dt((f,n)=>{n.length&&(ot(n),Z("algorithm",$(),()=>{q(f.algorithm).isNotBlank()}),Qe(!f.audience,()=>{Z("audience",$(),()=>{q(f.audience).isNotBlank()})}),Z("expiresInSeconds",$(),()=>{q(f.expiresInSeconds).isNotBlank()}),Z("issuer",$(),()=>{q(f.issuer).isNotBlank()}),Qe(f.isNew,()=>{Z("clientId",$(),()=>{q(f.clientId).isNotBlank()}),Z("privateKey",$(),()=>{q(f.privateKey).isNotBlank()})}),Qe(ct.includes(f.algorithm),()=>{Z("publicKey",$(),()=>{q(f.publicKey).isNotBlank()})}),Z("refreshExpiresInSeconds",$(),()=>{q(f.refreshExpiresInSeconds).isNotBlank()}))});var oa=H("<option> </option>"),ua=H('<div class="mb-2"><label for="algorithm"> </label> <select name="algorithm"></select> <!></div> <div class="mb-2"><label for="audience"> </label> <input type="text" name="audience"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="expiresInSeconds"> </label> <input type="number" min="0" name="expiresInSeconds"> <!></div> <div class="mb-2"><label for="issuer"> </label> <input type="text" name="issuer"> <!></div> <div class="mb-2"><label for="publicKey"> </label> <input type="text" name="publicKey"> <!></div> <div class="mb-2"><label for="privateKey"> </label> <!> <!></div> <div class="mb-2"><label for="refreshExpiresInSeconds"> </label> <input type="number" min="0" name="refreshExpiresInSeconds"> <!></div>',1);function vt(f,n){me(n,!0);let o=V(n,"algorithm",31,()=>d(We.Hs256)),I=V(n,"audience",15),M=V(n,"clientId",15),k=V(n,"expiresInSeconds",15,86400),A=V(n,"issuer",15,""),m=V(n,"privateKey",15,""),S=V(n,"publicKey",15),w=V(n,"refreshExpiresInSeconds",15,604800),h=V(n,"isNew",3,!1),E=V(n,"valid",15,!1),T=da(),g=c(d(T.get())),v=O(()=>ut(e(g),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,C=rt(()=>{T({algorithm:o(),audience:I(),clientId:M(),expiresInSeconds:k(),issuer:A(),privateKey:m(),publicKey:S(),refreshExpiresInSeconds:w(),isNew:h()},Array.from(p)).done(U=>{s(g,d(U)),E(e(g).isValid())}),p.clear()},300);function P(){p.add("algorithm"),p.add("audience"),p.add("clientId"),p.add("expiresInSeconds"),p.add("issuer"),p.add("privateKey"),p.add("publicKey"),p.add("refreshExpiresInSeconds"),C(),C.flush()}function K(U){p.add(U.currentTarget.name),C()}lt(P);var G=ua(),R=je(G),r=a(R),N=a(r,!0);l(()=>_(N,wt())),t(r);var j=i(r,2);const D=O(()=>`w-full ${e(v)("algorithm")??""}`);l(()=>J(j,"placeholder",bt())),j.__input=K,nt(j,20,()=>Object.values(We),U=>U,(U,ce)=>{var ie=oa(),Le={},Ce=a(ie,!0);t(ie),l(()=>{Le!==(Le=ce)&&(ie.value=(ie.__value=ce)==null?"":ce),_(Ce,ce)}),B(U,ie)}),t(j);var fe=i(j,2);ee(fe,{name:"algorithm",get result(){return e(g)}}),t(R);var Q=i(R,2),ge=a(Q),xe=a(ge,!0);l(()=>_(xe,Kt())),t(ge);var te=i(ge,2);ve(te);const ye=O(()=>`w-full ${e(v)("audience")??""}`);l(()=>J(te,"placeholder",mt())),te.__input=K;var Re=i(te,2);ee(Re,{name:"audience",get result(){return e(g)}}),t(Q);var pe=i(Q,2),Ie=a(pe),Pe=a(Ie,!0);l(()=>_(Pe,kt())),t(Ie);var W=i(Ie,2);ve(W);const De=O(()=>`w-full ${e(v)("clientId")??""}`);l(()=>J(W,"placeholder",ht())),W.__input=K;var Ue=i(W,2);ee(Ue,{name:"clientId",get result(){return e(g)}}),t(pe);var b=i(pe,2),u=a(b),x=a(u,!0);l(()=>_(x,Et())),t(u);var y=i(u,2);ve(y);const L=O(()=>`w-full ${e(v)("expiresInSeconds")??""}`);l(()=>J(y,"placeholder",gt())),y.__input=K;var le=i(y,2);ee(le,{name:"expiresInSeconds",get result(){return e(g)}}),t(b);var F=i(b,2),Se=a(F),we=a(Se,!0);l(()=>_(we,Tt())),t(Se);var ae=i(Se,2);ve(ae);const Ke=O(()=>`w-full ${e(v)("issuer")??""}`);l(()=>J(ae,"placeholder",xt())),ae.__input=K;var Ve=i(ae,2);ee(Ve,{name:"issuer",get result(){return e(g)}}),t(F);var re=i(F,2);l(()=>re.hidden=ct.includes(o()));var ke=a(re),Be=a(ke,!0);l(()=>_(Be,Ct())),t(ke);var X=i(ke,2);ve(X);const Ye=O(()=>`w-full ${e(v)("publicKey")??""}`);l(()=>J(X,"placeholder",yt())),X.__input=K;var et=i(X,2);ee(et,{name:"publicKey",get result(){return e(g)}}),t(re);var de=i(re,2),ne=a(de),be=a(ne,!0);l(()=>_(be,Nt())),t(ne);var oe=i(ne,2),Oe=O(()=>`w-full ${e(v)("privateKey")??""}`),Me=O(()=>It());ia(oe,{get class(){return e(Oe)},name:"privateKey",get placeholder(){return e(Me)},oninput:K,get value(){return m()},set value(U){m(U)}});var Ze=i(oe,2);ee(Ze,{name:"privateKey",get result(){return e(g)}}),t(de);var ue=i(de,2),Ee=a(ue),He=a(Ee,!0);l(()=>_(He,jt())),t(Ee);var z=i(Ee,2);ve(z);const qe=O(()=>`w-full ${e(v)("refreshExpiresInSeconds")??""}`);l(()=>J(z,"placeholder",St())),z.__input=K;var Te=i(z,2);ee(Te,{name:"refreshExpiresInSeconds",get result(){return e(g)}}),t(ue),l(()=>{se(j,e(D)),se(te,e(ye)),se(W,e(De)),se(y,e(L)),se(ae,e(Ke)),se(X,e(Ye)),se(z,e(qe))}),na(j,o),_e(te,I),_e(W,M),_e(y,k),_e(ae,A),_e(X,S),_e(z,w),B(f,G),he()}Fe(["input"]);var ca=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),va=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function _a(f,n){me(n,!0);let o=c(!1),I=c(!1),M=O(()=>e(o)||!e(I)),k=c(d(We.Hs256)),A=c(""),m=c(""),S=c(86400),w=c(""),h=c(""),E=c(""),T=c(604800);async function g(r){r.preventDefault();try{s(o,!0),e(I)&&n.onCreate(await Ge.createTenant({algorithm:e(k),audience:e(A),clientId:e(m)?e(m):void 0,expiresInSeconds:e(S),issuer:e(w),privateKey:e(h)?e(h):void 0,publicKey:e(E)?e(E):void 0,refreshExpiresInSeconds:e(T)},n.applicationId))}catch(N){await $e(N)}finally{s(o,!1)}}var v=va(),p=a(v);vt(p,{isNew:!0,get algorithm(){return e(k)},set algorithm(r){s(k,d(r))},get audience(){return e(A)},set audience(r){s(A,d(r))},get clientId(){return e(m)},set clientId(r){s(m,d(r))},get expiresInSeconds(){return e(S)},set expiresInSeconds(r){s(S,d(r))},get issuer(){return e(w)},set issuer(r){s(w,d(r))},get privateKey(){return e(h)},set privateKey(r){s(h,d(r))},get publicKey(){return e(E)},set publicKey(r){s(E,d(r))},get refreshExpiresInSeconds(){return e(T)},set refreshExpiresInSeconds(r){s(T,d(r))},get valid(){return e(I)},set valid(r){s(I,d(r))}});var C=i(p,2),P=a(C),K=a(P);{var G=r=>{var N=ca(),j=a(N),D=a(j);ze(D),t(j),t(N),B(r,N)};Ae(K,r=>{e(o)&&r(G)})}var R=i(K);l(()=>_(R,` ${At()??""}`)),t(P),t(C),t(v),l(()=>P.disabled=e(M)),Xe("submit",v,g),B(f,v),he()}const fa=()=>dt((f={},n)=>{n.length&&(ot(n),Z("issuerConfirm",$(),()=>{q(f.issuerConfirm).isNotBlank()}),Z("issuerConfirm",Pt(),()=>{q(f.issuer===f.issuerConfirm).isTruthy()}))});function pa(f,n,o){n.add(f.currentTarget.name),o()}var ba=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ma=H('<form><p> </p> <div class="mb-2"><input type="text" name="issuerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ha(f,n){me(n,!0);let o=c(""),I=fa(),M=c(d(I.get())),k=c(!1),A=O(()=>e(k)),m=O(()=>ut(e(M),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const S=new Set,w=rt(()=>{I({issuer:n.issuer,issuerConfirm:e(o)},Array.from(S)).done(D=>{s(M,d(D))}),S.clear()},300);function h(){S.add("name"),w(),w.flush()}async function E(D){D.preventDefault();try{s(k,!0),s(o,d(e(o).trim())),h(),e(M).isValid()&&(await Ge.deleteTenant(n.tenantId,n.applicationId),n.onDelete())}catch(Y){await $e(Y)}finally{s(k,!1)}}var T=ma(),g=a(T),v=a(g,!0);l(()=>_(v,Bt())),t(g);var p=i(g,2),C=a(p);ve(C);const P=O(()=>`w-full ${e(m)("issuerConfirm")??""}`);l(()=>J(C,"placeholder",Dt({issuer:n.issuer}))),C.__input=[pa,S,w];var K=i(C,2);ee(K,{name:"issuerConfirm",get result(){return e(M)}}),t(p);var G=i(p,2),R=a(G),r=a(R);{var N=D=>{var Y=ba(),fe=a(Y),Q=a(fe);ze(Q),t(fe),t(Y),B(D,Y)};Ae(r,D=>{e(k)&&D(N)})}var j=i(r);l(()=>_(j,` ${Ot()??""}`)),t(R),t(G),t(T),l(()=>{se(C,e(P)),R.disabled=e(A)}),Xe("submit",T,E),_e(C,()=>e(o),D=>s(o,D)),B(f,T),he()}Fe(["input"]);var ga=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),xa=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ya(f,n){me(n,!0);let o=c(!1),I=c(!1),M=O(()=>e(o)||!e(I)),k=c(d(n.tenant.algorithm)),A=c(d(n.tenant.audience)),m=c(d(n.tenant.clientId)),S=c(d(n.tenant.expiresInSeconds)),w=c(d(n.tenant.issuer)),h=c(d(n.tenant.privateKey)),E=c(d(n.tenant.publicKey)),T=c(d(n.tenant.refreshExpiresInSeconds));async function g(r){r.preventDefault();try{s(o,!0),e(I)&&n.onEdit(await Ge.updateTenant(n.tenant.id,{algorithm:e(k),audience:e(A),clientId:e(m)?e(m):void 0,expiresInSeconds:e(S),issuer:e(w),privateKey:e(h)?e(h):void 0,publicKey:e(E)?e(E):void 0,refreshExpiresInSeconds:e(T)},n.applicationId))}catch(N){await $e(N)}finally{s(o,!1)}}var v=xa(),p=a(v);vt(p,{get algorithm(){return e(k)},set algorithm(r){s(k,d(r))},get audience(){return e(A)},set audience(r){s(A,d(r))},get clientId(){return e(m)},set clientId(r){s(m,d(r))},get expiresInSeconds(){return e(S)},set expiresInSeconds(r){s(S,d(r))},get issuer(){return e(w)},set issuer(r){s(w,d(r))},get privateKey(){return e(h)},set privateKey(r){s(h,d(r))},get publicKey(){return e(E)},set publicKey(r){s(E,d(r))},get refreshExpiresInSeconds(){return e(T)},set refreshExpiresInSeconds(r){s(T,d(r))},get valid(){return e(I)},set valid(r){s(I,d(r))}});var C=i(p,2),P=a(C),K=a(P);{var G=r=>{var N=ga(),j=a(N),D=a(j);ze(D),t(j),t(N),B(r,N)};Ae(K,r=>{e(o)&&r(G)})}var R=i(K);l(()=>_(R,` ${Mt()??""}`)),t(P),t(C),t(v),l(()=>P.disabled=e(M)),Xe("submit",v,g),B(f,v),he()}const at=20;var Ia=H('<button class="btn secondary icon lg"><!></button>'),Sa=H('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),wa=H('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Ka=H("<h3> </h3>"),ka=H("<h3> </h3>"),Ea=H("<h3> </h3>"),Ta=H('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Ca(f,n){me(n,!0);let o=V(n,"tenants",31,()=>d([])),I=c(0),M=c(!0),k=c(!1);lt(A);async function A(){if(!e(M)||e(k))return;let b;s(k,!0);try{b=await Ge.allTenants(e(I)*at,at,!0,n.applicationId)}finally{s(k,!1)}s(M,d(b.hasMore)),s(I,e(I)+1),o().push(...b.items)}let m=c(!1);function S(){s(m,!0)}function w(b){o().unshift(b),s(m,!1)}let h=c(void 0),E=c(!1);function T(b){return()=>{s(h,d(b)),s(E,!0)}}function g(b){const u=o().findIndex(x=>x.id===(b==null?void 0:b.id));u!==-1&&o(o()[u]=b,!0),s(h,void 0),s(E,!1)}let v=c(void 0),p=c(!1);function C(b){return()=>{s(v,d(b)),s(p,!0)}}function P(){const b=o().findIndex(u=>{var x;return u.id===((x=e(v))==null?void 0:x.id)});b!==-1&&o().splice(b,1),s(v,void 0),s(p,!1)}const K=it(),[G,R]=K;var r=Ta(),N=je(r),j=a(N),D=a(j),Y=a(D),fe=a(Y,!0);l(()=>_(fe,Gt())),t(Y);var Q=i(Y),ge=a(Q,!0);l(()=>_(ge,Rt())),t(Q);var xe=i(Q),te=a(xe,!0);l(()=>_(te,Ut())),t(xe);var ye=i(xe),Re=a(ye,!0);l(()=>_(Re,Vt())),t(ye);var pe=i(ye),Ie=a(pe,!0);l(()=>_(Ie,Yt())),t(pe),_t(),t(D),t(j);var Pe=i(j);nt(Pe,23,o,b=>b.id,(b,u,x)=>{var y=wa(),L=a(y),le=a(L,!0);t(L);var F=i(L),Se=a(F,!0);t(F);var we=i(F),ae=a(we,!0);t(we);var Ke=i(we),Ve=a(Ke,!0);l(()=>_(Ve,e(u).updatedAt.toLocaleString())),t(Ke);var re=i(Ke),ke=a(re,!0);l(()=>_(ke,e(u).createdAt.toLocaleString())),t(re);var Be=i(re),X=a(Be),Ye=a(X);$t(Ye,{position:"top-right",anchorPosition:"bottom-right",button:de=>{var ne=Ia(),be=a(ne);aa(be,{}),t(ne),B(de,ne)},children:(de,ne)=>{var be=Sa(),oe=je(be);l(()=>J(oe,"href",G(`${st}/applications/${n.applicationId}/tenants/${e(u).id}/oauth2-providers`,void 0)));var Oe=a(oe);sa(Oe,{});var Me=i(Oe),Ze=a(Me,!0);l(()=>_(Ze,Zt())),t(Me),t(oe);var ue=i(oe,2),Ee=O(()=>T(e(u)));ue.__click=function(...Ce){var Ne;(Ne=e(Ee))==null||Ne.apply(this,Ce)};var He=a(ue);ea(He,{});var z=i(He),qe=a(z,!0);l(()=>_(qe,qt())),t(z),t(ue);var Te=i(ue,2),U=O(()=>C(e(u)));Te.__click=function(...Ce){var Ne;(Ne=e(U))==null||Ne.apply(this,Ce)};var ce=a(Te);ta(ce,{});var ie=i(ce),Le=a(ie,!0);l(()=>_(Le,Jt())),t(ie),t(Te),B(de,be)},$$slots:{button:!0,default:!0}}),t(X),t(Be),t(y),l(()=>{Ht(y,"border-b",e(x)<o().length-1),_(le,e(u).id),_(Se,e(u).issuer),_(ae,e(u).clientId)}),B(b,y)}),t(Pe),t(N);var W=i(N,2);Je(W,{get open(){return e(m)},set open(u){s(m,d(u))},title:u=>{var x=Ka(),y=a(x,!0);l(()=>_(y,Qt())),t(x),B(u,x)},children:(u,x)=>{_a(u,{get applicationId(){return n.applicationId},onCreate:w})},$$slots:{title:!0,default:!0}});var De=i(W,2);Je(De,{get open(){return e(E)},set open(u){s(E,d(u))},title:u=>{var x=ka(),y=a(x,!0);l(()=>{var L;return _(y,Lt({issuer:((L=e(h))==null?void 0:L.issuer)||""}))}),t(x),B(u,x)},children:(u,x)=>{var y=tt(),L=je(y);{var le=F=>{ya(F,{get applicationId(){return n.applicationId},get tenant(){return e(h)},onEdit:g})};Ae(L,F=>{e(h)&&F(le)})}B(u,y)},$$slots:{title:!0,default:!0}});var Ue=i(De,2);return Je(Ue,{get open(){return e(p)},set open(u){s(p,d(u))},title:u=>{var x=Ea(),y=a(x,!0);l(()=>{var L;return _(y,Ft({issuer:((L=e(v))==null?void 0:L.issuer)||""}))}),t(x),B(u,x)},children:(u,x)=>{var y=tt(),L=je(y);{var le=F=>{ha(F,{get applicationId(){return n.applicationId},get tenantId(){return e(v).id},get issuer(){return e(v).issuer},onDelete:P})};Ae(L,F=>{e(v)&&F(le)})}B(u,y)},$$slots:{title:!0,default:!0}}),B(f,r),he({onCreate:S})}Fe(["click"]);var Na=H('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ja(f,n){me(n,!0);let o=c(void 0);const I=it(),[M,k]=I;var A=Na();pt(P=>{l(()=>ft.title=Wt())});var m=a(A),S=a(m),w=a(S);l(()=>J(w,"href",M(`${st}/`,void 0)));var h=a(w),E=a(h);la(E,{}),t(h);var T=i(h,2),g=a(T,!0);l(()=>_(g,Xt())),t(T),t(w);var v=i(w,2);v.__click=function(...P){var K,G;(G=(K=e(o))==null?void 0:K.onCreate)==null||G.apply(this,P)};var p=a(v);ra(p,{}),t(v),t(S);var C=i(S,2);zt(Ca(C,{get applicationId(){return n.data.applicationId}}),P=>s(o,d(P)),()=>e(o)),t(m),t(A),B(f,A),he()}Fe(["click"]);export{Ja as component};
