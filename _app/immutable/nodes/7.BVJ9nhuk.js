import{f as V,a as N,c as xe}from"../chunks/BAGX8FWs.js";import{p as Z,b as g,A as X,s as i,c as a,t as G,g as e,B as U,a as $,h as n,r as t,f as K,u as ft,a5 as mt,$ as bt}from"../chunks/9Y3Zi9LS.js";import{d as ie,i as te,s as b,e as Te,h as pt}from"../chunks/CdK4JjYi.js";import{d as _e,b as Y,r as ne,g as Qe,s as ht}from"../chunks/DBRB63xn.js";import{l as gt,s as xt,p as de,b as yt}from"../chunks/ClwBco7U.js";import"../chunks/DkEC4_bh.js";import{b as wt}from"../chunks/Bluxw1Nt.js";import{G as je,d as Ee,I as ue,aA as Ne,aB as Me,aC as St,b as ye,m as Be,C as ae,g as ve,v as re,i as Oe,j as Ve,S as Le,aD as Ye,aE as Ze,aF as $e,aG as et,aH as It,aI as At,aJ as Ct,aK as kt,aL as Pt,aM as Dt,P as Tt,aN as jt,o as Et,aO as Nt,aP as Mt,aQ as Bt,aR as Ot,aS as Vt,aT as Lt,aU as Ft,aV as Gt,aW as Rt,aX as Ut,aY as qt}from"../chunks/CbLLult4.js";import{h as we}from"../chunks/Dyl6cX5U.js";import{I as zt,s as Ht,M as ge,D as Jt,P as Kt,T as Qt,E as Wt,a as Xt}from"../chunks/D7DzHFmv.js";import{o as tt}from"../chunks/pO33VYKk.js";import{P as at}from"../chunks/CgwKfw83.js";import"../chunks/BIB2KXTs.js";import{C as Yt}from"../chunks/B40CaONp.js";const Zt=()=>je((s,r)=>{r.length&&(Be(r),ae("name",ve(),()=>{re(s.name).isNotBlank()}))});function $t(s,r,l){r.add(s.currentTarget.name),l()}var ea=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ta=V('<form><div class="mb-2"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function aa(s,r){Z(r,!0);let l=g(!1),_=g(!1),S=U(()=>e(l)||!e(_)),d=g(""),p=Zt(),u=g(X(p.get())),I=U(()=>Oe(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,T=Ee(()=>{p({name:e(d)},Array.from(f)).done(m=>{n(u,m,!0),n(_,e(u).isValid(),!0)}),f.clear()},300);function O(){f.add("name"),T(),T.flush()}tt(O);async function v(m){m.preventDefault();try{n(l,!0),e(_)&&r.onCreate(await we.createServiceAccount({name:e(d)},r.applicationId))}catch(E){await Ve(E)}finally{n(l,!1)}}var k=ta(),A=a(k),x=a(A),o=a(x,!0);t(x);var h=i(x,2);ne(h),h.__input=[$t,f,T];var j=i(h,2);ue(j,{name:"name",get result(){return e(u)}}),t(A);var M=i(A,2),L=a(M),q=a(L);{var F=m=>{var E=ea(),D=a(E),z=a(D);Le(z),t(D),t(E),N(m,E)};te(q,m=>{e(l)&&m(F)})}var C=i(q);t(L),t(M),t(k),G((m,E,D,z)=>{b(o,m),_e(h,1,`w-full ${E??""}`),Y(h,"placeholder",D),L.disabled=e(S),b(C,` ${z??""}`)},[()=>Ne(),()=>e(I)("name"),()=>Me(),()=>St()]),Te("submit",k,v),ye(h,()=>e(d),m=>n(d,m)),N(s,k),$()}ie(["input"]);function We(s,r){const l=gt(r,["children","$$slots","$$events","$$legacy"]),_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];zt(s,xt({name:"copy"},()=>l,{get iconNode(){return _},children:(S,d)=>{var p=xe(),u=K(p);Ht(u,r,"default",{}),N(S,p)},$$slots:{default:!0}}))}var ra=V('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""/></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""/> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function na(s,r){Z(r,!0);let l=g(!1);function _(D){return async()=>{try{n(l,!0),await It(D),At(Ct(),"success")}finally{n(l,!1)}}}var S=ra(),d=K(S),p=a(d),u=a(p,!0);t(p);var I=i(p,2);ne(I),t(d);var f=i(d,2),T=a(f),O=a(T,!0);t(T);var v=i(T,2),k=a(v);ne(k);var A=i(k,2),x=U(()=>_(r.serviceAccount.clientId));A.__click=function(...D){e(x)?.apply(this,D)};var o=a(A);We(o,{}),t(A),t(v),t(f);var h=i(f,2),j=a(h),M=a(j,!0);t(j);var L=i(j,2),q=a(L);const F=U(()=>et());at(q,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(F)},get value(){return r.serviceAccount.clientSecret}});var C=i(q,2),m=U(()=>_(r.serviceAccount.clientSecret));C.__click=function(...D){e(m)?.apply(this,D)};var E=a(C);We(E,{}),t(C),t(L),t(h),G((D,z,Q,le,W)=>{b(u,D),Y(I,"placeholder",z),Qe(I,r.serviceAccount.name),b(O,Q),Y(k,"placeholder",le),Qe(k,r.serviceAccount.clientId),A.disabled=e(l),b(M,W),C.disabled=e(l)},[()=>Ne(),()=>Me(),()=>Ye(),()=>Ze(),()=>$e()]),N(s,S),$()}ie(["click"]);const ia=()=>je((s={},r)=>{r.length&&(Be(r),ae("nameConfirm",ve(),()=>{re(s.nameConfirm).isNotBlank()}),ae("nameConfirm",Tt(),()=>{re(s.name===s.nameConfirm).isTruthy()}))});function la(s,r,l){r.add(s.currentTarget.name),l()}var ca=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),oa=V('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function sa(s,r){Z(r,!0);let l=g(""),_=ia(),S=g(X(_.get())),d=g(!1),p=U(()=>e(d)),u=U(()=>Oe(e(S),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,f=Ee(()=>{_({name:r.name,nameConfirm:e(l)},Array.from(I)).done(C=>{n(S,C,!0)}),I.clear()},300);function T(){I.add("name"),f(),f.flush()}async function O(C){C.preventDefault();try{n(d,!0),n(l,e(l).trim(),!0),T(),e(S).isValid()&&(await we.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(m){await Ve(m)}finally{n(d,!1)}}var v=oa(),k=a(v),A=a(k,!0);t(k);var x=i(k,2),o=a(x);ne(o),o.__input=[la,I,f];var h=i(o,2);ue(h,{name:"nameConfirm",get result(){return e(S)}}),t(x);var j=i(x,2),M=a(j),L=a(M);{var q=C=>{var m=ca(),E=a(m),D=a(E);Le(D),t(E),t(m),N(C,m)};te(L,C=>{e(d)&&C(q)})}var F=i(L);t(M),t(j),t(v),G((C,m,E,D)=>{b(A,C),_e(o,1,`w-full ${m??""}`),Y(o,"placeholder",E),M.disabled=e(p),b(F,` ${D??""}`)},[()=>kt(),()=>e(u)("nameConfirm"),()=>Pt({name:r.name}),()=>Dt()]),Te("submit",v,O),ye(o,()=>e(l),C=>n(l,C)),N(s,v),$()}ie(["input"]);const da=()=>je((s,r)=>{r.length&&(Be(r),ae("name",ve(),()=>{re(s.name).isNotBlank()}),ae("clientId",ve(),()=>{re(s.clientId).isNotBlank()}),ae("clientSecret",ve(),()=>{re(s.clientSecret).isNotBlank()}))});var ua=V('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"/> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function va(s,r){Z(r,!0);let l=de(r,"name",15),_=de(r,"clientId",15),S=de(r,"clientSecret",15),d=de(r,"valid",15,!1),p=da(),u=g(X(p.get())),I=U(()=>Oe(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,T=Ee(()=>{p({name:l(),clientId:_(),clientSecret:S()},Array.from(f)).done(H=>{n(u,H,!0),d(e(u).isValid())}),f.clear()},300);function O(){f.add("name"),f.add("clientId"),f.add("clientSecret"),T(),T.flush()}function v(H){f.add(H.currentTarget.name),T()}tt(O);var k=ua(),A=K(k),x=a(A),o=a(x,!0);t(x);var h=i(x,2);ne(h),h.__input=v;var j=i(h,2);ue(j,{name:"name",get result(){return e(u)}}),t(A);var M=i(A,2),L=a(M),q=a(L,!0);t(L);var F=i(L,2);ne(F),F.__input=v;var C=i(F,2);ue(C,{name:"clientId",get result(){return e(u)}}),t(M);var m=i(M,2),E=a(m),D=a(E,!0);t(E);var z=i(E,2);const Q=U(()=>e(I)("clientSecret")),le=U(()=>et());at(z,{get class(){return e(Q)},name:"clientSecret",get placeholder(){return e(le)},oninput:v,get value(){return S()},set value(H){S(H)}});var W=i(z,2);ue(W,{name:"clientSecret",get result(){return e(u)}}),t(m),G((H,ce,Se,fe,Ie,me,be)=>{b(o,H),_e(h,1,`w-full ${ce??""}`),Y(h,"placeholder",Se),b(q,fe),_e(F,1,`w-full ${Ie??""}`),Y(F,"placeholder",me),b(D,be)},[()=>Ne(),()=>e(I)("name"),()=>Me(),()=>Ye(),()=>e(I)("clientId"),()=>Ze(),()=>$e()]),ye(h,l),ye(F,_),N(s,k),$()}ie(["input"]);var _a=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),fa=V('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ma(s,r){Z(r,!0);let l=g(!1),_=g(!1),S=U(()=>e(l)||!e(_)),d=g(X(r.serviceAccount.name)),p=g(X(r.serviceAccount.clientId)),u=g(X(r.serviceAccount.clientSecret));async function I(o){o.preventDefault();try{n(l,!0),e(_)&&r.onEdit(await we.updateServiceAccount(r.serviceAccount.id,{name:e(d),clientId:e(p)?e(p):void 0,clientSecret:e(u)?e(u):void 0},r.applicationId))}catch(h){await Ve(h)}finally{n(l,!1)}}var f=fa(),T=a(f);va(T,{get name(){return e(d)},set name(o){n(d,o,!0)},get clientId(){return e(p)},set clientId(o){n(p,o,!0)},get clientSecret(){return e(u)},set clientSecret(o){n(u,o,!0)},get valid(){return e(_)},set valid(o){n(_,o,!0)}});var O=i(T,2),v=a(O),k=a(v);{var A=o=>{var h=_a(),j=a(h),M=a(j);Le(M),t(j),t(h),N(o,h)};te(k,o=>{e(l)&&o(A)})}var x=i(k);t(v),t(O),t(f),G(o=>{v.disabled=e(S),b(x,` ${o??""}`)},[()=>jt()]),Te("submit",f,I),N(s,f),$()}const Xe=20;var ba=V('<button class="btn secondary icon lg"><!></button>'),pa=V('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ha=V('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ga=V("<h3> </h3>"),xa=V("<h3> </h3>"),ya=V("<h3> </h3>"),wa=V("<h3> </h3>"),Sa=V('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Ia(s,r){Z(r,!0);let l=de(r,"serviceAccounts",31,()=>X([])),_=g(0),S=g(!0),d=g(!1),p=g(void 0);ft(()=>{e(p)!==r.applicationId&&(n(p,r.applicationId,!0),n(_,0),n(S,!0),n(d,!1),l([]),u())});async function u(){if(!e(S)||e(d))return;let y;n(d,!0);try{y=await we.allServiceAccounts(e(_)*Xe,Xe,r.applicationId)}finally{n(d,!1)}n(S,y.hasMore,!0),n(_,e(_)+1),l().push(...y.items)}let I=g(!1);function f(){n(I,!0)}function T(y){n(O,!0),n(v,y,!0),n(I,!1)}let O=g(!1),v=g(void 0);function k(){e(v)&&(delete e(v).clientSecret,l().unshift(e(v)),n(v,void 0),n(O,!1))}let A=g(void 0),x=g(!1);function o(y){return()=>{n(A,y,!0),n(x,!0)}}function h(y){const c=l().findIndex(w=>w.id===y?.id);c!==-1&&l(l()[c]=y,!0),n(A,void 0),n(x,!1)}let j=g(void 0),M=g(!1);function L(y){return()=>{n(j,y,!0),n(M,!0)}}function q(){const y=l().findIndex(c=>c.id===e(j)?.id);y!==-1&&l().splice(y,1),n(j,void 0),n(M,!1)}var F=Sa(),C=K(F),m=a(C),E=a(m),D=a(E),z=a(D,!0);t(D);var Q=i(D),le=a(Q,!0);t(Q);var W=i(Q),H=a(W,!0);t(W);var ce=i(W),Se=a(ce,!0);t(ce);var fe=i(ce),Ie=a(fe,!0);t(fe),mt(),t(E),t(m);var me=i(m);Et(me,23,l,y=>y.id,(y,c,w)=>{var P=ha();let B;var J=a(P),R=a(J,!0);t(J);var Ae=i(J),nt=a(Ae,!0);t(Ae);var Ce=i(Ae),it=a(Ce,!0);t(Ce);var ke=i(Ce),lt=a(ke,!0);t(ke);var Pe=i(ke),ct=a(Pe,!0);t(Pe);var Re=i(Pe),Ue=a(Re),ot=a(Ue);Jt(ot,{position:"top-right",anchorPosition:"bottom-right",button:oe=>{var ee=ba(),pe=a(ee);Wt(pe,{}),t(ee),N(oe,ee)},children:(oe,ee)=>{var pe=pa(),he=K(pe),st=U(()=>o(e(c)));he.__click=function(...se){e(st)?.apply(this,se)};var ze=a(he);Kt(ze,{});var He=i(ze),dt=a(He,!0);t(He),t(he);var De=i(he,2),ut=U(()=>L(e(c)));De.__click=function(...se){e(ut)?.apply(this,se)};var Je=a(De);Qt(Je,{});var Ke=i(Je),vt=a(Ke,!0);t(Ke),t(De),G((se,_t)=>{b(dt,se),b(vt,_t)},[()=>Ut(),()=>qt()]),N(oe,pe)},$$slots:{button:!0,default:!0}}),t(Ue),t(Re),t(P),G((qe,oe,ee)=>{B=_e(P,1,"group",null,B,qe),b(R,e(c).id),b(nt,e(c).name),b(it,e(c).clientId),b(lt,oe),b(ct,ee)},[()=>({"border-b":e(w)<l().length-1}),()=>e(c).updatedAt.toLocaleString(),()=>e(c).createdAt.toLocaleString()]),N(y,P)}),t(me),t(C);var be=i(C,2);ge(be,{get open(){return e(I)},set open(c){n(I,c,!0)},title:c=>{var w=ga(),P=a(w,!0);t(w),G(B=>b(P,B),[()=>Lt()]),N(c,w)},children:(c,w)=>{aa(c,{get applicationId(){return r.applicationId},onCreate:T})},$$slots:{title:!0,default:!0}});var Fe=i(be,2);ge(Fe,{onClose:k,get open(){return e(O)},set open(c){n(O,c,!0)},title:c=>{var w=xa(),P=a(w,!0);t(w),G(B=>b(P,B),[()=>Ft()]),N(c,w)},children:(c,w)=>{var P=xe(),B=K(P);{var J=R=>{na(R,{get serviceAccount(){return e(v)}})};te(B,R=>{e(v)&&R(J)})}N(c,P)},$$slots:{title:!0,default:!0}});var Ge=i(Fe,2);ge(Ge,{get open(){return e(x)},set open(c){n(x,c,!0)},title:c=>{var w=ya(),P=a(w,!0);t(w),G(B=>b(P,B),[()=>Gt({name:e(A)?.name||""})]),N(c,w)},children:(c,w)=>{var P=xe(),B=K(P);{var J=R=>{ma(R,{get applicationId(){return r.applicationId},get serviceAccount(){return e(A)},onEdit:h})};te(B,R=>{e(A)&&R(J)})}N(c,P)},$$slots:{title:!0,default:!0}});var rt=i(Ge,2);return ge(rt,{get open(){return e(M)},set open(c){n(M,c,!0)},title:c=>{var w=wa(),P=a(w,!0);t(w),G(B=>b(P,B),[()=>Rt({name:e(j)?.name||""})]),N(c,w)},children:(c,w)=>{var P=xe(),B=K(P);{var J=R=>{sa(R,{get applicationId(){return r.applicationId},get serviceAccountId(){return e(j).id},get name(){return e(j).name},onDelete:q})};te(B,R=>{e(j)&&R(J)})}N(c,P)},$$slots:{title:!0,default:!0}}),G((y,c,w,P,B)=>{b(z,y),b(le,c),b(H,w),b(Se,P),b(Ie,B)},[()=>Nt(),()=>Mt(),()=>Bt(),()=>Ot(),()=>Vt()]),N(s,F),$({onCreate:f})}ie(["click"]);var Aa=V('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ga(s,r){Z(r,!0);let l=g(void 0);var _=Aa();pt(x=>{G(o=>bt.title=o,[()=>ht()])});var S=a(_),d=a(S),p=a(d),u=a(p),I=a(u),f=a(I);Yt(f,{}),t(I),t(u);var T=i(u,2),O=a(T,!0);t(T),t(p);var v=i(p,2);v.__click=function(...x){e(l)?.onCreate?.apply(this,x)};var k=a(v);Xt(k,{}),t(v),t(d);var A=i(d,2);yt(Ia(A,{get applicationId(){return r.data.applicationId}}),x=>n(l,x,!0),()=>e(l)),t(S),t(_),G(()=>{Y(u,"href",`${wt}/`),b(O,r.data.application.name)}),N(s,_),$()}ie(["click"]);export{Ga as component};
