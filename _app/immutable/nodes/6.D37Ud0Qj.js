import{a as D,t as L,c as _e}from"../chunks/disclose-version.DrWTZEMc.js";import{p as ee,w as g,i as e,x as i,t as l,a as te,c as a,r as t,s as n,k as B,f as K,$ as wt,ad as St}from"../chunks/runtime.BOcB0i4C.js";import{d as ce,e as Ne,s as u,h as It}from"../chunks/render.CHcgKWWy.js";import{i as X}from"../chunks/runtime.qIrDYYv_.js";import{d as Te,e as ie,r as $,s as W,b as fe,aw as je,ax as Me,ay as At,az as $e,aA as at,aB as rt,aC as kt,aD as Ct,aE as Pt,aF as nt,aG as it,m as Dt,aH as Et,aI as Nt,aJ as Tt,aK as jt,t as Mt,aL as Ot,w as Bt,aM as Ft,aN as Vt,aO as Lt,aP as Gt,aQ as zt,aR as Rt,aS as Ut,aT as qt,aU as Ht,aV as Jt,aW as Kt,aX as Qt}from"../chunks/debounce.DAmdUp_2.js";import{p as h}from"../chunks/proxy.C01Lgihj.js";import{o as Oe}from"../chunks/index-client.CDjIKsSM.js";import{I as Wt,s as Xt,g as Zt,D as Yt}from"../chunks/Dropdown.CZaWqXjv.js";import{d as be}from"../chunks/index.Ch86im5p.js";import{b as $t}from"../chunks/paths.2tyyIn2U.js";import{P as ea,M as ve,a as ta,T as aa,E as ra}from"../chunks/Modal.J4_VPY9n.js";import{I as le,b as me,G as Be,m as Fe,C as Z,v as Y,S as Ve,h as Le,a as Ge}from"../chunks/InputResults.BQnRkFhZ.js";import{P as lt}from"../chunks/Password.Db4C1CHT.js";import"../chunks/legacy.q0Uc9FIK.js";import{l as na,s as ia,p as ue}from"../chunks/props.D-n0bGyQ.js";import{C as la}from"../chunks/chevron-left.BWoKH1Cg.js";const ca=()=>Be((v,r)=>{r.length&&(Fe(r),Z("name",ie(),()=>{Y(v.name).isNotBlank()}))});function sa(v,r,c){r.add(v.currentTarget.name),c()}var oa=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),da=L('<form><label for="name"> </label> <input type="text" name="name"> <!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function va(v,r){ee(r,!0);let c=g(!1),x=g(!1),P=B(()=>e(c)||!e(x)),y=g(""),b=ca(),p=g(h(b.get())),S=B(()=>Ge(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,j=Te(()=>{b({name:e(y)},Array.from(d)).done(_=>{i(p,h(_)),i(x,h(e(p).isValid()))}),d.clear()},300);function F(){d.add("name"),j(),j.flush()}Oe(F);async function w(_){_.preventDefault();try{i(c,!0),e(x)&&r.onCreate(await be.createServiceAccount({name:e(y)},r.applicationId))}catch(N){await Le(N)}finally{i(c,!1)}}var I=da(),M=a(I),A=a(M,!0);l(()=>u(A,Me())),t(M);var s=n(M,2);$(s);const k=B(()=>`w-full ${e(S)("name")??""}`);l(()=>W(s,"placeholder",je())),s.__input=[sa,d,j];var G=n(s,2);le(G,{name:"name",get result(){return e(p)}});var U=n(G,2),V=a(U),q=a(V);{var H=_=>{var N=oa(),T=a(N),O=a(T);Ve(O),t(T),t(N),D(_,N)};X(q,_=>{e(c)&&_(H)})}var E=n(q);l(()=>u(E,` ${At()??""}`)),t(V),t(U),t(I),l(()=>{fe(s,e(k)),V.disabled=e(P)}),Ne("submit",I,w),me(s,()=>e(y),_=>i(y,_)),D(v,I),te()}ce(["input"]);function et(v,r){const c=na(r,["children","$$slots","$$events","$$legacy"]);Wt(v,ia({name:"copy"},()=>c,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(P,y)=>{var b=_e(),p=K(b);Xt(p,r,"default",{}),D(P,b)},$$slots:{default:!0}}))}var ua=L('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function _a(v,r){ee(r,!0);let c=g(!1);function x(T){return async()=>{try{i(c,!0),await kt(T),Ct(Pt(),"success")}finally{i(c,!1)}}}var P=ua(),y=K(P),b=a(y),p=a(b,!0);l(()=>u(p,Me())),t(b);var S=n(b,2);$(S),l(()=>W(S,"placeholder",je())),t(y);var d=n(y,2),j=a(d),F=a(j,!0);l(()=>u(F,nt())),t(j);var w=n(j,2),I=a(w);$(I),l(()=>W(I,"placeholder",at()));var M=n(I,2),A=B(()=>x(r.serviceAccount.clientId));M.__click=function(...T){var O;(O=e(A))==null||O.apply(this,T)};var s=a(M);et(s,{}),t(M),t(w),t(d);var k=n(d,2),G=a(k),U=a(G,!0);l(()=>u(U,it())),t(G);var V=n(G,2),q=a(V),H=B(()=>rt());lt(q,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(H)},get value(){return r.serviceAccount.clientSecret}});var E=n(q,2),_=B(()=>x(r.serviceAccount.clientSecret));E.__click=function(...T){var O;(O=e(_))==null||O.apply(this,T)};var N=a(E);et(N,{}),t(E),t(V),t(k),l(()=>{$e(S,r.serviceAccount.name),$e(I,r.serviceAccount.clientId),M.disabled=e(c),E.disabled=e(c)}),D(v,P),te()}ce(["click"]);const fa=()=>Be((v={},r)=>{r.length&&(Fe(r),Z("nameConfirm",ie(),()=>{Y(v.nameConfirm).isNotBlank()}),Z("nameConfirm",Dt(),()=>{Y(v.name===v.nameConfirm).isTruthy()}))});function ma(v,r,c){r.add(v.currentTarget.name),c()}var ba=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),pa=L('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ha(v,r){ee(r,!0);let c=g(""),x=fa(),P=g(h(x.get())),y=g(!1),b=B(()=>e(y)),p=B(()=>Ge(e(P),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const S=new Set,d=Te(()=>{x({name:r.name,nameConfirm:e(c)},Array.from(S)).done(_=>{i(P,h(_))}),S.clear()},300);function j(){S.add("name"),d(),d.flush()}async function F(_){_.preventDefault();try{i(y,!0),i(c,h(e(c).trim())),j(),e(P).isValid()&&(await be.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(N){await Le(N)}finally{i(y,!1)}}var w=pa(),I=a(w),M=a(I,!0);l(()=>u(M,Nt())),t(I);var A=n(I,2),s=a(A);$(s);const k=B(()=>`w-full ${e(p)("nameConfirm")??""}`);l(()=>W(s,"placeholder",Et({name:r.name}))),s.__input=[ma,S,d];var G=n(s,2);le(G,{name:"nameConfirm",get result(){return e(P)}}),t(A);var U=n(A,2),V=a(U),q=a(V);{var H=_=>{var N=ba(),T=a(N),O=a(T);Ve(O),t(T),t(N),D(_,N)};X(q,_=>{e(y)&&_(H)})}var E=n(q);l(()=>u(E,` ${Tt()??""}`)),t(V),t(U),t(w),l(()=>{fe(s,e(k)),V.disabled=e(b)}),Ne("submit",w,F),me(s,()=>e(c),_=>i(c,_)),D(v,w),te()}ce(["input"]);const ga=()=>Be((v,r)=>{r.length&&(Fe(r),Z("name",ie(),()=>{Y(v.name).isNotBlank()}),Z("clientId",ie(),()=>{Y(v.clientId).isNotBlank()}),Z("clientSecret",ie(),()=>{Y(v.clientSecret).isNotBlank()}))});var xa=L('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function ya(v,r){ee(r,!0);let c=ue(r,"name",15),x=ue(r,"clientId",15),P=ue(r,"clientSecret",15),y=ue(r,"valid",15,!1),b=ga(),p=g(h(b.get())),S=B(()=>Ge(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,j=Te(()=>{b({name:c(),clientId:x(),clientSecret:P()},Array.from(d)).done(J=>{i(p,h(J)),y(e(p).isValid())}),d.clear()},300);function F(){d.add("name"),d.add("clientId"),d.add("clientSecret"),j(),j.flush()}function w(J){d.add(J.currentTarget.name),j()}Oe(F);var I=xa(),M=K(I),A=a(M),s=a(A,!0);l(()=>u(s,Me())),t(A);var k=n(A,2);$(k);const G=B(()=>`w-full ${e(S)("name")??""}`);l(()=>W(k,"placeholder",je())),k.__input=w;var U=n(k,2);le(U,{name:"name",get result(){return e(p)}}),t(M);var V=n(M,2),q=a(V),H=a(q,!0);l(()=>u(H,nt())),t(q);var E=n(q,2);$(E);const _=B(()=>`w-full ${e(S)("clientId")??""}`);l(()=>W(E,"placeholder",at())),E.__input=w;var N=n(E,2);le(N,{name:"clientId",get result(){return e(p)}}),t(V);var T=n(V,2),O=a(T),pe=a(O,!0);l(()=>u(pe,it())),t(O);var ae=n(O,2),he=B(()=>e(S)("clientSecret")),re=B(()=>rt());lt(ae,{get class(){return e(he)},name:"clientSecret",get placeholder(){return e(re)},oninput:w,get value(){return P()},set value(J){P(J)}});var ge=n(ae,2);le(ge,{name:"clientSecret",get result(){return e(p)}}),t(T),l(()=>{fe(k,e(G)),fe(E,e(_))}),me(k,c),me(E,x),D(v,I),te()}ce(["input"]);var wa=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Sa=L('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ia(v,r){ee(r,!0);let c=g(!1),x=g(!1),P=B(()=>e(c)||!e(x)),y=g(h(r.serviceAccount.name)),b=g(h(r.serviceAccount.clientId)),p=g(h(r.serviceAccount.clientSecret));async function S(s){s.preventDefault();try{i(c,!0),e(x)&&r.onEdit(await be.updateServiceAccount(r.serviceAccount.id,{name:e(y),clientId:e(b)?e(b):void 0,clientSecret:e(p)?e(p):void 0},r.applicationId))}catch(k){await Le(k)}finally{i(c,!1)}}var d=Sa(),j=a(d);ya(j,{get name(){return e(y)},set name(s){i(y,h(s))},get clientId(){return e(b)},set clientId(s){i(b,h(s))},get clientSecret(){return e(p)},set clientSecret(s){i(p,h(s))},get valid(){return e(x)},set valid(s){i(x,h(s))}});var F=n(j,2),w=a(F),I=a(w);{var M=s=>{var k=wa(),G=a(k),U=a(G);Ve(U),t(G),t(k),D(s,k)};X(I,s=>{e(c)&&s(M)})}var A=n(I);l(()=>u(A,` ${jt()??""}`)),t(w),t(F),t(d),l(()=>w.disabled=e(P)),Ne("submit",d,S),D(v,d),te()}const tt=20;function Aa(v,r){i(r,!0)}var ka=L('<button class="btn secondary icon lg"><!></button>'),Ca=L('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Pa=L('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Da=L("<h3> </h3>"),Ea=L("<h3> </h3>"),Na=L("<h3> </h3>"),Ta=L("<h3> </h3>"),ja=L('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table></div></div> <!> <!> <!> <!>',1);function Za(v,r){ee(r,!0);let c=h([]),x=g(0),P=g(!0);Oe(y);async function y(){if(!e(P))return;const m=await be.allServiceAccounts(e(x)*tt,tt,r.data.applicationId);i(P,h(m.hasMore)),i(x,e(x)+1),c.push(...m.items)}let b=g(!1);function p(m){i(S,!0),i(d,h(m)),i(b,!1)}let S=g(!1),d=g(void 0);function j(){e(d)&&(delete e(d).clientSecret,c.unshift(e(d)),i(d,void 0),i(S,!1))}let F=g(void 0),w=g(!1);function I(m){return()=>{i(F,h(m)),i(w,!0)}}function M(m){const o=c.findIndex(f=>f.id===(m==null?void 0:m.id));o!==-1&&(c[o]=m),i(F,void 0),i(w,!1)}let A=g(void 0),s=g(!1);function k(m){return()=>{i(A,h(m)),i(s,!0)}}function G(){const m=c.findIndex(o=>{var f;return o.id===((f=e(A))==null?void 0:f.id)});m!==-1&&c.splice(m,1),i(A,void 0),i(s,!1)}const U=Zt(),[V,q]=U;var H=ja();It(m=>{l(()=>wt.title=Ot())});var E=K(H),_=a(E),N=a(_),T=a(N);l(()=>W(T,"href",V(`${$t}/`,void 0)));var O=a(T),pe=a(O);la(pe,{}),t(O);var ae=n(O,2),he=a(ae,!0);l(()=>u(he,Lt())),t(ae),t(T);var re=n(T,2);re.__click=[Aa,b];var ge=a(re);ea(ge,{}),t(re),t(N);var J=n(N,2),xe=a(J),ze=a(xe),ye=a(ze),ct=a(ye,!0);l(()=>u(ct,Gt())),t(ye);var we=n(ye),st=a(we,!0);l(()=>u(st,zt())),t(we);var Se=n(we),ot=a(Se,!0);l(()=>u(ot,Rt())),t(Se);var Ie=n(Se),dt=a(Ie,!0);l(()=>u(dt,Ut())),t(Ie);var Re=n(Ie),vt=a(Re,!0);l(()=>u(vt,qt())),t(Re),St(),t(ze),t(xe);var Ue=n(xe);Mt(Ue,23,()=>c,m=>m.id,(m,o,f)=>{var C=Pa(),z=a(C),Q=a(z,!0);t(z);var R=n(z),_t=a(R,!0);t(R);var Ae=n(R),ft=a(Ae,!0);t(Ae);var ke=n(Ae),mt=a(ke,!0);l(()=>u(mt,e(o).updatedAt.toLocaleString())),t(ke);var Ce=n(ke),bt=a(Ce,!0);l(()=>u(bt,e(o).createdAt.toLocaleString())),t(Ce);var Ke=n(Ce),Qe=a(Ke),pt=a(Qe);Yt(pt,{position:"top-right",anchorPosition:"bottom-right",button:Pe=>{var se=ka(),oe=a(se);ra(oe,{}),t(se),D(Pe,se)},children:(Pe,se)=>{var oe=Ca(),de=K(oe),ht=B(()=>I(e(o)));de.__click=function(...Ee){var ne;(ne=e(ht))==null||ne.apply(this,Ee)};var We=a(de);ta(We,{});var Xe=n(We),gt=a(Xe,!0);l(()=>u(gt,Ht())),t(Xe),t(de);var De=n(de,2),xt=B(()=>k(e(o)));De.__click=function(...Ee){var ne;(ne=e(xt))==null||ne.apply(this,Ee)};var Ze=a(De);aa(Ze,{});var Ye=n(Ze),yt=a(Ye,!0);l(()=>u(yt,Jt())),t(Ye),t(De),D(Pe,oe)},$$slots:{button:!0,default:!0}}),t(Qe),t(Ke),t(C),l(()=>{Bt(C,"border-b",e(f)<c.length-1),u(Q,e(o).id),u(_t,e(o).name),u(ft,e(o).clientId)}),D(m,C)}),t(Ue),t(J),t(_),t(E);var qe=n(E,2);ve(qe,{get open(){return e(b)},set open(o){i(b,h(o))},title:o=>{var f=Da(),C=a(f,!0);l(()=>u(C,Kt())),t(f),D(o,f)},children:(o,f)=>{va(o,{get applicationId(){return r.data.applicationId},onCreate:p})},$$slots:{title:!0,default:!0}});var He=n(qe,2);ve(He,{onClose:j,get open(){return e(S)},set open(o){i(S,h(o))},title:o=>{var f=Ea(),C=a(f,!0);l(()=>u(C,Qt())),t(f),D(o,f)},children:(o,f)=>{var C=_e(),z=K(C);{var Q=R=>{_a(R,{get serviceAccount(){return e(d)}})};X(z,R=>{e(d)&&R(Q)})}D(o,C)},$$slots:{title:!0,default:!0}});var Je=n(He,2);ve(Je,{get open(){return e(w)},set open(o){i(w,h(o))},title:o=>{var f=Na(),C=a(f,!0);l(()=>{var z;return u(C,Ft({name:((z=e(F))==null?void 0:z.name)||""}))}),t(f),D(o,f)},children:(o,f)=>{var C=_e(),z=K(C);{var Q=R=>{Ia(R,{get applicationId(){return r.data.applicationId},get serviceAccount(){return e(F)},onEdit:M})};X(z,R=>{e(F)&&R(Q)})}D(o,C)},$$slots:{title:!0,default:!0}});var ut=n(Je,2);ve(ut,{get open(){return e(s)},set open(o){i(s,h(o))},title:o=>{var f=Ta(),C=a(f,!0);l(()=>{var z;return u(C,Vt({name:((z=e(A))==null?void 0:z.name)||""}))}),t(f),D(o,f)},children:(o,f)=>{var C=_e(),z=K(C);{var Q=R=>{ha(R,{get applicationId(){return r.data.applicationId},get serviceAccountId(){return e(A).id},get name(){return e(A).name},onDelete:G})};X(z,R=>{e(A)&&R(Q)})}D(o,C)},$$slots:{title:!0,default:!0}}),D(v,H),te()}ce(["click"]);export{Za as component};
