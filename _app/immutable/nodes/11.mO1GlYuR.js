import{a as z,t as M}from"../chunks/disclose-version.BR6hquoZ.js";import{p as se,d as b,t as f,a as le,g as e,b as i,$ as ie,c as a,r,s as p,z as w}from"../chunks/runtime.XTayOKyQ.js";import{d as ne,h as oe,e as de,s as D}from"../chunks/render.DpS1xNCU.js";import{i as ue}from"../chunks/runtime.vqD1BrVN.js";import{d as E,e as L,f as ve,r as T,s as U,g as fe,h as pe,i as me}from"../chunks/messages.D-7JLJoP.js";import{d as _e,I as V,b as F,G as ce,m as he,C as j,v as A,S as ge,h as be,s as H,a as we}from"../chunks/InputResults.I4g3kDNh.js";import{p as m}from"../chunks/proxy.BKNo-OHe.js";import"../chunks/isURL.production.DFCxhdJF.js";import{g as xe}from"../chunks/entry.C3VXzTm3.js";import{b as ye}from"../chunks/paths.Hn01zztd.js";import{a as J,s as $e}from"../chunks/api.svelte.DzjM_Kp1.js";const qe=()=>ce((l={},n)=>{n.length&&(he(n),j("url",L(),()=>{A(l.url).isNotBlank()}),j("url",ve(),()=>{A(l.url).isURL({protocols:["http","https"],require_tld:!1,require_protocol:!0,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!1,allow_query_components:!1})}),j("tenant",L(),()=>{A(l.tenant).isNotBlank()}))});function K(l,n,s){n.add(l.currentTarget.name),s()}var ke=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Se=M('<div class="flex flex-grow flex-col justify-end p-4 sm:justify-start"><div class="card mx-auto my-10 flex w-full flex-shrink flex-col sm:w-72"><h1 class="mb-1"> </h1> <form><div class="mb-2"><input type="url" name="url"> <!></div> <div class="mb-2"><input type="text" name="tenant"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form></div></div>');function Le(l,n){se(n,!0);let s=b(m(J.url||"")),o=b(m(J.tenant||"")),C=qe(),_=b(m(C.get())),h=b(!1),O=w(()=>e(h)),B=w(()=>we(e(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,g=_e(()=>{C({url:e(s),tenant:e(o)},Array.from(d)).done(t=>{i(_,m(t))}),d.clear()},300);function P(){d.add("url"),d.add("tenant"),g(),g.flush()}async function Q(t){t.preventDefault();try{i(h,!0),i(s,m(e(s).trim())),i(o,m(e(o).trim())),P(),e(_).isValid()&&(await $e({url:e(s),tenant:e(o)}),await xe(`${ye}/signin`))}catch(c){await be(c)}finally{i(h,!1)}}var x=Se();oe(t=>{f(()=>ie.title=E())});var G=a(x),y=a(G),W=a(y,!0);f(()=>D(W,E())),r(y);var $=p(y,2),q=a($),u=a(q);T(u);const X=w(()=>`w-full ${e(B)("url")??""}`);f(()=>U(u,"placeholder",fe())),u.__input=[K,d,g];var Y=p(u,2);V(Y,{name:"url",get result(){return e(_)}}),r(q);var k=p(q,2),v=a(k);T(v);const Z=w(()=>`w-full ${e(B)("tenant")??""}`);f(()=>U(v,"placeholder",pe())),v.__input=[K,d,g];var ee=p(v,2);V(ee,{name:"tenant",get result(){return e(_)}}),r(k);var I=p(k,2),S=a(I),N=a(S);{var te=t=>{var c=ke(),R=a(c),re=a(R);ge(re),r(R),r(c),z(t,c)};ue(N,t=>{e(h)&&t(te)})}var ae=p(N);f(()=>D(ae,` ${me()??""}`)),r(S),r(I),r($),r(G),r(x),f(()=>{H(u,e(X)),H(v,e(Z)),S.disabled=e(O)}),de("submit",$,Q),F(u,()=>e(s),t=>i(s,t)),F(v,()=>e(o),t=>i(o,t)),z(l,x),le()}ne(["input"]);export{Le as component};
