import{f as M,a as T,c as Ke,t as Qe}from"../chunks/BAGX8FWs.js";import{p as we,b as s,A as R,f as Ne,s as l,c as r,t as V,g as e,B as he,a as Ie,h as i,r as t,a5 as Et,$ as Mt}from"../chunks/9Y3Zi9LS.js";import{d as Me,s as d,i as ye,e as Xe,h as qt}from"../chunks/CdK4JjYi.js";import{f as Gt,d as Z,b as $,e as Lt,r as re,t as Vt}from"../chunks/DBRB63xn.js";import{p as Y,b as zt}from"../chunks/ClwBco7U.js";import"../chunks/DkEC4_bh.js";import{b as Ft}from"../chunks/Bluxw1Nt.js";import{G as We,d as $e,I as Q,a1 as Rt,a2 as Xt,a3 as Yt,a4 as Zt,a5 as Ht,a6 as Jt,a7 as Kt,a8 as Qt,a9 as Wt,aa as $t,ab as er,ac as tr,ad as rr,ae as ar,af as nr,ag as lr,ah as ir,ai as or,aj as dr,ak as vr,al as ur,am as sr,an as cr,b as ue,m as et,C as H,g as W,v as J,N as _r,i as tt,ao as pr,j as Ye,S as Ze,ap as hr,aq as fr,ar as br,P as mr,as as gr,o as xr,at as Ur,au as kr,av as yr,aw as wr,ax as Ir,X as Pr,Y as Or,Z as Ar,$ as Sr,a0 as Tr,ay as Cr,az as Nr}from"../chunks/CbLLult4.js";import{M as Re,D as jr,P as Br,T as Dr,E as Er,a as Mr}from"../chunks/D7DzHFmv.js";import{g as He}from"../chunks/Dyl6cX5U.js";import{o as qr}from"../chunks/pO33VYKk.js";import{C as Gr}from"../chunks/B40CaONp.js";const Lr=()=>We((p,n)=>{n.length&&(et(n),H("provider",W(),()=>{J(p.provider).isNotBlank()}),H("active",W(),()=>{J(p.active).isNotBlank()}),H("clientId",W(),()=>{J(p.clientId).isNotBlank()}),H("clientSecret",W(),()=>{J(p.clientSecret).isNotBlank()}),H("redirectUrl",W(),()=>{J(p.redirectUrl).isNotBlank()}),_r(p.isNew,()=>{H("authUrl",W(),()=>{J(p.authUrl).isNotBlank()}),H("callbackUrl",W(),()=>{J(p.callbackUrl).isNotBlank()}),H("scope",W(),()=>{J(p.scope).isNotBlank()}),H("tokenUrl",W(),()=>{J(p.tokenUrl).isNotBlank()})}))});function te(p,n,c){n.add(p.currentTarget.name),c()}var Vr=M('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"/></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"/> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"/> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"/> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"/> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"/> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"/> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"/> <!></div>',1);function rt(p,n){we(n,!0);let c=Y(n,"provider",15),I=Y(n,"active",15),k=Y(n,"authUrl",15),P=Y(n,"callbackUrl",15),b=Y(n,"clientId",15),y=Y(n,"clientSecret",15),m=Y(n,"redirectUrl",15),A=Y(n,"scope",15),g=Y(n,"tokenUrl",15),w=Y(n,"valid",15,!1),D=Lr(),h=s(R(D.get())),O=he(()=>tt(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const o=new Set,u=$e(()=>{D({provider:c(),active:I(),authUrl:k(),callbackUrl:P(),clientId:b(),clientSecret:y(),redirectUrl:m(),scope:A(),tokenUrl:g(),isNew:n.isNew},Array.from(o)).done(Fe=>{i(h,Fe,!0),w(e(h).isValid())}),o.clear()},300);function q(){o.add("provider"),o.add("active"),o.add("authUrl"),o.add("callbackUrl"),o.add("clientId"),o.add("clientSecret"),o.add("redirectUrl"),o.add("scope"),o.add("tokenUrl"),u(),u.flush()}qr(q);var C=Vr(),E=Ne(C),G=r(E),ee=r(G,!0);t(G);var a=l(G,2);a.__input=[te,o,u];var _=r(a);_.value=_.__value="google";var S=r(_,!0);t(_);var j=l(_);j.value=j.__value="facebook";var ae=r(j,!0);t(j);var se=l(j);se.value=se.__value="github";var je=r(se,!0);t(se);var ne=l(se);ne.value=ne.__value="microsoft";var Be=r(ne,!0);t(ne);var fe=l(ne);fe.value=fe.__value="x";var x=r(fe,!0);t(fe),t(a);var v=l(a,2);Q(v,{name:"provider",get result(){return e(h)}}),t(E);var f=l(E,2),U=r(f),N=r(U),F=l(N);re(F),F.__input=[te,o,u],t(U);var X=l(U,2);Q(X,{name:"active",get result(){return e(h)}}),t(f);var ce=l(f,2),Pe=r(ce),Oe=r(Pe,!0);t(Pe);var le=l(Pe,2);re(le),le.__input=[te,o,u];var qe=l(le,2);Q(qe,{name:"clientId",get result(){return e(h)}}),t(ce);var Ae=l(ce,2),_e=r(Ae),Ge=r(_e,!0);t(_e);var K=l(_e,2);re(K),K.__input=[te,o,u];var Le=l(K,2);Q(Le,{name:"clientSecret",get result(){return e(h)}}),t(Ae);var be=l(Ae,2),me=r(be),Ve=r(me,!0);t(me);var B=l(me,2);re(B),B.__input=[te,o,u];var z=l(B,2);Q(z,{name:"redirectUrl",get result(){return e(h)}}),t(be);var L=l(be,2),ie=r(L),ge=r(ie,!0);t(ie);var oe=l(ie,2);re(oe),oe.__input=[te,o,u];var De=l(oe,2);Q(De,{name:"authUrl",get result(){return e(h)}}),t(L);var xe=l(L,2),Se=r(xe),Te=r(Se,!0);t(Se);var de=l(Se,2);re(de),de.__input=[te,o,u];var Ee=l(de,2);Q(Ee,{name:"callbackUrl",get result(){return e(h)}}),t(xe);var Ue=l(xe,2),Ce=r(Ue),pe=r(Ce,!0);t(Ce);var ve=l(Ce,2);re(ve),ve.__input=[te,o,u];var at=l(ve,2);Q(at,{name:"scope",get result(){return e(h)}}),t(Ue);var Je=l(Ue,2),ze=r(Je),nt=r(ze,!0);t(ze);var ke=l(ze,2);re(ke),ke.__input=[te,o,u];var lt=l(ke,2);Q(lt,{name:"tokenUrl",get result(){return e(h)}}),t(Je),V((Fe,it,ot,dt,vt,ut,st,ct,_t,pt,ht,ft,bt,mt,gt,xt,Ut,kt,yt,wt,It,Pt,Ot,At,St,Tt,Ct,Nt,jt,Bt,Dt)=>{d(ee,Fe),Z(a,1,`w-full ${it??""}`),$(a,"placeholder",ot),d(S,dt),d(ae,vt),d(je,ut),d(Be,st),d(x,ct),d(N,`${_t??""} `),Z(F,1,pt),d(Oe,ht),Z(le,1,`w-full ${ft??""}`),$(le,"placeholder",bt),d(Ge,mt),Z(K,1,`w-full ${gt??""}`),$(K,"placeholder",xt),d(Ve,Ut),Z(B,1,`w-full ${kt??""}`),$(B,"placeholder",yt),d(ge,wt),Z(oe,1,`w-full ${It??""}`),$(oe,"placeholder",Pt),d(Te,Ot),Z(de,1,`w-full ${At??""}`),$(de,"placeholder",St),d(pe,Tt),Z(ve,1,`w-full ${Ct??""}`),$(ve,"placeholder",Nt),d(nt,jt),Z(ke,1,`w-full ${Bt??""}`),$(ke,"placeholder",Dt)},[()=>Rt(),()=>e(O)("provider"),()=>Xt(),()=>Yt(),()=>Zt(),()=>Ht(),()=>Jt(),()=>Kt(),()=>Qt(),()=>Gt(e(O)("active")),()=>Wt(),()=>e(O)("clientId"),()=>$t(),()=>er(),()=>e(O)("clientSecret"),()=>tr(),()=>rr(),()=>e(O)("redirectUrl"),()=>ar(),()=>nr(),()=>e(O)("authUrl"),()=>lr(),()=>ir(),()=>e(O)("callbackUrl"),()=>or(),()=>dr(),()=>e(O)("scope"),()=>vr(),()=>ur(),()=>e(O)("tokenUrl"),()=>sr()]),Lt(a,c),cr(F,I),ue(le,b),ue(K,y),ue(B,m),ue(oe,k),ue(de,P),ue(ve,A),ue(ke,g),T(p,C),Ie()}Me(["input"]);var zr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Fr=M('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Rr(p,n){we(n,!0);let c=s("google"),I=s(!0),k=s(void 0),P=s(void 0),b=s(""),y=s(""),m=s(""),A=s(void 0),g=s(void 0),w=s(!1),D=he(()=>e(w)),h=s(!1);async function O(a){a.preventDefault();try{i(w,!0),e(h)&&n.onCreate(await He.createTenantOauth2Provider(n.tenantId,{provider:e(c),active:e(I),authUrl:e(k),callbackUrl:e(P),clientId:e(b),clientSecret:e(y),redirectUrl:e(m),scope:e(A),tokenUrl:e(g)},n.applicationId))}catch(_){await Ye(_)}finally{i(w,!1)}}var o=Fr(),u=r(o);rt(u,{isNew:!0,get valid(){return e(h)},set valid(a){i(h,a,!0)},get provider(){return e(c)},set provider(a){i(c,a,!0)},get active(){return e(I)},set active(a){i(I,a,!0)},get authUrl(){return e(k)},set authUrl(a){i(k,a,!0)},get callbackUrl(){return e(P)},set callbackUrl(a){i(P,a,!0)},get clientId(){return e(b)},set clientId(a){i(b,a,!0)},get clientSecret(){return e(y)},set clientSecret(a){i(y,a,!0)},get redirectUrl(){return e(m)},set redirectUrl(a){i(m,a,!0)},get scope(){return e(A)},set scope(a){i(A,a,!0)},get tokenUrl(){return e(g)},set tokenUrl(a){i(g,a,!0)}});var q=l(u,2),C=r(q),E=r(C);{var G=a=>{var _=zr(),S=r(_),j=r(S);Ze(j),t(S),t(_),T(a,_)};ye(E,a=>{e(w)&&a(G)})}var ee=l(E);t(C),t(q),t(o),V(a=>{C.disabled=e(D),d(ee,` ${a??""}`)},[()=>pr()]),Xe("submit",o,O),T(p,o),Ie()}const Xr=()=>We((p={},n)=>{n.length&&(et(n),H("providerConfirm",W(),()=>{J(p.providerConfirm).isNotBlank()}),H("providerConfirm",mr(),()=>{J(p.provider===p.providerConfirm).isTruthy()}))});function Yr(p,n,c){n.add(p.currentTarget.name),c()}var Zr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Hr=M('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Jr(p,n){we(n,!0);let c=s(""),I=Xr(),k=s(R(I.get())),P=s(!1),b=he(()=>e(P)),y=he(()=>tt(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const m=new Set,A=$e(()=>{I({provider:n.provider,providerConfirm:e(c)},Array.from(m)).done(_=>{i(k,_,!0)}),m.clear()},300);function g(){m.add("name"),A(),A.flush()}async function w(_){_.preventDefault();try{i(P,!0),i(c,e(c).trim(),!0),g(),e(k).isValid()&&(await He.deleteTenantOauth2Provider(n.tenantId,n.tenantOAuth2ProviderId,n.applicationId),n.onDelete())}catch(S){await Ye(S)}finally{i(P,!1)}}var D=Hr(),h=r(D),O=r(h,!0);t(h);var o=l(h,2),u=r(o);re(u),u.__input=[Yr,m,A];var q=l(u,2);Q(q,{name:"providerConfirm",get result(){return e(k)}}),t(o);var C=l(o,2),E=r(C),G=r(E);{var ee=_=>{var S=Zr(),j=r(S),ae=r(j);Ze(ae),t(j),t(S),T(_,S)};ye(G,_=>{e(P)&&_(ee)})}var a=l(G);t(E),t(C),t(D),V((_,S,j,ae)=>{d(O,_),Z(u,1,`w-full ${S??""}`),$(u,"placeholder",j),E.disabled=e(b),d(a,` ${ae??""}`)},[()=>hr(),()=>e(y)("providerConfirm"),()=>fr({provider:n.provider}),()=>br()]),Xe("submit",D,w),ue(u,()=>e(c),_=>i(c,_)),T(p,D),Ie()}Me(["input"]);var Kr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Qr=M('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Wr(p,n){we(n,!0);let c=s(R(n.tenantOAuth2Provider.provider)),I=s(R(n.tenantOAuth2Provider.active)),k=s(R(n.tenantOAuth2Provider.authUrl)),P=s(R(n.tenantOAuth2Provider.callbackUrl)),b=s(R(n.tenantOAuth2Provider.clientId)),y=s(R(n.tenantOAuth2Provider.clientSecret)),m=s(R(n.tenantOAuth2Provider.redirectUrl)),A=s(R(n.tenantOAuth2Provider.scope)),g=s(R(n.tenantOAuth2Provider.tokenUrl)),w=s(!1),D=he(()=>e(w)),h=s(!1);async function O(a){a.preventDefault();try{i(w,!0),e(h)&&n.onEdit(await He.updateTenantOauth2Provider(n.tenantId,n.tenantOAuth2Provider.id,{active:e(I),authUrl:e(k),callbackUrl:e(P),clientId:e(b),clientSecret:e(y),redirectUrl:e(m),scope:e(A),tokenUrl:e(g)},n.applicationId))}catch(_){await Ye(_)}finally{i(w,!1)}}var o=Qr(),u=r(o);rt(u,{isNew:!1,get valid(){return e(h)},set valid(a){i(h,a,!0)},get provider(){return e(c)},set provider(a){i(c,a,!0)},get active(){return e(I)},set active(a){i(I,a,!0)},get authUrl(){return e(k)},set authUrl(a){i(k,a,!0)},get callbackUrl(){return e(P)},set callbackUrl(a){i(P,a,!0)},get clientId(){return e(b)},set clientId(a){i(b,a,!0)},get clientSecret(){return e(y)},set clientSecret(a){i(y,a,!0)},get redirectUrl(){return e(m)},set redirectUrl(a){i(m,a,!0)},get scope(){return e(A)},set scope(a){i(A,a,!0)},get tokenUrl(){return e(g)},set tokenUrl(a){i(g,a,!0)}});var q=l(u,2),C=r(q),E=r(C);{var G=a=>{var _=Kr(),S=r(_),j=r(S);Ze(j),t(S),t(_),T(a,_)};ye(E,a=>{e(w)&&a(G)})}var ee=l(E);t(C),t(q),t(o),V(a=>{C.disabled=e(D),d(ee,` ${a??""}`)},[()=>gr()]),Xe("submit",o,O),T(p,o),Ie()}var $r=M('<button class="btn secondary icon lg"><!></button>'),ea=M('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ta=M('<tr><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ra=M("<h3> </h3>"),aa=M("<h3> </h3>"),na=M("<h3> </h3>"),la=M('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function ia(p,n){we(n,!0);let c=Y(n,"oauth2Providers",7),I=s(!1);function k(){i(I,!0)}function P(x){c().unshift(x),i(I,!1)}let b=s(void 0),y=s(!1);function m(x){return()=>{i(b,x,!0),i(y,!0)}}function A(x){const v=c().findIndex(f=>f.id===x?.id);v!==-1&&(c()[v]=x),i(b,void 0),i(y,!1)}let g=s(void 0),w=s(!1);function D(x){return()=>{i(g,x,!0),i(w,!0)}}function h(){const x=c().findIndex(v=>v.id===e(g)?.id);x!==-1&&c().splice(x,1),i(g,void 0),i(w,!1)}var O=la(),o=Ne(O),u=r(o),q=r(u),C=r(q),E=r(C,!0);t(C);var G=l(C),ee=r(G,!0);t(G);var a=l(G),_=r(a,!0);t(a);var S=l(a),j=r(S,!0);t(S);var ae=l(S),se=r(ae,!0);t(ae),Et(),t(q),t(u);var je=l(u);xr(je,23,c,x=>x.id,(x,v,f)=>{var U=ta();let N;var F=r(U),X=r(F,!0);t(F);var ce=l(F),Pe=r(ce,!0);t(ce);var Oe=l(ce),le=r(Oe);{var qe=B=>{var z=Qe();V(L=>d(z,L),[()=>Cr()]),T(B,z)},Ae=B=>{var z=Qe();V(L=>d(z,L),[()=>Nr()]),T(B,z)};ye(le,B=>{e(v).active?B(qe):B(Ae,!1)})}t(Oe);var _e=l(Oe),Ge=r(_e,!0);t(_e);var K=l(_e),Le=r(K,!0);t(K);var be=l(K),me=r(be),Ve=r(me);jr(Ve,{position:"top-right",anchorPosition:"bottom-right",button:z=>{var L=$r(),ie=r(L);Er(ie,{}),t(L),T(z,L)},children:(z,L)=>{var ie=ea(),ge=Ne(ie),oe=he(()=>m(e(v)));ge.__click=function(...pe){e(oe)?.apply(this,pe)};var De=r(ge);Br(De,{});var xe=l(De),Se=r(xe,!0);t(xe),t(ge);var Te=l(ge,2),de=he(()=>D(e(v)));Te.__click=function(...pe){e(de)?.apply(this,pe)};var Ee=r(Te);Dr(Ee,{});var Ue=l(Ee),Ce=r(Ue,!0);t(Ue),t(Te),V((pe,ve)=>{d(Se,pe),d(Ce,ve)},[()=>Sr(),()=>Tr()]),T(z,ie)},$$slots:{button:!0,default:!0}}),t(me),t(be),t(U),V((B,z,L)=>{N=Z(U,1,"group",null,N,B),d(X,e(v).id),d(Pe,e(v).provider),d(Ge,z),d(Le,L)},[()=>({"border-b":e(f)<c().length-1}),()=>e(v).updatedAt.toLocaleString(),()=>e(v).createdAt.toLocaleString()]),T(x,U)}),t(je),t(o);var ne=l(o,2);Re(ne,{get open(){return e(I)},set open(v){i(I,v,!0)},title:v=>{var f=ra(),U=r(f,!0);t(f),V(N=>d(U,N),[()=>Pr()]),T(v,f)},children:(v,f)=>{Rr(v,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},onCreate:P})},$$slots:{title:!0,default:!0}});var Be=l(ne,2);Re(Be,{get open(){return e(y)},set open(v){i(y,v,!0)},title:v=>{var f=aa(),U=r(f,!0);t(f),V(N=>d(U,N),[()=>Or({issuer:e(b)?.provider||""})]),T(v,f)},children:(v,f)=>{var U=Ke(),N=Ne(U);{var F=X=>{Wr(X,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},get tenantOAuth2Provider(){return e(b)},onEdit:A})};ye(N,X=>{e(b)&&X(F)})}T(v,U)},$$slots:{title:!0,default:!0}});var fe=l(Be,2);return Re(fe,{get open(){return e(w)},set open(v){i(w,v,!0)},title:v=>{var f=na(),U=r(f,!0);t(f),V(N=>d(U,N),[()=>Ar({issuer:e(g)?.provider||""})]),T(v,f)},children:(v,f)=>{var U=Ke(),N=Ne(U);{var F=X=>{Jr(X,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},get tenantOAuth2ProviderId(){return e(g).id},get provider(){return e(g).provider},onDelete:h})};ye(N,X=>{e(g)&&X(F)})}T(v,U)},$$slots:{title:!0,default:!0}}),V((x,v,f,U,N)=>{d(E,x),d(ee,v),d(_,f),d(j,U),d(se,N)},[()=>Ur(),()=>kr(),()=>yr(),()=>wr(),()=>Ir()]),T(p,O),Ie({onCreate:k})}Me(["click"]);var oa=M('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function xa(p,n){we(n,!0);let c=s(void 0),I=R(n.data.tenant.oauth2Providers);var k=oa();qt(u=>{V(q=>Mt.title=q,[()=>Vt()])});var P=r(k),b=r(P),y=r(b),m=r(y),A=r(m),g=r(A);Gr(g,{}),t(A),t(m);var w=l(m,2),D=r(w);t(w),t(y);var h=l(y,2);h.__click=function(...u){e(c)?.onCreate?.apply(this,u)};var O=r(h);Mr(O,{}),t(h),t(b);var o=l(b,2);zt(ia(o,{get applicationId(){return n.data.applicationId},get tenantId(){return n.data.tenantId},get oauth2Providers(){return I}}),u=>i(c,u,!0),()=>e(c)),t(P),t(k),V(()=>{$(m,"href",`${Ft}/applications/${n.data.applicationId}/tenants`),d(D,`${n.data.application.name??""} / ${n.data.tenant.issuer??""}`)}),T(p,k),Ie()}Me(["click"]);export{xa as component};
