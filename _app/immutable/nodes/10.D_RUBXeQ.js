import{a as M,t as H,c as xa,b as za}from"../chunks/disclose-version.BdPpbG8G.js";import{p as xe,d as m,g as e,b as s,t as d,a as he,c as t,r as a,s as l,z as T,f as ke,u as ct,ao as bt,$ as pt}from"../chunks/runtime.XTayOKyQ.js";import{d as Ne,e as Ae,s as _,h as gt}from"../chunks/render.CVMVLslR.js";import{e as se,r as ae,s as de,aS as Ma,Y as sa,aT as Ga,aU as Ra,aV as xt,H as Ha,aW as ht,aX as yt,aY as wt,aZ as kt,a_ as Nt,a$ as Ya,b0 as Za,b1 as It,b2 as Et,b3 as Ct,b4 as Ut,b5 as Pt,b6 as St,b7 as Dt,b8 as At,b9 as jt,f as Ta,ba as Bt,bb as zt,bc as Tt,bd as qt,be as Vt,bf as Ft,bg as Ot,bh as Lt,bi as Mt,bj as Gt,bk as Rt,bl as Ht,bm as Yt,bn as Zt,bo as Jt,bp as Kt,bq as Wt,br as Xt,bs as Qt,bt as $t,bu as er,bv as ar,bw as tr,bx as rr,by as ir,bz as lr,bA as nr,bB as sr,bC as dr,bD as or,bE as ur,bF as vr,bG as mr,bH as _r,bI as fr,bJ as cr,bK as br,bL as pr,bM as gr,bN as xr,u as hr}from"../chunks/messages.wercaZ5l.js";import{p as u}from"../chunks/proxy.BKNo-OHe.js";import{p as X,b as da}from"../chunks/props.CLxh3Ck6.js";import{g as yr}from"../chunks/index.BCwrhWKg.js";import{b as wr}from"../chunks/paths.BeVl75iW.js";import{i as _e}from"../chunks/runtime.vqD1BrVN.js";import{d as He,I as re,b as ue,c as Re,G as Ye,m as Ze,C as $,v as ee,S as je,h as Be,s as ie,a as Je,t as ha,e as Ja,N as fe}from"../chunks/InputResults.BHVbwuCU.js";import{u as Ue}from"../chunks/index.B-XEKY0d.js";import{P as Ka,T as Wa,M as na,a as Xa,D as kr,E as Nr}from"../chunks/trash.C2pZKfXe.js";import{o as ya}from"../chunks/index-client.DhLDVXYR.js";import{b as Ir}from"../chunks/select.BIw2ICCz.js";import"../chunks/isURL.production.CEgn16RD.js";import{C as Er}from"../chunks/chevron-left._PPZrqIK.js";const Cr=()=>Ye((n={},r)=>{r.length&&(Ze(r),$("username",se(),()=>{ee(n.username).isNotBlank()}),$("active",se(),()=>{ee(n.active).isNotBlank()}))});function qa(n,r,i){r.add(n.currentTarget.name),i()}var Ur=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Pr=H('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Sr(n,r){xe(r,!0);let i=m(""),v=m(!0),p=Cr(),h=m(u(p.get())),k=m(!1),b=T(()=>e(k)),y=T(()=>Je(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const g=new Set,E=He(()=>{p({username:e(i),active:e(v)},Array.from(g)).done(Y=>{s(h,u(Y))}),g.clear()},300);function D(){g.add("username"),g.add("active"),E(),E.flush()}async function P(Y){Y.preventDefault();try{s(k,!0),s(i,u(e(i).trim())),D(),e(h).isValid()&&r.onCreate(await Ue.createUser({active:e(v),username:e(i)},r.applicationId))}catch(S){await Be(S)}finally{s(k,!1)}}var j=Pr(),O=t(j),N=t(O),x=t(N,!0);d(()=>_(x,Ga())),a(N);var w=l(N,2);ae(w);const I=T(()=>`w-full ${e(y)("username")??""}`);d(()=>de(w,"placeholder",Ma())),w.__input=[qa,g,E];var f=l(w,2);re(f,{name:"username",get result(){return e(h)}}),a(O);var c=l(O,2),F=t(c),G=t(F);d(()=>_(G,`${Ra()??""} `));var q=l(G);ae(q);const C=T(()=>sa(e(y)("active")));q.__input=[qa,g,E],a(F);var L=l(F,2);re(L,{name:"active",get result(){return e(h)}}),a(c);var B=l(c,2),o=t(B),z=t(o);{var Z=Y=>{var S=Ur(),K=t(S),ve=t(K);je(ve),a(K),a(S),M(Y,S)};_e(z,Y=>{e(k)&&Y(Z)})}var te=l(z);d(()=>_(te,` ${xt()??""}`)),a(o),a(B),a(j),d(()=>{ie(w,e(I)),ie(q,e(C)),o.disabled=e(b)}),Ae("submit",j,P),ue(w,()=>e(i),Y=>s(i,Y)),Re(q,()=>e(v),Y=>s(v,Y)),M(n,j),he()}Ne(["input"]);const Dr=()=>Ye((n={},r)=>{r.length&&(Ze(r),$("usernameConfirm",se(),()=>{ee(n.usernameConfirm).isNotBlank()}),$("usernameConfirm",Ha(),()=>{ee(n.username===n.usernameConfirm).isTruthy()}))});function Ar(n,r,i){r.add(n.currentTarget.name),i()}var jr=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Br=H('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function zr(n,r){xe(r,!0);let i=m(""),v=Dr(),p=m(u(v.get())),h=m(!1),k=T(()=>e(h)),b=T(()=>Je(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const y=new Set,g=He(()=>{v({username:r.username,usernameConfirm:e(i)},Array.from(y)).done(C=>{s(p,u(C))}),y.clear()},300);function E(){y.add("name"),g(),g.flush()}async function D(C){C.preventDefault();try{s(h,!0),s(i,u(e(i).trim())),E(),e(p).isValid()&&(await Ue.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(L){await Be(L)}finally{s(h,!1)}}var P=Br(),j=t(P),O=t(j,!0);d(()=>_(O,yt())),a(j);var N=l(j,2),x=t(N);ae(x);const w=T(()=>`w-full ${e(b)("usernameConfirm")??""}`);d(()=>de(x,"placeholder",ht({username:r.username}))),x.__input=[Ar,y,g];var I=l(x,2);re(I,{name:"usernameConfirm",get result(){return e(p)}}),a(N);var f=l(N,2),c=t(f),F=t(c);{var G=C=>{var L=jr(),B=t(L),o=t(B);je(o),a(B),a(L),M(C,L)};_e(F,C=>{e(h)&&C(G)})}var q=l(F);d(()=>_(q,` ${wt()??""}`)),a(c),a(f),a(P),d(()=>{ie(x,e(w)),c.disabled=e(k)}),Ae("submit",P,D),ue(x,()=>e(i),C=>s(i,C)),M(n,P),he()}Ne(["input"]);const Tr=()=>Ye((n,r)=>{r.length&&(Ze(r),$("email",se(),()=>{ee(n.email).isNotBlank()}),$("primary",se(),()=>{ee(n.primary).isNotBlank()}),$("verified",se(),()=>{ee(n.verified).isNotBlank()}))});function ga(n,r,i){r.add(n.currentTarget.name),i()}var qr=H('<div class="mb-2"><label for="email"> </label> <input type="email" name="email"> <!></div> <div class="flex flex-row mb-2"><div><label for="primary"> <input type="checkbox" name="primary"></label> <!></div> <div class="ml-2"><label for="verified"> <input type="checkbox" name="verified"></label> <!></div></div>',1);function Qa(n,r){xe(r,!0);let i=X(r,"email",15,""),v=X(r,"primary",15,!1),p=X(r,"verified",15,!1),h=X(r,"valid",15,!1),k=Tr(),b=m(u(k.get())),y=T(()=>Je(e(b),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const g=new Set,E=He(()=>{k({email:i(),primary:v(),verified:p()},Array.from(g)).done(S=>{s(b,u(S)),h(e(b).isValid())}),g.clear()},300);function D(){var S;i((S=i())==null?void 0:S.trim()),g.add("email"),g.add("primary"),g.add("verified"),E(),E.flush()}ya(D);var P=qr(),j=ke(P),O=t(j),N=t(O,!0);d(()=>_(N,Nt())),a(O);var x=l(O,2);ae(x);const w=T(()=>`w-full ${e(y)("email")??""}`);d(()=>de(x,"placeholder",kt())),x.__input=[ga,g,E];var I=l(x,2);re(I,{name:"email",get result(){return e(b)}}),a(j);var f=l(j,2),c=t(f),F=t(c),G=t(F);d(()=>_(G,`${Ya()??""} `));var q=l(G);ae(q);const C=T(()=>sa(e(y)("primary")));q.__input=[ga,g,E],a(F);var L=l(F,2);re(L,{name:"primary",get result(){return e(b)}}),a(c);var B=l(c,2),o=t(B),z=t(o);d(()=>_(z,`${Za()??""} `));var Z=l(z);ae(Z);const te=T(()=>sa(e(y)("verified")));Z.__input=[ga,g,E],a(o);var Y=l(o,2);return re(Y,{name:"verified",get result(){return e(b)}}),a(B),a(f),d(()=>{ie(x,e(w)),ie(q,e(C)),ie(Z,e(te))}),ue(x,i),Re(q,v),Re(Z,p),M(n,P),he({validateAll:D})}Ne(["input"]);const Vr=()=>Ye((n={},r)=>{r.length&&(Ze(r),$("emailConfirm",se(),()=>{ee(n.emailConfirm).isNotBlank()}),$("emailConfirm",Ha(),()=>{ee(n.email===n.emailConfirm).isTruthy()}))});function Fr(n,r,i){r.add(n.currentTarget.name),i()}var Or=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Lr=H('<form><p> </p> <div class="mb-2"><input type="text" name="emailConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Mr(n,r){xe(r,!0);let i=m(""),v=Vr(),p=m(u(v.get())),h=m(!1),k=T(()=>e(h)),b=T(()=>Je(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const y=new Set,g=He(()=>{v({email:r.email,emailConfirm:e(i)},Array.from(y)).done(C=>{s(p,u(C))}),y.clear()},300);function E(){y.add("email"),g(),g.flush()}async function D(C){C.preventDefault();try{s(h,!0),s(i,u(e(i).trim())),E(),e(p).isValid()&&(await Ue.deleteUserEmail(r.userId,r.emailId,r.applicationId),r.onDelete())}catch(L){await Be(L)}finally{s(h,!1)}}var P=Lr(),j=t(P),O=t(j,!0);d(()=>_(O,Et())),a(j);var N=l(j,2),x=t(N);ae(x);const w=T(()=>`w-full ${e(b)("emailConfirm")??""}`);d(()=>de(x,"placeholder",It({email:r.email}))),x.__input=[Fr,y,g];var I=l(x,2);re(I,{name:"emailConfirm",get result(){return e(p)}}),a(N);var f=l(N,2),c=t(f),F=t(c);{var G=C=>{var L=Or(),B=t(L),o=t(B);je(o),a(B),a(L),M(C,L)};_e(F,C=>{e(h)&&C(G)})}var q=l(F);d(()=>_(q,` ${Ct()??""}`)),a(c),a(f),a(P),d(()=>{ie(x,e(w)),c.disabled=e(k)}),Ae("submit",P,D),ue(x,()=>e(i),C=>s(i,C)),M(n,P),he()}Ne(["input"]);function Va(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}function Gr(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}var Rr=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Hr=H("<h3> </h3>"),Yr=H('<div class="flex flex-row justify-between items-center mb-2"><div class="flex flex-col"><p class="m-0"> </p> <div class="flex flex-row items-center"><label for="primary"> <input type="checkbox" name="primary" readonly=""></label> <label for="verified"> <input type="checkbox" name="verified" readonly=""></label></div></div> <div class="flex flex-row items-center"><button class="btn primary icon"><!></button> <button class="btn danger icon ms-2"><!></button></div></div> <form><!> <div class="flex flex-row justify-end"><div class="flex flex-row"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></div></form> <!>',1);function Fa(n,r){xe(r,!0);let i=X(r,"user",15),v=X(r,"email",15),p=m(u(v().email)),h=m(u(v().primary)),k=m(u(v().verified)),b=m(!1),y=m(!1);function g(){if(v().primary)i(i().email=null,!0);else{const A=i().emails.findIndex(le=>le.id===v().id);i().emails.splice(A,1)}}let E=m(void 0),D=m(!1),P=m(!1),j=T(()=>e(P)||!e(D));async function O(A){var le;if(A.preventDefault(),(le=e(E))==null||le.validateAll(),e(D))try{s(P,!0);const Q=await Ue.updateUserEmail(i().id,v().id,{email:e(p),primary:e(h),verified:e(k)},r.applicationId);if(s(b,!1),v().primary!==Q.primary){if(i().email&&i().email.id!==Q.id){const ne=i().emails.findIndex(Ee=>Ee.id===Q.id);i().emails.splice(ne,1),i(i().email.primary=!1,!0),i().emails.push(i().email)}i(i().email=Q,!0)}else{const ne=i().emails.findIndex(Ee=>Ee.id===Q.id);ne!==-1&&i(i().emails[ne]=Q,!0)}v(Q)}catch(Q){Be(Q)}finally{s(P,!1)}}var N=Yr(),x=ke(N),w=t(x),I=t(w),f=t(I,!0);a(I);var c=l(I,2),F=t(c),G=t(F);d(()=>_(G,`${Ya()??""} `));var q=l(G);ae(q),a(F);var C=l(F,2),L=t(C);d(()=>_(L,`${Za()??""} `));var B=l(L);ae(B),a(C),a(c),a(w);var o=l(w,2),z=t(o);z.__click=[Va,b];var Z=t(z);Ka(Z,{}),a(z);var te=l(z,2);te.__click=[Gr,y];var Y=t(te);Wa(Y,{}),a(te),a(o),a(x);var S=l(x,2),K=t(S);da(Qa(K,{get email(){return e(p)},set email(A){s(p,u(A))},get primary(){return e(h)},set primary(A){s(h,u(A))},get verified(){return e(k)},set verified(A){s(k,u(A))},get valid(){return e(D)},set valid(A){s(D,u(A))}}),A=>s(E,u(A)),()=>e(E));var ve=l(K,2),ce=t(ve),W=t(ce);W.__click=[Va,b];var V=t(W,!0);d(()=>_(V,Pt())),a(W);var U=l(W,2),R=t(U);{var J=A=>{var le=Rr(),Q=t(le),ne=t(Q);je(ne),a(Q),a(le),M(A,le)};_e(R,A=>{e(P)&&A(J)})}var oe=l(R);d(()=>_(oe,` ${St()??""}`)),a(U),a(ce),a(ve),a(S);var Ie=l(S,2);na(Ie,{get open(){return e(y)},set open(le){s(y,u(le))},title:le=>{var Q=Hr(),ne=t(Q,!0);d(()=>_(ne,Ut({email:v().email}))),a(Q),M(le,Q)},children:(le,Q)=>{var ne=xa(),Ee=ke(ne);{var Ke=ye=>{Mr(ye,{get applicationId(){return r.applicationId},get userId(){return i().id},get emailId(){return v().id},get email(){return v().email},onDelete:g})};_e(Ee,ye=>{e(y)&&ye(Ke)})}M(le,ne)},$$slots:{title:!0,default:!0}}),d(()=>{ha(x,"hidden",e(b)),_(f,v().email),ha(S,"hidden",!e(b)),U.disabled=e(j)}),Re(q,()=>v().primary,A=>v(v().primary=A,!0)),Re(B,()=>v().verified,A=>v(v().verified=A,!0)),Ae("submit",S,O),M(n,N),he()}Ne(["click"]);function Zr(n,r){n.preventDefault(),s(r,!0)}function Jr(n,r){n.stopPropagation(),n.preventDefault(),r()}var Kr=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Wr=H('<form><!> <div class="flex flex-row justify-end"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>'),Xr=H('<div class="flex flex-row justify-between"><h5> </h5> <div class="flex flex-col justify-center"><button class="btn primary icon"><!></button></div></div> <!> <hr class="my-2"> <div class="flex flex-col"><!> <!></div>',1);function Qr(n,r){xe(r,!0);let i=X(r,"user",15),v=m(void 0),p=m(!1),h=m(""),k=m(!1),b=m(!1),y=m(!1),g=m(!1),E=T(()=>e(g)||!e(y));function D(){s(p,!1),s(h,""),s(k,!1),s(b,!1)}async function P(B){var o;if(B.preventDefault(),(o=e(v))==null||o.validateAll(),e(y))try{s(g,!0);const z=await Ue.createUserEmail(i().id,{email:e(h),primary:e(k),verified:e(b)},r.applicationId);D(),z.primary?(i().email&&i().emails.push(i().email),i(i().email=z,!0)):i().emails.push(z),r.onEdit(i())}catch(z){Be(z)}finally{s(g,!1)}}var j=Xr(),O=ke(j),N=t(O),x=t(N,!0);d(()=>_(x,Dt())),a(N);var w=l(N,2),I=t(w);I.__click=[Zr,p];var f=t(I);Xa(f,{}),a(I),a(w),a(O);var c=l(O,2);{var F=B=>{var o=Wr(),z=t(o);da(Qa(z,{get email(){return e(h)},set email(W){s(h,u(W))},get primary(){return e(k)},set primary(W){s(k,u(W))},get verified(){return e(b)},set verified(W){s(b,u(W))},get valid(){return e(y)},set valid(W){s(y,u(W))}}),W=>s(v,u(W)),()=>e(v));var Z=l(z,2),te=t(Z);te.__click=[Jr,D];var Y=t(te,!0);d(()=>_(Y,At())),a(te);var S=l(te,2),K=t(S);{var ve=W=>{var V=Kr(),U=t(V),R=t(U);je(R),a(U),a(V),M(W,V)};_e(K,W=>{e(g)&&W(ve)})}var ce=l(K);d(()=>_(ce,` ${jt()??""}`)),a(S),a(Z),a(o),d(()=>S.disabled=e(E)),Ae("submit",o,P),M(B,o)};_e(c,B=>{e(p)&&B(F)})}var G=l(c,4),q=t(G);{var C=B=>{Fa(B,{get applicationId(){return r.applicationId},get email(){return i().email},get user(){return i()},set user(o){i(o)}})};_e(q,B=>{i().email&&B(C)})}var L=l(q,2);Ja(L,17,()=>i().emails,B=>B.id,(B,o)=>{Fa(B,{get applicationId(){return r.applicationId},get email(){return e(o)},get user(){return i()},set user(z){i(z)}})}),a(G),M(n,j),he()}Ne(["click"]);const $r=()=>Ye((n,r)=>{r.length&&(Ze(r),fe(!n.name,()=>{$("name",se(),()=>{ee(n.name).isNotBlank()})}),fe(!n.givenName,()=>{$("givenName",se(),()=>{ee(n.givenName).isNotBlank()})}),fe(!n.familyName,()=>{$("familyName",se(),()=>{ee(n.familyName).isNotBlank()})}),fe(!n.middleName,()=>{$("middleName",se(),()=>{ee(n.middleName).isNotBlank()})}),fe(!n.nickname,()=>{$("nickname",se(),()=>{ee(n.nickname).isNotBlank()})}),fe(!n.gender,()=>{$("gender",se(),()=>{ee(n.gender).isNotBlank()})}),fe(!n.zoneInfo,()=>{$("zoneInfo",se(),()=>{ee(n.zoneInfo).isNotBlank()})}),fe(!n.locale,()=>{$("locale",se(),()=>{ee(n.locale).isNotBlank()})}),fe(!n.address,()=>{$("address",se(),()=>{ee(n.address).isNotBlank()})}),fe(!n.birthdate,()=>{$("birthdate",se(),()=>{ee(n.birthdate).isNotBlank()})}),fe(!n.profilePicture,()=>{$("profilePicture",Ta(),()=>{ee(n.profilePicture).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),fe(!n.website,()=>{$("website",Ta(),()=>{ee(n.website).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}))});function ge(n,r,i){r.add(n.currentTarget.name),i()}function ei(n,r,i,v,p){r.add(n.currentTarget.name),i(),v(new Date(e(p)))}var ai=H('<div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="ml-1 flex-grow"><label for="nickname"> </label> <input type="text" name="nickname"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="givenName"> </label> <input type="text" name="givenName"> <!></div> <div class="mx-1 flex-grow"><label for="middleName"> </label> <input type="text" name="middleName"> <!></div> <div class="ml-1 flex-grow"><label for="familyName"> </label> <input type="text" name="familyName"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="profilePicture"> </label> <input type="text" name="profilePicture"> <!></div> <div class="ml-1 flex-grow"><label for="website"> </label> <input type="text" name="website"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="gender"> </label> <select name="gender"><option> </option><option> </option></select> <!></div> <div class="ml-1 flex-grow"><label for="birthdate"> </label> <input type="date" name="birthdate"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="zoneInfo"> </label> <input type="text" name="zoneInfo"> <!></div> <div class="ml-1 flex-grow"><label for="locale"> </label> <input type="text" name="locale"> <!></div></div> <div class="mb-2"><label for="address"> </label> <input type="text" name="address"> <!></div>',1);function ti(n,r){var Ia;xe(r,!0);let i=X(r,"name",15),v=X(r,"givenName",15),p=X(r,"familyName",15),h=X(r,"middleName",15),k=X(r,"nickname",15),b=X(r,"profilePicture",15),y=X(r,"website",15),g=X(r,"gender",15),E=X(r,"birthdate",15),D=X(r,"zoneInfo",15),P=X(r,"locale",15),j=X(r,"address",15),O=X(r,"valid",15,!1),N=m(u((Ia=E())==null?void 0:Ia.toISOString().substring(0,10))),x=$r(),w=m(u(x.get())),I=T(()=>Je(e(w),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,c=He(()=>{x({name:i(),givenName:v(),familyName:p(),middleName:h(),nickname:k(),profilePicture:b(),website:y(),gender:g(),birthdate:E(),zoneInfo:D(),locale:P(),address:j()},Array.from(f)).done(Ge=>{s(w,u(Ge)),O(e(w).isValid())}),f.clear()},300);function F(){var Ge,Ea,Ca,Ua,Pa,Sa,Da,Aa,ja,Ba;j((Ge=j())==null?void 0:Ge.trim()),p((Ea=p())==null?void 0:Ea.trim()),g((Ca=g())==null?void 0:Ca.trim()),v((Ua=v())==null?void 0:Ua.trim()),h((Pa=h())==null?void 0:Pa.trim()),k((Sa=k())==null?void 0:Sa.trim()),b((Da=b())==null?void 0:Da.trim()),y((Aa=y())==null?void 0:Aa.trim()),D((ja=D())==null?void 0:ja.trim()),P((Ba=P())==null?void 0:Ba.trim()),f.add("name"),f.add("givenName"),f.add("familyName"),f.add("middleName"),f.add("nickname"),f.add("profilePicture"),f.add("website"),f.add("gender"),f.add("birthdate"),f.add("zoneInfo"),f.add("locale"),f.add("address"),c(),c.flush()}ya(F);var G=ai(),q=ke(G),C=t(q),L=t(C),B=t(L,!0);d(()=>_(B,Yt())),a(L);var o=l(L,2);ae(o);const z=T(()=>`w-full ${e(I)("name")??""}`);d(()=>de(o,"placeholder",Bt())),o.__input=[ge,f,c];var Z=l(o,2);re(Z,{name:"name",get result(){return e(w)}}),a(C);var te=l(C,2),Y=t(te),S=t(Y,!0);d(()=>_(S,Zt())),a(Y);var K=l(Y,2);ae(K);const ve=T(()=>`w-full ${e(I)("nickname")??""}`);d(()=>de(K,"placeholder",zt())),K.__input=[ge,f,c];var ce=l(K,2);re(ce,{name:"nickname",get result(){return e(w)}}),a(te),a(q);var W=l(q,2),V=t(W),U=t(V),R=t(U,!0);d(()=>_(R,Jt())),a(U);var J=l(U,2);ae(J);const oe=T(()=>`w-full ${e(I)("givenName")??""}`);d(()=>de(J,"placeholder",Tt())),J.__input=[ge,f,c];var Ie=l(J,2);re(Ie,{name:"givenName",get result(){return e(w)}}),a(V);var A=l(V,2),le=t(A),Q=t(le,!0);d(()=>_(Q,Kt())),a(le);var ne=l(le,2);ae(ne);const Ee=T(()=>`w-full ${e(I)("middleName")??""}`);d(()=>de(ne,"placeholder",qt())),ne.__input=[ge,f,c];var Ke=l(ne,2);re(Ke,{name:"middleName",get result(){return e(w)}}),a(A);var ye=l(A,2),We=t(ye),Xe=t(We,!0);d(()=>_(Xe,Wt())),a(We);var Ce=l(We,2);ae(Ce);const ta=T(()=>`w-full ${e(I)("familyName")??""}`);d(()=>de(Ce,"placeholder",Vt())),Ce.__input=[ge,f,c];var ra=l(Ce,2);re(ra,{name:"familyName",get result(){return e(w)}}),a(ye),a(W);var Qe=l(W,2),be=t(Qe),me=t(be),ze=t(me,!0);d(()=>_(ze,Xt())),a(me);var pe=l(me,2);ae(pe);const Te=T(()=>`w-full ${e(I)("profilePicture")??""}`);d(()=>de(pe,"placeholder",Ft())),pe.__input=[ge,f,c];var oa=l(pe,2);re(oa,{name:"profilePicture",get result(){return e(w)}}),a(be);var $e=l(be,2),qe=t($e),ua=t(qe,!0);d(()=>_(ua,Qt())),a(qe);var we=l(qe,2);ae(we);const va=T(()=>`w-full ${e(I)("website")??""}`);d(()=>de(we,"placeholder",Ot())),we.__input=[ge,f,c];var ia=l(we,2);re(ia,{name:"website",get result(){return e(w)}}),a($e),a(Qe);var Ve=l(Qe,2),ea=t(Ve),Pe=t(ea),Se=t(Pe,!0);d(()=>_(Se,$t())),a(Pe);var De=l(Pe,2);const $a=T(()=>`w-full ${e(I)("gender")??""}`);d(()=>de(De,"placeholder",Lt())),De.__input=[ge,f,c];var aa=t(De);aa.value=(aa.__value="male")==null?"":"male";var et=t(aa,!0);d(()=>_(et,er())),a(aa);var la=l(aa);la.value=(la.__value="female")==null?"":"female";var at=t(la,!0);d(()=>_(at,ar())),a(la),a(De);var tt=l(De,2);re(tt,{name:"gender",get result(){return e(w)}}),a(ea);var wa=l(ea,2),ma=t(wa),rt=t(ma,!0);d(()=>_(rt,tr())),a(ma);var Fe=l(ma,2);ae(Fe);const it=T(()=>`w-full ${e(I)("birthdate")??""}`);d(()=>de(Fe,"placeholder",Mt())),Fe.__input=[ei,f,c,E,N];var lt=l(Fe,2);re(lt,{name:"birthdate",get result(){return e(w)}}),a(wa),a(Ve);var _a=l(Ve,2),fa=t(_a),ca=t(fa),nt=t(ca,!0);d(()=>_(nt,rr())),a(ca);var Oe=l(ca,2);ae(Oe);const st=T(()=>`w-full ${e(I)("zoneInfo")??""}`);d(()=>de(Oe,"placeholder",Gt())),Oe.__input=[ge,f,c];var dt=l(Oe,2);re(dt,{name:"zoneInfo",get result(){return e(w)}}),a(fa);var ka=l(fa,2),ba=t(ka),ot=t(ba,!0);d(()=>_(ot,ir())),a(ba);var Le=l(ba,2);ae(Le);const ut=T(()=>`w-full ${e(I)("locale")??""}`);d(()=>de(Le,"placeholder",Rt())),Le.__input=[ge,f,c];var vt=l(Le,2);re(vt,{name:"locale",get result(){return e(w)}}),a(ka),a(_a);var Na=l(_a,2),pa=t(Na),mt=t(pa,!0);d(()=>_(mt,lr())),a(pa);var Me=l(pa,2);ae(Me);const _t=T(()=>`w-full ${e(I)("address")??""}`);d(()=>de(Me,"placeholder",Ht())),Me.__input=[ge,f,c];var ft=l(Me,2);return re(ft,{name:"address",get result(){return e(w)}}),a(Na),d(()=>{ie(o,e(z)),ie(K,e(ve)),ie(J,e(oe)),ie(ne,e(Ee)),ie(Ce,e(ta)),ie(pe,e(Te)),ie(we,e(va)),ie(De,e($a)),ie(Fe,e(it)),ie(Oe,e(st)),ie(Le,e(ut)),ie(Me,e(_t))}),ue(o,i),ue(K,k),ue(J,v),ue(ne,h),ue(Ce,p),ue(pe,b),ue(we,y),Ir(De,g),ue(Fe,()=>e(N),Ge=>s(N,Ge)),ue(Oe,D),ue(Le,P),ue(Me,j),M(n,G),he({validateAll:F})}Ne(["input"]);var ri=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ii=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function li(n,r){xe(r,!0);let i=X(r,"user",15),v=m(u(i().info.address)),p=m(u(i().info.familyName)),h=m(u(i().info.gender)),k=m(u(i().info.givenName)),b=m(u(i().info.locale)),y=m(u(i().info.middleName)),g=m(u(i().info.name)),E=m(u(i().info.nickname)),D=m(u(i().info.profilePicture)),P=m(u(i().info.website)),j=m(u(i().info.birthdate)),O=m(u(i().info.zoneInfo)),N=m(void 0),x=m(!1),w=m(!1),I=T(()=>e(w)||!e(x));async function f(o){var z;o.preventDefault();try{s(w,!0),(z=e(N))==null||z.validateAll(),e(x)&&i(i().info=await Ue.updateUserInfo(i().id,{name:e(g),givenName:e(k),familyName:e(p),middleName:e(y),nickname:e(E),profilePicture:e(D),website:e(P),gender:e(h),birthdate:e(j),zoneInfo:e(O),locale:e(b),address:e(v)},r.applicationId),!0)}catch(Z){await Be(Z)}finally{s(w,!1)}}var c=ii(),F=t(c);da(ti(F,{get address(){return e(v)},set address(o){s(v,u(o))},get familyName(){return e(p)},set familyName(o){s(p,u(o))},get gender(){return e(h)},set gender(o){s(h,u(o))},get givenName(){return e(k)},set givenName(o){s(k,u(o))},get locale(){return e(b)},set locale(o){s(b,u(o))},get middleName(){return e(y)},set middleName(o){s(y,u(o))},get name(){return e(g)},set name(o){s(g,u(o))},get nickname(){return e(E)},set nickname(o){s(E,u(o))},get profilePicture(){return e(D)},set profilePicture(o){s(D,u(o))},get birthdate(){return e(j)},set birthdate(o){s(j,u(o))},get website(){return e(P)},set website(o){s(P,u(o))},get zoneInfo(){return e(O)},set zoneInfo(o){s(O,u(o))},get valid(){return e(x)},set valid(o){s(x,u(o))}}),o=>s(N,u(o)),()=>e(N));var G=l(F,2),q=t(G),C=t(q);{var L=o=>{var z=ri(),Z=t(z),te=t(Z);je(te),a(Z),a(z),M(o,z)};_e(C,o=>{e(w)&&o(L)})}var B=l(C);d(()=>_(B,` ${nr()??""}`)),a(q),a(G),a(c),d(()=>q.disabled=e(I)),Ae("submit",c,f),M(n,c),he()}const ni=()=>Ye((n,r)=>{r.length&&(Ze(r),$("username",se(),()=>{ee(n.username).isNotBlank()}),$("active",se(),()=>{ee(n.active).isNotBlank()}))});function Oa(n,r,i){r.add(n.currentTarget.name),i()}var si=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),di=H('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div><label for="active" class="m-0"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function oi(n,r){xe(r,!0);let i=X(r,"user",15),v=m(u(i().username)),p=m(u(i().active)),h=ni(),k=m(u(h.get())),b=m(!1),y=T(()=>e(b)),g=T(()=>Je(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const E=new Set,D=He(()=>{h({username:e(v),active:e(p)},Array.from(E)).done(S=>{s(k,u(S))}),E.clear()},300);function P(){var S;s(v,u((S=e(v))==null?void 0:S.trim())),E.add("username"),E.add("active"),D(),D.flush()}async function j(S){S.preventDefault();try{s(b,!0),P(),e(k).isValid()&&(i(await Ue.updateUser(i().id,{username:e(v),active:e(p)},r.applicationId)),r.onEdit(i()))}catch(K){await Be(K)}finally{s(b,!1)}}ya(P);var O=di(),N=t(O),x=t(N),w=t(x,!0);d(()=>_(w,Ga())),a(x);var I=l(x,2);ae(I);const f=T(()=>`w-full ${e(g)("username")??""}`);d(()=>de(I,"placeholder",Ma())),I.__input=[Oa,E,D];var c=l(I,2);re(c,{name:"username",get result(){return e(k)}}),a(N);var F=l(N,2),G=t(F),q=t(G);d(()=>_(q,`${Ra()??""} `));var C=l(q);ae(C);const L=T(()=>sa(e(g)("active")));C.__input=[Oa,E,D],a(G);var B=l(G,2);re(B,{name:"active",get result(){return e(k)}}),a(F);var o=l(F,2),z=t(o),Z=t(z);{var te=S=>{var K=si(),ve=t(K),ce=t(ve);je(ce),a(ve),a(K),M(S,K)};_e(Z,S=>{e(b)&&S(te)})}var Y=l(Z);d(()=>_(Y,` ${sr()??""}`)),a(z),a(o),a(O),d(()=>{ie(I,e(f)),ie(C,e(L)),z.disabled=e(y)}),Ae("submit",O,j),ue(I,()=>e(v),S=>s(v,S)),Re(C,()=>e(p),S=>s(p,S)),M(n,O),he()}Ne(["input"]);var ui=H('<!> <hr class="my-2"> <!> <hr class="my-2"> <!>',1);function vi(n,r){let i=X(r,"user",15);var v=ui(),p=ke(v);oi(p,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(b){i(b)}});var h=l(p,4);Qr(h,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(b){i(b)}});var k=l(h,4);li(k,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(b){i(b)}}),M(n,v)}const La=20;var mi=H('<button class="btn secondary icon lg"><!></button>'),_i=H('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),fi=H('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ci=H("<h3> </h3>"),bi=H("<h3> </h3>"),pi=H("<h3> </h3>"),gi=H('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function xi(n,r){xe(r,!0);let i=X(r,"users",31,()=>u([])),v=m(0),p=m(!0),h=m(!1),k=m(void 0);ct(()=>{e(k)!==r.applicationId&&(s(k,u(r.applicationId)),s(v,0),s(p,!0),s(h,!1),i([]),b())});async function b(){if(!e(p)||e(h))return;let V;s(h,!0);try{V=await Ue.allUsers(e(v)*La,La,r.applicationId)}finally{s(h,!1)}s(p,u(V.hasMore)),s(v,e(v)+1),i().push(...V.items)}let y=m(!1);function g(){s(y,!0)}function E(V){i().unshift(V),s(y,!1)}let D=m(void 0),P=m(!1);function j(V){return()=>{s(D,u(V)),s(P,!0)}}function O(V){const U=i().findIndex(R=>R.id===(V==null?void 0:V.id));U!==-1&&i(i()[U]=V,!0)}let N=m(void 0),x=m(!1);function w(V){return()=>{s(N,u(V)),s(x,!0)}}function I(){const V=i().findIndex(U=>{var R;return U.id===((R=e(N))==null?void 0:R.id)});V!==-1&&i().splice(V,1),s(N,void 0),s(x,!1)}var f=gi(),c=ke(f),F=t(c),G=t(F),q=t(G),C=t(q,!0);d(()=>_(C,ur())),a(q);var L=l(q),B=t(L,!0);d(()=>_(B,vr())),a(L);var o=l(L),z=t(o,!0);d(()=>_(z,mr())),a(o);var Z=l(o),te=t(Z,!0);d(()=>_(te,_r())),a(Z);var Y=l(Z),S=t(Y,!0);d(()=>_(S,fr())),a(Y),bt(),a(G),a(F);var K=l(F);Ja(K,23,i,V=>V.id,(V,U,R)=>{var J=fi(),oe=t(J),Ie=t(oe,!0);a(oe);var A=l(oe),le=t(A,!0);a(A);var Q=l(A),ne=t(Q);{var Ee=be=>{var me=za();d(()=>_(me,cr())),M(be,me)},Ke=be=>{var me=za();d(()=>_(me,br())),M(be,me)};_e(ne,be=>{e(U).active?be(Ee):be(Ke,!1)})}a(Q);var ye=l(Q),We=t(ye,!0);d(()=>_(We,e(U).updatedAt.toLocaleString())),a(ye);var Xe=l(ye),Ce=t(Xe,!0);d(()=>_(Ce,e(U).createdAt.toLocaleString())),a(Xe);var ta=l(Xe),ra=t(ta),Qe=t(ra);kr(Qe,{position:"top-right",anchorPosition:"bottom-right",button:me=>{var ze=mi(),pe=t(ze);Nr(pe,{}),a(ze),M(me,ze)},children:(me,ze)=>{var pe=_i(),Te=ke(pe),oa=T(()=>j(e(U)));Te.__click=function(...Pe){var Se;(Se=e(oa))==null||Se.apply(this,Pe)};var $e=t(Te);Ka($e,{});var qe=l($e),ua=t(qe,!0);d(()=>_(ua,pr())),a(qe),a(Te);var we=l(Te,2),va=T(()=>w(e(U)));we.__click=function(...Pe){var Se;(Se=e(va))==null||Se.apply(this,Pe)};var ia=t(we);Wa(ia,{});var Ve=l(ia),ea=t(Ve,!0);d(()=>_(ea,gr())),a(Ve),a(we),M(me,pe)},$$slots:{button:!0,default:!0}}),a(ra),a(ta),a(J),d(()=>{ha(J,"border-b",e(R)<i().length-1),_(Ie,e(U).id),_(le,e(U).username)}),M(V,J)}),a(K),a(c);var ve=l(c,2);na(ve,{get open(){return e(y)},set open(U){s(y,u(U))},title:U=>{var R=ci(),J=t(R,!0);d(()=>_(J,xr())),a(R),M(U,R)},children:(U,R)=>{Sr(U,{get applicationId(){return r.applicationId},onCreate:E})},$$slots:{title:!0,default:!0}});var ce=l(ve,2);na(ce,{get open(){return e(P)},set open(U){s(P,u(U))},title:U=>{var R=bi(),J=t(R,!0);d(()=>{var oe;return _(J,dr({username:((oe=e(D))==null?void 0:oe.username)||""}))}),a(R),M(U,R)},children:(U,R)=>{var J=xa(),oe=ke(J);{var Ie=A=>{vi(A,{get applicationId(){return r.applicationId},get user(){return e(D)},onEdit:O})};_e(oe,A=>{e(D)&&A(Ie)})}M(U,J)},$$slots:{title:!0,default:!0}});var W=l(ce,2);return na(W,{get open(){return e(x)},set open(U){s(x,u(U))},title:U=>{var R=pi(),J=t(R,!0);d(()=>{var oe;return _(J,or({username:((oe=e(N))==null?void 0:oe.username)||""}))}),a(R),M(U,R)},children:(U,R)=>{var J=xa(),oe=ke(J);{var Ie=A=>{zr(A,{get applicationId(){return r.applicationId},get userId(){return e(N).id},get username(){return e(N).username},onDelete:I})};_e(oe,A=>{e(N)&&A(Ie)})}M(U,J)},$$slots:{title:!0,default:!0}}),M(n,f),he({loadMore:b,onCreate:g})}Ne(["click"]);var hi=H('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function qi(n,r){xe(r,!0);let i=m(void 0);const v=yr(),[p,h]=v;var k=hi();gt(I=>{d(()=>pt.title=hr())});var b=t(k),y=t(b),g=t(y),E=t(g);d(()=>de(E,"href",p(`${wr}/`,void 0)));var D=t(E),P=t(D);Er(P,{}),a(D),a(E);var j=l(E,2),O=t(j,!0);a(j),a(g);var N=l(g,2);N.__click=function(...I){var f,c;(c=(f=e(i))==null?void 0:f.onCreate)==null||c.apply(this,I)};var x=t(N);Xa(x,{}),a(N),a(y);var w=l(y,2);da(xi(w,{get applicationId(){return r.data.applicationId}}),I=>s(i,u(I)),()=>e(i)),a(b),a(k),d(()=>_(O,r.data.application.name)),M(n,k),he()}Ne(["click"]);export{qi as component};
