import{c as xt,a as k,t as D}from"../chunks/disclose-version.DrWTZEMc.js";import{f as J,p as it,w as A,i as t,x as l,t as o,a as st,c as a,s,r as e,k as V,$ as pe,ad as _e}from"../chunks/runtime.BOcB0i4C.js";import{d as ot,e as yt,s as f,h as fe}from"../chunks/render.CHcgKWWy.js";import{i as K}from"../chunks/runtime.qIrDYYv_.js";import{d as wt,e as $t,r as kt,s as q,b as At,I as Qt,J as me,m as be,K as he,L as ge,M as xe,N as ye,t as we,O as $e,w as ke,P as Ae,Q as Ce,R as Se,S as je,T as Ie,U as De,V as Ee,W as Me,X as Pe,Y as Te,Z as Ne,_ as Oe}from"../chunks/debounce.DAmdUp_2.js";import{p as C}from"../chunks/proxy.C01Lgihj.js";import{o as Ve}from"../chunks/index-client.CDjIKsSM.js";import{I as Le,s as Be,g as Fe,D as Ge}from"../chunks/Dropdown.CZaWqXjv.js";import{a as lt}from"../chunks/index.Ch86im5p.js";import{b as bt}from"../chunks/paths.2tyyIn2U.js";import{P as Re,M as ht,a as Ue,T as Ze,E as qe}from"../chunks/Modal.J4_VPY9n.js";import{I as Ct,b as St,G as jt,m as It,C as nt,v as rt,S as Dt,h as Et,a as Mt}from"../chunks/InputResults.BQnRkFhZ.js";import{l as ze,s as He,p as Je}from"../chunks/props.D-n0bGyQ.js";import"../chunks/legacy.q0Uc9FIK.js";function gt(d,n){const r=ze(n,["children","$$slots","$$events","$$legacy"]);Le(d,He({name:"external-link"},()=>r,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(m,b)=>{var j=xt(),B=J(j);Be(B,n,"default",{}),k(m,j)},$$slots:{default:!0}}))}const Ke=()=>jt((d={},n)=>{n.length&&(It(n),nt("name",$t(),()=>{rt(d.name).isNotBlank()}))});function Qe(d,n,r){n.add(d.currentTarget.name),r()}var We=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Xe=D('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ye(d,n){it(n,!0);let r=A(""),S=Ke(),m=A(C(S.get())),b=A(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=wt(()=>{S({name:t(r)},Array.from(p)).done(u=>{l(m,C(u))}),p.clear()},300);function R(){p.add("name"),y(),y.flush()}async function U(u){u.preventDefault();try{l(b,!0),l(r,C(t(r).trim())),R(),t(m).isValid()&&n.onCreate(await lt.createApplication({name:t(r)}))}catch(g){await Et(g)}finally{l(b,!1)}}var c=Xe(),w=a(c),h=a(w);kt(h);const F=V(()=>`w-full ${t(B)("name")??""}`);o(()=>q(h,"placeholder",Qt())),h.__input=[Qe,p,y];var E=s(h,2);Ct(E,{name:"name",get result(){return t(m)}}),e(w);var P=s(w,2),L=a(P),T=a(L);{var N=u=>{var g=We(),x=a(g),M=a(x);Dt(M),e(x),e(g),k(u,g)};K(T,u=>{t(b)&&u(N)})}var G=s(T);o(()=>f(G,` ${me()??""}`)),e(L),e(P),e(c),o(()=>{At(h,t(F)),L.disabled=t(j)}),yt("submit",c,U),St(h,()=>t(r),u=>l(r,u)),k(d,c),st()}ot(["input"]);const ta=()=>jt((d={},n)=>{n.length&&(It(n),nt("nameConfirm",$t(),()=>{rt(d.nameConfirm).isNotBlank()}),nt("nameConfirm",be(),()=>{rt(d.name===d.nameConfirm).isTruthy()}))});function ea(d,n,r){n.add(d.currentTarget.name),r()}var aa=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),na=D('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ra(d,n){it(n,!0);let r=A(""),S=ta(),m=A(C(S.get())),b=A(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=wt(()=>{S({name:n.name,nameConfirm:t(r)},Array.from(p)).done(x=>{l(m,C(x))}),p.clear()},300);function R(){p.add("name"),y(),y.flush()}async function U(x){x.preventDefault();try{l(b,!0),l(r,C(t(r).trim())),R(),t(m).isValid()&&(await lt.deleteApplication(n.applicationId),n.onDelete())}catch(M){await Et(M)}finally{l(b,!1)}}var c=na(),w=a(c),h=a(w,!0);o(()=>f(h,ge())),e(w);var F=s(w,2),E=a(F);kt(E);const P=V(()=>`w-full ${t(B)("nameConfirm")??""}`);o(()=>q(E,"placeholder",he({name:n.name}))),E.__input=[ea,p,y];var L=s(E,2);Ct(L,{name:"nameConfirm",get result(){return t(m)}}),e(F);var T=s(F,2),N=a(T),G=a(N);{var u=x=>{var M=aa(),Z=a(M),Q=a(Z);Dt(Q),e(Z),e(M),k(x,M)};K(G,x=>{t(b)&&x(u)})}var g=s(G);o(()=>f(g,` ${xe()??""}`)),e(N),e(T),e(c),o(()=>{At(E,t(P)),N.disabled=t(j)}),yt("submit",c,U),St(E,()=>t(r),x=>l(r,x)),k(d,c),st()}ot(["input"]);const ia=()=>jt((d={},n)=>{n.length&&(It(n),nt("name",$t(),()=>{rt(d.name).isNotBlank()}))});function sa(d,n,r){n.add(d.currentTarget.name),r()}var oa=D('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),la=D('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function da(d,n){it(n,!0);let r=Je(n,"name",15,""),S=ia(),m=A(C(S.get())),b=A(!1),j=V(()=>t(b)),B=V(()=>Mt(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const p=new Set,y=wt(()=>{S({name:r()},Array.from(p)).done(u=>{l(m,C(u))}),p.clear()},300);function R(){p.add("name"),y(),y.flush()}async function U(u){u.preventDefault();try{l(b,!0),r(r().trim()),R(),t(m).isValid()&&n.onEdit(await lt.updateApplication(n.applicationId,{name:r()}))}catch(g){await Et(g)}finally{l(b,!1)}}var c=la(),w=a(c),h=a(w);kt(h);const F=V(()=>`w-full ${t(B)("name")??""}`);o(()=>q(h,"placeholder",Qt())),h.__input=[sa,p,y];var E=s(h,2);Ct(E,{name:"name",get result(){return t(m)}}),e(w);var P=s(w,2),L=a(P),T=a(L);{var N=u=>{var g=oa(),x=a(g),M=a(x);Dt(M),e(x),e(g),k(u,g)};K(T,u=>{t(b)&&u(N)})}var G=s(T);o(()=>f(G,` ${ye()??""}`)),e(L),e(P),e(c),o(()=>{At(h,t(F)),L.disabled=t(j)}),yt("submit",c,U),St(h,r),k(d,c),st()}ot(["input"]);const Kt=20;function va(d,n){l(n,!0)}var ua=D('<button class="btn secondary icon lg"><!></button>'),ca=D('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),pa=D('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),_a=D("<h3> </h3>"),fa=D("<h3> </h3>"),ma=D("<h3> </h3>"),ba=D('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-end"><button class="btn primary icon lg"><!></button></div> <table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table></div></div> <!> <!> <!>',1);function Pa(d,n){it(n,!0);let r=C([]),S=A(0),m=A(!0);Ve(b);async function b(){if(!t(m))return;const v=await lt.allApplications(t(S)*Kt,Kt);l(m,C(v.hasMore)),l(S,t(S)+1),r.push(...v.items)}let j=A(!1);function B(v){r.unshift(v),l(j,!1)}let p=A(void 0),y=A(!1);function R(v){return()=>{l(p,C(v)),l(y,!0)}}function U(v){const i=r.findIndex(_=>_.id===(v==null?void 0:v.id));i!==-1&&(r[i]=v),l(p,void 0),l(y,!1)}let c=A(void 0),w=A(!1);function h(v){return()=>{l(c,C(v)),l(w,!0)}}function F(){const v=r.findIndex(i=>{var _;return i.id===((_=t(c))==null?void 0:_.id)});v!==-1&&r.splice(v,1),l(c,void 0),l(w,!1)}const E=Fe(),[P,L]=E;var T=ba();fe(v=>{o(()=>pe.title=$e())});var N=J(T),G=a(N),u=a(G),g=a(u);g.__click=[va,j];var x=a(g);Re(x,{}),e(g),e(u);var M=s(u,2),Z=a(M),Q=a(Z),dt=a(Q),Wt=a(dt,!0);o(()=>f(Wt,Se())),e(dt);var vt=s(dt),Xt=a(vt,!0);o(()=>f(Xt,je())),e(vt);var ut=s(vt),Yt=a(ut,!0);o(()=>f(Yt,Ie())),e(ut);var Pt=s(ut),te=a(Pt,!0);o(()=>f(te,De())),e(Pt),_e(),e(Q),e(Z);var Tt=s(Z);we(Tt,23,()=>r,v=>v.id,(v,i,_)=>{var $=pa(),I=a($),z=a(I,!0);e(I);var O=s(I),ae=a(O,!0);e(O);var ct=s(O),ne=a(ct,!0);o(()=>f(ne,t(i).updatedAt.toLocaleString())),e(ct);var pt=s(ct),re=a(pt,!0);o(()=>f(re,t(i).createdAt.toLocaleString())),e(pt);var Vt=s(pt),Lt=a(Vt),ie=a(Lt);Ge(ie,{position:"top-right",anchorPosition:"bottom-right",button:_t=>{var W=ua(),X=a(W);qe(X,{}),e(W),k(_t,W)},children:(_t,W)=>{var X=ca(),Y=J(X);o(()=>q(Y,"href",P(`${bt}/applications/${t(i).id}/users`,void 0)));var Bt=a(Y);gt(Bt,{});var Ft=s(Bt),se=a(Ft,!0);o(()=>f(se,Ee())),e(Ft),e(Y);var tt=s(Y,2);o(()=>q(tt,"href",P(`${bt}/applications/${t(i).id}/service-accounts`,void 0)));var Gt=a(tt);gt(Gt,{});var Rt=s(Gt),oe=a(Rt,!0);o(()=>f(oe,Me())),e(Rt),e(tt);var et=s(tt,2);o(()=>q(et,"href",P(`${bt}/applications/${t(i).id}/tenants`,void 0)));var Ut=a(et);gt(Ut,{});var Zt=s(Ut),le=a(Zt,!0);o(()=>f(le,Pe())),e(Zt),e(et);var at=s(et,2),de=V(()=>R(t(i)));at.__click=function(...mt){var H;(H=t(de))==null||H.apply(this,mt)};var qt=a(at);Ue(qt,{});var zt=s(qt),ve=a(zt,!0);o(()=>f(ve,Te())),e(zt),e(at);var ft=s(at,2),ue=V(()=>h(t(i)));ft.__click=function(...mt){var H;(H=t(ue))==null||H.apply(this,mt)};var Ht=a(ft);Ze(Ht,{});var Jt=s(Ht),ce=a(Jt,!0);o(()=>f(ce,Ne())),e(Jt),e(ft),k(_t,X)},$$slots:{button:!0,default:!0}}),e(Lt),e(Vt),e($),o(()=>{ke($,"border-b",t(_)<r.length-1),f(z,t(i).id),f(ae,t(i).name)}),k(v,$)}),e(Tt),e(M),e(G),e(N);var Nt=s(N,2);ht(Nt,{get open(){return t(j)},set open(i){l(j,C(i))},title:i=>{var _=_a(),$=a(_,!0);o(()=>f($,Oe())),e(_),k(i,_)},children:(i,_)=>{Ye(i,{onCreate:B})},$$slots:{title:!0,default:!0}});var Ot=s(Nt,2);ht(Ot,{get open(){return t(y)},set open(i){l(y,C(i))},title:i=>{var _=fa(),$=a(_,!0);o(()=>{var I;return f($,Ae({name:((I=t(p))==null?void 0:I.name)||""}))}),e(_),k(i,_)},children:(i,_)=>{var $=xt(),I=J($);{var z=O=>{da(O,{get applicationId(){return t(p).id},get name(){return t(p).name},onEdit:U})};K(I,O=>{t(p)&&O(z)})}k(i,$)},$$slots:{title:!0,default:!0}});var ee=s(Ot,2);ht(ee,{get open(){return t(w)},set open(i){l(w,C(i))},title:i=>{var _=ma(),$=a(_,!0);o(()=>{var I;return f($,Ce({name:((I=t(c))==null?void 0:I.name)||""}))}),e(_),k(i,_)},children:(i,_)=>{var $=xt(),I=J($);{var z=O=>{ra(O,{get applicationId(){return t(c).id},get name(){return t(c).name},onDelete:F})};K(I,O=>{t(c)&&O(z)})}k(i,$)},$$slots:{title:!0,default:!0}}),k(d,T),st()}ot(["click"]);export{Pa as component};
