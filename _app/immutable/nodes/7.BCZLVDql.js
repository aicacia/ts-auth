import{a as D,t as F,c as _e}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as H,x as S,j as e,y as l,t as c,a as J,c as a,r as t,s as n,l as V,f as W,aj as vt,$ as ut}from"../chunks/runtime.psM0e5Y8.js";import{d as re,e as ke,s as f,h as _t}from"../chunks/render.Cjq5XT8C.js";import{d as Ce,e as ce,r as ae,s as Y,c as fe,aO as Pe,aP as Te,aQ as ft,aR as Qe,aS as Ye,aT as He,aU as mt,aV as bt,aW as pt,aX as Je,aY as Ke,n as ht,aZ as gt,a_ as xt,a$ as yt,b0 as wt,u as St,v as It,b1 as At,b2 as kt,b3 as Ct,b4 as Pt,b5 as Tt,b6 as jt,b7 as Dt,b8 as Et,b9 as Nt,ba as Mt,bb as Ot,bc as Bt,bd as Vt}from"../chunks/debounce.B2AM-79h.js";import{p as I}from"../chunks/proxy.BhkZ7AL-.js";import{l as Ft,s as Lt,p as le,b as Gt}from"../chunks/props.DuEunOx7.js";import{I as Rt,s as Ut,D as Zt,g as qt}from"../chunks/Dropdown.DLBKEX9f.js";import{b as zt}from"../chunks/paths.Cvfw2cHb.js";import{i as $}from"../chunks/runtime.CsaQGn2V.js";import{o as je}from"../chunks/index-client.DYF3A4K-.js";import{e as be}from"../chunks/index.BFBrPiR5.js";import{M as ue,P as Qt,T as Wt,E as Xt,a as Yt}from"../chunks/Modal.D2ORI96r.js";import{I as se,b as me,G as De,m as Ee,C as ee,v as te,S as Ne,h as Me,a as Oe}from"../chunks/InputResults.BVJUMeon.js";import{P as $e}from"../chunks/Password.D0QJhftJ.js";import"../chunks/legacy.Dj707JmE.js";import{C as Ht}from"../chunks/chevron-left.Dv7CjkCi.js";const Jt=()=>De((_,r)=>{r.length&&(Ee(r),ee("name",ce(),()=>{te(_.name).isNotBlank()}))});function Kt(_,r,i){r.add(_.currentTarget.name),i()}var $t=F('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ea=F('<form><label for="name"> </label> <input type="text" name="name"> <!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ta(_,r){H(r,!0);let i=S(!1),A=S(!1),k=V(()=>e(i)||!e(A)),h=S(""),g=Jt(),u=S(I(g.get())),C=V(()=>Oe(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,x=Ce(()=>{g({name:e(h)},Array.from(v)).done(b=>{l(u,I(b)),l(A,I(e(u).isValid()))}),v.clear()},300);function E(){v.add("name"),x(),x.flush()}je(E);async function P(b){b.preventDefault();try{l(i,!0),e(A)&&r.onCreate(await be.createServiceAccount({name:e(h)},r.applicationId))}catch(M){await Me(M)}finally{l(i,!1)}}var m=ea(),y=a(m),O=a(y,!0);c(()=>f(O,Te())),t(y);var o=n(y,2);ae(o);const d=V(()=>`w-full ${e(C)("name")??""}`);c(()=>Y(o,"placeholder",Pe())),o.__input=[Kt,v,x];var T=n(o,2);se(T,{name:"name",get result(){return e(u)}});var L=n(T,2),G=a(L),U=a(G);{var z=b=>{var M=$t(),R=a(M),B=a(R);Ne(B),t(R),t(M),D(b,M)};$(U,b=>{e(i)&&b(z)})}var N=n(U);c(()=>f(N,` ${ft()??""}`)),t(G),t(L),t(m),c(()=>{fe(o,e(d)),G.disabled=e(k)}),ke("submit",m,P),me(o,()=>e(h),b=>l(h,b)),D(_,m),J()}re(["input"]);function We(_,r){const i=Ft(r,["children","$$slots","$$events","$$legacy"]);Rt(_,Lt({name:"copy"},()=>i,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(k,h)=>{var g=_e(),u=W(g);Ut(u,r,"default",{}),D(k,g)},$$slots:{default:!0}}))}var aa=F('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function ra(_,r){H(r,!0);let i=S(!1);function A(R){return async()=>{try{l(i,!0),await mt(R),bt(pt(),"success")}finally{l(i,!1)}}}var k=aa(),h=W(k),g=a(h),u=a(g,!0);c(()=>f(u,Te())),t(g);var C=n(g,2);ae(C),c(()=>Y(C,"placeholder",Pe())),t(h);var v=n(h,2),x=a(v),E=a(x,!0);c(()=>f(E,Je())),t(x);var P=n(x,2),m=a(P);ae(m),c(()=>Y(m,"placeholder",Ye()));var y=n(m,2),O=V(()=>A(r.serviceAccount.clientId));y.__click=function(...R){var B;(B=e(O))==null||B.apply(this,R)};var o=a(y);We(o,{}),t(y),t(P),t(v);var d=n(v,2),T=a(d),L=a(T,!0);c(()=>f(L,Ke())),t(T);var G=n(T,2),U=a(G),z=V(()=>He());$e(U,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(z)},get value(){return r.serviceAccount.clientSecret}});var N=n(U,2),b=V(()=>A(r.serviceAccount.clientSecret));N.__click=function(...R){var B;(B=e(b))==null||B.apply(this,R)};var M=a(N);We(M,{}),t(N),t(G),t(d),c(()=>{Qe(C,r.serviceAccount.name),Qe(m,r.serviceAccount.clientId),y.disabled=e(i),N.disabled=e(i)}),D(_,k),J()}re(["click"]);const na=()=>De((_={},r)=>{r.length&&(Ee(r),ee("nameConfirm",ce(),()=>{te(_.nameConfirm).isNotBlank()}),ee("nameConfirm",ht(),()=>{te(_.name===_.nameConfirm).isTruthy()}))});function ia(_,r,i){r.add(_.currentTarget.name),i()}var la=F('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ca=F('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function sa(_,r){H(r,!0);let i=S(""),A=na(),k=S(I(A.get())),h=S(!1),g=V(()=>e(h)),u=V(()=>Oe(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const C=new Set,v=Ce(()=>{A({name:r.name,nameConfirm:e(i)},Array.from(C)).done(b=>{l(k,I(b))}),C.clear()},300);function x(){C.add("name"),v(),v.flush()}async function E(b){b.preventDefault();try{l(h,!0),l(i,I(e(i).trim())),x(),e(k).isValid()&&(await be.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(M){await Me(M)}finally{l(h,!1)}}var P=ca(),m=a(P),y=a(m,!0);c(()=>f(y,xt())),t(m);var O=n(m,2),o=a(O);ae(o);const d=V(()=>`w-full ${e(u)("nameConfirm")??""}`);c(()=>Y(o,"placeholder",gt({name:r.name}))),o.__input=[ia,C,v];var T=n(o,2);se(T,{name:"nameConfirm",get result(){return e(k)}}),t(O);var L=n(O,2),G=a(L),U=a(G);{var z=b=>{var M=la(),R=a(M),B=a(R);Ne(B),t(R),t(M),D(b,M)};$(U,b=>{e(h)&&b(z)})}var N=n(U);c(()=>f(N,` ${yt()??""}`)),t(G),t(L),t(P),c(()=>{fe(o,e(d)),G.disabled=e(g)}),ke("submit",P,E),me(o,()=>e(i),b=>l(i,b)),D(_,P),J()}re(["input"]);const oa=()=>De((_,r)=>{r.length&&(Ee(r),ee("name",ce(),()=>{te(_.name).isNotBlank()}),ee("clientId",ce(),()=>{te(_.clientId).isNotBlank()}),ee("clientSecret",ce(),()=>{te(_.clientSecret).isNotBlank()}))});var da=F('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function va(_,r){H(r,!0);let i=le(r,"name",15),A=le(r,"clientId",15),k=le(r,"clientSecret",15),h=le(r,"valid",15,!1),g=oa(),u=S(I(g.get())),C=V(()=>Oe(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,x=Ce(()=>{g({name:i(),clientId:A(),clientSecret:k()},Array.from(v)).done(Q=>{l(u,I(Q)),h(e(u).isValid())}),v.clear()},300);function E(){v.add("name"),v.add("clientId"),v.add("clientSecret"),x(),x.flush()}function P(Q){v.add(Q.currentTarget.name),x()}je(E);var m=da(),y=W(m),O=a(y),o=a(O,!0);c(()=>f(o,Te())),t(O);var d=n(O,2);ae(d);const T=V(()=>`w-full ${e(C)("name")??""}`);c(()=>Y(d,"placeholder",Pe())),d.__input=P;var L=n(d,2);se(L,{name:"name",get result(){return e(u)}}),t(y);var G=n(y,2),U=a(G),z=a(U,!0);c(()=>f(z,Je())),t(U);var N=n(U,2);ae(N);const b=V(()=>`w-full ${e(C)("clientId")??""}`);c(()=>Y(N,"placeholder",Ye())),N.__input=P;var M=n(N,2);se(M,{name:"clientId",get result(){return e(u)}}),t(G);var R=n(G,2),B=a(R),pe=a(B,!0);c(()=>f(pe,Ke())),t(B);var K=n(B,2),he=V(()=>e(C)("clientSecret")),ne=V(()=>He());$e(K,{get class(){return e(he)},name:"clientSecret",get placeholder(){return e(ne)},oninput:P,get value(){return k()},set value(Q){k(Q)}});var ge=n(K,2);se(ge,{name:"clientSecret",get result(){return e(u)}}),t(R),c(()=>{fe(d,e(T)),fe(N,e(b))}),me(d,i),me(N,A),D(_,m),J()}re(["input"]);var ua=F('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),_a=F('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function fa(_,r){H(r,!0);let i=S(!1),A=S(!1),k=V(()=>e(i)||!e(A)),h=S(I(r.serviceAccount.name)),g=S(I(r.serviceAccount.clientId)),u=S(I(r.serviceAccount.clientSecret));async function C(o){o.preventDefault();try{l(i,!0),e(A)&&r.onEdit(await be.updateServiceAccount(r.serviceAccount.id,{name:e(h),clientId:e(g)?e(g):void 0,clientSecret:e(u)?e(u):void 0},r.applicationId))}catch(d){await Me(d)}finally{l(i,!1)}}var v=_a(),x=a(v);va(x,{get name(){return e(h)},set name(o){l(h,I(o))},get clientId(){return e(g)},set clientId(o){l(g,I(o))},get clientSecret(){return e(u)},set clientSecret(o){l(u,I(o))},get valid(){return e(A)},set valid(o){l(A,I(o))}});var E=n(x,2),P=a(E),m=a(P);{var y=o=>{var d=ua(),T=a(d),L=a(T);Ne(L),t(T),t(d),D(o,d)};$(m,o=>{e(i)&&o(y)})}var O=n(m);c(()=>f(O,` ${wt()??""}`)),t(P),t(E),t(v),c(()=>P.disabled=e(k)),ke("submit",v,C),D(_,v),J()}const Xe=20;var ma=F('<button class="btn secondary icon lg"><!></button>'),ba=F('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),pa=F('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ha=F("<h3> </h3>"),ga=F("<h3> </h3>"),xa=F("<h3> </h3>"),ya=F("<h3> </h3>"),wa=F('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Sa(_,r){H(r,!0);let i=le(r,"serviceAccounts",31,()=>I([])),A=S(0),k=S(!0),h=S(!1);je(g);async function g(){if(!e(k)||e(h))return;let w;l(h,!0);try{w=await be.allServiceAccounts(e(A)*Xe,Xe,r.applicationId)}finally{l(h,!1)}l(k,I(w.hasMore)),l(A,e(A)+1),i().push(...w.items)}let u=S(!1);function C(){l(u,!0)}function v(w){l(x,!0),l(E,I(w)),l(u,!1)}let x=S(!1),E=S(void 0);function P(){e(E)&&(delete e(E).clientSecret,i().unshift(e(E)),l(E,void 0),l(x,!1))}let m=S(void 0),y=S(!1);function O(w){return()=>{l(m,I(w)),l(y,!0)}}function o(w){const s=i().findIndex(p=>p.id===(w==null?void 0:w.id));s!==-1&&i(i()[s]=w,!0),l(m,void 0),l(y,!1)}let d=S(void 0),T=S(!1);function L(w){return()=>{l(d,I(w)),l(T,!0)}}function G(){const w=i().findIndex(s=>{var p;return s.id===((p=e(d))==null?void 0:p.id)});w!==-1&&i().splice(w,1),l(d,void 0),l(T,!1)}var U=wa(),z=W(U),N=a(z),b=a(N),M=a(b),R=a(M,!0);c(()=>f(R,Ct())),t(M);var B=n(M),pe=a(B,!0);c(()=>f(pe,Pt())),t(B);var K=n(B),he=a(K,!0);c(()=>f(he,Tt())),t(K);var ne=n(K),ge=a(ne,!0);c(()=>f(ge,jt())),t(ne);var Q=n(ne),et=a(Q,!0);c(()=>f(et,Dt())),t(Q),vt(),t(b),t(N);var Be=n(N);St(Be,23,i,w=>w.id,(w,s,p)=>{var j=pa(),Z=a(j),X=a(Z,!0);t(Z);var q=n(Z),at=a(q,!0);t(q);var xe=n(q),rt=a(xe,!0);t(xe);var ye=n(xe),nt=a(ye,!0);c(()=>f(nt,e(s).updatedAt.toLocaleString())),t(ye);var we=n(ye),it=a(we,!0);c(()=>f(it,e(s).createdAt.toLocaleString())),t(we);var Ge=n(we),Re=a(Ge),lt=a(Re);Zt(lt,{position:"top-right",anchorPosition:"bottom-right",button:Se=>{var oe=ma(),de=a(oe);Xt(de,{}),t(oe),D(Se,oe)},children:(Se,oe)=>{var de=ba(),ve=W(de),ct=V(()=>O(e(s)));ve.__click=function(...Ae){var ie;(ie=e(ct))==null||ie.apply(this,Ae)};var Ue=a(ve);Qt(Ue,{});var Ze=n(Ue),st=a(Ze,!0);c(()=>f(st,Et())),t(Ze),t(ve);var Ie=n(ve,2),ot=V(()=>L(e(s)));Ie.__click=function(...Ae){var ie;(ie=e(ot))==null||ie.apply(this,Ae)};var qe=a(Ie);Wt(qe,{});var ze=n(qe),dt=a(ze,!0);c(()=>f(dt,Nt())),t(ze),t(Ie),D(Se,de)},$$slots:{button:!0,default:!0}}),t(Re),t(Ge),t(j),c(()=>{It(j,"border-b",e(p)<i().length-1),f(X,e(s).id),f(at,e(s).name),f(rt,e(s).clientId)}),D(w,j)}),t(Be),t(z);var Ve=n(z,2);ue(Ve,{get open(){return e(u)},set open(s){l(u,I(s))},title:s=>{var p=ha(),j=a(p,!0);c(()=>f(j,Mt())),t(p),D(s,p)},children:(s,p)=>{ta(s,{get applicationId(){return r.applicationId},onCreate:v})},$$slots:{title:!0,default:!0}});var Fe=n(Ve,2);ue(Fe,{onClose:P,get open(){return e(x)},set open(s){l(x,I(s))},title:s=>{var p=ga(),j=a(p,!0);c(()=>f(j,Ot())),t(p),D(s,p)},children:(s,p)=>{var j=_e(),Z=W(j);{var X=q=>{ra(q,{get serviceAccount(){return e(E)}})};$(Z,q=>{e(E)&&q(X)})}D(s,j)},$$slots:{title:!0,default:!0}});var Le=n(Fe,2);ue(Le,{get open(){return e(y)},set open(s){l(y,I(s))},title:s=>{var p=xa(),j=a(p,!0);c(()=>{var Z;return f(j,At({name:((Z=e(m))==null?void 0:Z.name)||""}))}),t(p),D(s,p)},children:(s,p)=>{var j=_e(),Z=W(j);{var X=q=>{fa(q,{get applicationId(){return r.applicationId},get serviceAccount(){return e(m)},onEdit:o})};$(Z,q=>{e(m)&&q(X)})}D(s,j)},$$slots:{title:!0,default:!0}});var tt=n(Le,2);return ue(tt,{get open(){return e(T)},set open(s){l(T,I(s))},title:s=>{var p=ya(),j=a(p,!0);c(()=>{var Z;return f(j,kt({name:((Z=e(d))==null?void 0:Z.name)||""}))}),t(p),D(s,p)},children:(s,p)=>{var j=_e(),Z=W(j);{var X=q=>{sa(q,{get applicationId(){return r.applicationId},get serviceAccountId(){return e(d).id},get name(){return e(d).name},onDelete:G})};$(Z,q=>{e(d)&&q(X)})}D(s,j)},$$slots:{title:!0,default:!0}}),D(_,U),J({onCreate:C})}re(["click"]);var Ia=F('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ua(_,r){H(r,!0);let i=S(void 0);const A=qt(),[k,h]=A;var g=Ia();_t(d=>{c(()=>ut.title=Bt())});var u=a(g),C=a(u),v=a(C);c(()=>Y(v,"href",k(`${zt}/`,void 0)));var x=a(v),E=a(x);Ht(E,{}),t(x);var P=n(x,2),m=a(P,!0);c(()=>f(m,Vt())),t(P),t(v);var y=n(v,2);y.__click=function(...d){var T,L;(L=(T=e(i))==null?void 0:T.onCreate)==null||L.apply(this,d)};var O=a(y);Yt(O,{}),t(y),t(C);var o=n(C,2);Gt(Sa(o,{get applicationId(){return r.data.applicationId}}),d=>l(i,I(d)),()=>e(i)),t(u),t(g),D(_,g),J()}re(["click"]);export{Ua as component};
