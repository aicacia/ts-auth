import{a as N,t as q,c as Qe,b as $e}from"../chunks/disclose-version.BdPpbG8G.js";import{p as ke,d as _,b as o,g as e,f as Te,t as i,a as Ue,c as r,r as t,s as l,z as M,ao as ft,$ as ht}from"../chunks/runtime.XTayOKyQ.js";import{d as Ee,s,e as Xe,h as bt}from"../chunks/render.CVMVLslR.js";import{e as J,r as ne,s as $,X as mt,Y as gt,Z as xt,_ as kt,$ as Ut,a0 as yt,a1 as wt,a2 as It,a3 as Ot,a4 as Pt,a5 as At,a6 as St,a7 as Tt,a8 as Ct,a9 as Nt,aa as jt,ab as Bt,ac as Dt,ad as Et,ae as Mt,af as Ft,ag as Vt,ah as qt,ai as Gt,H as Lt,aj as zt,ak as Ht,al as Rt,am as Wt,M as Xt,N as Yt,an as Zt,ao as Jt,ap as Kt,aq as Qt,ar as $t,as as er,at as tr,U as rr,V as ar,W as nr,t as lr}from"../chunks/messages.wercaZ5l.js";import{p as d}from"../chunks/proxy.BKNo-OHe.js";import{p as W,b as ir}from"../chunks/props.CLxh3Ck6.js";import{g as or}from"../chunks/index.BCwrhWKg.js";import{b as dr}from"../chunks/paths.BeVl75iW.js";import{i as xe}from"../chunks/runtime.vqD1BrVN.js";import{d as et,I as K,c as vr,b as ce,G as tt,m as rt,C as X,v as Y,N as sr,s as Q,a as at,S as Ye,h as Ze,e as ur,t as cr}from"../chunks/InputResults.BHVbwuCU.js";import{M as We,D as _r,P as pr,T as fr,E as hr,a as br}from"../chunks/trash.C2pZKfXe.js";import{d as Je}from"../chunks/index.B-XEKY0d.js";import{b as mr}from"../chunks/select.BIw2ICCz.js";import{o as gr}from"../chunks/index-client.DhLDVXYR.js";import{C as xr}from"../chunks/chevron-left._PPZrqIK.js";const kr=()=>tt((f,a)=>{a.length&&(rt(a),X("provider",J(),()=>{Y(f.provider).isNotBlank()}),X("active",J(),()=>{Y(f.active).isNotBlank()}),X("clientId",J(),()=>{Y(f.clientId).isNotBlank()}),X("clientSecret",J(),()=>{Y(f.clientSecret).isNotBlank()}),X("redirectUrl",J(),()=>{Y(f.redirectUrl).isNotBlank()}),sr(f.isNew,()=>{X("authUrl",J(),()=>{Y(f.authUrl).isNotBlank()}),X("callbackUrl",J(),()=>{Y(f.callbackUrl).isNotBlank()}),X("scope",J(),()=>{Y(f.scope).isNotBlank()}),X("tokenUrl",J(),()=>{Y(f.tokenUrl).isNotBlank()})}))});function ae(f,a,p){a.add(f.currentTarget.name),p()}var Ur=q('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"> <!></div>',1);function nt(f,a){ke(a,!0);let p=W(a,"provider",15),w=W(a,"active",15),A=W(a,"authUrl",15),S=W(a,"callbackUrl",15),T=W(a,"clientId",15),U=W(a,"clientSecret",15),I=W(a,"redirectUrl",15),O=W(a,"scope",15),g=W(a,"tokenUrl",15),x=W(a,"valid",15,!1),F=kr(),h=_(d(F.get())),y=M(()=>at(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,u=et(()=>{F({provider:p(),active:w(),authUrl:A(),callbackUrl:S(),clientId:T(),clientSecret:U(),redirectUrl:I(),scope:O(),tokenUrl:g(),isNew:a.isNew},Array.from(v)).done(pt=>{o(h,d(pt)),x(e(h).isValid())}),v.clear()},300);function G(){v.add("provider"),v.add("active"),v.add("authUrl"),v.add("callbackUrl"),v.add("clientId"),v.add("clientSecret"),v.add("redirectUrl"),v.add("scope"),v.add("tokenUrl"),u(),u.flush()}gr(G);var j=Ur(),C=Te(j),B=r(C),L=r(B,!0);i(()=>s(L,Pt())),t(B);var n=l(B,2);const D=M(()=>`w-full ${e(y)("provider")??""}`);i(()=>$(n,"placeholder",mt())),n.__input=[ae,v,u];var b=r(n);b.value=(b.__value="google")==null?"":"google";var z=r(b,!0);i(()=>s(z,At())),t(b);var H=l(b);H.value=(H.__value="facebook")==null?"":"facebook";var ye=r(H,!0);i(()=>s(ye,St())),t(H);var le=l(H);le.value=(le.__value="github")==null?"":"github";var Ce=r(le,!0);i(()=>s(Ce,Tt())),t(le);var ie=l(le);ie.value=(ie.__value="microsoft")==null?"":"microsoft";var Me=r(ie,!0);i(()=>s(Me,Ct())),t(ie);var m=l(ie);m.value=(m.__value="x")==null?"":"x";var c=r(m,!0);i(()=>s(c,Nt())),t(m),t(n);var k=l(n,2);K(k,{name:"provider",get result(){return e(h)}}),t(C);var P=l(C,2),E=r(P),oe=r(E);i(()=>s(oe,`${jt()??""} `));var V=l(oe);ne(V);const Fe=M(()=>gt(e(y)("active")));V.__input=[ae,v,u],t(E);var we=l(E,2);K(we,{name:"active",get result(){return e(h)}}),t(P);var Ie=l(P,2),Oe=r(Ie),Ve=r(Oe,!0);i(()=>s(Ve,Bt())),t(Oe);var Z=l(Oe,2);ne(Z);const qe=M(()=>`w-full ${e(y)("clientId")??""}`);i(()=>$(Z,"placeholder",xt())),Z.__input=[ae,v,u];var Pe=l(Z,2);K(Pe,{name:"clientId",get result(){return e(h)}}),t(Ie);var Ae=l(Ie,2),fe=r(Ae),Ne=r(fe,!0);i(()=>s(Ne,Dt())),t(fe);var de=l(fe,2);ne(de);const ee=M(()=>`w-full ${e(y)("clientSecret")??""}`);i(()=>$(de,"placeholder",kt())),de.__input=[ae,v,u];var R=l(de,2);K(R,{name:"clientSecret",get result(){return e(h)}}),t(Ae);var ve=l(Ae,2),se=r(ve),he=r(se,!0);i(()=>s(he,Et())),t(se);var ue=l(se,2);ne(ue);const je=M(()=>`w-full ${e(y)("redirectUrl")??""}`);i(()=>$(ue,"placeholder",Ut())),ue.__input=[ae,v,u];var Be=l(ue,2);K(Be,{name:"redirectUrl",get result(){return e(h)}}),t(ve);var Se=l(ve,2),_e=r(Se),Ge=r(_e,!0);i(()=>s(Ge,Mt())),t(_e);var te=l(_e,2);ne(te);const De=M(()=>`w-full ${e(y)("authUrl")??""}`);i(()=>$(te,"placeholder",yt())),te.__input=[ae,v,u];var Le=l(te,2);K(Le,{name:"authUrl",get result(){return e(h)}}),t(Se);var pe=l(Se,2),re=r(pe),lt=r(re,!0);i(()=>s(lt,Ft())),t(re);var be=l(re,2);ne(be);const it=M(()=>`w-full ${e(y)("callbackUrl")??""}`);i(()=>$(be,"placeholder",wt())),be.__input=[ae,v,u];var ot=l(be,2);K(ot,{name:"callbackUrl",get result(){return e(h)}}),t(pe);var ze=l(pe,2),He=r(ze),dt=r(He,!0);i(()=>s(dt,Vt())),t(He);var me=l(He,2);ne(me);const vt=M(()=>`w-full ${e(y)("scope")??""}`);i(()=>$(me,"placeholder",It())),me.__input=[ae,v,u];var st=l(me,2);K(st,{name:"scope",get result(){return e(h)}}),t(ze);var Ke=l(ze,2),Re=r(Ke),ut=r(Re,!0);i(()=>s(ut,qt())),t(Re);var ge=l(Re,2);ne(ge);const ct=M(()=>`w-full ${e(y)("tokenUrl")??""}`);i(()=>$(ge,"placeholder",Ot())),ge.__input=[ae,v,u];var _t=l(ge,2);K(_t,{name:"tokenUrl",get result(){return e(h)}}),t(Ke),i(()=>{Q(n,e(D)),Q(V,e(Fe)),Q(Z,e(qe)),Q(de,e(ee)),Q(ue,e(je)),Q(te,e(De)),Q(be,e(it)),Q(me,e(vt)),Q(ge,e(ct))}),mr(n,p),vr(V,w),ce(Z,T),ce(de,U),ce(ue,I),ce(te,A),ce(be,S),ce(me,O),ce(ge,g),N(f,j),Ue()}Ee(["input"]);var yr=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),wr=q('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ir(f,a){ke(a,!0);let p=_("google"),w=_(!0),A=_(void 0),S=_(void 0),T=_(""),U=_(""),I=_(""),O=_(void 0),g=_(void 0),x=_(!1),F=M(()=>e(x)),h=_(!1);async function y(n){n.preventDefault();try{o(x,!0),e(h)&&a.onCreate(await Je.createTenantOauth2Provider(a.tenantId,{provider:e(p),active:e(w),authUrl:e(A),callbackUrl:e(S),clientId:e(T),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(g)},a.applicationId))}catch(D){await Ze(D)}finally{o(x,!1)}}var v=wr(),u=r(v);nt(u,{isNew:!0,get valid(){return e(h)},set valid(n){o(h,d(n))},get provider(){return e(p)},set provider(n){o(p,d(n))},get active(){return e(w)},set active(n){o(w,d(n))},get authUrl(){return e(A)},set authUrl(n){o(A,d(n))},get callbackUrl(){return e(S)},set callbackUrl(n){o(S,d(n))},get clientId(){return e(T)},set clientId(n){o(T,d(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,d(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,d(n))},get scope(){return e(O)},set scope(n){o(O,d(n))},get tokenUrl(){return e(g)},set tokenUrl(n){o(g,d(n))}});var G=l(u,2),j=r(G),C=r(j);{var B=n=>{var D=yr(),b=r(D),z=r(b);Ye(z),t(b),t(D),N(n,D)};xe(C,n=>{e(x)&&n(B)})}var L=l(C);i(()=>s(L,` ${Gt()??""}`)),t(j),t(G),t(v),i(()=>j.disabled=e(F)),Xe("submit",v,y),N(f,v),Ue()}const Or=()=>tt((f={},a)=>{a.length&&(rt(a),X("providerConfirm",J(),()=>{Y(f.providerConfirm).isNotBlank()}),X("providerConfirm",Lt(),()=>{Y(f.provider===f.providerConfirm).isTruthy()}))});function Pr(f,a,p){a.add(f.currentTarget.name),p()}var Ar=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Sr=q('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Tr(f,a){ke(a,!0);let p=_(""),w=Or(),A=_(d(w.get())),S=_(!1),T=M(()=>e(S)),U=M(()=>at(e(A),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,O=et(()=>{w({provider:a.provider,providerConfirm:e(p)},Array.from(I)).done(b=>{o(A,d(b))}),I.clear()},300);function g(){I.add("name"),O(),O.flush()}async function x(b){b.preventDefault();try{o(S,!0),o(p,d(e(p).trim())),g(),e(A).isValid()&&(await Je.deleteTenantOauth2Provider(a.tenantId,a.tenantOAuth2ProviderId,a.applicationId),a.onDelete())}catch(z){await Ze(z)}finally{o(S,!1)}}var F=Sr(),h=r(F),y=r(h,!0);i(()=>s(y,Ht())),t(h);var v=l(h,2),u=r(v);ne(u);const G=M(()=>`w-full ${e(U)("providerConfirm")??""}`);i(()=>$(u,"placeholder",zt({provider:a.provider}))),u.__input=[Pr,I,O];var j=l(u,2);K(j,{name:"providerConfirm",get result(){return e(A)}}),t(v);var C=l(v,2),B=r(C),L=r(B);{var n=b=>{var z=Ar(),H=r(z),ye=r(H);Ye(ye),t(H),t(z),N(b,z)};xe(L,b=>{e(S)&&b(n)})}var D=l(L);i(()=>s(D,` ${Rt()??""}`)),t(B),t(C),t(F),i(()=>{Q(u,e(G)),B.disabled=e(T)}),Xe("submit",F,x),ce(u,()=>e(p),b=>o(p,b)),N(f,F),Ue()}Ee(["input"]);var Cr=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Nr=q('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function jr(f,a){ke(a,!0);let p=_(d(a.tenantOAuth2Provider.provider)),w=_(d(a.tenantOAuth2Provider.active)),A=_(d(a.tenantOAuth2Provider.authUrl)),S=_(d(a.tenantOAuth2Provider.callbackUrl)),T=_(d(a.tenantOAuth2Provider.clientId)),U=_(d(a.tenantOAuth2Provider.clientSecret)),I=_(d(a.tenantOAuth2Provider.redirectUrl)),O=_(d(a.tenantOAuth2Provider.scope)),g=_(d(a.tenantOAuth2Provider.tokenUrl)),x=_(!1),F=M(()=>e(x)),h=_(!1);async function y(n){n.preventDefault();try{o(x,!0),e(h)&&a.onEdit(await Je.updateTenantOauth2Provider(a.tenantId,a.tenantOAuth2Provider.id,{active:e(w),authUrl:e(A),callbackUrl:e(S),clientId:e(T),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(g)},a.applicationId))}catch(D){await Ze(D)}finally{o(x,!1)}}var v=Nr(),u=r(v);nt(u,{isNew:!1,get valid(){return e(h)},set valid(n){o(h,d(n))},get provider(){return e(p)},set provider(n){o(p,d(n))},get active(){return e(w)},set active(n){o(w,d(n))},get authUrl(){return e(A)},set authUrl(n){o(A,d(n))},get callbackUrl(){return e(S)},set callbackUrl(n){o(S,d(n))},get clientId(){return e(T)},set clientId(n){o(T,d(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,d(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,d(n))},get scope(){return e(O)},set scope(n){o(O,d(n))},get tokenUrl(){return e(g)},set tokenUrl(n){o(g,d(n))}});var G=l(u,2),j=r(G),C=r(j);{var B=n=>{var D=Cr(),b=r(D),z=r(b);Ye(z),t(b),t(D),N(n,D)};xe(C,n=>{e(x)&&n(B)})}var L=l(C);i(()=>s(L,` ${Wt()??""}`)),t(j),t(G),t(v),i(()=>j.disabled=e(F)),Xe("submit",v,y),N(f,v),Ue()}var Br=q('<button class="btn secondary icon lg"><!></button>'),Dr=q('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Er=q('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Mr=q("<h3> </h3>"),Fr=q("<h3> </h3>"),Vr=q("<h3> </h3>"),qr=q('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Gr(f,a){ke(a,!0);let p=W(a,"oauth2Providers",7),w=_(!1);function A(){o(w,!0)}function S(m){p().unshift(m),o(w,!1)}let T=_(void 0),U=_(!1);function I(m){return()=>{o(T,d(m)),o(U,!0)}}function O(m){const c=p().findIndex(k=>k.id===(m==null?void 0:m.id));c!==-1&&(p()[c]=m),o(T,void 0),o(U,!1)}let g=_(void 0),x=_(!1);function F(m){return()=>{o(g,d(m)),o(x,!0)}}function h(){const m=p().findIndex(c=>{var k;return c.id===((k=e(g))==null?void 0:k.id)});m!==-1&&p().splice(m,1),o(g,void 0),o(x,!1)}var y=qr(),v=Te(y),u=r(v),G=r(u),j=r(G),C=r(j,!0);i(()=>s(C,Zt())),t(j);var B=l(j),L=r(B,!0);i(()=>s(L,Jt())),t(B);var n=l(B),D=r(n,!0);i(()=>s(D,Kt())),t(n);var b=l(n),z=r(b,!0);i(()=>s(z,Qt())),t(b);var H=l(b),ye=r(H,!0);i(()=>s(ye,$t())),t(H),ft(),t(G),t(u);var le=l(u);ur(le,23,p,m=>m.id,(m,c,k)=>{var P=Er(),E=r(P),oe=r(E,!0);t(E);var V=l(E),Fe=r(V,!0);t(V);var we=l(V),Ie=r(we);{var Oe=ee=>{var R=$e();i(()=>s(R,er())),N(ee,R)},Ve=ee=>{var R=$e();i(()=>s(R,tr())),N(ee,R)};xe(Ie,ee=>{e(c).active?ee(Oe):ee(Ve,!1)})}t(we);var Z=l(we),qe=r(Z,!0);i(()=>s(qe,e(c).updatedAt.toLocaleString())),t(Z);var Pe=l(Z),Ae=r(Pe,!0);i(()=>s(Ae,e(c).createdAt.toLocaleString())),t(Pe);var fe=l(Pe),Ne=r(fe),de=r(Ne);_r(de,{position:"top-right",anchorPosition:"bottom-right",button:R=>{var ve=Br(),se=r(ve);hr(se,{}),t(ve),N(R,ve)},children:(R,ve)=>{var se=Dr(),he=Te(se),ue=M(()=>I(e(c)));he.__click=function(...pe){var re;(re=e(ue))==null||re.apply(this,pe)};var je=r(he);pr(je,{});var Be=l(je),Se=r(Be,!0);i(()=>s(Se,rr())),t(Be),t(he);var _e=l(he,2),Ge=M(()=>F(e(c)));_e.__click=function(...pe){var re;(re=e(Ge))==null||re.apply(this,pe)};var te=r(_e);fr(te,{});var De=l(te),Le=r(De,!0);i(()=>s(Le,ar())),t(De),t(_e),N(R,se)},$$slots:{button:!0,default:!0}}),t(Ne),t(fe),t(P),i(()=>{cr(P,"border-b",e(k)<p().length-1),s(oe,e(c).id),s(Fe,e(c).provider)}),N(m,P)}),t(le),t(v);var Ce=l(v,2);We(Ce,{get open(){return e(w)},set open(c){o(w,d(c))},title:c=>{var k=Mr(),P=r(k,!0);i(()=>s(P,nr())),t(k),N(c,k)},children:(c,k)=>{Ir(c,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},onCreate:S})},$$slots:{title:!0,default:!0}});var ie=l(Ce,2);We(ie,{get open(){return e(U)},set open(c){o(U,d(c))},title:c=>{var k=Fr(),P=r(k,!0);i(()=>{var E;return s(P,Xt({issuer:((E=e(T))==null?void 0:E.provider)||""}))}),t(k),N(c,k)},children:(c,k)=>{var P=Qe(),E=Te(P);{var oe=V=>{jr(V,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2Provider(){return e(T)},onEdit:O})};xe(E,V=>{e(T)&&V(oe)})}N(c,P)},$$slots:{title:!0,default:!0}});var Me=l(ie,2);return We(Me,{get open(){return e(x)},set open(c){o(x,d(c))},title:c=>{var k=Vr(),P=r(k,!0);i(()=>{var E;return s(P,Yt({issuer:((E=e(g))==null?void 0:E.provider)||""}))}),t(k),N(c,k)},children:(c,k)=>{var P=Qe(),E=Te(P);{var oe=V=>{Tr(V,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2ProviderId(){return e(g).id},get provider(){return e(g).provider},onDelete:h})};xe(E,V=>{e(g)&&V(oe)})}N(c,P)},$$slots:{title:!0,default:!0}}),N(f,y),Ue({onCreate:A})}Ee(["click"]);var Lr=q('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function na(f,a){ke(a,!0);let p=_(void 0),w=d(a.data.tenant.oauth2Providers);const A=or(),[S,T]=A;var U=Lr();bt(C=>{i(()=>ht.title=lr())});var I=r(U),O=r(I),g=r(O),x=r(g);i(()=>$(x,"href",S(`${dr}/applications/${a.data.applicationId}/tenants`,void 0)));var F=r(x),h=r(F);xr(h,{}),t(F),t(x);var y=l(x,2),v=r(y);t(y),t(g);var u=l(g,2);u.__click=function(...C){var B,L;(L=(B=e(p))==null?void 0:B.onCreate)==null||L.apply(this,C)};var G=r(u);br(G,{}),t(u),t(O);var j=l(O,2);ir(Gr(j,{get applicationId(){return a.data.applicationId},get tenantId(){return a.data.tenantId},get oauth2Providers(){return w}}),C=>o(p,d(C)),()=>e(p)),t(I),t(U),i(()=>s(v,`${a.data.application.name??""} / ${a.data.tenant.issuer??""}`)),N(f,U),Ue()}Ee(["click"]);export{na as component};
