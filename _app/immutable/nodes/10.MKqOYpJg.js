import{a as C,t as M,c as Le,b as Ge}from"../chunks/disclose-version.DajeB4c4.js";import{p as ve,x as g,j as e,y as i,t as l,a as ce,c as a,r as t,s,l as G,f as pe,ah as ot,$ as ut}from"../chunks/runtime.C60yeaJP.js";import{d as _e,e as Ie,s as v,h as dt}from"../chunks/render.BbZuB7Dm.js";import{d as Ue,e as le,r as oe,s as te,b as ue,u as ze,l as He,m as Je,n as Ke,o as Re,p as vt,q as ct,t as _t,v as ft,w as mt,x as bt,y as pt,z as ht,A as gt,B as xt,C as yt,D as wt,E as kt,F as Ct,G as It,H as Ut,I as St,J as At,K as Dt,L as jt,M as Et,N as Tt}from"../chunks/debounce.C_WMaB_z.js";import{p as x}from"../chunks/proxy.B95Q3zQB.js";import{p as Pt,b as Mt}from"../chunks/props.DztJVflq.js";import{D as Nt,g as Bt}from"../chunks/Dropdown.BnBMSDuX.js";import{b as Ot}from"../chunks/paths.BR2SyuFJ.js";import{i as ee}from"../chunks/runtime.Cwx_xcDz.js";import{o as Ft}from"../chunks/index-client.ClR-EJ5X.js";import{u as he}from"../chunks/index.u_6ZM-6x.js";import{M as Ce,P as Lt,T as Gt,E as Vt,a as $t}from"../chunks/Modal.CUdo-sfi.js";import{I as de,b as Se,c as Ze,G as Ae,m as De,C as ae,v as re,S as je,h as Ee,a as Te}from"../chunks/InputResults.DOY8a8ew.js";import{C as qt}from"../chunks/chevron-left.Dc8mGGX_.js";const zt=()=>Ae((u={},r)=>{r.length&&(De(r),ae("username",le(),()=>{re(u.username).isNotBlank()}),ae("active",le(),()=>{re(u.active).isNotBlank()}))});function Ve(u,r,n){r.add(u.currentTarget.name),n()}var Ht=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Jt=M('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Kt(u,r){ve(r,!0);let n=g(""),y=g(!0),D=zt(),m=g(x(D.get())),w=g(!1),N=G(()=>e(w)),S=G(()=>Te(e(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,b=Ue(()=>{D({username:e(n),active:e(y)},Array.from(c)).done(d=>{i(m,x(d))}),c.clear()},300);function V(){c.add("username"),c.add("active"),b(),b.flush()}async function B(d){d.preventDefault();try{i(w,!0),i(n,x(e(n).trim())),V(),e(m).isValid()&&r.onCreate(await he.createUser({active:e(y),username:e(n)},r.applicationId))}catch(P){await Ee(P)}finally{i(w,!1)}}var I=Jt(),p=a(I),k=a(p),T=a(k,!0);l(()=>v(T,Ke())),t(k);var f=s(k,2);oe(f);const q=G(()=>`w-full ${e(S)("username")??""}`);l(()=>te(f,"placeholder",ze())),f.__input=[Ve,c,b];var O=s(f,2);de(O,{name:"username",get result(){return e(m)}}),t(p);var j=s(p,2),F=a(j),z=a(F);l(()=>v(z,`${Re()??""} `));var E=s(z);oe(E);const U=G(()=>He(e(S)("active")));l(()=>te(E,"placeholder",Je())),E.__input=[Ve,c,b],t(F);var H=s(F,2);de(H,{name:"active",get result(){return e(m)}}),t(j);var $=s(j,2),J=a($),R=a(J);{var ne=d=>{var P=Ht(),Q=a(P),Y=a(Q);je(Y),t(Q),t(P),C(d,P)};ee(R,d=>{e(w)&&d(ne)})}var X=s(R);l(()=>v(X,` ${vt()??""}`)),t(J),t($),t(I),l(()=>{ue(f,e(q)),ue(E,e(U)),J.disabled=e(N)}),Ie("submit",I,B),Se(f,()=>e(n),d=>i(n,d)),Ze(E,()=>e(y),d=>i(y,d)),C(u,I),ce()}_e(["input"]);const Rt=()=>Ae((u={},r)=>{r.length&&(De(r),ae("usernameConfirm",le(),()=>{re(u.usernameConfirm).isNotBlank()}),ae("usernameConfirm",ct(),()=>{re(u.username===u.usernameConfirm).isTruthy()}))});function Zt(u,r,n){r.add(u.currentTarget.name),n()}var Qt=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Wt=M('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Xt(u,r){ve(r,!0);let n=g(""),y=Rt(),D=g(x(y.get())),m=g(!1),w=G(()=>e(m)),N=G(()=>Te(e(D),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const S=new Set,c=Ue(()=>{y({username:r.username,usernameConfirm:e(n)},Array.from(S)).done(U=>{i(D,x(U))}),S.clear()},300);function b(){S.add("name"),c(),c.flush()}async function V(U){U.preventDefault();try{i(m,!0),i(n,x(e(n).trim())),b(),e(D).isValid()&&(await he.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(H){await Ee(H)}finally{i(m,!1)}}var B=Wt(),I=a(B),p=a(I,!0);l(()=>v(p,ft())),t(I);var k=s(I,2),T=a(k);oe(T);const f=G(()=>`w-full ${e(N)("usernameConfirm")??""}`);l(()=>te(T,"placeholder",_t({username:r.username}))),T.__input=[Zt,S,c];var q=s(T,2);de(q,{name:"usernameConfirm",get result(){return e(D)}}),t(k);var O=s(k,2),j=a(O),F=a(j);{var z=U=>{var H=Qt(),$=a(H),J=a($);je(J),t($),t(H),C(U,H)};ee(F,U=>{e(m)&&U(z)})}var E=s(F);l(()=>v(E,` ${mt()??""}`)),t(j),t(O),t(B),l(()=>{ue(T,e(f)),j.disabled=e(w)}),Ie("submit",B,V),Se(T,()=>e(n),U=>i(n,U)),C(u,B),ce()}_e(["input"]);const Yt=()=>Ae((u,r)=>{r.length&&(De(r),ae("username",le(),()=>{re(u.username).isNotBlank()}),ae("active",le(),()=>{re(u.active).isNotBlank()}))});function $e(u,r,n){r.add(u.currentTarget.name),n()}var ea=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ta=M('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function aa(u,r){ve(r,!0);let n=g(x(r.user.username)),y=g(x(r.user.active)),D=Yt(),m=g(x(D.get())),w=g(!1),N=G(()=>e(w)),S=G(()=>Te(e(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,b=Ue(()=>{D({username:e(n),active:e(y)},Array.from(c)).done(d=>{i(m,x(d))}),c.clear()},300);function V(){c.add("username"),c.add("active"),b(),b.flush()}async function B(d){d.preventDefault();try{i(w,!0),i(n,x(e(n).trim())),V(),e(m).isValid()&&r.onEdit(await he.updateUser(r.user.id,{username:e(n),active:e(y)},r.applicationId))}catch(P){await Ee(P)}finally{i(w,!1)}}var I=ta(),p=a(I),k=a(p),T=a(k,!0);l(()=>v(T,Ke())),t(k);var f=s(k,2);oe(f);const q=G(()=>`w-full ${e(S)("username")??""}`);l(()=>te(f,"placeholder",ze())),f.__input=[$e,c,b];var O=s(f,2);de(O,{name:"username",get result(){return e(m)}}),t(p);var j=s(p,2),F=a(j),z=a(F);l(()=>v(z,`${Re()??""} `));var E=s(z);oe(E);const U=G(()=>He(e(S)("active")));l(()=>te(E,"placeholder",Je())),E.__input=[$e,c,b],t(F);var H=s(F,2);de(H,{name:"active",get result(){return e(m)}}),t(j);var $=s(j,2),J=a($),R=a(J);{var ne=d=>{var P=ea(),Q=a(P),Y=a(Q);je(Y),t(Q),t(P),C(d,P)};ee(R,d=>{e(w)&&d(ne)})}var X=s(R);l(()=>v(X,` ${bt()??""}`)),t(J),t($),t(I),l(()=>{ue(f,e(q)),ue(E,e(U)),J.disabled=e(N)}),Ie("submit",I,B),Se(f,()=>e(n),d=>i(n,d)),Ze(E,()=>e(y),d=>i(y,d)),C(u,I),ce()}_e(["input"]);const qe=20;var ra=M('<button class="btn secondary icon lg"><!></button>'),na=M('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),sa=M('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ia=M("<h3> </h3>"),la=M("<h3> </h3>"),oa=M("<h3> </h3>"),ua=M('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function da(u,r){ve(r,!0);let n=Pt(r,"users",31,()=>x([])),y=g(0),D=g(!0),m=g(!1);Ft(w);async function w(){if(!e(D)||e(m))return;let _;i(m,!0);try{_=await he.allUsers(e(y)*qe,qe,r.applicationId)}finally{i(m,!1)}i(D,x(_.hasMore)),i(y,e(y)+1),n().push(..._.items)}let N=g(!1);function S(){i(N,!0)}function c(_){n().unshift(_),i(N,!1)}let b=g(void 0),V=g(!1);function B(_){return()=>{i(b,x(_)),i(V,!0)}}function I(_){const o=n().findIndex(h=>h.id===(_==null?void 0:_.id));o!==-1&&n(n()[o]=_,!0),i(b,void 0),i(V,!1)}let p=g(void 0),k=g(!1);function T(_){return()=>{i(p,x(_)),i(k,!0)}}function f(){const _=n().findIndex(o=>{var h;return o.id===((h=e(p))==null?void 0:h.id)});_!==-1&&n().splice(_,1),i(p,void 0),i(k,!1)}var q=ua(),O=pe(q),j=a(O),F=a(j),z=a(F),E=a(z,!0);l(()=>v(E,yt())),t(z);var U=s(z),H=a(U,!0);l(()=>v(H,wt())),t(U);var $=s(U),J=a($,!0);l(()=>v(J,kt())),t($);var R=s($),ne=a(R,!0);l(()=>v(ne,Ct())),t(R);var X=s(R),d=a(X,!0);l(()=>v(d,It())),t(X),ot(),t(F),t(j);var P=s(j);pt(P,23,n,_=>_.id,(_,o,h)=>{var A=sa(),L=a(A),se=a(L,!0);t(L);var K=s(L),We=a(K,!0);t(K);var ge=s(K),Xe=a(ge);{var Ye=W=>{var Z=Ge();l(()=>v(Z,Ut())),C(W,Z)},et=W=>{var Z=Ge();l(()=>v(Z,St())),C(W,Z)};ee(Xe,W=>{e(o).active?W(Ye):W(et,!1)})}t(ge);var xe=s(ge),tt=a(xe,!0);l(()=>v(tt,e(o).updatedAt.toLocaleString())),t(xe);var ye=s(xe),at=a(ye,!0);l(()=>v(at,e(o).createdAt.toLocaleString())),t(ye);var Pe=s(ye),Me=a(Pe),rt=a(Me);Nt(rt,{position:"top-right",anchorPosition:"bottom-right",button:Z=>{var fe=ra(),me=a(fe);Vt(me,{}),t(fe),C(Z,fe)},children:(Z,fe)=>{var me=na(),be=pe(me),nt=G(()=>B(e(o)));be.__click=function(...ke){var ie;(ie=e(nt))==null||ie.apply(this,ke)};var Ne=a(be);Lt(Ne,{});var Be=s(Ne),st=a(Be,!0);l(()=>v(st,At())),t(Be),t(be);var we=s(be,2),it=G(()=>T(e(o)));we.__click=function(...ke){var ie;(ie=e(it))==null||ie.apply(this,ke)};var Oe=a(we);Gt(Oe,{});var Fe=s(Oe),lt=a(Fe,!0);l(()=>v(lt,Dt())),t(Fe),t(we),C(Z,me)},$$slots:{button:!0,default:!0}}),t(Me),t(Pe),t(A),l(()=>{ht(A,"border-b",e(h)<n().length-1),v(se,e(o).id),v(We,e(o).username)}),C(_,A)}),t(P),t(O);var Q=s(O,2);Ce(Q,{get open(){return e(N)},set open(o){i(N,x(o))},title:o=>{var h=ia(),A=a(h,!0);l(()=>v(A,jt())),t(h),C(o,h)},children:(o,h)=>{Kt(o,{get applicationId(){return r.applicationId},onCreate:c})},$$slots:{title:!0,default:!0}});var Y=s(Q,2);Ce(Y,{get open(){return e(V)},set open(o){i(V,x(o))},title:o=>{var h=la(),A=a(h,!0);l(()=>{var L;return v(A,gt({username:((L=e(b))==null?void 0:L.username)||""}))}),t(h),C(o,h)},children:(o,h)=>{var A=Le(),L=pe(A);{var se=K=>{aa(K,{get applicationId(){return r.applicationId},get user(){return e(b)},onEdit:I})};ee(L,K=>{e(b)&&K(se)})}C(o,A)},$$slots:{title:!0,default:!0}});var Qe=s(Y,2);return Ce(Qe,{get open(){return e(k)},set open(o){i(k,x(o))},title:o=>{var h=oa(),A=a(h,!0);l(()=>{var L;return v(A,xt({username:((L=e(p))==null?void 0:L.username)||""}))}),t(h),C(o,h)},children:(o,h)=>{var A=Le(),L=pe(A);{var se=K=>{Xt(K,{get applicationId(){return r.applicationId},get userId(){return e(p).id},get username(){return e(p).username},onDelete:f})};ee(L,K=>{e(p)&&K(se)})}C(o,A)},$$slots:{title:!0,default:!0}}),C(u,q),ce({loadMore:w,onCreate:S})}_e(["click"]);var va=M('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ua(u,r){ve(r,!0);let n=g(void 0);const y=Bt(),[D,m]=y;var w=va();dt(f=>{l(()=>ut.title=Et())});var N=a(w),S=a(N),c=a(S);l(()=>te(c,"href",D(`${Ot}/`,void 0)));var b=a(c),V=a(b);qt(V,{}),t(b);var B=s(b,2),I=a(B,!0);l(()=>v(I,Tt())),t(B),t(c);var p=s(c,2);p.__click=function(...f){var q,O;(O=(q=e(n))==null?void 0:q.onCreate)==null||O.apply(this,f)};var k=a(p);$t(k,{}),t(p),t(S);var T=s(S,2);Mt(da(T,{get applicationId(){return r.data.applicationId}}),f=>i(n,x(f)),()=>e(n)),t(N),t(w),C(u,w),ce()}_e(["click"]);export{Ua as component};
