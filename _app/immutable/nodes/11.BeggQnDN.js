import{f as O,a as N}from"../chunks/BAGX8FWs.js";import{p as le,b,A as j,c as s,t as R,g as e,a as ie,$ as ne,s as p,B as D,h as n,r as l}from"../chunks/9Y3Zi9LS.js";import{d as oe,h as ue,i as de,e as fe,s as L}from"../chunks/CdK4JjYi.js";import{d as T,b as V,r as z}from"../chunks/DBRB63xn.js";import{G as ve,d as pe,I as F,b as H,a as J,c as me,e as _e,f as ce,m as he,C as _,g as K,v as C,h as S,u as ge,i as be,j as we,S as xe}from"../chunks/CbLLult4.js";import"../chunks/COB5_kvU.js";import"../chunks/DkEC4_bh.js";import{g as ye}from"../chunks/uhMkHT6K.js";import{b as $e}from"../chunks/Bluxw1Nt.js";import{a as B,U as qe,C as Ae,c as ke,s as je}from"../chunks/Dyl6cX5U.js";const Ce=()=>ve((i,o)=>{o.length&&(he(o),_("url",K(),()=>{C(i.url).isNotBlank()}),_("url",S(),()=>{C(i.url).isURL({protocols:["http","https"],require_tld:!1,require_protocol:!0,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!1,allow_query_components:!1})}),ge(a=>a.hasErrors("url"),()=>{_("url",S(),async()=>{await new qe(new Ae({...ke,get basePath(){return B.url}})).version()})}),_("url",S(),async()=>{}),_("tenant",K(),()=>{C(i.tenant).isNotBlank()}))});function M(i,o,a){o.add(i.currentTarget.name),a()}var Se=O('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Be=O('<div class="flex flex-grow flex-col justify-end p-4 sm:justify-start"><div class="card mx-auto my-10 flex w-full flex-shrink flex-col sm:w-72"><h1 class="mb-1"> </h1> <form><div class="mb-2"><input type="url" name="url"/> <!></div> <div class="mb-2"><input type="text" name="tenant"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form></div></div>');function Ve(i,o){le(o,!0);let a=b(j(B.url||"")),u=b(j(B.tenant||"")),P=Ce(),m=b(j(P.get())),c=b(!1),Q=D(()=>e(c)),U=D(()=>be(e(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,h=pe(()=>new Promise(t=>{P({url:e(a),tenant:e(u)},Array.from(d)).done(r=>{n(m,r,!0),t(e(m).isValid())}),d.clear()}),300);function W(){return d.add("url"),d.add("tenant"),h(),h.flush()}async function X(t){t.preventDefault();try{n(c,!0),n(a,e(a).trim(),!0),n(u,e(u).trim(),!0),await W()&&(await je({url:e(a),tenant:e(u)}),await ye(`${$e}/signin`))}catch(r){await we(r)}finally{n(c,!1)}}var w=Be();ue(t=>{R(r=>ne.title=r,[()=>J()])});var E=s(w),x=s(E),Y=s(x,!0);l(x);var y=p(x,2),$=s(y),f=s($);z(f),f.__input=[M,d,h];var Z=p(f,2);F(Z,{name:"url",get result(){return e(m)}}),l($);var q=p($,2),v=s(q);z(v),v.__input=[M,d,h];var ee=p(v,2);F(ee,{name:"tenant",get result(){return e(m)}}),l(q);var G=p(q,2),A=s(G),I=s(A);{var te=t=>{var r=Se(),g=s(r),k=s(g);xe(k),l(g),l(r),N(t,r)};de(I,t=>{e(c)&&t(te)})}var ae=p(I);l(A),l(G),l(y),l(E),l(w),R((t,r,g,k,re,se)=>{L(Y,t),T(f,1,`w-full ${r??""}`),V(f,"placeholder",g),T(v,1,`w-full ${k??""}`),V(v,"placeholder",re),A.disabled=e(Q),L(ae,` ${se??""}`)},[()=>J(),()=>e(U)("url"),()=>me(),()=>e(U)("tenant"),()=>_e(),()=>ce()]),fe("submit",y,X),H(f,()=>e(a),t=>n(a,t)),H(v,()=>e(u),t=>n(u,t)),N(i,w),ie()}oe(["input"]);export{Ve as component};
