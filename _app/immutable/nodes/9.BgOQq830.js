import{a as N,t as q,c as Qe,b as $e}from"../chunks/disclose-version.BR6hquoZ.js";import{p as ke,d as c,b as o,g as e,f as Te,t as i,a as Ue,c as r,r as t,s as l,z as M,ao as ft,$ as bt}from"../chunks/runtime.XTayOKyQ.js";import{d as Ee,s,e as Xe,h as ht}from"../chunks/render.DpS1xNCU.js";import{e as J,r as ne,s as $,Y as mt,Z as gt,_ as xt,$ as kt,a0 as Ut,a1 as yt,a2 as wt,a3 as It,a4 as Ot,a5 as Pt,a6 as At,a7 as St,a8 as Tt,a9 as Ct,aa as Nt,ab as jt,ac as Bt,ad as Dt,ae as Et,af as Mt,ag as Ft,ah as Vt,ai as qt,aj as Gt,H as Lt,ak as zt,al as Ht,am as Rt,an as Wt,M as Xt,N as Yt,ao as Zt,ap as Jt,aq as Kt,ar as Qt,as as $t,at as er,au as tr,U as rr,V as ar,W as nr,t as lr,X as ir}from"../chunks/messages.D-7JLJoP.js";import{p as v}from"../chunks/proxy.BKNo-OHe.js";import{p as R,b as or}from"../chunks/props.CLxh3Ck6.js";import{g as dr}from"../chunks/index.BCwrhWKg.js";import{b as vr}from"../chunks/paths.Hn01zztd.js";import{i as xe}from"../chunks/runtime.vqD1BrVN.js";import{d as et,I as K,c as sr,b as ce,G as tt,m as rt,C as W,v as X,N as ur,s as Q,a as at,S as Ye,h as Ze,e as cr,t as _r}from"../chunks/InputResults.I4g3kDNh.js";import{M as We,D as pr,P as fr,T as br,E as hr,a as mr}from"../chunks/trash.DSd6zT0V.js";import{d as Je}from"../chunks/index.B-XEKY0d.js";import{b as gr}from"../chunks/select.D5OYKfWn.js";import{o as xr}from"../chunks/index-client.DhLDVXYR.js";import{C as kr}from"../chunks/chevron-left.CLUQG4cV.js";const Ur=()=>tt((p,a)=>{a.length&&(rt(a),W("provider",J(),()=>{X(p.provider).isNotBlank()}),W("active",J(),()=>{X(p.active).isNotBlank()}),W("clientId",J(),()=>{X(p.clientId).isNotBlank()}),W("clientSecret",J(),()=>{X(p.clientSecret).isNotBlank()}),W("redirectUrl",J(),()=>{X(p.redirectUrl).isNotBlank()}),ur(p.isNew,()=>{W("authUrl",J(),()=>{X(p.authUrl).isNotBlank()}),W("callbackUrl",J(),()=>{X(p.callbackUrl).isNotBlank()}),W("scope",J(),()=>{X(p.scope).isNotBlank()}),W("tokenUrl",J(),()=>{X(p.tokenUrl).isNotBlank()})}))});function ae(p,a,_){a.add(p.currentTarget.name),_()}var yr=q('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"> <!></div>',1);function nt(p,a){ke(a,!0);let _=R(a,"provider",15),w=R(a,"active",15),S=R(a,"authUrl",15),T=R(a,"callbackUrl",15),C=R(a,"clientId",15),U=R(a,"clientSecret",15),I=R(a,"redirectUrl",15),O=R(a,"scope",15),h=R(a,"tokenUrl",15),k=R(a,"valid",15,!1),V=Ur(),b=c(v(V.get())),P=M(()=>at(e(b),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,f=et(()=>{V({provider:_(),active:w(),authUrl:S(),callbackUrl:T(),clientId:C(),clientSecret:U(),redirectUrl:I(),scope:O(),tokenUrl:h(),isNew:a.isNew},Array.from(d)).done(pt=>{o(b,v(pt)),k(e(b).isValid())}),d.clear()},300);function G(){d.add("provider"),d.add("active"),d.add("authUrl"),d.add("callbackUrl"),d.add("clientId"),d.add("clientSecret"),d.add("redirectUrl"),d.add("scope"),d.add("tokenUrl"),f(),f.flush()}xr(G);var y=yr(),B=Te(y),j=r(B),Y=r(j,!0);i(()=>s(Y,Pt())),t(j);var n=l(j,2);const D=M(()=>`w-full ${e(P)("provider")??""}`);i(()=>$(n,"placeholder",mt())),n.__input=[ae,d,f];var m=r(n);m.value=(m.__value="google")==null?"":"google";var L=r(m,!0);i(()=>s(L,At())),t(m);var z=l(m);z.value=(z.__value="facebook")==null?"":"facebook";var ye=r(z,!0);i(()=>s(ye,St())),t(z);var le=l(z);le.value=(le.__value="github")==null?"":"github";var Ce=r(le,!0);i(()=>s(Ce,Tt())),t(le);var ie=l(le);ie.value=(ie.__value="microsoft")==null?"":"microsoft";var Me=r(ie,!0);i(()=>s(Me,Ct())),t(ie);var g=l(ie);g.value=(g.__value="x")==null?"":"x";var u=r(g,!0);i(()=>s(u,Nt())),t(g),t(n);var x=l(n,2);K(x,{name:"provider",get result(){return e(b)}}),t(B);var A=l(B,2),E=r(A),oe=r(E);i(()=>s(oe,`${jt()??""} `));var F=l(oe);ne(F);const Fe=M(()=>gt(e(P)("active")));F.__input=[ae,d,f],t(E);var we=l(E,2);K(we,{name:"active",get result(){return e(b)}}),t(A);var Ie=l(A,2),Oe=r(Ie),Ve=r(Oe,!0);i(()=>s(Ve,Bt())),t(Oe);var Z=l(Oe,2);ne(Z);const qe=M(()=>`w-full ${e(P)("clientId")??""}`);i(()=>$(Z,"placeholder",xt())),Z.__input=[ae,d,f];var Pe=l(Z,2);K(Pe,{name:"clientId",get result(){return e(b)}}),t(Ie);var Ae=l(Ie,2),fe=r(Ae),Ne=r(fe,!0);i(()=>s(Ne,Dt())),t(fe);var de=l(fe,2);ne(de);const ee=M(()=>`w-full ${e(P)("clientSecret")??""}`);i(()=>$(de,"placeholder",kt())),de.__input=[ae,d,f];var H=l(de,2);K(H,{name:"clientSecret",get result(){return e(b)}}),t(Ae);var ve=l(Ae,2),se=r(ve),be=r(se,!0);i(()=>s(be,Et())),t(se);var ue=l(se,2);ne(ue);const je=M(()=>`w-full ${e(P)("redirectUrl")??""}`);i(()=>$(ue,"placeholder",Ut())),ue.__input=[ae,d,f];var Be=l(ue,2);K(Be,{name:"redirectUrl",get result(){return e(b)}}),t(ve);var Se=l(ve,2),_e=r(Se),Ge=r(_e,!0);i(()=>s(Ge,Mt())),t(_e);var te=l(_e,2);ne(te);const De=M(()=>`w-full ${e(P)("authUrl")??""}`);i(()=>$(te,"placeholder",yt())),te.__input=[ae,d,f];var Le=l(te,2);K(Le,{name:"authUrl",get result(){return e(b)}}),t(Se);var pe=l(Se,2),re=r(pe),lt=r(re,!0);i(()=>s(lt,Ft())),t(re);var he=l(re,2);ne(he);const it=M(()=>`w-full ${e(P)("callbackUrl")??""}`);i(()=>$(he,"placeholder",wt())),he.__input=[ae,d,f];var ot=l(he,2);K(ot,{name:"callbackUrl",get result(){return e(b)}}),t(pe);var ze=l(pe,2),He=r(ze),dt=r(He,!0);i(()=>s(dt,Vt())),t(He);var me=l(He,2);ne(me);const vt=M(()=>`w-full ${e(P)("scope")??""}`);i(()=>$(me,"placeholder",It())),me.__input=[ae,d,f];var st=l(me,2);K(st,{name:"scope",get result(){return e(b)}}),t(ze);var Ke=l(ze,2),Re=r(Ke),ut=r(Re,!0);i(()=>s(ut,qt())),t(Re);var ge=l(Re,2);ne(ge);const ct=M(()=>`w-full ${e(P)("tokenUrl")??""}`);i(()=>$(ge,"placeholder",Ot())),ge.__input=[ae,d,f];var _t=l(ge,2);K(_t,{name:"tokenUrl",get result(){return e(b)}}),t(Ke),i(()=>{Q(n,e(D)),Q(F,e(Fe)),Q(Z,e(qe)),Q(de,e(ee)),Q(ue,e(je)),Q(te,e(De)),Q(he,e(it)),Q(me,e(vt)),Q(ge,e(ct))}),gr(n,_),sr(F,w),ce(Z,C),ce(de,U),ce(ue,I),ce(te,S),ce(he,T),ce(me,O),ce(ge,h),N(p,y),Ue()}Ee(["input"]);var wr=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ir=q('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Or(p,a){ke(a,!0);let _=c("google"),w=c(!0),S=c(void 0),T=c(void 0),C=c(""),U=c(""),I=c(""),O=c(void 0),h=c(void 0),k=c(!1),V=M(()=>e(k)),b=c(!1);async function P(n){n.preventDefault();try{o(k,!0),e(b)&&a.onCreate(await Je.createTenantOauth2Provider(a.tenantId,{provider:e(_),active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(h)},a.applicationId))}catch(D){await Ze(D)}finally{o(k,!1)}}var d=Ir(),f=r(d);nt(f,{isNew:!0,get valid(){return e(b)},set valid(n){o(b,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(O)},set scope(n){o(O,v(n))},get tokenUrl(){return e(h)},set tokenUrl(n){o(h,v(n))}});var G=l(f,2),y=r(G),B=r(y);{var j=n=>{var D=wr(),m=r(D),L=r(m);Ye(L),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var Y=l(B);i(()=>s(Y,` ${Gt()??""}`)),t(y),t(G),t(d),i(()=>y.disabled=e(V)),Xe("submit",d,P),N(p,d),Ue()}const Pr=()=>tt((p={},a)=>{a.length&&(rt(a),W("providerConfirm",J(),()=>{X(p.providerConfirm).isNotBlank()}),W("providerConfirm",Lt(),()=>{X(p.provider===p.providerConfirm).isTruthy()}))});function Ar(p,a,_){a.add(p.currentTarget.name),_()}var Sr=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Tr=q('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Cr(p,a){ke(a,!0);let _=c(""),w=Pr(),S=c(v(w.get())),T=c(!1),C=M(()=>e(T)),U=M(()=>at(e(S),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,O=et(()=>{w({provider:a.provider,providerConfirm:e(_)},Array.from(I)).done(m=>{o(S,v(m))}),I.clear()},300);function h(){I.add("name"),O(),O.flush()}async function k(m){m.preventDefault();try{o(T,!0),o(_,v(e(_).trim())),h(),e(S).isValid()&&(await Je.deleteTenantOauth2Provider(a.tenantId,a.tenantOAuth2ProviderId,a.applicationId),a.onDelete())}catch(L){await Ze(L)}finally{o(T,!1)}}var V=Tr(),b=r(V),P=r(b,!0);i(()=>s(P,Ht())),t(b);var d=l(b,2),f=r(d);ne(f);const G=M(()=>`w-full ${e(U)("providerConfirm")??""}`);i(()=>$(f,"placeholder",zt({provider:a.provider}))),f.__input=[Ar,I,O];var y=l(f,2);K(y,{name:"providerConfirm",get result(){return e(S)}}),t(d);var B=l(d,2),j=r(B),Y=r(j);{var n=m=>{var L=Sr(),z=r(L),ye=r(z);Ye(ye),t(z),t(L),N(m,L)};xe(Y,m=>{e(T)&&m(n)})}var D=l(Y);i(()=>s(D,` ${Rt()??""}`)),t(j),t(B),t(V),i(()=>{Q(f,e(G)),j.disabled=e(C)}),Xe("submit",V,k),ce(f,()=>e(_),m=>o(_,m)),N(p,V),Ue()}Ee(["input"]);var Nr=q('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),jr=q('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Br(p,a){ke(a,!0);let _=c(v(a.tenantOAuth2Provider.provider)),w=c(v(a.tenantOAuth2Provider.active)),S=c(v(a.tenantOAuth2Provider.authUrl)),T=c(v(a.tenantOAuth2Provider.callbackUrl)),C=c(v(a.tenantOAuth2Provider.clientId)),U=c(v(a.tenantOAuth2Provider.clientSecret)),I=c(v(a.tenantOAuth2Provider.redirectUrl)),O=c(v(a.tenantOAuth2Provider.scope)),h=c(v(a.tenantOAuth2Provider.tokenUrl)),k=c(!1),V=M(()=>e(k)),b=c(!1);async function P(n){n.preventDefault();try{o(k,!0),e(b)&&a.onEdit(await Je.updateTenantOauth2Provider(a.tenantId,a.tenantOAuth2Provider.id,{active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(h)},a.applicationId))}catch(D){await Ze(D)}finally{o(k,!1)}}var d=jr(),f=r(d);nt(f,{isNew:!1,get valid(){return e(b)},set valid(n){o(b,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(O)},set scope(n){o(O,v(n))},get tokenUrl(){return e(h)},set tokenUrl(n){o(h,v(n))}});var G=l(f,2),y=r(G),B=r(y);{var j=n=>{var D=Nr(),m=r(D),L=r(m);Ye(L),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var Y=l(B);i(()=>s(Y,` ${Wt()??""}`)),t(y),t(G),t(d),i(()=>y.disabled=e(V)),Xe("submit",d,P),N(p,d),Ue()}var Dr=q('<button class="btn secondary icon lg"><!></button>'),Er=q('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Mr=q('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Fr=q("<h3> </h3>"),Vr=q("<h3> </h3>"),qr=q("<h3> </h3>"),Gr=q('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Lr(p,a){ke(a,!0);let _=R(a,"oauth2Providers",7),w=c(!1);function S(){o(w,!0)}function T(g){_().unshift(g),o(w,!1)}let C=c(void 0),U=c(!1);function I(g){return()=>{o(C,v(g)),o(U,!0)}}function O(g){const u=_().findIndex(x=>x.id===(g==null?void 0:g.id));u!==-1&&(_()[u]=g),o(C,void 0),o(U,!1)}let h=c(void 0),k=c(!1);function V(g){return()=>{o(h,v(g)),o(k,!0)}}function b(){const g=_().findIndex(u=>{var x;return u.id===((x=e(h))==null?void 0:x.id)});g!==-1&&_().splice(g,1),o(h,void 0),o(k,!1)}var P=Gr(),d=Te(P),f=r(d),G=r(f),y=r(G),B=r(y,!0);i(()=>s(B,Zt())),t(y);var j=l(y),Y=r(j,!0);i(()=>s(Y,Jt())),t(j);var n=l(j),D=r(n,!0);i(()=>s(D,Kt())),t(n);var m=l(n),L=r(m,!0);i(()=>s(L,Qt())),t(m);var z=l(m),ye=r(z,!0);i(()=>s(ye,$t())),t(z),ft(),t(G),t(f);var le=l(f);cr(le,23,_,g=>g.id,(g,u,x)=>{var A=Mr(),E=r(A),oe=r(E,!0);t(E);var F=l(E),Fe=r(F,!0);t(F);var we=l(F),Ie=r(we);{var Oe=ee=>{var H=$e();i(()=>s(H,er())),N(ee,H)},Ve=ee=>{var H=$e();i(()=>s(H,tr())),N(ee,H)};xe(Ie,ee=>{e(u).active?ee(Oe):ee(Ve,!1)})}t(we);var Z=l(we),qe=r(Z,!0);i(()=>s(qe,e(u).updatedAt.toLocaleString())),t(Z);var Pe=l(Z),Ae=r(Pe,!0);i(()=>s(Ae,e(u).createdAt.toLocaleString())),t(Pe);var fe=l(Pe),Ne=r(fe),de=r(Ne);pr(de,{position:"top-right",anchorPosition:"bottom-right",button:H=>{var ve=Dr(),se=r(ve);hr(se,{}),t(ve),N(H,ve)},children:(H,ve)=>{var se=Er(),be=Te(se),ue=M(()=>I(e(u)));be.__click=function(...pe){var re;(re=e(ue))==null||re.apply(this,pe)};var je=r(be);fr(je,{});var Be=l(je),Se=r(Be,!0);i(()=>s(Se,rr())),t(Be),t(be);var _e=l(be,2),Ge=M(()=>V(e(u)));_e.__click=function(...pe){var re;(re=e(Ge))==null||re.apply(this,pe)};var te=r(_e);br(te,{});var De=l(te),Le=r(De,!0);i(()=>s(Le,ar())),t(De),t(_e),N(H,se)},$$slots:{button:!0,default:!0}}),t(Ne),t(fe),t(A),i(()=>{_r(A,"border-b",e(x)<_().length-1),s(oe,e(u).id),s(Fe,e(u).provider)}),N(g,A)}),t(le),t(d);var Ce=l(d,2);We(Ce,{get open(){return e(w)},set open(u){o(w,v(u))},title:u=>{var x=Fr(),A=r(x,!0);i(()=>s(A,nr())),t(x),N(u,x)},children:(u,x)=>{Or(u,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},onCreate:T})},$$slots:{title:!0,default:!0}});var ie=l(Ce,2);We(ie,{get open(){return e(U)},set open(u){o(U,v(u))},title:u=>{var x=Vr(),A=r(x,!0);i(()=>{var E;return s(A,Xt({issuer:((E=e(C))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var A=Qe(),E=Te(A);{var oe=F=>{Br(F,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2Provider(){return e(C)},onEdit:O})};xe(E,F=>{e(C)&&F(oe)})}N(u,A)},$$slots:{title:!0,default:!0}});var Me=l(ie,2);return We(Me,{get open(){return e(k)},set open(u){o(k,v(u))},title:u=>{var x=qr(),A=r(x,!0);i(()=>{var E;return s(A,Yt({issuer:((E=e(h))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var A=Qe(),E=Te(A);{var oe=F=>{Cr(F,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2ProviderId(){return e(h).id},get provider(){return e(h).provider},onDelete:b})};xe(E,F=>{e(h)&&F(oe)})}N(u,A)},$$slots:{title:!0,default:!0}}),N(p,P),Ue({onCreate:S})}Ee(["click"]);var zr=q('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function la(p,a){ke(a,!0);let _=c(void 0),w=v(a.data.tenant.oauth2Providers);const S=dr(),[T,C]=S;var U=zr();ht(y=>{i(()=>bt.title=lr())});var I=r(U),O=r(I),h=r(O);i(()=>$(h,"href",T(`${vr}/applications/${a.data.applicationId}/tenants`,void 0)));var k=r(h),V=r(k);kr(V,{}),t(k);var b=l(k,2),P=r(b,!0);i(()=>s(P,ir())),t(b),t(h);var d=l(h,2);d.__click=function(...y){var B,j;(j=(B=e(_))==null?void 0:B.onCreate)==null||j.apply(this,y)};var f=r(d);mr(f,{}),t(d),t(O);var G=l(O,2);or(Lr(G,{get applicationId(){return a.data.applicationId},get tenantId(){return a.data.tenantId},get oauth2Providers(){return w}}),y=>o(_,v(y)),()=>e(_)),t(I),t(U),N(p,U),Ue()}Ee(["click"]);export{la as component};
