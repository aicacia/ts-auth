import{f as M,a as N,c as Ke,t as Qe}from"../chunks/CeYbTvSz.js";import{p as we,b as s,F as X,f as Ne,s as l,c as r,t as V,g as e,G as he,a as Ie,h as i,r as t,a7 as Et,$ as Gt}from"../chunks/wkzzbBdv.js";import{d as Ge,s as d,i as ye,e as Xe,h as Mt}from"../chunks/D2HIu1zJ.js";import{e as qt,d as H,b as ee,r as ae,t as Ft}from"../chunks/2O6vECAj.js";import{p as z,b as Lt}from"../chunks/CtNkBPER.js";import"../chunks/DgAY1fJe.js";import{b as Vt}from"../chunks/BiGx9tMp.js";import{G as Ze,d as $e,I as Z,a0 as Rt,a1 as Wt,a2 as Xt,a3 as Yt,a4 as zt,a5 as Ht,a6 as Jt,a7 as Kt,a8 as Qt,a9 as Zt,aa as $t,ab as er,ac as tr,ad as rr,ae as ar,af as nr,ag as lr,ah as ir,ai as or,aj as dr,ak as vr,al as ur,am as sr,b as ue,m as et,C as J,g as $,v as K,N as cr,i as tt,an as _r,j as Ye,S as ze,ao as pr,ap as hr,aq as fr,O as br,ar as mr,o as gr,as as xr,at as Ur,au as kr,av as yr,aw as wr,W as Ir,X as Or,Y as Pr,_ as Sr,$ as Ar,ax as Tr,ay as Cr}from"../chunks/CjhoWwqu.js";import{M as We,D as Nr,P as jr,T as Br,E as Dr,a as Er}from"../chunks/CjJcdl5D.js";import{d as He}from"../chunks/D5kayNry.js";import{o as Gr}from"../chunks/BlFdF53H.js";import{b as Mr}from"../chunks/BVUUHFFa.js";import{C as qr}from"../chunks/By5vjJJ4.js";const Fr=()=>Ze((p,n)=>{n.length&&(et(n),J("provider",$(),()=>{K(p.provider).isNotBlank()}),J("active",$(),()=>{K(p.active).isNotBlank()}),J("clientId",$(),()=>{K(p.clientId).isNotBlank()}),J("clientSecret",$(),()=>{K(p.clientSecret).isNotBlank()}),J("redirectUrl",$(),()=>{K(p.redirectUrl).isNotBlank()}),cr(p.isNew,()=>{J("authUrl",$(),()=>{K(p.authUrl).isNotBlank()}),J("callbackUrl",$(),()=>{K(p.callbackUrl).isNotBlank()}),J("scope",$(),()=>{K(p.scope).isNotBlank()}),J("tokenUrl",$(),()=>{K(p.tokenUrl).isNotBlank()})}))});function re(p,n,c){n.add(p.currentTarget.name),c()}var Lr=M('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"/></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"/> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"/> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"/> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"/> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"/> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"/> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"/> <!></div>',1);function rt(p,n){we(n,!0);let c=z(n,"provider",15),O=z(n,"active",15),y=z(n,"authUrl",15),P=z(n,"callbackUrl",15),g=z(n,"clientId",15),w=z(n,"clientSecret",15),x=z(n,"redirectUrl",15),T=z(n,"scope",15),U=z(n,"tokenUrl",15),I=z(n,"valid",15,!1),E=Fr(),h=s(X(E.get())),S=he(()=>tt(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const o=new Set,u=$e(()=>{E({provider:c(),active:O(),authUrl:y(),callbackUrl:P(),clientId:g(),clientSecret:w(),redirectUrl:x(),scope:T(),tokenUrl:U(),isNew:n.isNew},Array.from(o)).done(Re=>{i(h,Re,!0),I(e(h).isValid())}),o.clear()},300);function j(){o.add("provider"),o.add("active"),o.add("authUrl"),o.add("callbackUrl"),o.add("clientId"),o.add("clientSecret"),o.add("redirectUrl"),o.add("scope"),o.add("tokenUrl"),u(),u.flush()}Gr(j);var A=Lr(),G=Ne(A),q=r(G),te=r(q,!0);t(q);var a=l(q,2);a.__input=[re,o,u];var _=r(a);_.value=_.__value="google";var C=r(_,!0);t(_);var B=l(_);B.value=B.__value="facebook";var ne=r(B,!0);t(B);var se=l(B);se.value=se.__value="github";var je=r(se,!0);t(se);var le=l(se);le.value=le.__value="microsoft";var Be=r(le,!0);t(le);var fe=l(le);fe.value=fe.__value="x";var b=r(fe,!0);t(fe),t(a);var v=l(a,2);Z(v,{name:"provider",get result(){return e(h)}}),t(G);var f=l(G,2),k=r(f),m=r(k),W=l(m);ae(W),W.__input=[re,o,u],t(k);var Y=l(k,2);Z(Y,{name:"active",get result(){return e(h)}}),t(f);var ce=l(f,2),Oe=r(ce),Pe=r(Oe,!0);t(Oe);var ie=l(Oe,2);ae(ie),ie.__input=[re,o,u];var Me=l(ie,2);Z(Me,{name:"clientId",get result(){return e(h)}}),t(ce);var Se=l(ce,2),_e=r(Se),qe=r(_e,!0);t(_e);var Q=l(_e,2);ae(Q),Q.__input=[re,o,u];var Fe=l(Q,2);Z(Fe,{name:"clientSecret",get result(){return e(h)}}),t(Se);var be=l(Se,2),me=r(be),Le=r(me,!0);t(me);var D=l(me,2);ae(D),D.__input=[re,o,u];var R=l(D,2);Z(R,{name:"redirectUrl",get result(){return e(h)}}),t(be);var F=l(be,2),oe=r(F),ge=r(oe,!0);t(oe);var de=l(oe,2);ae(de),de.__input=[re,o,u];var De=l(de,2);Z(De,{name:"authUrl",get result(){return e(h)}}),t(F);var xe=l(F,2),Ae=r(xe),Te=r(Ae,!0);t(Ae);var ve=l(Ae,2);ae(ve),ve.__input=[re,o,u];var Ee=l(ve,2);Z(Ee,{name:"callbackUrl",get result(){return e(h)}}),t(xe);var Ue=l(xe,2),Ce=r(Ue),pe=r(Ce,!0);t(Ce);var L=l(Ce,2);ae(L),L.__input=[re,o,u];var at=l(L,2);Z(at,{name:"scope",get result(){return e(h)}}),t(Ue);var Je=l(Ue,2),Ve=r(Je),nt=r(Ve,!0);t(Ve);var ke=l(Ve,2);ae(ke),ke.__input=[re,o,u];var lt=l(ke,2);Z(lt,{name:"tokenUrl",get result(){return e(h)}}),t(Je),V((Re,it,ot,dt,vt,ut,st,ct,_t,pt,ht,ft,bt,mt,gt,xt,Ut,kt,yt,wt,It,Ot,Pt,St,At,Tt,Ct,Nt,jt,Bt,Dt)=>{d(te,Re),H(a,1,`w-full ${it??""}`),ee(a,"placeholder",ot),d(C,dt),d(ne,vt),d(je,ut),d(Be,st),d(b,ct),d(m,`${_t??""} `),H(W,1,pt),d(Pe,ht),H(ie,1,`w-full ${ft??""}`),ee(ie,"placeholder",bt),d(qe,mt),H(Q,1,`w-full ${gt??""}`),ee(Q,"placeholder",xt),d(Le,Ut),H(D,1,`w-full ${kt??""}`),ee(D,"placeholder",yt),d(ge,wt),H(de,1,`w-full ${It??""}`),ee(de,"placeholder",Ot),d(Te,Pt),H(ve,1,`w-full ${St??""}`),ee(ve,"placeholder",At),d(pe,Tt),H(L,1,`w-full ${Ct??""}`),ee(L,"placeholder",Nt),d(nt,jt),H(ke,1,`w-full ${Bt??""}`),ee(ke,"placeholder",Dt)},[()=>Rt(),()=>e(S)("provider"),()=>Wt(),()=>Xt(),()=>Yt(),()=>zt(),()=>Ht(),()=>Jt(),()=>Kt(),()=>qt(e(S)("active")),()=>Qt(),()=>e(S)("clientId"),()=>Zt(),()=>$t(),()=>e(S)("clientSecret"),()=>er(),()=>tr(),()=>e(S)("redirectUrl"),()=>rr(),()=>ar(),()=>e(S)("authUrl"),()=>nr(),()=>lr(),()=>e(S)("callbackUrl"),()=>ir(),()=>or(),()=>e(S)("scope"),()=>dr(),()=>vr(),()=>e(S)("tokenUrl"),()=>ur()]),Mr(a,c),sr(W,O),ue(ie,g),ue(Q,w),ue(D,x),ue(de,y),ue(ve,P),ue(L,T),ue(ke,U),N(p,A),Ie()}Ge(["input"]);var Vr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Rr=M('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Wr(p,n){we(n,!0);let c=s("google"),O=s(!0),y=s(void 0),P=s(void 0),g=s(""),w=s(""),x=s(""),T=s(void 0),U=s(void 0),I=s(!1),E=he(()=>e(I)),h=s(!1);async function S(a){a.preventDefault();try{i(I,!0),e(h)&&n.onCreate(await He.createTenantOauth2Provider(n.tenantId,{provider:e(c),active:e(O),authUrl:e(y),callbackUrl:e(P),clientId:e(g),clientSecret:e(w),redirectUrl:e(x),scope:e(T),tokenUrl:e(U)},n.applicationId))}catch(_){await Ye(_)}finally{i(I,!1)}}var o=Rr(),u=r(o);rt(u,{isNew:!0,get valid(){return e(h)},set valid(a){i(h,a,!0)},get provider(){return e(c)},set provider(a){i(c,a,!0)},get active(){return e(O)},set active(a){i(O,a,!0)},get authUrl(){return e(y)},set authUrl(a){i(y,a,!0)},get callbackUrl(){return e(P)},set callbackUrl(a){i(P,a,!0)},get clientId(){return e(g)},set clientId(a){i(g,a,!0)},get clientSecret(){return e(w)},set clientSecret(a){i(w,a,!0)},get redirectUrl(){return e(x)},set redirectUrl(a){i(x,a,!0)},get scope(){return e(T)},set scope(a){i(T,a,!0)},get tokenUrl(){return e(U)},set tokenUrl(a){i(U,a,!0)}});var j=l(u,2),A=r(j),G=r(A);{var q=a=>{var _=Vr(),C=r(_),B=r(C);ze(B),t(C),t(_),N(a,_)};ye(G,a=>{e(I)&&a(q)})}var te=l(G);t(A),t(j),t(o),V(a=>{A.disabled=e(E),d(te,` ${a??""}`)},[()=>_r()]),Xe("submit",o,S),N(p,o),Ie()}const Xr=()=>Ze((p={},n)=>{n.length&&(et(n),J("providerConfirm",$(),()=>{K(p.providerConfirm).isNotBlank()}),J("providerConfirm",br(),()=>{K(p.provider===p.providerConfirm).isTruthy()}))});function Yr(p,n,c){n.add(p.currentTarget.name),c()}var zr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Hr=M('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Jr(p,n){we(n,!0);let c=s(""),O=Xr(),y=s(X(O.get())),P=s(!1),g=he(()=>e(P)),w=he(()=>tt(e(y),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const x=new Set,T=$e(()=>{O({provider:n.provider,providerConfirm:e(c)},Array.from(x)).done(_=>{i(y,_,!0)}),x.clear()},300);function U(){x.add("name"),T(),T.flush()}async function I(_){_.preventDefault();try{i(P,!0),i(c,e(c).trim(),!0),U(),e(y).isValid()&&(await He.deleteTenantOauth2Provider(n.tenantId,n.tenantOAuth2ProviderId,n.applicationId),n.onDelete())}catch(C){await Ye(C)}finally{i(P,!1)}}var E=Hr(),h=r(E),S=r(h,!0);t(h);var o=l(h,2),u=r(o);ae(u),u.__input=[Yr,x,T];var j=l(u,2);Z(j,{name:"providerConfirm",get result(){return e(y)}}),t(o);var A=l(o,2),G=r(A),q=r(G);{var te=_=>{var C=zr(),B=r(C),ne=r(B);ze(ne),t(B),t(C),N(_,C)};ye(q,_=>{e(P)&&_(te)})}var a=l(q);t(G),t(A),t(E),V((_,C,B,ne)=>{d(S,_),H(u,1,`w-full ${C??""}`),ee(u,"placeholder",B),G.disabled=e(g),d(a,` ${ne??""}`)},[()=>pr(),()=>e(w)("providerConfirm"),()=>hr({provider:n.provider}),()=>fr()]),Xe("submit",E,I),ue(u,()=>e(c),_=>i(c,_)),N(p,E),Ie()}Ge(["input"]);var Kr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Qr=M('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Zr(p,n){we(n,!0);let c=s(X(n.tenantOAuth2Provider.provider)),O=s(X(n.tenantOAuth2Provider.active)),y=s(X(n.tenantOAuth2Provider.authUrl)),P=s(X(n.tenantOAuth2Provider.callbackUrl)),g=s(X(n.tenantOAuth2Provider.clientId)),w=s(X(n.tenantOAuth2Provider.clientSecret)),x=s(X(n.tenantOAuth2Provider.redirectUrl)),T=s(X(n.tenantOAuth2Provider.scope)),U=s(X(n.tenantOAuth2Provider.tokenUrl)),I=s(!1),E=he(()=>e(I)),h=s(!1);async function S(a){a.preventDefault();try{i(I,!0),e(h)&&n.onEdit(await He.updateTenantOauth2Provider(n.tenantId,n.tenantOAuth2Provider.id,{active:e(O),authUrl:e(y),callbackUrl:e(P),clientId:e(g),clientSecret:e(w),redirectUrl:e(x),scope:e(T),tokenUrl:e(U)},n.applicationId))}catch(_){await Ye(_)}finally{i(I,!1)}}var o=Qr(),u=r(o);rt(u,{isNew:!1,get valid(){return e(h)},set valid(a){i(h,a,!0)},get provider(){return e(c)},set provider(a){i(c,a,!0)},get active(){return e(O)},set active(a){i(O,a,!0)},get authUrl(){return e(y)},set authUrl(a){i(y,a,!0)},get callbackUrl(){return e(P)},set callbackUrl(a){i(P,a,!0)},get clientId(){return e(g)},set clientId(a){i(g,a,!0)},get clientSecret(){return e(w)},set clientSecret(a){i(w,a,!0)},get redirectUrl(){return e(x)},set redirectUrl(a){i(x,a,!0)},get scope(){return e(T)},set scope(a){i(T,a,!0)},get tokenUrl(){return e(U)},set tokenUrl(a){i(U,a,!0)}});var j=l(u,2),A=r(j),G=r(A);{var q=a=>{var _=Kr(),C=r(_),B=r(C);ze(B),t(C),t(_),N(a,_)};ye(G,a=>{e(I)&&a(q)})}var te=l(G);t(A),t(j),t(o),V(a=>{A.disabled=e(E),d(te,` ${a??""}`)},[()=>mr()]),Xe("submit",o,S),N(p,o),Ie()}var $r=M('<button class="btn secondary icon lg"><!></button>'),ea=M('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ta=M('<tr><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ra=M("<h3> </h3>"),aa=M("<h3> </h3>"),na=M("<h3> </h3>"),la=M('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function ia(p,n){we(n,!0);let c=z(n,"oauth2Providers",7),O=s(!1);function y(){i(O,!0)}function P(b){c().unshift(b),i(O,!1)}let g=s(void 0),w=s(!1);function x(b){return()=>{i(g,b,!0),i(w,!0)}}function T(b){const v=c().findIndex(f=>f.id===(b==null?void 0:b.id));v!==-1&&(c()[v]=b),i(g,void 0),i(w,!1)}let U=s(void 0),I=s(!1);function E(b){return()=>{i(U,b,!0),i(I,!0)}}function h(){const b=c().findIndex(v=>{var f;return v.id===((f=e(U))==null?void 0:f.id)});b!==-1&&c().splice(b,1),i(U,void 0),i(I,!1)}var S=la(),o=Ne(S),u=r(o),j=r(u),A=r(j),G=r(A,!0);t(A);var q=l(A),te=r(q,!0);t(q);var a=l(q),_=r(a,!0);t(a);var C=l(a),B=r(C,!0);t(C);var ne=l(C),se=r(ne,!0);t(ne),Et(),t(j),t(u);var je=l(u);gr(je,23,c,b=>b.id,(b,v,f)=>{var k=ta();let m;var W=r(k),Y=r(W,!0);t(W);var ce=l(W),Oe=r(ce,!0);t(ce);var Pe=l(ce),ie=r(Pe);{var Me=D=>{var R=Qe();V(F=>d(R,F),[()=>Tr()]),N(D,R)},Se=D=>{var R=Qe();V(F=>d(R,F),[()=>Cr()]),N(D,R)};ye(ie,D=>{e(v).active?D(Me):D(Se,!1)})}t(Pe);var _e=l(Pe),qe=r(_e,!0);t(_e);var Q=l(_e),Fe=r(Q,!0);t(Q);var be=l(Q),me=r(be),Le=r(me);Nr(Le,{position:"top-right",anchorPosition:"bottom-right",button:R=>{var F=$r(),oe=r(F);Dr(oe,{}),t(F),N(R,F)},children:(R,F)=>{var oe=ea(),ge=Ne(oe),de=he(()=>x(e(v)));ge.__click=function(...pe){var L;(L=e(de))==null||L.apply(this,pe)};var De=r(ge);jr(De,{});var xe=l(De),Ae=r(xe,!0);t(xe),t(ge);var Te=l(ge,2),ve=he(()=>E(e(v)));Te.__click=function(...pe){var L;(L=e(ve))==null||L.apply(this,pe)};var Ee=r(Te);Br(Ee,{});var Ue=l(Ee),Ce=r(Ue,!0);t(Ue),t(Te),V((pe,L)=>{d(Ae,pe),d(Ce,L)},[()=>Sr(),()=>Ar()]),N(R,oe)},$$slots:{button:!0,default:!0}}),t(me),t(be),t(k),V((D,R,F)=>{m=H(k,1,"group",null,m,D),d(Y,e(v).id),d(Oe,e(v).provider),d(qe,R),d(Fe,F)},[()=>({"border-b":e(f)<c().length-1}),()=>e(v).updatedAt.toLocaleString(),()=>e(v).createdAt.toLocaleString()]),N(b,k)}),t(je),t(o);var le=l(o,2);We(le,{get open(){return e(O)},set open(v){i(O,v,!0)},title:v=>{var f=ra(),k=r(f,!0);t(f),V(m=>d(k,m),[()=>Ir()]),N(v,f)},children:(v,f)=>{Wr(v,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},onCreate:P})},$$slots:{title:!0,default:!0}});var Be=l(le,2);We(Be,{get open(){return e(w)},set open(v){i(w,v,!0)},title:v=>{var f=aa(),k=r(f,!0);t(f),V(m=>d(k,m),[()=>{var m;return Or({issuer:((m=e(g))==null?void 0:m.provider)||""})}]),N(v,f)},children:(v,f)=>{var k=Ke(),m=Ne(k);{var W=Y=>{Zr(Y,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},get tenantOAuth2Provider(){return e(g)},onEdit:T})};ye(m,Y=>{e(g)&&Y(W)})}N(v,k)},$$slots:{title:!0,default:!0}});var fe=l(Be,2);return We(fe,{get open(){return e(I)},set open(v){i(I,v,!0)},title:v=>{var f=na(),k=r(f,!0);t(f),V(m=>d(k,m),[()=>{var m;return Pr({issuer:((m=e(U))==null?void 0:m.provider)||""})}]),N(v,f)},children:(v,f)=>{var k=Ke(),m=Ne(k);{var W=Y=>{Jr(Y,{get applicationId(){return n.applicationId},get tenantId(){return n.tenantId},get tenantOAuth2ProviderId(){return e(U).id},get provider(){return e(U).provider},onDelete:h})};ye(m,Y=>{e(U)&&Y(W)})}N(v,k)},$$slots:{title:!0,default:!0}}),V((b,v,f,k,m)=>{d(G,b),d(te,v),d(_,f),d(B,k),d(se,m)},[()=>xr(),()=>Ur(),()=>kr(),()=>yr(),()=>wr()]),N(p,S),Ie({onCreate:y})}Ge(["click"]);var oa=M('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ua(p,n){we(n,!0);let c=s(void 0),O=X(n.data.tenant.oauth2Providers);var y=oa();Mt(u=>{V(j=>Gt.title=j,[()=>Ft()])});var P=r(y),g=r(P),w=r(g),x=r(w),T=r(x),U=r(T);qr(U,{}),t(T),t(x);var I=l(x,2),E=r(I);t(I),t(w);var h=l(w,2);h.__click=function(...u){var j,A;(A=(j=e(c))==null?void 0:j.onCreate)==null||A.apply(this,u)};var S=r(h);Er(S,{}),t(h),t(g);var o=l(g,2);Lt(ia(o,{get applicationId(){return n.data.applicationId},get tenantId(){return n.data.tenantId},get oauth2Providers(){return O}}),u=>i(c,u,!0),()=>e(c)),t(P),t(y),V(()=>{ee(x,"href",`${Vt}/applications/${n.data.applicationId}/tenants`),d(E,`${n.data.application.name??""} / ${n.data.tenant.issuer??""}`)}),N(p,y),Ie()}Ge(["click"]);export{Ua as component};
