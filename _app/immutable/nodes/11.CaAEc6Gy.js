import{a as D,t as M}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as se,x as g,t as f,a as le,j as e,y as i,$ as ie,c as a,r,s as p,l as x}from"../chunks/runtime.psM0e5Y8.js";import{d as ne,h as oe,e as ue,s as E}from"../chunks/render.Cjq5XT8C.js";import{i as de}from"../chunks/runtime.CsaQGn2V.js";import{d as ve,a as L,e as T,b as fe,r as U,s as V,c as z,f as pe,g as me,h as _e}from"../chunks/debounce.BaQmhekd.js";import{I as F,b as H,G as ce,m as he,C as S,v as A,S as be,h as ge,a as xe}from"../chunks/InputResults.CgtxMCGx.js";import{p as m}from"../chunks/proxy.BhkZ7AL-.js";import"../chunks/isURL.production.K_L6Xxdv.js";import{g as we}from"../chunks/entry.XFNEGJAZ.js";import{b as ye}from"../chunks/paths.O-eWMSOt.js";import{a as J,s as $e}from"../chunks/api.svelte.BGkF74jR.js";const qe=()=>ce((l={},n)=>{n.length&&(he(n),S("url",T(),()=>{A(l.url).isNotBlank()}),S("url",fe(),()=>{A(l.url).isURL({protocols:["http","https"],require_tld:!1,require_protocol:!0,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!1,allow_query_components:!1})}),S("tenant",T(),()=>{A(l.tenant).isNotBlank()}))});function K(l,n,s){n.add(l.currentTarget.name),s()}var ke=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),je=M('<div class="flex flex-grow flex-col justify-end p-4 sm:justify-start"><div class="card mx-auto my-10 flex w-full flex-shrink flex-col sm:w-72"><h1 class="mb-1"> </h1> <form><div class="mb-2"><input type="url" name="url"> <!></div> <div class="mb-2"><input type="text" name="tenant"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form></div></div>');function Te(l,n){se(n,!0);let s=g(m(J.url||"")),o=g(m(J.tenant||"")),C=qe(),_=g(m(C.get())),h=g(!1),O=x(()=>e(h)),B=x(()=>xe(e(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const u=new Set,b=ve(()=>{C({url:e(s),tenant:e(o)},Array.from(u)).done(t=>{i(_,m(t))}),u.clear()},300);function P(){u.add("url"),u.add("tenant"),b(),b.flush()}async function Q(t){t.preventDefault();try{i(h,!0),i(s,m(e(s).trim())),i(o,m(e(o).trim())),P(),e(_).isValid()&&(await $e({url:e(s),tenant:e(o)}),await we(`${ye}/signin`))}catch(c){await ge(c)}finally{i(h,!1)}}var w=je();oe(t=>{f(()=>ie.title=L())});var G=a(w),y=a(G),W=a(y,!0);f(()=>E(W,L())),r(y);var $=p(y,2),q=a($),d=a(q);U(d);const X=x(()=>`w-full ${e(B)("url")??""}`);f(()=>V(d,"placeholder",pe())),d.__input=[K,u,b];var Y=p(d,2);F(Y,{name:"url",get result(){return e(_)}}),r(q);var k=p(q,2),v=a(k);U(v);const Z=x(()=>`w-full ${e(B)("tenant")??""}`);f(()=>V(v,"placeholder",me())),v.__input=[K,u,b];var ee=p(v,2);F(ee,{name:"tenant",get result(){return e(_)}}),r(k);var I=p(k,2),j=a(I),N=a(j);{var te=t=>{var c=ke(),R=a(c),re=a(R);be(re),r(R),r(c),D(t,c)};de(N,t=>{e(h)&&t(te)})}var ae=p(N);f(()=>E(ae,` ${_e()??""}`)),r(j),r(I),r($),r(G),r(w),f(()=>{z(d,e(X)),z(v,e(Z)),j.disabled=e(O)}),ue("submit",$,Q),H(d,()=>e(s),t=>i(s,t)),H(v,()=>e(o),t=>i(o,t)),D(l,w),le()}ne(["input"]);export{Te as component};
