import{a as $,t as j,c as Ut}from"../chunks/disclose-version.DAXeEFki.js";import{p as K,w as y,i as t,x as l,t as o,a as Q,c as a,s,r as e,k as L,f as it,ah as ve,$ as ce}from"../chunks/runtime.Dxz2USVk.js";import{d as W,e as ht,s as m,h as pe}from"../chunks/render.BT-HGqxZ.js";import{p as C}from"../chunks/proxy.wnGPLs2U.js";import{p as Jt,b as fe}from"../chunks/props.VGTkXN6c.js";import{d as gt,e as xt,r as yt,s as H,b as wt,l as Kt,m as _e,n as me,o as be,p as he,q as ge,t as xe,u as ye,v as we,w as Ae,x as ke,y as $e,z as Ce,A as Se,B as je,C as Ee,D as De,E as Ie,F as Te,G as Pe,H as Me,I as Oe}from"../chunks/debounce.ZLRl6Ahz.js";import{i as J}from"../chunks/runtime.CpXx6LBu.js";import{o as Be}from"../chunks/index-client.ClaMtOFT.js";import{g as Fe,D as Ne}from"../chunks/Dropdown.deJfGaB5.js";import{a as ot}from"../chunks/index.Bg6CL-Uu.js";import{b as _t}from"../chunks/paths.DxZnsL0E.js";import{M as mt,P as Ge,T as Le,E as Ve,a as qe}from"../chunks/Modal.Djv8yqq0.js";import{I as At,b as kt,G as $t,m as Ct,C as st,v as lt,S as St,h as jt,a as Et}from"../chunks/InputResults.BZck2DBY.js";import{E as bt}from"../chunks/external-link.D1WqY_YN.js";const ze=()=>$t((u={},r)=>{r.length&&(Ct(r),st("name",xt(),()=>{lt(u.name).isNotBlank()}))});function He(u,r,n){r.add(u.currentTarget.name),n()}var Re=j('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ue=j('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ze(u,r){K(r,!0);let n=y(""),w=ze(),_=y(C(w.get())),p=y(!1),F=L(()=>t(p)),P=L(()=>Et(t(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const b=new Set,h=gt(()=>{w({name:t(n)},Array.from(b)).done(c=>{l(_,C(c))}),b.clear()},300);function S(){b.add("name"),h(),h.flush()}async function E(c){c.preventDefault();try{l(p,!0),l(n,C(t(n).trim())),S(),t(_).isValid()&&r.onCreate(await ot.createApplication({name:t(n)}))}catch(x){await jt(x)}finally{l(p,!1)}}var A=Ue(),D=a(A),v=a(D);yt(v);const M=L(()=>`w-full ${t(P)("name")??""}`);o(()=>H(v,"placeholder",Kt())),v.__input=[He,b,h];var O=s(v,2);At(O,{name:"name",get result(){return t(_)}}),e(D);var V=s(D,2),N=a(V),B=a(N);{var z=c=>{var x=Re(),g=a(x),I=a(g);St(I),e(g),e(x),$(c,x)};J(B,c=>{t(p)&&c(z)})}var q=s(B);o(()=>m(q,` ${_e()??""}`)),e(N),e(V),e(A),o(()=>{wt(v,t(M)),N.disabled=t(F)}),ht("submit",A,E),kt(v,()=>t(n),c=>l(n,c)),$(u,A),Q()}W(["input"]);const Je=()=>$t((u={},r)=>{r.length&&(Ct(r),st("nameConfirm",xt(),()=>{lt(u.nameConfirm).isNotBlank()}),st("nameConfirm",me(),()=>{lt(u.name===u.nameConfirm).isTruthy()}))});function Ke(u,r,n){r.add(u.currentTarget.name),n()}var Qe=j('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),We=j('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Xe(u,r){K(r,!0);let n=y(""),w=Je(),_=y(C(w.get())),p=y(!1),F=L(()=>t(p)),P=L(()=>Et(t(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const b=new Set,h=gt(()=>{w({name:r.name,nameConfirm:t(n)},Array.from(b)).done(g=>{l(_,C(g))}),b.clear()},300);function S(){b.add("name"),h(),h.flush()}async function E(g){g.preventDefault();try{l(p,!0),l(n,C(t(n).trim())),S(),t(_).isValid()&&(await ot.deleteApplication(r.applicationId),r.onDelete())}catch(I){await jt(I)}finally{l(p,!1)}}var A=We(),D=a(A),v=a(D,!0);o(()=>m(v,he())),e(D);var M=s(D,2),O=a(M);yt(O);const V=L(()=>`w-full ${t(P)("nameConfirm")??""}`);o(()=>H(O,"placeholder",be({name:r.name}))),O.__input=[Ke,b,h];var N=s(O,2);At(N,{name:"nameConfirm",get result(){return t(_)}}),e(M);var B=s(M,2),z=a(B),q=a(z);{var c=g=>{var I=Qe(),X=a(I),R=a(X);St(R),e(X),e(I),$(g,I)};J(q,g=>{t(p)&&g(c)})}var x=s(q);o(()=>m(x,` ${ge()??""}`)),e(z),e(B),e(A),o(()=>{wt(O,t(V)),z.disabled=t(F)}),ht("submit",A,E),kt(O,()=>t(n),g=>l(n,g)),$(u,A),Q()}W(["input"]);const Ye=()=>$t((u={},r)=>{r.length&&(Ct(r),st("name",xt(),()=>{lt(u.name).isNotBlank()}))});function ta(u,r,n){r.add(u.currentTarget.name),n()}var ea=j('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),aa=j('<form><div class="mb-2"><input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function na(u,r){K(r,!0);let n=Jt(r,"name",15,""),w=Ye(),_=y(C(w.get())),p=y(!1),F=L(()=>t(p)),P=L(()=>Et(t(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const b=new Set,h=gt(()=>{w({name:n()},Array.from(b)).done(c=>{l(_,C(c))}),b.clear()},300);function S(){b.add("name"),h(),h.flush()}async function E(c){c.preventDefault();try{l(p,!0),n(n().trim()),S(),t(_).isValid()&&r.onEdit(await ot.updateApplication(r.applicationId,{name:n()}))}catch(x){await jt(x)}finally{l(p,!1)}}var A=aa(),D=a(A),v=a(D);yt(v);const M=L(()=>`w-full ${t(P)("name")??""}`);o(()=>H(v,"placeholder",Kt())),v.__input=[ta,b,h];var O=s(v,2);At(O,{name:"name",get result(){return t(_)}}),e(D);var V=s(D,2),N=a(V),B=a(N);{var z=c=>{var x=ea(),g=a(x),I=a(g);St(I),e(g),e(x),$(c,x)};J(B,c=>{t(p)&&c(z)})}var q=s(B);o(()=>m(q,` ${xe()??""}`)),e(N),e(V),e(A),o(()=>{wt(v,t(M)),N.disabled=t(F)}),ht("submit",A,E),kt(v,n),$(u,A),Q()}W(["input"]);const Zt=20;var ra=j('<button class="btn secondary icon lg"><!></button>'),ia=j('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),sa=j('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),la=j("<h3> </h3>"),oa=j("<h3> </h3>"),da=j("<h3> </h3>"),ua=j('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function va(u,r){K(r,!0);let n=Jt(r,"applications",31,()=>C([])),w=y(0),_=y(!0),p=y(!1);Be(F);async function F(){if(!t(_))return;let d;l(p,!0);try{d=await ot.allApplications(t(w)*Zt,Zt)}finally{l(p,!1)}l(_,C(d.hasMore)),l(w,t(w)+1),n().push(...d.items)}let P=y(!1);function b(){l(P,!0)}function h(d){n().unshift(d),l(P,!1)}let S=y(void 0),E=y(!1);function A(d){return()=>{l(S,C(d)),l(E,!0)}}function D(d){const i=n().findIndex(f=>f.id===(d==null?void 0:d.id));i!==-1&&n(n()[i]=d,!0),l(S,void 0),l(E,!1)}let v=y(void 0),M=y(!1);function O(d){return()=>{l(v,C(d)),l(M,!0)}}function V(){const d=n().findIndex(i=>{var f;return i.id===((f=t(v))==null?void 0:f.id)});d!==-1&&n().splice(d,1),l(v,void 0),l(M,!1)}const N=Fe(),[B,z]=N;var q=ua(),c=it(q),x=a(c),g=a(x),I=a(g),X=a(I,!0);o(()=>m(X,$e())),e(I);var R=s(I),Qt=a(R,!0);o(()=>m(Qt,Ce())),e(R);var dt=s(R),Wt=a(dt,!0);o(()=>m(Wt,Se())),e(dt);var Dt=s(dt),Xt=a(Dt,!0);o(()=>m(Xt,je())),e(Dt),ve(),e(g),e(x);var It=s(x);ye(It,23,n,d=>d.id,(d,i,f)=>{var k=sa(),T=a(k),U=a(T,!0);e(T);var G=s(T),te=a(G,!0);e(G);var ut=s(G),ee=a(ut,!0);o(()=>m(ee,t(i).updatedAt.toLocaleString())),e(ut);var vt=s(ut),ae=a(vt,!0);o(()=>m(ae,t(i).createdAt.toLocaleString())),e(vt);var Mt=s(vt),Ot=a(Mt),ne=a(Ot);Ne(ne,{position:"top-right",anchorPosition:"bottom-right",button:ct=>{var Y=ra(),tt=a(Y);Ve(tt,{}),e(Y),$(ct,Y)},children:(ct,Y)=>{var tt=ia(),et=it(tt);o(()=>H(et,"href",B(`${_t}/applications/${t(i).id}/users`,void 0)));var Bt=a(et);bt(Bt,{});var Ft=s(Bt),re=a(Ft,!0);o(()=>m(re,Ee())),e(Ft),e(et);var at=s(et,2);o(()=>H(at,"href",B(`${_t}/applications/${t(i).id}/service-accounts`,void 0)));var Nt=a(at);bt(Nt,{});var Gt=s(Nt),ie=a(Gt,!0);o(()=>m(ie,De())),e(Gt),e(at);var nt=s(at,2);o(()=>H(nt,"href",B(`${_t}/applications/${t(i).id}/tenants`,void 0)));var Lt=a(nt);bt(Lt,{});var Vt=s(Lt),se=a(Vt,!0);o(()=>m(se,Ie())),e(Vt),e(nt);var rt=s(nt,2),le=L(()=>A(t(i)));rt.__click=function(...ft){var Z;(Z=t(le))==null||Z.apply(this,ft)};var qt=a(rt);Ge(qt,{});var zt=s(qt),oe=a(zt,!0);o(()=>m(oe,Te())),e(zt),e(rt);var pt=s(rt,2),de=L(()=>O(t(i)));pt.__click=function(...ft){var Z;(Z=t(de))==null||Z.apply(this,ft)};var Ht=a(pt);Le(Ht,{});var Rt=s(Ht),ue=a(Rt,!0);o(()=>m(ue,Pe())),e(Rt),e(pt),$(ct,tt)},$$slots:{button:!0,default:!0}}),e(Ot),e(Mt),e(k),o(()=>{we(k,"border-b",t(f)<n().length-1),m(U,t(i).id),m(te,t(i).name)}),$(d,k)}),e(It),e(c);var Tt=s(c,2);mt(Tt,{get open(){return t(P)},set open(i){l(P,C(i))},title:i=>{var f=la(),k=a(f,!0);o(()=>m(k,Me())),e(f),$(i,f)},children:(i,f)=>{Ze(i,{onCreate:h})},$$slots:{title:!0,default:!0}});var Pt=s(Tt,2);mt(Pt,{get open(){return t(E)},set open(i){l(E,C(i))},title:i=>{var f=oa(),k=a(f,!0);o(()=>{var T;return m(k,Ae({name:((T=t(S))==null?void 0:T.name)||""}))}),e(f),$(i,f)},children:(i,f)=>{var k=Ut(),T=it(k);{var U=G=>{na(G,{get applicationId(){return t(S).id},get name(){return t(S).name},onEdit:D})};J(T,G=>{t(S)&&G(U)})}$(i,k)},$$slots:{title:!0,default:!0}});var Yt=s(Pt,2);return mt(Yt,{get open(){return t(M)},set open(i){l(M,C(i))},title:i=>{var f=da(),k=a(f,!0);o(()=>{var T;return m(k,ke({name:((T=t(v))==null?void 0:T.name)||""}))}),e(f),$(i,f)},children:(i,f)=>{var k=Ut(),T=it(k);{var U=G=>{Xe(G,{get applicationId(){return t(v).id},get name(){return t(v).name},onDelete:V})};J(T,G=>{t(v)&&G(U)})}$(i,k)},$$slots:{title:!0,default:!0}}),$(u,q),Q({onCreate:b})}W(["click"]);var ca=j('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-end"><button class="btn primary icon lg"><!></button></div> <!></div></div>');function ja(u,r){K(r,!0);let n=y(void 0);var w=ca();pe(h=>{o(()=>ce.title=Oe())});var _=a(w),p=a(_),F=a(p);F.__click=function(...h){var S,E;(E=(S=t(n))==null?void 0:S.onCreate)==null||E.apply(this,h)};var P=a(F);qe(P,{}),e(F),e(p);var b=s(p,2);fe(va(b,{}),h=>l(n,C(h)),()=>t(n)),e(_),e(w),$(u,w),Q()}W(["click"]);export{ja as component};
