import{a as P,t as E,c as Nt}from"../chunks/disclose-version.DAXeEFki.js";import{p as X,w as D,i as t,x as d,t as s,a as Y,c as a,s as o,r as e,k as q,f as rt,ah as Wt,$ as Xt}from"../chunks/runtime.Dxz2USVk.js";import{d as Z,e as _t,s as h,h as Yt}from"../chunks/render.BT-HGqxZ.js";import{d as ct,e as ft,r as pt,s as z,b as ht,J as Vt,K as Zt,n as zt,L as Ht,M as $t,N as te,O as ee,u as ae,v as re,P as ne,Q as ie,R as oe,S as de,T as se,U as le,V as ve,W as ue,X as _e,Y as ce,Z as fe,_ as pe}from"../chunks/debounce.ZLRl6Ahz.js";import{p as T}from"../chunks/proxy.wnGPLs2U.js";import{p as he,b as me}from"../chunks/props.VGTkXN6c.js";import{D as be,g as ge}from"../chunks/Dropdown.deJfGaB5.js";import{b as Bt}from"../chunks/paths.DxZnsL0E.js";import{i as W}from"../chunks/runtime.CpXx6LBu.js";import{M as ut,P as xe,T as ye,E as we,a as Ie}from"../chunks/Modal.Djv8yqq0.js";import{I as mt,b as bt,G as gt,m as xt,C as nt,v as it,S as yt,h as wt,a as It}from"../chunks/InputResults.BZck2DBY.js";import{d as kt}from"../chunks/index.Bg6CL-Uu.js";import{E as ke}from"../chunks/external-link.D1WqY_YN.js";import{C as Pe}from"../chunks/chevron-left.Bu43mO8U.js";const Te=()=>gt((v={},r)=>{r.length&&(xt(r),nt("provider",ft(),()=>{it(v.provider).isNotBlank()}))});function Ae(v,r,n){r.add(v.currentTarget.name),n()}var Oe=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ce=E('<form><div class="mb-2"><input type="text" name="provider"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Se(v,r){X(r,!0);let n=D(""),A=Te(),m=D(T(A.get())),x=D(!1),O=q(()=>t(x)),N=q(()=>It(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,b=ct(()=>{A({provider:t(n)},Array.from(c)).done(l=>{d(m,T(l))}),c.clear()},300);function y(){c.add("provider"),b(),b.flush()}async function M(l){l.preventDefault();try{d(x,!0),d(n,T(t(n).trim())),y(),t(m).isValid()&&r.onCreate(await kt.createTenantOauth2Provider(r.tenantId,{provider:t(n)},r.applicationId))}catch(j){await wt(j)}finally{d(x,!1)}}var p=Ce(),C=a(p),u=a(C);pt(u);const V=q(()=>`w-full ${t(N)("provider")??""}`);s(()=>z(u,"placeholder",Vt())),u.__input=[Ae,c,b];var w=o(u,2);mt(w,{name:"provider",get result(){return t(m)}}),e(C);var S=o(C,2),I=a(S),B=a(I);{var F=l=>{var j=Oe(),g=a(j),G=a(g);yt(G),e(g),e(j),P(l,j)};W(B,l=>{t(x)&&l(F)})}var J=o(B);s(()=>h(J,` ${Zt()??""}`)),e(I),e(S),e(p),s(()=>{ht(u,t(V)),I.disabled=t(O)}),_t("submit",p,M),bt(u,()=>t(n),l=>d(n,l)),P(v,p),Y()}Z(["input"]);const je=()=>gt((v={},r)=>{r.length&&(xt(r),nt("providerConfirm",ft(),()=>{it(v.providerConfirm).isNotBlank()}),nt("providerConfirm",zt(),()=>{it(v.provider===v.providerConfirm).isTruthy()}))});function De(v,r,n){r.add(v.currentTarget.name),n()}var Ee=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ne=E('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Ve(v,r){X(r,!0);let n=D(""),A=je(),m=D(T(A.get())),x=D(!1),O=q(()=>t(x)),N=q(()=>It(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,b=ct(()=>{A({provider:r.provider,providerConfirm:t(n)},Array.from(c)).done(g=>{d(m,T(g))}),c.clear()},300);function y(){c.add("name"),b(),b.flush()}async function M(g){g.preventDefault();try{d(x,!0),d(n,T(t(n).trim())),y(),t(m).isValid()&&(await kt.deleteTenantOauth2Provider(r.tenantId,r.tenantOAuth2ProviderId,r.applicationId),r.onDelete())}catch(G){await wt(G)}finally{d(x,!1)}}var p=Ne(),C=a(p),u=a(C,!0);s(()=>h(u,$t())),e(C);var V=o(C,2),w=a(V);pt(w);const S=q(()=>`w-full ${t(N)("providerConfirm")??""}`);s(()=>z(w,"placeholder",Ht({provider:r.provider}))),w.__input=[De,c,b];var I=o(w,2);mt(I,{name:"providerConfirm",get result(){return t(m)}}),e(V);var B=o(V,2),F=a(B),J=a(F);{var l=g=>{var G=Ee(),K=a(G),H=a(K);yt(H),e(K),e(G),P(g,G)};W(J,g=>{t(x)&&g(l)})}var j=o(J);s(()=>h(j,` ${te()??""}`)),e(F),e(B),e(p),s(()=>{ht(w,t(S)),F.disabled=t(O)}),_t("submit",p,M),bt(w,()=>t(n),g=>d(n,g)),P(v,p),Y()}Z(["input"]);const Be=()=>gt((v={},r)=>{r.length&&(xt(r),nt("provider",ft(),()=>{it(v.provider).isNotBlank()}))});function Le(v,r,n){r.add(v.currentTarget.name),n()}var Me=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Fe=E('<form><div class="mb-2"><input type="text" name="provider"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ge(v,r){X(r,!0);let n=D(T(r.tenantOAuth2Provider.provider)),A=Be(),m=D(T(A.get())),x=D(!1),O=q(()=>t(x)),N=q(()=>It(t(m),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,b=ct(()=>{A({provider:t(n)},Array.from(c)).done(l=>{d(m,T(l))}),c.clear()},300);function y(){c.add("provider"),b(),b.flush()}async function M(l){l.preventDefault();try{d(x,!0),d(n,T(t(n).trim())),y(),t(m).isValid()&&r.onEdit(await kt.updateTenantOauth2Provider(r.tenantId,r.tenantOAuth2Provider.id,{provider:t(n)},r.applicationId))}catch(j){await wt(j)}finally{d(x,!1)}}var p=Fe(),C=a(p),u=a(C);pt(u);const V=q(()=>`w-full ${t(N)("provider")??""}`);s(()=>z(u,"placeholder",Vt())),u.__input=[Le,c,b];var w=o(u,2);mt(w,{name:"provider",get result(){return t(m)}}),e(C);var S=o(C,2),I=a(S),B=a(I);{var F=l=>{var j=Me(),g=a(j),G=a(g);yt(G),e(g),e(j),P(l,j)};W(B,l=>{t(x)&&l(F)})}var J=o(B);s(()=>h(J,` ${ee()??""}`)),e(I),e(S),e(p),s(()=>{ht(u,t(V)),I.disabled=t(O)}),_t("submit",p,M),bt(u,()=>t(n),l=>d(n,l)),P(v,p),Y()}Z(["input"]);var Re=E('<button class="btn secondary icon lg"><!></button>'),qe=E('<oa class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></oa> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Je=E('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Ke=E("<h3> </h3>"),Qe=E("<h3> </h3>"),Ue=E("<h3> </h3>"),We=E('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Xe(v,r){X(r,!0);let n=he(r,"tenant",7),A=D(!1);function m(){d(A,!0)}function x(f){n().oauth2Providers.unshift(f),d(A,!1)}let O=D(void 0),N=D(!1);function c(f){return()=>{d(O,T(f)),d(N,!0)}}function b(f){const i=n().oauth2Providers.findIndex(_=>_.id===(f==null?void 0:f.id));i!==-1&&(n().oauth2Providers[i]=f),d(O,void 0),d(N,!1)}let y=D(void 0),M=D(!1);function p(f){return()=>{d(y,T(f)),d(M,!0)}}function C(){const f=n().oauth2Providers.findIndex(i=>{var _;return i.id===((_=t(y))==null?void 0:_.id)});f!==-1&&n().oauth2Providers.splice(f,1),d(y,void 0),d(M,!1)}var u=We(),V=rt(u),w=a(V),S=a(w),I=a(S),B=a(I,!0);s(()=>h(B,oe())),e(I);var F=o(I),J=a(F,!0);s(()=>h(J,de())),e(F);var l=o(F),j=a(l,!0);s(()=>h(j,se())),e(l);var g=o(l),G=a(g,!0);s(()=>h(G,le())),e(g),Wt(),e(S),e(w);var K=o(w);ae(K,23,()=>n().oauth2Providers,f=>f.id,(f,i,_)=>{var k=Je(),L=a(k),Q=a(L,!0);e(L);var R=o(L),Mt=a(R,!0);e(R);var ot=o(R),Ft=a(ot,!0);s(()=>h(Ft,t(i).updatedAt.toLocaleString())),e(ot);var dt=o(ot),Gt=a(dt,!0);s(()=>h(Gt,t(i).createdAt.toLocaleString())),e(dt);var Tt=o(dt),At=a(Tt),Rt=a(At);be(Rt,{position:"top-right",anchorPosition:"bottom-right",button:st=>{var $=Re(),tt=a($);we(tt,{}),e($),P(st,$)},children:(st,$)=>{var tt=qe(),et=rt(tt),Ot=a(et);ke(Ot,{});var Ct=o(Ot),qt=a(Ct,!0);s(()=>h(qt,ve())),e(Ct),e(et);var at=o(et,2),Jt=q(()=>c(t(i)));at.__click=function(...vt){var U;(U=t(Jt))==null||U.apply(this,vt)};var St=a(at);xe(St,{});var jt=o(St),Kt=a(jt,!0);s(()=>h(Kt,ue())),e(jt),e(at);var lt=o(at,2),Qt=q(()=>p(t(i)));lt.__click=function(...vt){var U;(U=t(Qt))==null||U.apply(this,vt)};var Dt=a(lt);ye(Dt,{});var Et=o(Dt),Ut=a(Et,!0);s(()=>h(Ut,_e())),e(Et),e(lt),s(()=>z(et,"href",`${Bt}/applications/${r.applicationId}/tenant-oauth2-providers/${t(i).id}/oauth2-providers`)),P(st,tt)},$$slots:{button:!0,default:!0}}),e(At),e(Tt),e(k),s(()=>{re(k,"border-b",t(_)<n().oauth2Providers.length-1),h(Q,t(i).id),h(Mt,t(i).provider)}),P(f,k)}),e(K),e(V);var H=o(V,2);ut(H,{get open(){return t(A)},set open(i){d(A,T(i))},title:i=>{var _=Ke(),k=a(_,!0);s(()=>h(k,ce())),e(_),P(i,_)},children:(i,_)=>{Se(i,{get applicationId(){return r.applicationId},get tenantId(){return r.tenantId},onCreate:x})},$$slots:{title:!0,default:!0}});var Pt=o(H,2);ut(Pt,{get open(){return t(N)},set open(i){d(N,T(i))},title:i=>{var _=Qe(),k=a(_,!0);s(()=>{var L;return h(k,ne({issuer:((L=t(O))==null?void 0:L.provider)||""}))}),e(_),P(i,_)},children:(i,_)=>{var k=Nt(),L=rt(k);{var Q=R=>{Ge(R,{get applicationId(){return r.applicationId},get tenantId(){return r.tenantId},get tenantOAuth2Provider(){return t(O)},onEdit:b})};W(L,R=>{t(O)&&R(Q)})}P(i,k)},$$slots:{title:!0,default:!0}});var Lt=o(Pt,2);return ut(Lt,{get open(){return t(M)},set open(i){d(M,T(i))},title:i=>{var _=Ue(),k=a(_,!0);s(()=>{var L;return h(k,ie({issuer:((L=t(y))==null?void 0:L.provider)||""}))}),e(_),P(i,_)},children:(i,_)=>{var k=Nt(),L=rt(k);{var Q=R=>{Ve(R,{get applicationId(){return r.applicationId},get tenantId(){return r.tenantId},get tenantOAuth2ProviderId(){return t(y).id},get provider(){return t(y).provider},onDelete:C})};W(L,R=>{t(y)&&R(Q)})}P(i,k)},$$slots:{title:!0,default:!0}}),P(v,u),Y({onCreate:m})}Z(["click"]);var Ye=E('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function ua(v,r){X(r,!0);let n=D(void 0);const A=ge(),[m,x]=A;var O=Ye();Yt(S=>{s(()=>Xt.title=fe())});var N=a(O),c=a(N),b=a(c);s(()=>z(b,"href",m(`${Bt}/applications/${r.data.applicationId}/tenants`,void 0)));var y=a(b),M=a(y);Pe(M,{}),e(y);var p=o(y,2),C=a(p,!0);s(()=>h(C,pe())),e(p),e(b);var u=o(b,2);u.__click=function(...S){var I,B;(B=(I=t(n))==null?void 0:I.onCreate)==null||B.apply(this,S)};var V=a(u);Ie(V,{}),e(u),e(c);var w=o(c,2);me(Xe(w,{get applicationId(){return r.data.applicationId},get tenant(){return r.data.tenant}}),S=>d(n,T(S)),()=>t(n)),e(N),e(O),P(v,O),Y()}Z(["click"]);export{ua as component};
