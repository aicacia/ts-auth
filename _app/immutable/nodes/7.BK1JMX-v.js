import{f as V,a as M,c as ye}from"../chunks/CeYbTvSz.js";import{p as $,b as y,F as Z,s as i,c as a,t as z,g as e,G as U,a as ee,h as n,r as t,f as K,u as ft,a7 as mt,$ as bt}from"../chunks/wkzzbBdv.js";import{d as le,i as ae,s as p,e as je,h as pt}from"../chunks/D2HIu1zJ.js";import{d as fe,b as Y,r as ie,f as We,s as ht}from"../chunks/2O6vECAj.js";import{l as gt,s as xt,p as ue,b as yt}from"../chunks/CtNkBPER.js";import"../chunks/DgAY1fJe.js";import{b as wt}from"../chunks/BiGx9tMp.js";import{G as Ee,d as Ne,I as ve,az as Me,aA as Oe,aB as St,b as we,m as Be,C as re,g as _e,v as ne,i as Ve,j as Fe,S as Ge,aC as Ye,aD as $e,aE as et,aF as tt,aG as It,aH as At,aI as Ct,aJ as kt,aK as Pt,aL as Dt,O as Tt,aM as jt,o as Et,aN as Nt,aO as Mt,aP as Ot,aQ as Bt,aR as Vt,aS as Ft,aT as Gt,aU as Lt,aV as zt,aW as Rt,aX as Ut}from"../chunks/CjhoWwqu.js";import{e as Se}from"../chunks/D5kayNry.js";import{I as qt,s as Ht,M as xe,D as Jt,P as Kt,T as Qt,E as Wt,a as Xt}from"../chunks/CjJcdl5D.js";import{o as at}from"../chunks/BlFdF53H.js";import{P as rt}from"../chunks/ZoyK-Zui.js";import"../chunks/Sdrj0NjG.js";import{C as Zt}from"../chunks/By5vjJJ4.js";const Yt=()=>Ee((s,r)=>{r.length&&(Be(r),re("name",_e(),()=>{ne(s.name).isNotBlank()}))});function $t(s,r,l){r.add(s.currentTarget.name),l()}var ea=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ta=V('<form><div class="mb-2"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function aa(s,r){$(r,!0);let l=y(!1),h=y(!1),S=U(()=>e(l)||!e(h)),d=y(""),x=Yt(),u=y(Z(x.get())),I=U(()=>Ve(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,j=Ne(()=>{x({name:e(d)},Array.from(f)).done(m=>{n(u,m,!0),n(h,e(u).isValid(),!0)}),f.clear()},300);function B(){f.add("name"),j(),j.flush()}at(B);async function v(m){m.preventDefault();try{n(l,!0),e(h)&&r.onCreate(await Se.createServiceAccount({name:e(d)},r.applicationId))}catch(N){await Fe(N)}finally{n(l,!1)}}var P=ta(),A=a(P),w=a(A),o=a(w,!0);t(w);var _=i(w,2);ie(_),_.__input=[$t,f,j];var E=i(_,2);ve(E,{name:"name",get result(){return e(u)}}),t(A);var O=i(A,2),G=a(O),q=a(G);{var L=m=>{var N=ea(),T=a(N),F=a(T);Ge(F),t(T),t(N),M(m,N)};ae(q,m=>{e(l)&&m(L)})}var C=i(q);t(G),t(O),t(P),z((m,N,T,F)=>{p(o,m),fe(_,1,`w-full ${N??""}`),Y(_,"placeholder",T),G.disabled=e(S),p(C,` ${F??""}`)},[()=>Me(),()=>e(I)("name"),()=>Oe(),()=>St()]),je("submit",P,v),we(_,()=>e(d),m=>n(d,m)),M(s,P),ee()}le(["input"]);function Xe(s,r){const l=gt(r,["children","$$slots","$$events","$$legacy"]);qt(s,xt({name:"copy"},()=>l,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(S,d)=>{var x=ye(),u=K(x);Ht(u,r,"default",{}),M(S,x)},$$slots:{default:!0}}))}var ra=V('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""/></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""/> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function na(s,r){$(r,!0);let l=y(!1);function h(T){return async()=>{try{n(l,!0),await It(T),At(Ct(),"success")}finally{n(l,!1)}}}var S=ra(),d=K(S),x=a(d),u=a(x,!0);t(x);var I=i(x,2);ie(I),t(d);var f=i(d,2),j=a(f),B=a(j,!0);t(j);var v=i(j,2),P=a(v);ie(P);var A=i(P,2),w=U(()=>h(r.serviceAccount.clientId));A.__click=function(...T){var F;(F=e(w))==null||F.apply(this,T)};var o=a(A);Xe(o,{}),t(A),t(v),t(f);var _=i(f,2),E=a(_),O=a(E,!0);t(E);var G=i(E,2),q=a(G);const L=U(()=>tt());rt(q,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(L)},get value(){return r.serviceAccount.clientSecret}});var C=i(q,2),m=U(()=>h(r.serviceAccount.clientSecret));C.__click=function(...T){var F;(F=e(m))==null||F.apply(this,T)};var N=a(C);Xe(N,{}),t(C),t(G),t(_),z((T,F,Q,ce,W)=>{p(u,T),Y(I,"placeholder",F),We(I,r.serviceAccount.name),p(B,Q),Y(P,"placeholder",ce),We(P,r.serviceAccount.clientId),A.disabled=e(l),p(O,W),C.disabled=e(l)},[()=>Me(),()=>Oe(),()=>Ye(),()=>$e(),()=>et()]),M(s,S),ee()}le(["click"]);const ia=()=>Ee((s={},r)=>{r.length&&(Be(r),re("nameConfirm",_e(),()=>{ne(s.nameConfirm).isNotBlank()}),re("nameConfirm",Tt(),()=>{ne(s.name===s.nameConfirm).isTruthy()}))});function la(s,r,l){r.add(s.currentTarget.name),l()}var ca=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),oa=V('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function sa(s,r){$(r,!0);let l=y(""),h=ia(),S=y(Z(h.get())),d=y(!1),x=U(()=>e(d)),u=U(()=>Ve(e(S),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,f=Ne(()=>{h({name:r.name,nameConfirm:e(l)},Array.from(I)).done(C=>{n(S,C,!0)}),I.clear()},300);function j(){I.add("name"),f(),f.flush()}async function B(C){C.preventDefault();try{n(d,!0),n(l,e(l).trim(),!0),j(),e(S).isValid()&&(await Se.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(m){await Fe(m)}finally{n(d,!1)}}var v=oa(),P=a(v),A=a(P,!0);t(P);var w=i(P,2),o=a(w);ie(o),o.__input=[la,I,f];var _=i(o,2);ve(_,{name:"nameConfirm",get result(){return e(S)}}),t(w);var E=i(w,2),O=a(E),G=a(O);{var q=C=>{var m=ca(),N=a(m),T=a(N);Ge(T),t(N),t(m),M(C,m)};ae(G,C=>{e(d)&&C(q)})}var L=i(G);t(O),t(E),t(v),z((C,m,N,T)=>{p(A,C),fe(o,1,`w-full ${m??""}`),Y(o,"placeholder",N),O.disabled=e(x),p(L,` ${T??""}`)},[()=>kt(),()=>e(u)("nameConfirm"),()=>Pt({name:r.name}),()=>Dt()]),je("submit",v,B),we(o,()=>e(l),C=>n(l,C)),M(s,v),ee()}le(["input"]);const da=()=>Ee((s,r)=>{r.length&&(Be(r),re("name",_e(),()=>{ne(s.name).isNotBlank()}),re("clientId",_e(),()=>{ne(s.clientId).isNotBlank()}),re("clientSecret",_e(),()=>{ne(s.clientSecret).isNotBlank()}))});var ua=V('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"/> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function va(s,r){$(r,!0);let l=ue(r,"name",15),h=ue(r,"clientId",15),S=ue(r,"clientSecret",15),d=ue(r,"valid",15,!1),x=da(),u=y(Z(x.get())),I=U(()=>Ve(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,j=Ne(()=>{x({name:l(),clientId:h(),clientSecret:S()},Array.from(f)).done(H=>{n(u,H,!0),d(e(u).isValid())}),f.clear()},300);function B(){f.add("name"),f.add("clientId"),f.add("clientSecret"),j(),j.flush()}function v(H){f.add(H.currentTarget.name),j()}at(B);var P=ua(),A=K(P),w=a(A),o=a(w,!0);t(w);var _=i(w,2);ie(_),_.__input=v;var E=i(_,2);ve(E,{name:"name",get result(){return e(u)}}),t(A);var O=i(A,2),G=a(O),q=a(G,!0);t(G);var L=i(G,2);ie(L),L.__input=v;var C=i(L,2);ve(C,{name:"clientId",get result(){return e(u)}}),t(O);var m=i(O,2),N=a(m),T=a(N,!0);t(N);var F=i(N,2);const Q=U(()=>e(I)("clientSecret")),ce=U(()=>tt());rt(F,{get class(){return e(Q)},name:"clientSecret",get placeholder(){return e(ce)},oninput:v,get value(){return S()},set value(H){S(H)}});var W=i(F,2);ve(W,{name:"clientSecret",get result(){return e(u)}}),t(m),z((H,oe,Ie,me,Ae,be,pe)=>{p(o,H),fe(_,1,`w-full ${oe??""}`),Y(_,"placeholder",Ie),p(q,me),fe(L,1,`w-full ${Ae??""}`),Y(L,"placeholder",be),p(T,pe)},[()=>Me(),()=>e(I)("name"),()=>Oe(),()=>Ye(),()=>e(I)("clientId"),()=>$e(),()=>et()]),we(_,l),we(L,h),M(s,P),ee()}le(["input"]);var _a=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),fa=V('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ma(s,r){$(r,!0);let l=y(!1),h=y(!1),S=U(()=>e(l)||!e(h)),d=y(Z(r.serviceAccount.name)),x=y(Z(r.serviceAccount.clientId)),u=y(Z(r.serviceAccount.clientSecret));async function I(o){o.preventDefault();try{n(l,!0),e(h)&&r.onEdit(await Se.updateServiceAccount(r.serviceAccount.id,{name:e(d),clientId:e(x)?e(x):void 0,clientSecret:e(u)?e(u):void 0},r.applicationId))}catch(_){await Fe(_)}finally{n(l,!1)}}var f=fa(),j=a(f);va(j,{get name(){return e(d)},set name(o){n(d,o,!0)},get clientId(){return e(x)},set clientId(o){n(x,o,!0)},get clientSecret(){return e(u)},set clientSecret(o){n(u,o,!0)},get valid(){return e(h)},set valid(o){n(h,o,!0)}});var B=i(j,2),v=a(B),P=a(v);{var A=o=>{var _=_a(),E=a(_),O=a(E);Ge(O),t(E),t(_),M(o,_)};ae(P,o=>{e(l)&&o(A)})}var w=i(P);t(v),t(B),t(f),z(o=>{v.disabled=e(S),p(w,` ${o??""}`)},[()=>jt()]),je("submit",f,I),M(s,f),ee()}const Ze=20;var ba=V('<button class="btn secondary icon lg"><!></button>'),pa=V('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ha=V('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ga=V("<h3> </h3>"),xa=V("<h3> </h3>"),ya=V("<h3> </h3>"),wa=V("<h3> </h3>"),Sa=V('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Ia(s,r){$(r,!0);let l=ue(r,"serviceAccounts",31,()=>Z([])),h=y(0),S=y(!0),d=y(!1),x=y(void 0);ft(()=>{e(x)!==r.applicationId&&(n(x,r.applicationId,!0),n(h,0),n(S,!0),n(d,!1),l([]),u())});async function u(){if(!e(S)||e(d))return;let g;n(d,!0);try{g=await Se.allServiceAccounts(e(h)*Ze,Ze,r.applicationId)}finally{n(d,!1)}n(S,g.hasMore,!0),n(h,e(h)+1),l().push(...g.items)}let I=y(!1);function f(){n(I,!0)}function j(g){n(B,!0),n(v,g,!0),n(I,!1)}let B=y(!1),v=y(void 0);function P(){e(v)&&(delete e(v).clientSecret,l().unshift(e(v)),n(v,void 0),n(B,!1))}let A=y(void 0),w=y(!1);function o(g){return()=>{n(A,g,!0),n(w,!0)}}function _(g){const c=l().findIndex(b=>b.id===(g==null?void 0:g.id));c!==-1&&l(l()[c]=g,!0),n(A,void 0),n(w,!1)}let E=y(void 0),O=y(!1);function G(g){return()=>{n(E,g,!0),n(O,!0)}}function q(){const g=l().findIndex(c=>{var b;return c.id===((b=e(E))==null?void 0:b.id)});g!==-1&&l().splice(g,1),n(E,void 0),n(O,!1)}var L=Sa(),C=K(L),m=a(C),N=a(m),T=a(N),F=a(T,!0);t(T);var Q=i(T),ce=a(Q,!0);t(Q);var W=i(Q),H=a(W,!0);t(W);var oe=i(W),Ie=a(oe,!0);t(oe);var me=i(oe),Ae=a(me,!0);t(me),mt(),t(N),t(m);var be=i(m);Et(be,23,l,g=>g.id,(g,c,b)=>{var D=ha();let k;var J=a(D),R=a(J,!0);t(J);var Ce=i(J),it=a(Ce,!0);t(Ce);var ke=i(Ce),lt=a(ke,!0);t(ke);var Pe=i(ke),ct=a(Pe,!0);t(Pe);var De=i(Pe),ot=a(De,!0);t(De);var Re=i(De),Ue=a(Re),st=a(Ue);Jt(st,{position:"top-right",anchorPosition:"bottom-right",button:se=>{var te=ba(),he=a(te);Wt(he,{}),t(te),M(se,te)},children:(se,te)=>{var he=pa(),ge=K(he),dt=U(()=>o(e(c)));ge.__click=function(...de){var X;(X=e(dt))==null||X.apply(this,de)};var He=a(ge);Kt(He,{});var Je=i(He),ut=a(Je,!0);t(Je),t(ge);var Te=i(ge,2),vt=U(()=>G(e(c)));Te.__click=function(...de){var X;(X=e(vt))==null||X.apply(this,de)};var Ke=a(Te);Qt(Ke,{});var Qe=i(Ke),_t=a(Qe,!0);t(Qe),t(Te),z((de,X)=>{p(ut,de),p(_t,X)},[()=>Rt(),()=>Ut()]),M(se,he)},$$slots:{button:!0,default:!0}}),t(Ue),t(Re),t(D),z((qe,se,te)=>{k=fe(D,1,"group",null,k,qe),p(R,e(c).id),p(it,e(c).name),p(lt,e(c).clientId),p(ct,se),p(ot,te)},[()=>({"border-b":e(b)<l().length-1}),()=>e(c).updatedAt.toLocaleString(),()=>e(c).createdAt.toLocaleString()]),M(g,D)}),t(be),t(C);var pe=i(C,2);xe(pe,{get open(){return e(I)},set open(c){n(I,c,!0)},title:c=>{var b=ga(),D=a(b,!0);t(b),z(k=>p(D,k),[()=>Ft()]),M(c,b)},children:(c,b)=>{aa(c,{get applicationId(){return r.applicationId},onCreate:j})},$$slots:{title:!0,default:!0}});var Le=i(pe,2);xe(Le,{onClose:P,get open(){return e(B)},set open(c){n(B,c,!0)},title:c=>{var b=xa(),D=a(b,!0);t(b),z(k=>p(D,k),[()=>Gt()]),M(c,b)},children:(c,b)=>{var D=ye(),k=K(D);{var J=R=>{na(R,{get serviceAccount(){return e(v)}})};ae(k,R=>{e(v)&&R(J)})}M(c,D)},$$slots:{title:!0,default:!0}});var ze=i(Le,2);xe(ze,{get open(){return e(w)},set open(c){n(w,c,!0)},title:c=>{var b=ya(),D=a(b,!0);t(b),z(k=>p(D,k),[()=>{var k;return Lt({name:((k=e(A))==null?void 0:k.name)||""})}]),M(c,b)},children:(c,b)=>{var D=ye(),k=K(D);{var J=R=>{ma(R,{get applicationId(){return r.applicationId},get serviceAccount(){return e(A)},onEdit:_})};ae(k,R=>{e(A)&&R(J)})}M(c,D)},$$slots:{title:!0,default:!0}});var nt=i(ze,2);return xe(nt,{get open(){return e(O)},set open(c){n(O,c,!0)},title:c=>{var b=wa(),D=a(b,!0);t(b),z(k=>p(D,k),[()=>{var k;return zt({name:((k=e(E))==null?void 0:k.name)||""})}]),M(c,b)},children:(c,b)=>{var D=ye(),k=K(D);{var J=R=>{sa(R,{get applicationId(){return r.applicationId},get serviceAccountId(){return e(E).id},get name(){return e(E).name},onDelete:q})};ae(k,R=>{e(E)&&R(J)})}M(c,D)},$$slots:{title:!0,default:!0}}),z((g,c,b,D,k)=>{p(F,g),p(ce,c),p(H,b),p(Ie,D),p(Ae,k)},[()=>Nt(),()=>Mt(),()=>Ot(),()=>Bt(),()=>Vt()]),M(s,L),ee({onCreate:f})}le(["click"]);var Aa=V('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function La(s,r){$(r,!0);let l=y(void 0);var h=Aa();pt(w=>{z(o=>bt.title=o,[()=>ht()])});var S=a(h),d=a(S),x=a(d),u=a(x);Y(u,"href",`${wt}/`);var I=a(u),f=a(I);Zt(f,{}),t(I),t(u);var j=i(u,2),B=a(j,!0);t(j),t(x);var v=i(x,2);v.__click=function(...w){var o,_;(_=(o=e(l))==null?void 0:o.onCreate)==null||_.apply(this,w)};var P=a(v);Xt(P,{}),t(v),t(d);var A=i(d,2);yt(Ia(A,{get applicationId(){return r.data.applicationId}}),w=>n(l,w,!0),()=>e(l)),t(S),t(h),z(()=>p(B,r.data.application.name)),M(s,h),ee()}le(["click"]);export{La as component};
