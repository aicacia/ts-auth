import{a as V,t as le}from"../chunks/disclose-version.DrWTZEMc.js";import{p as _e,w as E,t as j,a as pe,i,x,$ as me,c as m,r as v,s as A,k as O}from"../chunks/runtime.BOcB0i4C.js";import{d as ve,h as he,e as ge,s as Z}from"../chunks/render.CHcgKWWy.js";import{i as ye}from"../chunks/runtime.qIrDYYv_.js";import{d as we,g as H,e as J,h as be,r as K,s as P,b as Q,i as xe,j as qe,k as Se}from"../chunks/debounce.DAmdUp_2.js";import{v as C,I as W,b as X,G as $e,m as je,C as T,S as Ae,h as Fe,a as ke}from"../chunks/InputResults.BQnRkFhZ.js";import{p as F}from"../chunks/proxy.C01Lgihj.js";import{g as Ee}from"../chunks/entry.DDXZJi_w.js";import{b as Oe}from"../chunks/paths.2tyyIn2U.js";import{a as Y,s as Ce}from"../chunks/api.svelte.CJh0swoe.js";function U(e){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}function B(e){if(!(typeof e=="string"||e instanceof String)){var t=U(e);throw e===null?t="null":t==="object"&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}function ee(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}var Ie={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1},te="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",y="(".concat(te,"[.]){3}").concat(te),Re=new RegExp("^".concat(y,"$")),o="(?:[0-9a-fA-F]{1,4})",ze=new RegExp("^("+"(?:".concat(o,":){7}(?:").concat(o,"|:)|")+"(?:".concat(o,":){6}(?:").concat(y,"|:").concat(o,"|:)|")+"(?:".concat(o,":){5}(?::").concat(y,"|(:").concat(o,"){1,2}|:)|")+"(?:".concat(o,":){4}(?:(:").concat(o,"){0,1}:").concat(y,"|(:").concat(o,"){1,3}|:)|")+"(?:".concat(o,":){3}(?:(:").concat(o,"){0,2}:").concat(y,"|(:").concat(o,"){1,4}|:)|")+"(?:".concat(o,":){2}(?:(:").concat(o,"){0,3}:").concat(y,"|(:").concat(o,"){1,5}|:)|")+"(?:".concat(o,":){1}(?:(:").concat(o,"){0,4}:").concat(y,"|(:").concat(o,"){1,6}|:)|")+"(?::((?::".concat(o,"){0,5}:").concat(y,"|(?::").concat(o,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function I(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return B(e),(t=String(t))?t==="4"?Re.test(e):t==="6"&&ze.test(e):I(e,4)||I(e,6)}function De(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var a=[],f=!0,p=!1,c=void 0;try{for(var l,s=r[Symbol.iterator]();!(f=(l=s.next()).done)&&(a.push(l.value),!n||a.length!==n);f=!0);}catch(h){p=!0,c=h}finally{try{f||s.return==null||s.return()}finally{if(p)throw c}}return a}}(e,t)||function(r,n){if(r){if(typeof r=="string")return re(r,n);var a=Object.prototype.toString.call(r).slice(8,-1);if(a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set")return Array.from(r);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function re(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Le={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},Te=/^\[([^\]]+)\](?::([0-9]+))?$/;function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||(a=n,Object.prototype.toString.call(a)==="[object RegExp]"&&n.test(e)))return!0}var a;return!1}C.extend({isURL:function(e,t){if(B(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=ee(t,Le)).validate_length&&e.length>=2083||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var r,n,a,f,p,c,l,s;if(l=e.split("#"),e=l.shift(),l=e.split("?"),e=l.shift(),(l=e.split("://")).length>1){if(r=l.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(r)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;l[0]=e.slice(2)}}if((e=l.join("://"))==="")return!1;if(l=e.split("/"),(e=l.shift())===""&&!t.require_host)return!0;if((l=e.split("@")).length>1){if(t.disallow_auth||l[0]===""||(n=l.shift()).indexOf(":")>=0&&n.split(":").length>2)return!1;var h=De(n.split(":"),2),R=h[0],z=h[1];if(R===""&&z==="")return!1}c=null,s=null;var w=(f=l.join("@")).match(Te);if(w?(a="",s=w[1],c=w[2]||null):(a=(l=f.split(":")).shift(),l.length&&(c=l.join(":"))),c!==null&&c.length>0){if(p=parseInt(c,10),!/^[0-9]+$/.test(c)||p<=0||p>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?ae(a,t.host_whitelist):a===""&&!t.require_host||!!(I(a)||function(u,d){B(u),(d=ee(d,Ie)).allow_trailing_dot&&u[u.length-1]==="."&&(u=u.substring(0,u.length-1)),d.allow_wildcard===!0&&u.indexOf("*.")===0&&(u=u.substring(2));var q=u.split("."),b=q[q.length-1];return d.require_tld&&(q.length<2||!d.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(b)||/\s/.test(b))?!1:!(!d.allow_numeric_tld&&/^\d+$/.test(b))&&q.every(function(g){return!(g.length>63&&!d.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(g)||/[\uff01-\uff5e]/.test(g)||/^-|-$/.test(g)||!d.allow_underscores&&/_/.test(g))})}(a,t)||s&&I(s,6))&&(a=a||s,!t.host_blacklist||!ae(a,t.host_blacklist))}});const Ue=()=>$e((e={},t)=>{t.length&&(je(t),T("url",J(),()=>{C(e.url).isNotBlank()}),T("url",be(),()=>{C(e.url).isURL({protocols:["http","https"],require_tld:!1,require_protocol:!0,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!1,allow_query_components:!1})}),T("tenant",J(),()=>{C(e.tenant).isNotBlank()}))});function ne(e,t,r){t.add(e.currentTarget.name),r()}var Be=le('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ge=le('<div class="flex flex-grow flex-col justify-end p-4 sm:justify-start"><div class="card mx-auto my-10 flex w-full flex-shrink flex-col sm:w-72"><h1 class="mb-1"> </h1> <form><div class="mb-2"><input type="url" name="url"> <!></div> <div class="mb-2"><input type="text" name="tenant"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form></div></div>');function Xe(e,t){_e(t,!0);let r=E(F(Y.url||"")),n=E(F(Y.tenant||"")),a=Ue(),f=E(F(a.get())),p=E(!1),c=O(()=>i(p)),l=O(()=>ke(i(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const s=new Set,h=we(()=>{a({url:i(r),tenant:i(n)},Array.from(s)).done(_=>{x(f,F(_))}),s.clear()},300);function R(){s.add("url"),s.add("tenant"),h(),h.flush()}async function z(_){_.preventDefault();try{x(p,!0),x(r,F(i(r).trim())),x(n,F(i(n).trim())),R(),i(f).isValid()&&(await Ce({url:i(r),tenant:i(n)}),await Ee(`${Oe}/signin`))}catch(k){await Fe(k)}finally{x(p,!1)}}var w=Ge();he(_=>{j(()=>me.title=H())});var u=m(w),d=m(u),q=m(d,!0);j(()=>Z(q,H())),v(d);var b=A(d,2),g=m(b),S=m(g);K(S);const oe=O(()=>`w-full ${i(l)("url")??""}`);j(()=>P(S,"placeholder",xe())),S.__input=[ne,s,h];var ie=A(S,2);W(ie,{name:"url",get result(){return i(f)}}),v(g);var D=A(g,2),$=m(D);K($);const se=O(()=>`w-full ${i(l)("tenant")??""}`);j(()=>P($,"placeholder",qe())),$.__input=[ne,s,h];var ue=A($,2);W(ue,{name:"tenant",get result(){return i(f)}}),v(D);var G=A(D,2),L=m(G),N=m(L);{var fe=_=>{var k=Be(),M=m(k),de=m(M);Ae(de),v(M),v(k),V(_,k)};ye(N,_=>{i(p)&&_(fe)})}var ce=A(N);j(()=>Z(ce,` ${Se()??""}`)),v(L),v(G),v(b),v(u),v(w),j(()=>{Q(S,i(oe)),Q($,i(se)),L.disabled=i(c)}),ge("submit",b,z),X(S,()=>i(r),_=>x(r,_)),X($,()=>i(n),_=>x(n,_)),V(e,w),pe()}ve(["input"]);export{Xe as component};
