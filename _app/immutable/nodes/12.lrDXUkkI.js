import{a as z,t as M}from"../chunks/disclose-version.BR6hquoZ.js";import{p as re,d as b,t as v,a as se,g as e,b as i,$ as ie,c as a,r,s as m,z as g}from"../chunks/runtime.XTayOKyQ.js";import{d as le,h as ne,e as de,s as D}from"../chunks/render.DpS1xNCU.js";import{i as oe}from"../chunks/runtime.vqD1BrVN.js";import{j,e as E,r as R,s as T,k as ce,l as ue}from"../chunks/messages.D-7JLJoP.js";import{d as ve,I as V,b as F,G as me,m as fe,C as H,v as J,S as pe,h as _e,s as K,a as he}from"../chunks/InputResults.I4g3kDNh.js";import{p as x}from"../chunks/proxy.BKNo-OHe.js";import{g as be}from"../chunks/entry.C3VXzTm3.js";import{b as ge}from"../chunks/paths.Hn01zztd.js";import{s as xe}from"../chunks/token.svelte.1tKc01KO.js";const we=()=>me((l={},n)=>{n.length&&(fe(n),H("clientId",E(),()=>{J(l.clientId).isNotBlank()}),H("clientSecret",E(),()=>{J(l.clientSecret).isNotBlank()}))});function L(l,n,s){n.add(l.currentTarget.name),s()}var ye=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Se=M('<div class="flex flex-grow flex-col justify-end p-4 sm:justify-start"><div class="card mx-auto my-10 flex w-full flex-shrink flex-col sm:w-72"><h1 class="mb-1"> </h1> <form><div class="mb-2"><input type="text" name="clientId" autocomplete="username"> <!></div> <div class="mb-2"><input type="password" name="clientSecret" autocomplete="current-password"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form></div></div>');function ze(l,n){re(n,!0);let s=b(""),d=b(""),C=we(),f=b(x(C.get())),_=b(!1),O=g(()=>e(_)),A=g(()=>he(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const o=new Set,h=ve(()=>{C({clientId:e(s),clientSecret:e(d)},Array.from(o)).done(t=>{i(f,x(t))}),o.clear()},300);function P(){o.add("clientId"),o.add("clientSecret"),h(),h.flush()}async function Q(t){t.preventDefault();try{i(_,!0),i(s,x(e(s).trim())),i(d,x(e(d).trim())),P(),e(f).isValid()&&(await xe(e(s),e(d)),await be(`${ge}/`))}catch(p){await _e(p)}finally{i(_,!1)}}var w=Se();ne(t=>{v(()=>ie.title=j())});var B=a(w),y=a(B),U=a(y,!0);v(()=>D(U,j())),r(y);var S=m(y,2),I=a(S),c=a(I);R(c);const W=g(()=>`w-full ${e(A)("clientId")??""}`);v(()=>T(c,"placeholder",ce())),c.__input=[L,o,h];var X=m(c,2);V(X,{name:"clientId",get result(){return e(f)}}),r(I);var $=m(I,2),u=a($);R(u);const Y=g(()=>`w-full ${e(A)("clientSecret")??""}`);v(()=>T(u,"placeholder",ue())),u.__input=[L,o,h];var Z=m(u,2);V(Z,{name:"clientSecret",get result(){return e(f)}}),r($);var G=m($,2),k=a(G),N=a(k);{var ee=t=>{var p=ye(),q=a(p),ae=a(q);pe(ae),r(q),r(p),z(t,p)};oe(N,t=>{e(_)&&t(ee)})}var te=m(N);v(()=>D(te,` ${j()??""}`)),r(k),r(G),r(S),r(B),r(w),v(()=>{K(c,e(W)),K(u,e(Y)),k.disabled=e(O)}),de("submit",S,Q),F(c,()=>e(s),t=>i(s,t)),F(u,()=>e(d),t=>i(d,t)),z(l,w),se()}le(["input"]);export{ze as component};
