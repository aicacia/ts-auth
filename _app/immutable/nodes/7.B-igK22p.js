import{a as D,t as V,c as _e}from"../chunks/disclose-version.DajeB4c4.js";import{p as W,x as S,j as e,y as l,t as c,a as X,c as a,r as t,s as n,l as F,f as J,ah as vt,$ as ut}from"../chunks/runtime.C60yeaJP.js";import{d as re,e as ke,s as f,h as _t}from"../chunks/render.BbZuB7Dm.js";import{d as Ce,e as ce,r as ae,s as Q,b as fe,ba as je,bb as Pe,bc as ft,bd as He,be as Qe,bf as We,bg as mt,bh as bt,bi as pt,bj as Xe,bk as Ye,q as ht,bl as gt,bm as xt,bn as yt,bo as wt,y as St,z as It,bp as At,bq as kt,br as Ct,bs as jt,bt as Pt,bu as Tt,bv as Dt,bw as Et,bx as Nt,by as Mt,bz as Bt,bA as Ot,bB as Ft}from"../chunks/debounce.C_WMaB_z.js";import{p as I}from"../chunks/proxy.B95Q3zQB.js";import{l as Vt,s as qt,p as le,b as zt}from"../chunks/props.DztJVflq.js";import{I as Lt,s as Gt,D as Rt,g as Ut}from"../chunks/Dropdown.BnBMSDuX.js";import{b as Zt}from"../chunks/paths.BR2SyuFJ.js";import{i as $}from"../chunks/runtime.Cwx_xcDz.js";import{o as Te}from"../chunks/index-client.ClR-EJ5X.js";import{e as be}from"../chunks/index.u_6ZM-6x.js";import{M as ue,P as Ht,T as Jt,E as Kt,a as Qt}from"../chunks/Modal.CUdo-sfi.js";import{I as se,b as me,G as De,m as Ee,C as ee,v as te,S as Ne,h as Me,a as Be}from"../chunks/InputResults.DOY8a8ew.js";import{P as $e}from"../chunks/Password.BMUkHWIF.js";import"../chunks/legacy.IygHgRuy.js";import{C as Wt}from"../chunks/chevron-left.Dc8mGGX_.js";const Xt=()=>De((_,r)=>{r.length&&(Ee(r),ee("name",ce(),()=>{te(_.name).isNotBlank()}))});function Yt(_,r,i){r.add(_.currentTarget.name),i()}var $t=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ea=V('<form><label for="name"> </label> <input type="text" name="name"> <!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ta(_,r){W(r,!0);let i=S(!1),A=S(!1),k=F(()=>e(i)||!e(A)),h=S(""),g=Xt(),u=S(I(g.get())),C=F(()=>Be(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,x=Ce(()=>{g({name:e(h)},Array.from(v)).done(b=>{l(u,I(b)),l(A,I(e(u).isValid()))}),v.clear()},300);function E(){v.add("name"),x(),x.flush()}Te(E);async function j(b){b.preventDefault();try{l(i,!0),e(A)&&r.onCreate(await be.createServiceAccount({name:e(h)},r.applicationId))}catch(M){await Me(M)}finally{l(i,!1)}}var m=ea(),y=a(m),B=a(y,!0);c(()=>f(B,Pe())),t(y);var o=n(y,2);ae(o);const d=F(()=>`w-full ${e(C)("name")??""}`);c(()=>Q(o,"placeholder",je())),o.__input=[Yt,v,x];var P=n(o,2);se(P,{name:"name",get result(){return e(u)}});var q=n(P,2),z=a(q),G=a(z);{var Z=b=>{var M=$t(),L=a(M),O=a(L);Ne(O),t(L),t(M),D(b,M)};$(G,b=>{e(i)&&b(Z)})}var N=n(G);c(()=>f(N,` ${ft()??""}`)),t(z),t(q),t(m),c(()=>{fe(o,e(d)),z.disabled=e(k)}),ke("submit",m,j),me(o,()=>e(h),b=>l(h,b)),D(_,m),X()}re(["input"]);function Je(_,r){const i=Vt(r,["children","$$slots","$$events","$$legacy"]);Lt(_,qt({name:"copy"},()=>i,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(k,h)=>{var g=_e(),u=J(g);Gt(u,r,"default",{}),D(k,g)},$$slots:{default:!0}}))}var aa=V('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function ra(_,r){W(r,!0);let i=S(!1);function A(L){return async()=>{try{l(i,!0),await mt(L),bt(pt(),"success")}finally{l(i,!1)}}}var k=aa(),h=J(k),g=a(h),u=a(g,!0);c(()=>f(u,Pe())),t(g);var C=n(g,2);ae(C),c(()=>Q(C,"placeholder",je())),t(h);var v=n(h,2),x=a(v),E=a(x,!0);c(()=>f(E,Xe())),t(x);var j=n(x,2),m=a(j);ae(m),c(()=>Q(m,"placeholder",Qe()));var y=n(m,2),B=F(()=>A(r.serviceAccount.clientId));y.__click=function(...L){var O;(O=e(B))==null||O.apply(this,L)};var o=a(y);Je(o,{}),t(y),t(j),t(v);var d=n(v,2),P=a(d),q=a(P,!0);c(()=>f(q,Ye())),t(P);var z=n(P,2),G=a(z),Z=F(()=>We());$e(G,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(Z)},get value(){return r.serviceAccount.clientSecret}});var N=n(G,2),b=F(()=>A(r.serviceAccount.clientSecret));N.__click=function(...L){var O;(O=e(b))==null||O.apply(this,L)};var M=a(N);Je(M,{}),t(N),t(z),t(d),c(()=>{He(C,r.serviceAccount.name),He(m,r.serviceAccount.clientId),y.disabled=e(i),N.disabled=e(i)}),D(_,k),X()}re(["click"]);const na=()=>De((_={},r)=>{r.length&&(Ee(r),ee("nameConfirm",ce(),()=>{te(_.nameConfirm).isNotBlank()}),ee("nameConfirm",ht(),()=>{te(_.name===_.nameConfirm).isTruthy()}))});function ia(_,r,i){r.add(_.currentTarget.name),i()}var la=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ca=V('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function sa(_,r){W(r,!0);let i=S(""),A=na(),k=S(I(A.get())),h=S(!1),g=F(()=>e(h)),u=F(()=>Be(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const C=new Set,v=Ce(()=>{A({name:r.name,nameConfirm:e(i)},Array.from(C)).done(b=>{l(k,I(b))}),C.clear()},300);function x(){C.add("name"),v(),v.flush()}async function E(b){b.preventDefault();try{l(h,!0),l(i,I(e(i).trim())),x(),e(k).isValid()&&(await be.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(M){await Me(M)}finally{l(h,!1)}}var j=ca(),m=a(j),y=a(m,!0);c(()=>f(y,xt())),t(m);var B=n(m,2),o=a(B);ae(o);const d=F(()=>`w-full ${e(u)("nameConfirm")??""}`);c(()=>Q(o,"placeholder",gt({name:r.name}))),o.__input=[ia,C,v];var P=n(o,2);se(P,{name:"nameConfirm",get result(){return e(k)}}),t(B);var q=n(B,2),z=a(q),G=a(z);{var Z=b=>{var M=la(),L=a(M),O=a(L);Ne(O),t(L),t(M),D(b,M)};$(G,b=>{e(h)&&b(Z)})}var N=n(G);c(()=>f(N,` ${yt()??""}`)),t(z),t(q),t(j),c(()=>{fe(o,e(d)),z.disabled=e(g)}),ke("submit",j,E),me(o,()=>e(i),b=>l(i,b)),D(_,j),X()}re(["input"]);const oa=()=>De((_,r)=>{r.length&&(Ee(r),ee("name",ce(),()=>{te(_.name).isNotBlank()}),ee("clientId",ce(),()=>{te(_.clientId).isNotBlank()}),ee("clientSecret",ce(),()=>{te(_.clientSecret).isNotBlank()}))});var da=V('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function va(_,r){W(r,!0);let i=le(r,"name",15),A=le(r,"clientId",15),k=le(r,"clientSecret",15),h=le(r,"valid",15,!1),g=oa(),u=S(I(g.get())),C=F(()=>Be(e(u),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,x=Ce(()=>{g({name:i(),clientId:A(),clientSecret:k()},Array.from(v)).done(H=>{l(u,I(H)),h(e(u).isValid())}),v.clear()},300);function E(){v.add("name"),v.add("clientId"),v.add("clientSecret"),x(),x.flush()}function j(H){v.add(H.currentTarget.name),x()}Te(E);var m=da(),y=J(m),B=a(y),o=a(B,!0);c(()=>f(o,Pe())),t(B);var d=n(B,2);ae(d);const P=F(()=>`w-full ${e(C)("name")??""}`);c(()=>Q(d,"placeholder",je())),d.__input=j;var q=n(d,2);se(q,{name:"name",get result(){return e(u)}}),t(y);var z=n(y,2),G=a(z),Z=a(G,!0);c(()=>f(Z,Xe())),t(G);var N=n(G,2);ae(N);const b=F(()=>`w-full ${e(C)("clientId")??""}`);c(()=>Q(N,"placeholder",Qe())),N.__input=j;var M=n(N,2);se(M,{name:"clientId",get result(){return e(u)}}),t(z);var L=n(z,2),O=a(L),pe=a(O,!0);c(()=>f(pe,Ye())),t(O);var Y=n(O,2),he=F(()=>e(C)("clientSecret")),ne=F(()=>We());$e(Y,{get class(){return e(he)},name:"clientSecret",get placeholder(){return e(ne)},oninput:j,get value(){return k()},set value(H){k(H)}});var ge=n(Y,2);se(ge,{name:"clientSecret",get result(){return e(u)}}),t(L),c(()=>{fe(d,e(P)),fe(N,e(b))}),me(d,i),me(N,A),D(_,m),X()}re(["input"]);var ua=V('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),_a=V('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function fa(_,r){W(r,!0);let i=S(!1),A=S(!1),k=F(()=>e(i)||!e(A)),h=S(I(r.serviceAccount.name)),g=S(I(r.serviceAccount.clientId)),u=S(I(r.serviceAccount.clientSecret));async function C(o){o.preventDefault();try{l(i,!0),e(A)&&r.onEdit(await be.updateServiceAccount(r.serviceAccount.id,{name:e(h),clientId:e(g)?e(g):void 0,clientSecret:e(u)?e(u):void 0},r.applicationId))}catch(d){await Me(d)}finally{l(i,!1)}}var v=_a(),x=a(v);va(x,{get name(){return e(h)},set name(o){l(h,I(o))},get clientId(){return e(g)},set clientId(o){l(g,I(o))},get clientSecret(){return e(u)},set clientSecret(o){l(u,I(o))},get valid(){return e(A)},set valid(o){l(A,I(o))}});var E=n(x,2),j=a(E),m=a(j);{var y=o=>{var d=ua(),P=a(d),q=a(P);Ne(q),t(P),t(d),D(o,d)};$(m,o=>{e(i)&&o(y)})}var B=n(m);c(()=>f(B,` ${wt()??""}`)),t(j),t(E),t(v),c(()=>j.disabled=e(k)),ke("submit",v,C),D(_,v),X()}const Ke=20;var ma=V('<button class="btn secondary icon lg"><!></button>'),ba=V('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),pa=V('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ha=V("<h3> </h3>"),ga=V("<h3> </h3>"),xa=V("<h3> </h3>"),ya=V("<h3> </h3>"),wa=V('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Sa(_,r){W(r,!0);let i=le(r,"serviceAccounts",31,()=>I([])),A=S(0),k=S(!0),h=S(!1);Te(g);async function g(){if(!e(k)||e(h))return;let w;l(h,!0);try{w=await be.allServiceAccounts(e(A)*Ke,Ke,r.applicationId)}finally{l(h,!1)}l(k,I(w.hasMore)),l(A,e(A)+1),i().push(...w.items)}let u=S(!1);function C(){l(u,!0)}function v(w){l(x,!0),l(E,I(w)),l(u,!1)}let x=S(!1),E=S(void 0);function j(){e(E)&&(delete e(E).clientSecret,i().unshift(e(E)),l(E,void 0),l(x,!1))}let m=S(void 0),y=S(!1);function B(w){return()=>{l(m,I(w)),l(y,!0)}}function o(w){const s=i().findIndex(p=>p.id===(w==null?void 0:w.id));s!==-1&&i(i()[s]=w,!0),l(m,void 0),l(y,!1)}let d=S(void 0),P=S(!1);function q(w){return()=>{l(d,I(w)),l(P,!0)}}function z(){const w=i().findIndex(s=>{var p;return s.id===((p=e(d))==null?void 0:p.id)});w!==-1&&i().splice(w,1),l(d,void 0),l(P,!1)}var G=wa(),Z=J(G),N=a(Z),b=a(N),M=a(b),L=a(M,!0);c(()=>f(L,Ct())),t(M);var O=n(M),pe=a(O,!0);c(()=>f(pe,jt())),t(O);var Y=n(O),he=a(Y,!0);c(()=>f(he,Pt())),t(Y);var ne=n(Y),ge=a(ne,!0);c(()=>f(ge,Tt())),t(ne);var H=n(ne),et=a(H,!0);c(()=>f(et,Dt())),t(H),vt(),t(b),t(N);var Oe=n(N);St(Oe,23,i,w=>w.id,(w,s,p)=>{var T=pa(),R=a(T),K=a(R,!0);t(R);var U=n(R),at=a(U,!0);t(U);var xe=n(U),rt=a(xe,!0);t(xe);var ye=n(xe),nt=a(ye,!0);c(()=>f(nt,e(s).updatedAt.toLocaleString())),t(ye);var we=n(ye),it=a(we,!0);c(()=>f(it,e(s).createdAt.toLocaleString())),t(we);var ze=n(we),Le=a(ze),lt=a(Le);Rt(lt,{position:"top-right",anchorPosition:"bottom-right",button:Se=>{var oe=ma(),de=a(oe);Kt(de,{}),t(oe),D(Se,oe)},children:(Se,oe)=>{var de=ba(),ve=J(de),ct=F(()=>B(e(s)));ve.__click=function(...Ae){var ie;(ie=e(ct))==null||ie.apply(this,Ae)};var Ge=a(ve);Ht(Ge,{});var Re=n(Ge),st=a(Re,!0);c(()=>f(st,Et())),t(Re),t(ve);var Ie=n(ve,2),ot=F(()=>q(e(s)));Ie.__click=function(...Ae){var ie;(ie=e(ot))==null||ie.apply(this,Ae)};var Ue=a(Ie);Jt(Ue,{});var Ze=n(Ue),dt=a(Ze,!0);c(()=>f(dt,Nt())),t(Ze),t(Ie),D(Se,de)},$$slots:{button:!0,default:!0}}),t(Le),t(ze),t(T),c(()=>{It(T,"border-b",e(p)<i().length-1),f(K,e(s).id),f(at,e(s).name),f(rt,e(s).clientId)}),D(w,T)}),t(Oe),t(Z);var Fe=n(Z,2);ue(Fe,{get open(){return e(u)},set open(s){l(u,I(s))},title:s=>{var p=ha(),T=a(p,!0);c(()=>f(T,Mt())),t(p),D(s,p)},children:(s,p)=>{ta(s,{get applicationId(){return r.applicationId},onCreate:v})},$$slots:{title:!0,default:!0}});var Ve=n(Fe,2);ue(Ve,{onClose:j,get open(){return e(x)},set open(s){l(x,I(s))},title:s=>{var p=ga(),T=a(p,!0);c(()=>f(T,Bt())),t(p),D(s,p)},children:(s,p)=>{var T=_e(),R=J(T);{var K=U=>{ra(U,{get serviceAccount(){return e(E)}})};$(R,U=>{e(E)&&U(K)})}D(s,T)},$$slots:{title:!0,default:!0}});var qe=n(Ve,2);ue(qe,{get open(){return e(y)},set open(s){l(y,I(s))},title:s=>{var p=xa(),T=a(p,!0);c(()=>{var R;return f(T,At({name:((R=e(m))==null?void 0:R.name)||""}))}),t(p),D(s,p)},children:(s,p)=>{var T=_e(),R=J(T);{var K=U=>{fa(U,{get applicationId(){return r.applicationId},get serviceAccount(){return e(m)},onEdit:o})};$(R,U=>{e(m)&&U(K)})}D(s,T)},$$slots:{title:!0,default:!0}});var tt=n(qe,2);return ue(tt,{get open(){return e(P)},set open(s){l(P,I(s))},title:s=>{var p=ya(),T=a(p,!0);c(()=>{var R;return f(T,kt({name:((R=e(d))==null?void 0:R.name)||""}))}),t(p),D(s,p)},children:(s,p)=>{var T=_e(),R=J(T);{var K=U=>{sa(U,{get applicationId(){return r.applicationId},get serviceAccountId(){return e(d).id},get name(){return e(d).name},onDelete:z})};$(R,U=>{e(d)&&U(K)})}D(s,T)},$$slots:{title:!0,default:!0}}),D(_,G),X({onCreate:C})}re(["click"]);var Ia=V('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ga(_,r){W(r,!0);let i=S(void 0);const A=Ut(),[k,h]=A;var g=Ia();_t(d=>{c(()=>ut.title=Ot())});var u=a(g),C=a(u),v=a(C);c(()=>Q(v,"href",k(`${Zt}/`,void 0)));var x=a(v),E=a(x);Wt(E,{}),t(x);var j=n(x,2),m=a(j,!0);c(()=>f(m,Ft())),t(j),t(v);var y=n(v,2);y.__click=function(...d){var P,q;(q=(P=e(i))==null?void 0:P.onCreate)==null||q.apply(this,d)};var B=a(y);Qt(B,{}),t(y),t(C);var o=n(C,2);zt(Sa(o,{get applicationId(){return r.data.applicationId}}),d=>l(i,I(d)),()=>e(i)),t(u),t(g),D(_,g),X()}re(["click"]);export{Ga as component};
