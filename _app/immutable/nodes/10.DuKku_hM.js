import{f as R,a as O,c as It,t as St}from"../chunks/CeYbTvSz.js";import{p as xe,b as u,F as K,s as l,c as a,t as ne,g as e,G as _e,a as ye,h as s,r as t,f as Ee,u as Sa,a7 as Da,$ as ja}from"../chunks/wkzzbBdv.js";import{d as Ce,i as ge,s as m,e as Ve,h as Aa}from"../chunks/D2HIu1zJ.js";import{e as _t,d as X,b as oe,r as re,u as Ba}from"../chunks/2O6vECAj.js";import{p as W,b as ct}from"../chunks/CtNkBPER.js";import"../chunks/DgAY1fJe.js";import{b as za}from"../chunks/BiGx9tMp.js";import{G as Qe,d as Ye,I as le,aY as qt,aZ as Ot,a_ as Vt,a$ as Ta,b as me,am as Ke,m as We,C as ee,g as se,v as te,i as Xe,j as Fe,S as Le,b0 as qa,b1 as Oa,b2 as Va,O as Ft,b3 as Fa,b4 as La,b5 as Lt,b6 as Mt,b7 as Ma,b8 as Ga,b9 as Ra,ba as Za,bb as Ha,bc as Ja,o as Gt,bd as Ka,be as Qa,bf as Ya,bg as Wa,bh as Xa,bi as $a,bj as er,bk as tr,bl as ar,bm as rr,bn as ir,bo as lr,bp as nr,bq as sr,br as dr,bs as or,bt as ur,bu as vr,bv as mr,bw as fr,bx as _r,by as cr,bz as br,bA as pr,bB as gr,bC as hr,bD as xr,bE as yr,bF as wr,N as he,h as Dt,bG as kr,bH as Nr,bI as Ir,bJ as Er,bK as Cr,bL as Pr,bM as Ur,bN as Sr,bO as Dr,bP as jr,bQ as Ar,bR as Br,bS as zr,bT as Tr}from"../chunks/CjhoWwqu.js";import{u as ze}from"../chunks/D5kayNry.js";import{P as Rt,T as Zt,M as ft,a as Ht,D as qr,E as Or}from"../chunks/CjJcdl5D.js";import{o as Et}from"../chunks/BlFdF53H.js";import{b as Vr}from"../chunks/BVUUHFFa.js";import"../chunks/CbLmej-R.js";import{C as Fr}from"../chunks/By5vjJJ4.js";const Lr=()=>Qe((n={},r)=>{r.length&&(We(r),ee("username",se(),()=>{te(n.username).isNotBlank()}),ee("active",se(),()=>{te(n.active).isNotBlank()}))});function jt(n,r,i){r.add(n.currentTarget.name),i()}var Mr=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Gr=R('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"/> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"/></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Rr(n,r){xe(r,!0);let i=u(""),o=u(!0),p=Lr(),c=u(K(p.get())),N=u(!1),f=_e(()=>e(N)),w=_e(()=>Xe(e(c),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,S=Ye(()=>{p({username:e(i),active:e(o)},Array.from(h)).done(C=>{s(c,C,!0)}),h.clear()},300);function D(){h.add("username"),h.add("active"),S(),S.flush()}async function P(C){C.preventDefault();try{s(N,!0),s(i,e(i).trim(),!0),D(),e(c).isValid()&&r.onCreate(await ze.createUser({active:e(o),username:e(i)},r.applicationId))}catch(U){await Fe(U)}finally{s(N,!1)}}var B=Gr(),T=a(B),k=a(T),_=a(k,!0);t(k);var x=l(k,2);re(x),x.__input=[jt,h,S];var I=l(x,2);le(I,{name:"username",get result(){return e(c)}}),t(T);var v=l(T,2),y=a(v),M=a(y),q=l(M);re(q),q.__input=[jt,h,S],t(y);var b=l(y,2);le(b,{name:"active",get result(){return e(c)}}),t(v);var j=l(v,2),z=a(j),E=a(z);{var d=C=>{var U=Mr(),H=a(U),J=a(H);Le(J),t(H),t(U),O(C,U)};ge(E,C=>{e(N)&&C(d)})}var V=l(E);t(z),t(j),t(B),ne((C,U,H,J,ie,ue)=>{m(_,C),X(x,1,`w-full ${U??""}`),oe(x,"placeholder",H),m(M,`${J??""} `),X(q,1,ie),z.disabled=e(f),m(V,` ${ue??""}`)},[()=>qt(),()=>e(w)("username"),()=>Ot(),()=>Vt(),()=>_t(e(w)("active")),()=>Ta()]),Ve("submit",B,P),me(x,()=>e(i),C=>s(i,C)),Ke(q,()=>e(o),C=>s(o,C)),O(n,B),ye()}Ce(["input"]);const Zr=()=>Qe((n={},r)=>{r.length&&(We(r),ee("usernameConfirm",se(),()=>{te(n.usernameConfirm).isNotBlank()}),ee("usernameConfirm",Ft(),()=>{te(n.username===n.usernameConfirm).isTruthy()}))});function Hr(n,r,i){r.add(n.currentTarget.name),i()}var Jr=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Kr=R('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Qr(n,r){xe(r,!0);let i=u(""),o=Zr(),p=u(K(o.get())),c=u(!1),N=_e(()=>e(c)),f=_e(()=>Xe(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const w=new Set,h=Ye(()=>{o({username:r.username,usernameConfirm:e(i)},Array.from(w)).done(b=>{s(p,b,!0)}),w.clear()},300);function S(){w.add("name"),h(),h.flush()}async function D(b){b.preventDefault();try{s(c,!0),s(i,e(i).trim(),!0),S(),e(p).isValid()&&(await ze.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(j){await Fe(j)}finally{s(c,!1)}}var P=Kr(),B=a(P),T=a(B,!0);t(B);var k=l(B,2),_=a(k);re(_),_.__input=[Hr,w,h];var x=l(_,2);le(x,{name:"usernameConfirm",get result(){return e(p)}}),t(k);var I=l(k,2),v=a(I),y=a(v);{var M=b=>{var j=Jr(),z=a(j),E=a(z);Le(E),t(z),t(j),O(b,j)};ge(y,b=>{e(c)&&b(M)})}var q=l(y);t(v),t(I),t(P),ne((b,j,z,E)=>{m(T,b),X(_,1,`w-full ${j??""}`),oe(_,"placeholder",z),v.disabled=e(N),m(q,` ${E??""}`)},[()=>qa(),()=>e(f)("usernameConfirm"),()=>Oa({username:r.username}),()=>Va()]),Ve("submit",P,D),me(_,()=>e(i),b=>s(i,b)),O(n,P),ye()}Ce(["input"]);const Yr=()=>Qe((n,r)=>{r.length&&(We(r),ee("email",se(),()=>{te(n.email).isNotBlank()}),ee("primary",se(),()=>{te(n.primary).isNotBlank()}),ee("verified",se(),()=>{te(n.verified).isNotBlank()}))});function Nt(n,r,i){r.add(n.currentTarget.name),i()}var Wr=R('<div class="mb-2"><label for="email"> </label> <input type="email" name="email"/> <!></div> <div class="flex flex-row mb-2"><div><label for="primary"> <input type="checkbox" name="primary"/></label> <!></div> <div class="ml-2"><label for="verified"> <input type="checkbox" name="verified"/></label> <!></div></div>',1);function Jt(n,r){xe(r,!0);let i=W(r,"email",15,""),o=W(r,"primary",15,!1),p=W(r,"verified",15,!1),c=W(r,"valid",15,!1),N=Yr(),f=u(K(N.get())),w=_e(()=>Xe(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,S=Ye(()=>{N({email:i(),primary:o(),verified:p()},Array.from(h)).done(C=>{s(f,C,!0),c(e(f).isValid())}),h.clear()},300);function D(){var C;i((C=i())==null?void 0:C.trim()),h.add("email"),h.add("primary"),h.add("verified"),S(),S.flush()}Et(D);var P=Wr(),B=Ee(P),T=a(B),k=a(T,!0);t(T);var _=l(T,2);re(_),_.__input=[Nt,h,S];var x=l(_,2);le(x,{name:"email",get result(){return e(f)}}),t(B);var I=l(B,2),v=a(I),y=a(v),M=a(y),q=l(M);re(q),q.__input=[Nt,h,S],t(y);var b=l(y,2);le(b,{name:"primary",get result(){return e(f)}}),t(v);var j=l(v,2),z=a(j),E=a(z),d=l(E);re(d),d.__input=[Nt,h,S],t(z);var V=l(z,2);return le(V,{name:"verified",get result(){return e(f)}}),t(j),t(I),ne((C,U,H,J,ie,ue,fe)=>{m(k,C),X(_,1,`w-full ${U??""}`),oe(_,"placeholder",H),m(M,`${J??""} `),X(q,1,ie),m(E,`${ue??""} `),X(d,1,fe)},[()=>Fa(),()=>e(w)("email"),()=>La(),()=>Lt(),()=>_t(e(w)("primary")),()=>Mt(),()=>_t(e(w)("verified"))]),me(_,i),Ke(q,o),Ke(d,p),O(n,P),ye({validateAll:D})}Ce(["input"]);const Xr=()=>Qe((n={},r)=>{r.length&&(We(r),ee("emailConfirm",se(),()=>{te(n.emailConfirm).isNotBlank()}),ee("emailConfirm",Ft(),()=>{te(n.email===n.emailConfirm).isTruthy()}))});function $r(n,r,i){r.add(n.currentTarget.name),i()}var ei=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ti=R('<form><p> </p> <div class="mb-2"><input type="text" name="emailConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ai(n,r){xe(r,!0);let i=u(""),o=Xr(),p=u(K(o.get())),c=u(!1),N=_e(()=>e(c)),f=_e(()=>Xe(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const w=new Set,h=Ye(()=>{o({email:r.email,emailConfirm:e(i)},Array.from(w)).done(b=>{s(p,b,!0)}),w.clear()},300);function S(){w.add("email"),h(),h.flush()}async function D(b){b.preventDefault();try{s(c,!0),s(i,e(i).trim(),!0),S(),e(p).isValid()&&(await ze.deleteUserEmail(r.userId,r.emailId,r.applicationId),r.onDelete())}catch(j){await Fe(j)}finally{s(c,!1)}}var P=ti(),B=a(P),T=a(B,!0);t(B);var k=l(B,2),_=a(k);re(_),_.__input=[$r,w,h];var x=l(_,2);le(x,{name:"emailConfirm",get result(){return e(p)}}),t(k);var I=l(k,2),v=a(I),y=a(v);{var M=b=>{var j=ei(),z=a(j),E=a(z);Le(E),t(z),t(j),O(b,j)};ge(y,b=>{e(c)&&b(M)})}var q=l(y);t(v),t(I),t(P),ne((b,j,z,E)=>{m(T,b),X(_,1,`w-full ${j??""}`),oe(_,"placeholder",z),v.disabled=e(N),m(q,` ${E??""}`)},[()=>Ma(),()=>e(f)("emailConfirm"),()=>Ga({email:r.email}),()=>Ra()]),Ve("submit",P,D),me(_,()=>e(i),b=>s(i,b)),O(n,P),ye()}Ce(["input"]);function At(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}function ri(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}var ii=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),li=R("<h3> </h3>"),ni=R('<div><div class="flex flex-col"><p class="m-0"> </p> <div class="flex flex-row items-center"><label for="primary"> <input type="checkbox" name="primary" readonly=""/></label> <label for="verified"> <input type="checkbox" name="verified" readonly=""/></label></div></div> <div class="flex flex-row items-center"><button class="btn primary icon"><!></button> <button class="btn danger icon ms-2"><!></button></div></div> <form><!> <div class="flex flex-row justify-end"><div class="flex flex-row"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></div></form> <!>',1);function Bt(n,r){xe(r,!0);let i=W(r,"user",15),o=W(r,"email",15),p=u(K(o().email)),c=u(K(o().primary)),N=u(K(o().verified)),f=u(!1),w=u(!1);function h(){if(o().primary)i(i().email=null,!0);else{const L=i().emails.findIndex(Y=>Y.id===o().id);i().emails.splice(L,1)}}let S=u(void 0),D=u(!1),P=u(!1),B=_e(()=>e(P)||!e(D));async function T(L){var Y;if(L.preventDefault(),(Y=e(S))==null||Y.validateAll(),e(D))try{s(P,!0);const $=await ze.updateUserEmail(i().id,o().id,{email:e(p),primary:e(c),verified:e(N)},r.applicationId);if(s(f,!1),o().primary!==$.primary){if(i().email&&i().email.id!==$.id){const ae=i().emails.findIndex(ce=>ce.id===$.id);i().emails.splice(ae,1),i(i().email.primary=!1,!0),i().emails.push(i().email)}i(i().email=$,!0)}else{const ae=i().emails.findIndex(ce=>ce.id===$.id);ae!==-1&&i(i().emails[ae]=$,!0)}o($)}catch($){Fe($)}finally{s(P,!1)}}var k=ni(),_=Ee(k);let x;var I=a(_),v=a(I),y=a(v,!0);t(v);var M=l(v,2),q=a(M),b=a(q),j=l(b);re(j),t(q);var z=l(q,2),E=a(z),d=l(E);re(d),t(z),t(M),t(I);var V=l(I,2),C=a(V);C.__click=[At,f];var U=a(C);Rt(U,{}),t(C);var H=l(C,2);H.__click=[ri,w];var J=a(H);Zt(J,{}),t(H),t(V),t(_);var ie=l(_,2);let ue;var fe=a(ie);ct(Jt(fe,{get email(){return e(p)},set email(L){s(p,L,!0)},get primary(){return e(c)},set primary(L){s(c,L,!0)},get verified(){return e(N)},set verified(L){s(N,L,!0)},get valid(){return e(D)},set valid(L){s(D,L,!0)}}),L=>s(S,L,!0),()=>e(S));var Q=l(fe,2),A=a(Q),g=a(A);g.__click=[At,f];var F=a(g,!0);t(g);var Z=l(g,2),G=a(Z);{var we=L=>{var Y=ii(),$=a(Y),ae=a($);Le(ae),t($),t(Y),O(L,Y)};ge(G,L=>{e(P)&&L(we)})}var de=l(G);t(Z),t(A),t(Q),t(ie);var Te=l(ie,2);ft(Te,{get open(){return e(w)},set open(Y){s(w,Y,!0)},title:Y=>{var $=li(),ae=a($,!0);t($),ne(ce=>m(ae,ce),[()=>Ja({email:o().email})]),O(Y,$)},children:(Y,$)=>{var ae=It(),ce=Ee(ae);{var ke=Pe=>{ai(Pe,{get applicationId(){return r.applicationId},get userId(){return i().id},get emailId(){return o().id},get email(){return o().email},onDelete:h})};ge(ce,Pe=>{e(w)&&Pe(ke)})}O(Y,ae)},$$slots:{title:!0,default:!0}}),ne((L,Y,$,ae,ce,ke)=>{x=X(_,1,"flex flex-row justify-between items-center mb-2",null,x,L),m(y,o().email),m(b,`${Y??""} `),m(E,`${$??""} `),ue=X(ie,1,"",null,ue,ae),m(F,ce),Z.disabled=e(B),m(de,` ${ke??""}`)},[()=>({hidden:e(f)}),()=>Lt(),()=>Mt(),()=>({hidden:!e(f)}),()=>Za(),()=>Ha()]),Ke(j,()=>o().primary,L=>o(o().primary=L,!0)),Ke(d,()=>o().verified,L=>o(o().verified=L,!0)),Ve("submit",ie,T),O(n,k),ye()}Ce(["click"]);function si(n,r){n.preventDefault(),s(r,!0)}function di(n,r){n.stopPropagation(),n.preventDefault(),r()}var oi=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ui=R('<form><!> <div class="flex flex-row justify-end"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>'),vi=R('<div class="flex flex-row justify-between"><h5> </h5> <div class="flex flex-col justify-center"><button class="btn primary icon"><!></button></div></div> <!> <hr class="my-2"/> <div class="flex flex-col"><!> <!></div>',1);function mi(n,r){xe(r,!0);let i=W(r,"user",15),o=u(void 0),p=u(!1),c=u(""),N=u(!1),f=u(!1),w=u(!1),h=u(!1),S=_e(()=>e(h)||!e(w));function D(){s(p,!1),s(c,""),s(N,!1),s(f,!1)}async function P(E){var d;if(E.preventDefault(),(d=e(o))==null||d.validateAll(),e(w))try{s(h,!0);const V=await ze.createUserEmail(i().id,{email:e(c),primary:e(N),verified:e(f)},r.applicationId);D(),V.primary?(i().email&&i().emails.push(i().email),i(i().email=V,!0)):i().emails.push(V),r.onEdit(i())}catch(V){Fe(V)}finally{s(h,!1)}}var B=vi(),T=Ee(B),k=a(T),_=a(k,!0);t(k);var x=l(k,2),I=a(x);I.__click=[si,p];var v=a(I);Ht(v,{}),t(I),t(x),t(T);var y=l(T,2);{var M=E=>{var d=ui(),V=a(d);ct(Jt(V,{get email(){return e(c)},set email(Q){s(c,Q,!0)},get primary(){return e(N)},set primary(Q){s(N,Q,!0)},get verified(){return e(f)},set verified(Q){s(f,Q,!0)},get valid(){return e(w)},set valid(Q){s(w,Q,!0)}}),Q=>s(o,Q,!0),()=>e(o));var C=l(V,2),U=a(C);U.__click=[di,D];var H=a(U,!0);t(U);var J=l(U,2),ie=a(J);{var ue=Q=>{var A=oi(),g=a(A),F=a(g);Le(F),t(g),t(A),O(Q,A)};ge(ie,Q=>{e(h)&&Q(ue)})}var fe=l(ie);t(J),t(C),t(d),ne((Q,A)=>{m(H,Q),J.disabled=e(S),m(fe,` ${A??""}`)},[()=>Qa(),()=>Ya()]),Ve("submit",d,P),O(E,d)};ge(y,E=>{e(p)&&E(M)})}var q=l(y,4),b=a(q);{var j=E=>{Bt(E,{get applicationId(){return r.applicationId},get email(){return i().email},get user(){return i()},set user(d){i(d)}})};ge(b,E=>{i().email&&E(j)})}var z=l(b,2);Gt(z,17,()=>i().emails,E=>E.id,(E,d)=>{Bt(E,{get applicationId(){return r.applicationId},get email(){return e(d)},get user(){return i()},set user(V){i(V)}})}),t(q),ne(E=>m(_,E),[()=>Ka()]),O(n,B),ye()}Ce(["click"]);const fi=()=>Qe((n,r)=>{r.length&&(We(r),he(!n.name,()=>{ee("name",se(),()=>{te(n.name).isNotBlank()})}),he(!n.givenName,()=>{ee("givenName",se(),()=>{te(n.givenName).isNotBlank()})}),he(!n.familyName,()=>{ee("familyName",se(),()=>{te(n.familyName).isNotBlank()})}),he(!n.middleName,()=>{ee("middleName",se(),()=>{te(n.middleName).isNotBlank()})}),he(!n.nickname,()=>{ee("nickname",se(),()=>{te(n.nickname).isNotBlank()})}),he(!n.gender,()=>{ee("gender",se(),()=>{te(n.gender).isNotBlank()})}),he(!n.zoneInfo,()=>{ee("zoneInfo",se(),()=>{te(n.zoneInfo).isNotBlank()})}),he(!n.locale,()=>{ee("locale",se(),()=>{te(n.locale).isNotBlank()})}),he(!n.address,()=>{ee("address",se(),()=>{te(n.address).isNotBlank()})}),he(!n.birthdate,()=>{ee("birthdate",se(),()=>{te(n.birthdate).isNotBlank()})}),he(!n.profilePicture,()=>{ee("profilePicture",Dt(),()=>{te(n.profilePicture).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),he(!n.website,()=>{ee("website",Dt(),()=>{te(n.website).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}))});function Ie(n,r,i){r.add(n.currentTarget.name),i()}function _i(n,r,i,o,p){r.add(n.currentTarget.name),i(),o(new Date(e(p)))}var ci=R('<div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="ml-1 flex-grow"><label for="nickname"> </label> <input type="text" name="nickname"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="givenName"> </label> <input type="text" name="givenName"/> <!></div> <div class="mx-1 flex-grow"><label for="middleName"> </label> <input type="text" name="middleName"/> <!></div> <div class="ml-1 flex-grow"><label for="familyName"> </label> <input type="text" name="familyName"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="profilePicture"> </label> <input type="text" name="profilePicture"/> <!></div> <div class="ml-1 flex-grow"><label for="website"> </label> <input type="text" name="website"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="gender"> </label> <select name="gender"><option> </option><option> </option></select> <!></div> <div class="ml-1 flex-grow"><label for="birthdate"> </label> <input type="date" name="birthdate"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="zoneInfo"> </label> <input type="text" name="zoneInfo"/> <!></div> <div class="ml-1 flex-grow"><label for="locale"> </label> <input type="text" name="locale"/> <!></div></div> <div class="mb-2"><label for="address"> </label> <input type="text" name="address"/> <!></div>',1);function bi(n,r){var Ut;xe(r,!0);let i=W(r,"name",15),o=W(r,"givenName",15),p=W(r,"familyName",15),c=W(r,"middleName",15),N=W(r,"nickname",15),f=W(r,"profilePicture",15),w=W(r,"website",15),h=W(r,"gender",15),S=W(r,"birthdate",15),D=W(r,"zoneInfo",15),P=W(r,"locale",15),B=W(r,"address",15),T=W(r,"valid",15,!1),k=u(K((Ut=S())==null?void 0:Ut.toISOString().substring(0,10))),_=fi(),x=u(K(_.get())),I=_e(()=>Xe(e(x),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,y=Ye(()=>{_({name:i(),givenName:o(),familyName:p(),middleName:c(),nickname:N(),profilePicture:f(),website:w(),gender:h(),birthdate:S(),zoneInfo:D(),locale:P(),address:B()},Array.from(v)).done(Be=>{s(x,Be,!0),T(e(x).isValid())}),v.clear()},300);function M(){var Be,it,lt,nt,st,dt,ot,ut,vt,mt;B((Be=B())==null?void 0:Be.trim()),p((it=p())==null?void 0:it.trim()),h((lt=h())==null?void 0:lt.trim()),o((nt=o())==null?void 0:nt.trim()),c((st=c())==null?void 0:st.trim()),N((dt=N())==null?void 0:dt.trim()),f((ot=f())==null?void 0:ot.trim()),w((ut=w())==null?void 0:ut.trim()),D((vt=D())==null?void 0:vt.trim()),P((mt=P())==null?void 0:mt.trim()),v.add("name"),v.add("givenName"),v.add("familyName"),v.add("middleName"),v.add("nickname"),v.add("profilePicture"),v.add("website"),v.add("gender"),v.add("birthdate"),v.add("zoneInfo"),v.add("locale"),v.add("address"),y(),y.flush()}Et(M);var q=ci(),b=Ee(q),j=a(b),z=a(j),E=a(z,!0);t(z);var d=l(z,2);re(d),d.__input=[Ie,v,y];var V=l(d,2);le(V,{name:"name",get result(){return e(x)}}),t(j);var C=l(j,2),U=a(C),H=a(U,!0);t(U);var J=l(U,2);re(J),J.__input=[Ie,v,y];var ie=l(J,2);le(ie,{name:"nickname",get result(){return e(x)}}),t(C),t(b);var ue=l(b,2),fe=a(ue),Q=a(fe),A=a(Q,!0);t(Q);var g=l(Q,2);re(g),g.__input=[Ie,v,y];var F=l(g,2);le(F,{name:"givenName",get result(){return e(x)}}),t(fe);var Z=l(fe,2),G=a(Z),we=a(G,!0);t(G);var de=l(G,2);re(de),de.__input=[Ie,v,y];var Te=l(de,2);le(Te,{name:"middleName",get result(){return e(x)}}),t(Z);var L=l(Z,2),Y=a(L),$=a(Y,!0);t(Y);var ae=l(Y,2);re(ae),ae.__input=[Ie,v,y];var ce=l(ae,2);le(ce,{name:"familyName",get result(){return e(x)}}),t(L),t(ue);var ke=l(ue,2),Pe=a(ke),qe=a(Pe),bt=a(qe,!0);t(qe);var Ue=l(qe,2);re(Ue),Ue.__input=[Ie,v,y];var et=l(Ue,2);le(et,{name:"profilePicture",get result(){return e(x)}}),t(Pe);var tt=l(Pe,2),be=a(tt),pe=a(be,!0);t(be);var ve=l(be,2);re(ve),ve.__input=[Ie,v,y];var Me=l(ve,2);le(Me,{name:"website",get result(){return e(x)}}),t(tt),t(ke);var je=l(ke,2),$e=a(je),Ge=a($e),at=a(Ge,!0);t(Ge);var Se=l(Ge,2);Se.__input=[Ie,v,y];var De=a(Se);De.value=De.__value="male";var pt=a(De,!0);t(De);var Oe=l(De);Oe.value=Oe.__value="female";var rt=a(Oe,!0);t(Oe),t(Se);var gt=l(Se,2);le(gt,{name:"gender",get result(){return e(x)}}),t($e);var Ae=l($e,2),Ne=a(Ae),Kt=a(Ne,!0);t(Ne);var Re=l(Ne,2);re(Re),Re.__input=[_i,v,y,S,k];var Qt=l(Re,2);le(Qt,{name:"birthdate",get result(){return e(x)}}),t(Ae),t(je);var ht=l(je,2),xt=a(ht),yt=a(xt),Yt=a(yt,!0);t(yt);var Ze=l(yt,2);re(Ze),Ze.__input=[Ie,v,y];var Wt=l(Ze,2);le(Wt,{name:"zoneInfo",get result(){return e(x)}}),t(xt);var Ct=l(xt,2),wt=a(Ct),Xt=a(wt,!0);t(wt);var He=l(wt,2);re(He),He.__input=[Ie,v,y];var $t=l(He,2);le($t,{name:"locale",get result(){return e(x)}}),t(Ct),t(ht);var Pt=l(ht,2),kt=a(Pt),ea=a(kt,!0);t(kt);var Je=l(kt,2);re(Je),Je.__input=[Ie,v,y];var ta=l(Je,2);return le(ta,{name:"address",get result(){return e(x)}}),t(Pt),ne((Be,it,lt,nt,st,dt,ot,ut,vt,mt,aa,ra,ia,la,na,sa,da,oa,ua,va,ma,fa,_a,ca,ba,pa,ga,ha,xa,ya,wa,ka,Na,Ia,Ea,Ca,Pa,Ua)=>{m(E,Be),X(d,1,`w-full ${it??""}`),oe(d,"placeholder",lt),m(H,nt),X(J,1,`w-full ${st??""}`),oe(J,"placeholder",dt),m(A,ot),X(g,1,`w-full ${ut??""}`),oe(g,"placeholder",vt),m(we,mt),X(de,1,`w-full ${aa??""}`),oe(de,"placeholder",ra),m($,ia),X(ae,1,`w-full ${la??""}`),oe(ae,"placeholder",na),m(bt,sa),X(Ue,1,`w-full ${da??""}`),oe(Ue,"placeholder",oa),m(pe,ua),X(ve,1,`w-full ${va??""}`),oe(ve,"placeholder",ma),m(at,fa),X(Se,1,`w-full ${_a??""}`),oe(Se,"placeholder",ca),m(pt,ba),m(rt,pa),m(Kt,ga),X(Re,1,`w-full ${ha??""}`),oe(Re,"placeholder",xa),m(Yt,ya),X(Ze,1,`w-full ${wa??""}`),oe(Ze,"placeholder",ka),m(Xt,Na),X(He,1,`w-full ${Ia??""}`),oe(He,"placeholder",Ea),m(ea,Ca),X(Je,1,`w-full ${Pa??""}`),oe(Je,"placeholder",Ua)},[()=>Wa(),()=>e(I)("name"),()=>Xa(),()=>$a(),()=>e(I)("nickname"),()=>er(),()=>tr(),()=>e(I)("givenName"),()=>ar(),()=>rr(),()=>e(I)("middleName"),()=>ir(),()=>lr(),()=>e(I)("familyName"),()=>nr(),()=>sr(),()=>e(I)("profilePicture"),()=>dr(),()=>or(),()=>e(I)("website"),()=>ur(),()=>vr(),()=>e(I)("gender"),()=>mr(),()=>fr(),()=>_r(),()=>cr(),()=>e(I)("birthdate"),()=>br(),()=>pr(),()=>e(I)("zoneInfo"),()=>gr(),()=>hr(),()=>e(I)("locale"),()=>xr(),()=>yr(),()=>e(I)("address"),()=>wr()]),me(d,i),me(J,N),me(g,o),me(de,c),me(ae,p),me(Ue,f),me(ve,w),Vr(Se,h),me(Re,()=>e(k),Be=>s(k,Be)),me(Ze,D),me(He,P),me(Je,B),O(n,q),ye({validateAll:M})}Ce(["input"]);var pi=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),gi=R('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function hi(n,r){xe(r,!0);let i=W(r,"user",15),o=u(K(i().info.address)),p=u(K(i().info.familyName)),c=u(K(i().info.gender)),N=u(K(i().info.givenName)),f=u(K(i().info.locale)),w=u(K(i().info.middleName)),h=u(K(i().info.name)),S=u(K(i().info.nickname)),D=u(K(i().info.profilePicture)),P=u(K(i().info.website)),B=u(K(i().info.birthdate)),T=u(K(i().info.zoneInfo)),k=u(void 0),_=u(!1),x=u(!1),I=_e(()=>e(x)||!e(_));async function v(d){var V;d.preventDefault();try{s(x,!0),(V=e(k))==null||V.validateAll(),e(_)&&i(i().info=await ze.updateUserInfo(i().id,{name:e(h),givenName:e(N),familyName:e(p),middleName:e(w),nickname:e(S),profilePicture:e(D),website:e(P),gender:e(c),birthdate:e(B),zoneInfo:e(T),locale:e(f),address:e(o)},r.applicationId),!0)}catch(C){await Fe(C)}finally{s(x,!1)}}var y=gi(),M=a(y);ct(bi(M,{get address(){return e(o)},set address(d){s(o,d,!0)},get familyName(){return e(p)},set familyName(d){s(p,d,!0)},get gender(){return e(c)},set gender(d){s(c,d,!0)},get givenName(){return e(N)},set givenName(d){s(N,d,!0)},get locale(){return e(f)},set locale(d){s(f,d,!0)},get middleName(){return e(w)},set middleName(d){s(w,d,!0)},get name(){return e(h)},set name(d){s(h,d,!0)},get nickname(){return e(S)},set nickname(d){s(S,d,!0)},get profilePicture(){return e(D)},set profilePicture(d){s(D,d,!0)},get birthdate(){return e(B)},set birthdate(d){s(B,d,!0)},get website(){return e(P)},set website(d){s(P,d,!0)},get zoneInfo(){return e(T)},set zoneInfo(d){s(T,d,!0)},get valid(){return e(_)},set valid(d){s(_,d,!0)}}),d=>s(k,d,!0),()=>e(k));var q=l(M,2),b=a(q),j=a(b);{var z=d=>{var V=pi(),C=a(V),U=a(C);Le(U),t(C),t(V),O(d,V)};ge(j,d=>{e(x)&&d(z)})}var E=l(j);t(b),t(q),t(y),ne(d=>{b.disabled=e(I),m(E,` ${d??""}`)},[()=>kr()]),Ve("submit",y,v),O(n,y),ye()}const xi=()=>Qe((n,r)=>{r.length&&(We(r),ee("username",se(),()=>{te(n.username).isNotBlank()}),ee("active",se(),()=>{te(n.active).isNotBlank()}))});function zt(n,r,i){r.add(n.currentTarget.name),i()}var yi=R('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),wi=R('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"/> <!></div> <div><label for="active" class="m-0"> <input type="checkbox" name="active"/></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ki(n,r){xe(r,!0);let i=W(r,"user",15),o=u(K(i().username)),p=u(K(i().active)),c=xi(),N=u(K(c.get())),f=u(!1),w=_e(()=>e(f)),h=_e(()=>Xe(e(N),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const S=new Set,D=Ye(()=>{c({username:e(o),active:e(p)},Array.from(S)).done(U=>{s(N,U,!0)}),S.clear()},300);function P(){var U;s(o,(U=e(o))==null?void 0:U.trim(),!0),S.add("username"),S.add("active"),D(),D.flush()}async function B(U){U.preventDefault();try{s(f,!0),P(),e(N).isValid()&&(i(await ze.updateUser(i().id,{username:e(o),active:e(p)},r.applicationId)),r.onEdit(i()))}catch(H){await Fe(H)}finally{s(f,!1)}}Et(P);var T=wi(),k=a(T),_=a(k),x=a(_,!0);t(_);var I=l(_,2);re(I),I.__input=[zt,S,D];var v=l(I,2);le(v,{name:"username",get result(){return e(N)}}),t(k);var y=l(k,2),M=a(y),q=a(M),b=l(q);re(b),b.__input=[zt,S,D],t(M);var j=l(M,2);le(j,{name:"active",get result(){return e(N)}}),t(y);var z=l(y,2),E=a(z),d=a(E);{var V=U=>{var H=yi(),J=a(H),ie=a(J);Le(ie),t(J),t(H),O(U,H)};ge(d,U=>{e(f)&&U(V)})}var C=l(d);t(E),t(z),t(T),ne((U,H,J,ie,ue,fe)=>{m(x,U),X(I,1,`w-full ${H??""}`),oe(I,"placeholder",J),m(q,`${ie??""} `),X(b,1,ue),E.disabled=e(w),m(C,` ${fe??""}`)},[()=>qt(),()=>e(h)("username"),()=>Ot(),()=>Vt(),()=>_t(e(h)("active")),()=>Nr()]),Ve("submit",T,B),me(I,()=>e(o),U=>s(o,U)),Ke(b,()=>e(p),U=>s(p,U)),O(n,T),ye()}Ce(["input"]);var Ni=R('<!> <hr class="my-2"/> <!> <hr class="my-2"/> <!>',1);function Ii(n,r){xe(r,!0);let i=W(r,"user",15);var o=Ni(),p=Ee(o);ki(p,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}});var c=l(p,4);mi(c,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}});var N=l(c,4);hi(N,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}}),O(n,o),ye()}const Tt=20;var Ei=R('<button class="btn secondary icon lg"><!></button>'),Ci=R('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Pi=R('<tr><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Ui=R("<h3> </h3>"),Si=R("<h3> </h3>"),Di=R("<h3> </h3>"),ji=R('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Ai(n,r){xe(r,!0);let i=W(r,"users",31,()=>K([])),o=u(0),p=u(!0),c=u(!1),N=u(void 0);Sa(()=>{e(N)!==r.applicationId&&(s(N,r.applicationId,!0),s(o,0),s(p,!0),s(c,!1),i([]),f())});async function f(){if(!e(p)||e(c))return;let A;s(c,!0);try{A=await ze.allUsers(e(o)*Tt,Tt,r.applicationId)}finally{s(c,!1)}s(p,A.hasMore,!0),s(o,e(o)+1),i().push(...A.items)}let w=u(!1);function h(){s(w,!0)}function S(A){i().unshift(A),s(w,!1)}let D=u(void 0),P=u(!1);function B(A){return()=>{s(D,A,!0),s(P,!0)}}function T(A){const g=i().findIndex(F=>F.id===(A==null?void 0:A.id));g!==-1&&i(i()[g]=A,!0)}let k=u(void 0),_=u(!1);function x(A){return()=>{s(k,A,!0),s(_,!0)}}function I(){const A=i().findIndex(g=>{var F;return g.id===((F=e(k))==null?void 0:F.id)});A!==-1&&i().splice(A,1),s(k,void 0),s(_,!1)}var v=ji(),y=Ee(v),M=a(y),q=a(M),b=a(q),j=a(b,!0);t(b);var z=l(b),E=a(z,!0);t(z);var d=l(z),V=a(d,!0);t(d);var C=l(d),U=a(C,!0);t(C);var H=l(C),J=a(H,!0);t(H),Da(),t(q),t(M);var ie=l(M);Gt(ie,23,i,A=>A.id,(A,g,F)=>{var Z=Pi();let G;var we=a(Z),de=a(we,!0);t(we);var Te=l(we),L=a(Te,!0);t(Te);var Y=l(Te),$=a(Y);{var ae=be=>{var pe=St();ne(ve=>m(pe,ve),[()=>zr()]),O(be,pe)},ce=be=>{var pe=St();ne(ve=>m(pe,ve),[()=>Tr()]),O(be,pe)};ge($,be=>{e(g).active?be(ae):be(ce,!1)})}t(Y);var ke=l(Y),Pe=a(ke,!0);t(ke);var qe=l(ke),bt=a(qe,!0);t(qe);var Ue=l(qe),et=a(Ue),tt=a(et);qr(tt,{position:"top-right",anchorPosition:"bottom-right",button:pe=>{var ve=Ei(),Me=a(ve);Or(Me,{}),t(ve),O(pe,ve)},children:(pe,ve)=>{var Me=Ci(),je=Ee(Me),$e=_e(()=>B(e(g)));je.__click=function(...Ae){var Ne;(Ne=e($e))==null||Ne.apply(this,Ae)};var Ge=a(je);Rt(Ge,{});var at=l(Ge),Se=a(at,!0);t(at),t(je);var De=l(je,2),pt=_e(()=>x(e(g)));De.__click=function(...Ae){var Ne;(Ne=e(pt))==null||Ne.apply(this,Ae)};var Oe=a(De);Zt(Oe,{});var rt=l(Oe),gt=a(rt,!0);t(rt),t(De),ne((Ae,Ne)=>{m(Se,Ae),m(gt,Ne)},[()=>Ar(),()=>Br()]),O(pe,Me)},$$slots:{button:!0,default:!0}}),t(et),t(Ue),t(Z),ne((be,pe,ve)=>{G=X(Z,1,"group",null,G,be),m(de,e(g).id),m(L,e(g).username),m(Pe,pe),m(bt,ve)},[()=>({"border-b":e(F)<i().length-1}),()=>e(g).updatedAt.toLocaleString(),()=>e(g).createdAt.toLocaleString()]),O(A,Z)}),t(ie),t(y);var ue=l(y,2);ft(ue,{get open(){return e(w)},set open(g){s(w,g,!0)},title:g=>{var F=Ui(),Z=a(F,!0);t(F),ne(G=>m(Z,G),[()=>Sr()]),O(g,F)},children:(g,F)=>{Rr(g,{get applicationId(){return r.applicationId},onCreate:S})},$$slots:{title:!0,default:!0}});var fe=l(ue,2);ft(fe,{get open(){return e(P)},set open(g){s(P,g,!0)},title:g=>{var F=Si(),Z=a(F,!0);t(F),ne(G=>m(Z,G),[()=>{var G;return Dr({username:((G=e(D))==null?void 0:G.username)||""})}]),O(g,F)},children:(g,F)=>{var Z=It(),G=Ee(Z);{var we=de=>{Ii(de,{get applicationId(){return r.applicationId},get user(){return e(D)},onEdit:T})};ge(G,de=>{e(D)&&de(we)})}O(g,Z)},$$slots:{title:!0,default:!0}});var Q=l(fe,2);return ft(Q,{get open(){return e(_)},set open(g){s(_,g,!0)},title:g=>{var F=Di(),Z=a(F,!0);t(F),ne(G=>m(Z,G),[()=>{var G;return jr({username:((G=e(k))==null?void 0:G.username)||""})}]),O(g,F)},children:(g,F)=>{var Z=It(),G=Ee(Z);{var we=de=>{Qr(de,{get applicationId(){return r.applicationId},get userId(){return e(k).id},get username(){return e(k).username},onDelete:I})};ge(G,de=>{e(k)&&de(we)})}O(g,Z)},$$slots:{title:!0,default:!0}}),ne((A,g,F,Z,G)=>{m(j,A),m(E,g),m(V,F),m(U,Z),m(J,G)},[()=>Ir(),()=>Er(),()=>Cr(),()=>Pr(),()=>Ur()]),O(n,v),ye({loadMore:f,onCreate:h})}Ce(["click"]);var Bi=R('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Qi(n,r){xe(r,!0);let i=u(void 0);var o=Bi();Aa(k=>{ne(_=>ja.title=_,[()=>Ba()])});var p=a(o),c=a(p),N=a(c),f=a(N);oe(f,"href",`${za}/`);var w=a(f),h=a(w);Fr(h,{}),t(w),t(f);var S=l(f,2),D=a(S,!0);t(S),t(N);var P=l(N,2);P.__click=function(...k){var _,x;(x=(_=e(i))==null?void 0:_.onCreate)==null||x.apply(this,k)};var B=a(P);Ht(B,{}),t(P),t(c);var T=l(c,2);ct(Ai(T,{get applicationId(){return r.data.applicationId}}),k=>s(i,k,!0),()=>e(i)),t(p),t(o),ne(()=>m(D,r.data.application.name)),O(n,o),ye()}Ce(["click"]);export{Qi as component};
