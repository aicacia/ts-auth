import{a as M,t as Z,c as xa,b as za}from"../chunks/disclose-version.BR6hquoZ.js";import{p as xe,d as m,g as e,b as s,t as d,a as he,c as t,r as a,s as l,z as T,f as ke,u as ct,ao as bt,$ as pt}from"../chunks/runtime.XTayOKyQ.js";import{d as Ne,e as Ae,s as _,h as gt}from"../chunks/render.DpS1xNCU.js";import{e as se,r as ae,s as de,aU as Ma,Z as sa,aV as Ga,aW as Ra,aX as xt,H as Za,aY as ht,aZ as yt,a_ as wt,a$ as kt,b0 as Nt,b1 as Ha,b2 as Ja,b3 as It,b4 as Et,b5 as Ct,b6 as Ut,b7 as Pt,b8 as Dt,b9 as St,ba as At,bb as jt,f as Ta,bc as Bt,bd as zt,be as Tt,bf as qt,bg as Vt,bh as Ft,bi as Ot,bj as Lt,bk as Mt,bl as Gt,bm as Rt,bn as Zt,bo as Ht,bp as Jt,bq as Kt,br as Qt,bs as Wt,bt as Xt,bu as Yt,bv as $t,bw as er,bx as ar,by as tr,bz as rr,bA as ir,bB as lr,bC as nr,bD as sr,bE as dr,bF as or,bG as ur,bH as vr,bI as mr,bJ as _r,bK as fr,bL as cr,bM as br,bN as pr,bO as gr,bP as xr,u as hr,bQ as yr}from"../chunks/messages.D-7JLJoP.js";import{p as u}from"../chunks/proxy.BKNo-OHe.js";import{p as X,b as da}from"../chunks/props.CLxh3Ck6.js";import{g as wr}from"../chunks/index.BCwrhWKg.js";import{b as kr}from"../chunks/paths.Hn01zztd.js";import{i as _e}from"../chunks/runtime.vqD1BrVN.js";import{d as Ze,I as re,b as ue,c as Re,G as He,m as Je,C as $,v as ee,S as je,h as Be,s as ie,a as Ke,t as ha,e as Ka,N as fe}from"../chunks/InputResults.I4g3kDNh.js";import{u as Ue}from"../chunks/index.B-XEKY0d.js";import{P as Qa,T as Wa,M as na,a as Xa,D as Nr,E as Ir}from"../chunks/trash.DSd6zT0V.js";import{o as ya}from"../chunks/index-client.DhLDVXYR.js";import{b as Er}from"../chunks/select.D5OYKfWn.js";import"../chunks/isURL.production.DFCxhdJF.js";import{C as Cr}from"../chunks/chevron-left.CLUQG4cV.js";const Ur=()=>He((n={},r)=>{r.length&&(Je(r),$("username",se(),()=>{ee(n.username).isNotBlank()}),$("active",se(),()=>{ee(n.active).isNotBlank()}))});function qa(n,r,i){r.add(n.currentTarget.name),i()}var Pr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Dr=Z('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Sr(n,r){xe(r,!0);let i=m(""),v=m(!0),g=Ur(),h=m(u(g.get())),k=m(!1),c=T(()=>e(k)),w=T(()=>Ke(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const b=new Set,C=Ze(()=>{g({username:e(i),active:e(v)},Array.from(b)).done(H=>{s(h,u(H))}),b.clear()},300);function A(){b.add("username"),b.add("active"),C(),C.flush()}async function P(H){H.preventDefault();try{s(k,!0),s(i,u(e(i).trim())),A(),e(h).isValid()&&r.onCreate(await Ue.createUser({active:e(v),username:e(i)},r.applicationId))}catch(D){await Be(D)}finally{s(k,!1)}}var j=Dr(),q=t(j),N=t(q),x=t(N,!0);d(()=>_(x,Ga())),a(N);var p=l(N,2);ae(p);const I=T(()=>`w-full ${e(w)("username")??""}`);d(()=>de(p,"placeholder",Ma())),p.__input=[qa,b,C];var f=l(p,2);re(f,{name:"username",get result(){return e(h)}}),a(q);var y=l(q,2),O=t(y),G=t(O);d(()=>_(G,`${Ra()??""} `));var V=l(G);ae(V);const E=T(()=>sa(e(w)("active")));V.__input=[qa,b,C],a(O);var L=l(O,2);re(L,{name:"active",get result(){return e(h)}}),a(y);var B=l(y,2),o=t(B),z=t(o);{var J=H=>{var D=Pr(),Q=t(D),ve=t(Q);je(ve),a(Q),a(D),M(H,D)};_e(z,H=>{e(k)&&H(J)})}var te=l(z);d(()=>_(te,` ${xt()??""}`)),a(o),a(B),a(j),d(()=>{ie(p,e(I)),ie(V,e(E)),o.disabled=e(c)}),Ae("submit",j,P),ue(p,()=>e(i),H=>s(i,H)),Re(V,()=>e(v),H=>s(v,H)),M(n,j),he()}Ne(["input"]);const Ar=()=>He((n={},r)=>{r.length&&(Je(r),$("usernameConfirm",se(),()=>{ee(n.usernameConfirm).isNotBlank()}),$("usernameConfirm",Za(),()=>{ee(n.username===n.usernameConfirm).isTruthy()}))});function jr(n,r,i){r.add(n.currentTarget.name),i()}var Br=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),zr=Z('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Tr(n,r){xe(r,!0);let i=m(""),v=Ar(),g=m(u(v.get())),h=m(!1),k=T(()=>e(h)),c=T(()=>Ke(e(g),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const w=new Set,b=Ze(()=>{v({username:r.username,usernameConfirm:e(i)},Array.from(w)).done(E=>{s(g,u(E))}),w.clear()},300);function C(){w.add("name"),b(),b.flush()}async function A(E){E.preventDefault();try{s(h,!0),s(i,u(e(i).trim())),C(),e(g).isValid()&&(await Ue.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(L){await Be(L)}finally{s(h,!1)}}var P=zr(),j=t(P),q=t(j,!0);d(()=>_(q,yt())),a(j);var N=l(j,2),x=t(N);ae(x);const p=T(()=>`w-full ${e(c)("usernameConfirm")??""}`);d(()=>de(x,"placeholder",ht({username:r.username}))),x.__input=[jr,w,b];var I=l(x,2);re(I,{name:"usernameConfirm",get result(){return e(g)}}),a(N);var f=l(N,2),y=t(f),O=t(y);{var G=E=>{var L=Br(),B=t(L),o=t(B);je(o),a(B),a(L),M(E,L)};_e(O,E=>{e(h)&&E(G)})}var V=l(O);d(()=>_(V,` ${wt()??""}`)),a(y),a(f),a(P),d(()=>{ie(x,e(p)),y.disabled=e(k)}),Ae("submit",P,A),ue(x,()=>e(i),E=>s(i,E)),M(n,P),he()}Ne(["input"]);const qr=()=>He((n,r)=>{r.length&&(Je(r),$("email",se(),()=>{ee(n.email).isNotBlank()}),$("primary",se(),()=>{ee(n.primary).isNotBlank()}),$("verified",se(),()=>{ee(n.verified).isNotBlank()}))});function ga(n,r,i){r.add(n.currentTarget.name),i()}var Vr=Z('<div class="mb-2"><label for="email"> </label> <input type="email" name="email"> <!></div> <div class="flex flex-row mb-2"><div><label for="primary"> <input type="checkbox" name="primary"></label> <!></div> <div class="ml-2"><label for="verified"> <input type="checkbox" name="verified"></label> <!></div></div>',1);function Ya(n,r){xe(r,!0);let i=X(r,"email",15,""),v=X(r,"primary",15,!1),g=X(r,"verified",15,!1),h=X(r,"valid",15,!1),k=qr(),c=m(u(k.get())),w=T(()=>Ke(e(c),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const b=new Set,C=Ze(()=>{k({email:i(),primary:v(),verified:g()},Array.from(b)).done(D=>{s(c,u(D)),h(e(c).isValid())}),b.clear()},300);function A(){var D;i((D=i())==null?void 0:D.trim()),b.add("email"),b.add("primary"),b.add("verified"),C(),C.flush()}ya(A);var P=Vr(),j=ke(P),q=t(j),N=t(q,!0);d(()=>_(N,Nt())),a(q);var x=l(q,2);ae(x);const p=T(()=>`w-full ${e(w)("email")??""}`);d(()=>de(x,"placeholder",kt())),x.__input=[ga,b,C];var I=l(x,2);re(I,{name:"email",get result(){return e(c)}}),a(j);var f=l(j,2),y=t(f),O=t(y),G=t(O);d(()=>_(G,`${Ha()??""} `));var V=l(G);ae(V);const E=T(()=>sa(e(w)("primary")));V.__input=[ga,b,C],a(O);var L=l(O,2);re(L,{name:"primary",get result(){return e(c)}}),a(y);var B=l(y,2),o=t(B),z=t(o);d(()=>_(z,`${Ja()??""} `));var J=l(z);ae(J);const te=T(()=>sa(e(w)("verified")));J.__input=[ga,b,C],a(o);var H=l(o,2);return re(H,{name:"verified",get result(){return e(c)}}),a(B),a(f),d(()=>{ie(x,e(p)),ie(V,e(E)),ie(J,e(te))}),ue(x,i),Re(V,v),Re(J,g),M(n,P),he({validateAll:A})}Ne(["input"]);const Fr=()=>He((n={},r)=>{r.length&&(Je(r),$("emailConfirm",se(),()=>{ee(n.emailConfirm).isNotBlank()}),$("emailConfirm",Za(),()=>{ee(n.email===n.emailConfirm).isTruthy()}))});function Or(n,r,i){r.add(n.currentTarget.name),i()}var Lr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Mr=Z('<form><p> </p> <div class="mb-2"><input type="text" name="emailConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Gr(n,r){xe(r,!0);let i=m(""),v=Fr(),g=m(u(v.get())),h=m(!1),k=T(()=>e(h)),c=T(()=>Ke(e(g),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const w=new Set,b=Ze(()=>{v({email:r.email,emailConfirm:e(i)},Array.from(w)).done(E=>{s(g,u(E))}),w.clear()},300);function C(){w.add("email"),b(),b.flush()}async function A(E){E.preventDefault();try{s(h,!0),s(i,u(e(i).trim())),C(),e(g).isValid()&&(await Ue.deleteUserEmail(r.userId,r.emailId,r.applicationId),r.onDelete())}catch(L){await Be(L)}finally{s(h,!1)}}var P=Mr(),j=t(P),q=t(j,!0);d(()=>_(q,Et())),a(j);var N=l(j,2),x=t(N);ae(x);const p=T(()=>`w-full ${e(c)("emailConfirm")??""}`);d(()=>de(x,"placeholder",It({email:r.email}))),x.__input=[Or,w,b];var I=l(x,2);re(I,{name:"emailConfirm",get result(){return e(g)}}),a(N);var f=l(N,2),y=t(f),O=t(y);{var G=E=>{var L=Lr(),B=t(L),o=t(B);je(o),a(B),a(L),M(E,L)};_e(O,E=>{e(h)&&E(G)})}var V=l(O);d(()=>_(V,` ${Ct()??""}`)),a(y),a(f),a(P),d(()=>{ie(x,e(p)),y.disabled=e(k)}),Ae("submit",P,A),ue(x,()=>e(i),E=>s(i,E)),M(n,P),he()}Ne(["input"]);function Va(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}function Rr(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}var Zr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Hr=Z("<h3> </h3>"),Jr=Z('<div class="flex flex-row justify-between items-center mb-2"><div class="flex flex-col"><p class="m-0"> </p> <div class="flex flex-row items-center"><label for="primary"> <input type="checkbox" name="primary" readonly=""></label> <label for="verified"> <input type="checkbox" name="verified" readonly=""></label></div></div> <div class="flex flex-row items-center"><button class="btn primary icon"><!></button> <button class="btn danger icon ms-2"><!></button></div></div> <form><!> <div class="flex flex-row justify-end"><div class="flex flex-row"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></div></form> <!>',1);function Fa(n,r){xe(r,!0);let i=X(r,"user",15),v=X(r,"email",15),g=m(u(v().email)),h=m(u(v().primary)),k=m(u(v().verified)),c=m(!1),w=m(!1);function b(){if(v().primary)i(i().email=null,!0);else{const S=i().emails.findIndex(le=>le.id===v().id);i().emails.splice(S,1)}}let C=m(void 0),A=m(!1),P=m(!1),j=T(()=>e(P)||!e(A));async function q(S){var le;if(S.preventDefault(),(le=e(C))==null||le.validateAll(),e(A))try{s(P,!0);const Y=await Ue.updateUserEmail(i().id,v().id,{email:e(g),primary:e(h),verified:e(k)},r.applicationId);if(s(c,!1),v().primary!==Y.primary){if(i().email&&i().email.id!==Y.id){const ne=i().emails.findIndex(Ee=>Ee.id===Y.id);i().emails.splice(ne,1),i(i().email.primary=!1,!0),i().emails.push(i().email)}i(i().email=Y,!0)}else{const ne=i().emails.findIndex(Ee=>Ee.id===Y.id);ne!==-1&&i(i().emails[ne]=Y,!0)}v(Y)}catch(Y){Be(Y)}finally{s(P,!1)}}var N=Jr(),x=ke(N),p=t(x),I=t(p),f=t(I,!0);a(I);var y=l(I,2),O=t(y),G=t(O);d(()=>_(G,`${Ha()??""} `));var V=l(G);ae(V),a(O);var E=l(O,2),L=t(E);d(()=>_(L,`${Ja()??""} `));var B=l(L);ae(B),a(E),a(y),a(p);var o=l(p,2),z=t(o);z.__click=[Va,c];var J=t(z);Qa(J,{}),a(z);var te=l(z,2);te.__click=[Rr,w];var H=t(te);Wa(H,{}),a(te),a(o),a(x);var D=l(x,2),Q=t(D);da(Ya(Q,{get email(){return e(g)},set email(S){s(g,u(S))},get primary(){return e(h)},set primary(S){s(h,u(S))},get verified(){return e(k)},set verified(S){s(k,u(S))},get valid(){return e(A)},set valid(S){s(A,u(S))}}),S=>s(C,u(S)),()=>e(C));var ve=l(Q,2),ce=t(ve),W=t(ce);W.__click=[Va,c];var F=t(W,!0);d(()=>_(F,Pt())),a(W);var U=l(W,2),R=t(U);{var K=S=>{var le=Zr(),Y=t(le),ne=t(Y);je(ne),a(Y),a(le),M(S,le)};_e(R,S=>{e(P)&&S(K)})}var oe=l(R);d(()=>_(oe,` ${Dt()??""}`)),a(U),a(ce),a(ve),a(D);var Ie=l(D,2);na(Ie,{get open(){return e(w)},set open(le){s(w,u(le))},title:le=>{var Y=Hr(),ne=t(Y,!0);d(()=>_(ne,Ut({email:v().email}))),a(Y),M(le,Y)},children:(le,Y)=>{var ne=xa(),Ee=ke(ne);{var Qe=ye=>{Gr(ye,{get applicationId(){return r.applicationId},get userId(){return i().id},get emailId(){return v().id},get email(){return v().email},onDelete:b})};_e(Ee,ye=>{e(w)&&ye(Qe)})}M(le,ne)},$$slots:{title:!0,default:!0}}),d(()=>{ha(x,"hidden",e(c)),_(f,v().email),ha(D,"hidden",!e(c)),U.disabled=e(j)}),Re(V,()=>v().primary,S=>v(v().primary=S,!0)),Re(B,()=>v().verified,S=>v(v().verified=S,!0)),Ae("submit",D,q),M(n,N),he()}Ne(["click"]);function Kr(n,r){n.preventDefault(),s(r,!0)}function Qr(n,r){n.stopPropagation(),n.preventDefault(),r()}var Wr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Xr=Z('<form><!> <div class="flex flex-row justify-end"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>'),Yr=Z('<div class="flex flex-row justify-between"><h5> </h5> <div class="flex flex-col justify-center"><button class="btn primary icon"><!></button></div></div> <!> <hr class="my-2"> <div class="flex flex-col"><!> <!></div>',1);function $r(n,r){xe(r,!0);let i=X(r,"user",15),v=m(void 0),g=m(!1),h=m(""),k=m(!1),c=m(!1),w=m(!1),b=m(!1),C=T(()=>e(b)||!e(w));function A(){s(g,!1),s(h,""),s(k,!1),s(c,!1)}async function P(B){var o;if(B.preventDefault(),(o=e(v))==null||o.validateAll(),e(w))try{s(b,!0);const z=await Ue.createUserEmail(i().id,{email:e(h),primary:e(k),verified:e(c)},r.applicationId);A(),z.primary?(i().email&&i().emails.push(i().email),i(i().email=z,!0)):i().emails.push(z),r.onEdit(i())}catch(z){Be(z)}finally{s(b,!1)}}var j=Yr(),q=ke(j),N=t(q),x=t(N,!0);d(()=>_(x,St())),a(N);var p=l(N,2),I=t(p);I.__click=[Kr,g];var f=t(I);Xa(f,{}),a(I),a(p),a(q);var y=l(q,2);{var O=B=>{var o=Xr(),z=t(o);da(Ya(z,{get email(){return e(h)},set email(W){s(h,u(W))},get primary(){return e(k)},set primary(W){s(k,u(W))},get verified(){return e(c)},set verified(W){s(c,u(W))},get valid(){return e(w)},set valid(W){s(w,u(W))}}),W=>s(v,u(W)),()=>e(v));var J=l(z,2),te=t(J);te.__click=[Qr,A];var H=t(te,!0);d(()=>_(H,At())),a(te);var D=l(te,2),Q=t(D);{var ve=W=>{var F=Wr(),U=t(F),R=t(U);je(R),a(U),a(F),M(W,F)};_e(Q,W=>{e(b)&&W(ve)})}var ce=l(Q);d(()=>_(ce,` ${jt()??""}`)),a(D),a(J),a(o),d(()=>D.disabled=e(C)),Ae("submit",o,P),M(B,o)};_e(y,B=>{e(g)&&B(O)})}var G=l(y,4),V=t(G);{var E=B=>{Fa(B,{get applicationId(){return r.applicationId},get email(){return i().email},get user(){return i()},set user(o){i(o)}})};_e(V,B=>{i().email&&B(E)})}var L=l(V,2);Ka(L,17,()=>i().emails,B=>B.id,(B,o)=>{Fa(B,{get applicationId(){return r.applicationId},get email(){return e(o)},get user(){return i()},set user(z){i(z)}})}),a(G),M(n,j),he()}Ne(["click"]);const ei=()=>He((n,r)=>{r.length&&(Je(r),fe(!n.name,()=>{$("name",se(),()=>{ee(n.name).isNotBlank()})}),fe(!n.givenName,()=>{$("givenName",se(),()=>{ee(n.givenName).isNotBlank()})}),fe(!n.familyName,()=>{$("familyName",se(),()=>{ee(n.familyName).isNotBlank()})}),fe(!n.middleName,()=>{$("middleName",se(),()=>{ee(n.middleName).isNotBlank()})}),fe(!n.nickname,()=>{$("nickname",se(),()=>{ee(n.nickname).isNotBlank()})}),fe(!n.gender,()=>{$("gender",se(),()=>{ee(n.gender).isNotBlank()})}),fe(!n.zoneInfo,()=>{$("zoneInfo",se(),()=>{ee(n.zoneInfo).isNotBlank()})}),fe(!n.locale,()=>{$("locale",se(),()=>{ee(n.locale).isNotBlank()})}),fe(!n.address,()=>{$("address",se(),()=>{ee(n.address).isNotBlank()})}),fe(!n.birthdate,()=>{$("birthdate",se(),()=>{ee(n.birthdate).isNotBlank()})}),fe(!n.profilePicture,()=>{$("profilePicture",Ta(),()=>{ee(n.profilePicture).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),fe(!n.website,()=>{$("website",Ta(),()=>{ee(n.website).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}))});function ge(n,r,i){r.add(n.currentTarget.name),i()}function ai(n,r,i,v,g){r.add(n.currentTarget.name),i(),v(new Date(e(g)))}var ti=Z('<div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="ml-1 flex-grow"><label for="nickname"> </label> <input type="text" name="nickname"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="givenName"> </label> <input type="text" name="givenName"> <!></div> <div class="mx-1 flex-grow"><label for="middleName"> </label> <input type="text" name="middleName"> <!></div> <div class="ml-1 flex-grow"><label for="familyName"> </label> <input type="text" name="familyName"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="profilePicture"> </label> <input type="text" name="profilePicture"> <!></div> <div class="ml-1 flex-grow"><label for="website"> </label> <input type="text" name="website"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="gender"> </label> <select name="gender"><option> </option><option> </option></select> <!></div> <div class="ml-1 flex-grow"><label for="birthdate"> </label> <input type="date" name="birthdate"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="zoneInfo"> </label> <input type="text" name="zoneInfo"> <!></div> <div class="ml-1 flex-grow"><label for="locale"> </label> <input type="text" name="locale"> <!></div></div> <div class="mb-2"><label for="address"> </label> <input type="text" name="address"> <!></div>',1);function ri(n,r){var Ia;xe(r,!0);let i=X(r,"name",15),v=X(r,"givenName",15),g=X(r,"familyName",15),h=X(r,"middleName",15),k=X(r,"nickname",15),c=X(r,"profilePicture",15),w=X(r,"website",15),b=X(r,"gender",15),C=X(r,"birthdate",15),A=X(r,"zoneInfo",15),P=X(r,"locale",15),j=X(r,"address",15),q=X(r,"valid",15,!1),N=m(u((Ia=C())==null?void 0:Ia.toISOString().substring(0,10))),x=ei(),p=m(u(x.get())),I=T(()=>Ke(e(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,y=Ze(()=>{x({name:i(),givenName:v(),familyName:g(),middleName:h(),nickname:k(),profilePicture:c(),website:w(),gender:b(),birthdate:C(),zoneInfo:A(),locale:P(),address:j()},Array.from(f)).done(Ge=>{s(p,u(Ge)),q(e(p).isValid())}),f.clear()},300);function O(){var Ge,Ea,Ca,Ua,Pa,Da,Sa,Aa,ja,Ba;j((Ge=j())==null?void 0:Ge.trim()),g((Ea=g())==null?void 0:Ea.trim()),b((Ca=b())==null?void 0:Ca.trim()),v((Ua=v())==null?void 0:Ua.trim()),h((Pa=h())==null?void 0:Pa.trim()),k((Da=k())==null?void 0:Da.trim()),c((Sa=c())==null?void 0:Sa.trim()),w((Aa=w())==null?void 0:Aa.trim()),A((ja=A())==null?void 0:ja.trim()),P((Ba=P())==null?void 0:Ba.trim()),f.add("name"),f.add("givenName"),f.add("familyName"),f.add("middleName"),f.add("nickname"),f.add("profilePicture"),f.add("website"),f.add("gender"),f.add("birthdate"),f.add("zoneInfo"),f.add("locale"),f.add("address"),y(),y.flush()}ya(O);var G=ti(),V=ke(G),E=t(V),L=t(E),B=t(L,!0);d(()=>_(B,Ht())),a(L);var o=l(L,2);ae(o);const z=T(()=>`w-full ${e(I)("name")??""}`);d(()=>de(o,"placeholder",Bt())),o.__input=[ge,f,y];var J=l(o,2);re(J,{name:"name",get result(){return e(p)}}),a(E);var te=l(E,2),H=t(te),D=t(H,!0);d(()=>_(D,Jt())),a(H);var Q=l(H,2);ae(Q);const ve=T(()=>`w-full ${e(I)("nickname")??""}`);d(()=>de(Q,"placeholder",zt())),Q.__input=[ge,f,y];var ce=l(Q,2);re(ce,{name:"nickname",get result(){return e(p)}}),a(te),a(V);var W=l(V,2),F=t(W),U=t(F),R=t(U,!0);d(()=>_(R,Kt())),a(U);var K=l(U,2);ae(K);const oe=T(()=>`w-full ${e(I)("givenName")??""}`);d(()=>de(K,"placeholder",Tt())),K.__input=[ge,f,y];var Ie=l(K,2);re(Ie,{name:"givenName",get result(){return e(p)}}),a(F);var S=l(F,2),le=t(S),Y=t(le,!0);d(()=>_(Y,Qt())),a(le);var ne=l(le,2);ae(ne);const Ee=T(()=>`w-full ${e(I)("middleName")??""}`);d(()=>de(ne,"placeholder",qt())),ne.__input=[ge,f,y];var Qe=l(ne,2);re(Qe,{name:"middleName",get result(){return e(p)}}),a(S);var ye=l(S,2),We=t(ye),Xe=t(We,!0);d(()=>_(Xe,Wt())),a(We);var Ce=l(We,2);ae(Ce);const ta=T(()=>`w-full ${e(I)("familyName")??""}`);d(()=>de(Ce,"placeholder",Vt())),Ce.__input=[ge,f,y];var ra=l(Ce,2);re(ra,{name:"familyName",get result(){return e(p)}}),a(ye),a(W);var Ye=l(W,2),be=t(Ye),me=t(be),ze=t(me,!0);d(()=>_(ze,Xt())),a(me);var pe=l(me,2);ae(pe);const Te=T(()=>`w-full ${e(I)("profilePicture")??""}`);d(()=>de(pe,"placeholder",Ft())),pe.__input=[ge,f,y];var oa=l(pe,2);re(oa,{name:"profilePicture",get result(){return e(p)}}),a(be);var $e=l(be,2),qe=t($e),ua=t(qe,!0);d(()=>_(ua,Yt())),a(qe);var we=l(qe,2);ae(we);const va=T(()=>`w-full ${e(I)("website")??""}`);d(()=>de(we,"placeholder",Ot())),we.__input=[ge,f,y];var ia=l(we,2);re(ia,{name:"website",get result(){return e(p)}}),a($e),a(Ye);var Ve=l(Ye,2),ea=t(Ve),Pe=t(ea),De=t(Pe,!0);d(()=>_(De,$t())),a(Pe);var Se=l(Pe,2);const $a=T(()=>`w-full ${e(I)("gender")??""}`);d(()=>de(Se,"placeholder",Lt())),Se.__input=[ge,f,y];var aa=t(Se);aa.value=(aa.__value="male")==null?"":"male";var et=t(aa,!0);d(()=>_(et,er())),a(aa);var la=l(aa);la.value=(la.__value="female")==null?"":"female";var at=t(la,!0);d(()=>_(at,ar())),a(la),a(Se);var tt=l(Se,2);re(tt,{name:"gender",get result(){return e(p)}}),a(ea);var wa=l(ea,2),ma=t(wa),rt=t(ma,!0);d(()=>_(rt,tr())),a(ma);var Fe=l(ma,2);ae(Fe);const it=T(()=>`w-full ${e(I)("birthdate")??""}`);d(()=>de(Fe,"placeholder",Mt())),Fe.__input=[ai,f,y,C,N];var lt=l(Fe,2);re(lt,{name:"birthdate",get result(){return e(p)}}),a(wa),a(Ve);var _a=l(Ve,2),fa=t(_a),ca=t(fa),nt=t(ca,!0);d(()=>_(nt,rr())),a(ca);var Oe=l(ca,2);ae(Oe);const st=T(()=>`w-full ${e(I)("zoneInfo")??""}`);d(()=>de(Oe,"placeholder",Gt())),Oe.__input=[ge,f,y];var dt=l(Oe,2);re(dt,{name:"zoneInfo",get result(){return e(p)}}),a(fa);var ka=l(fa,2),ba=t(ka),ot=t(ba,!0);d(()=>_(ot,ir())),a(ba);var Le=l(ba,2);ae(Le);const ut=T(()=>`w-full ${e(I)("locale")??""}`);d(()=>de(Le,"placeholder",Rt())),Le.__input=[ge,f,y];var vt=l(Le,2);re(vt,{name:"locale",get result(){return e(p)}}),a(ka),a(_a);var Na=l(_a,2),pa=t(Na),mt=t(pa,!0);d(()=>_(mt,lr())),a(pa);var Me=l(pa,2);ae(Me);const _t=T(()=>`w-full ${e(I)("address")??""}`);d(()=>de(Me,"placeholder",Zt())),Me.__input=[ge,f,y];var ft=l(Me,2);return re(ft,{name:"address",get result(){return e(p)}}),a(Na),d(()=>{ie(o,e(z)),ie(Q,e(ve)),ie(K,e(oe)),ie(ne,e(Ee)),ie(Ce,e(ta)),ie(pe,e(Te)),ie(we,e(va)),ie(Se,e($a)),ie(Fe,e(it)),ie(Oe,e(st)),ie(Le,e(ut)),ie(Me,e(_t))}),ue(o,i),ue(Q,k),ue(K,v),ue(ne,h),ue(Ce,g),ue(pe,c),ue(we,w),Er(Se,b),ue(Fe,()=>e(N),Ge=>s(N,Ge)),ue(Oe,A),ue(Le,P),ue(Me,j),M(n,G),he({validateAll:O})}Ne(["input"]);var ii=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),li=Z('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ni(n,r){xe(r,!0);let i=X(r,"user",15),v=m(u(i().info.address)),g=m(u(i().info.familyName)),h=m(u(i().info.gender)),k=m(u(i().info.givenName)),c=m(u(i().info.locale)),w=m(u(i().info.middleName)),b=m(u(i().info.name)),C=m(u(i().info.nickname)),A=m(u(i().info.profilePicture)),P=m(u(i().info.website)),j=m(u(i().info.birthdate)),q=m(u(i().info.zoneInfo)),N=m(void 0),x=m(!1),p=m(!1),I=T(()=>e(p)||!e(x));async function f(o){var z;o.preventDefault();try{s(p,!0),(z=e(N))==null||z.validateAll(),e(x)&&i(i().info=await Ue.updateUserInfo(i().id,{name:e(b),givenName:e(k),familyName:e(g),middleName:e(w),nickname:e(C),profilePicture:e(A),website:e(P),gender:e(h),birthdate:e(j),zoneInfo:e(q),locale:e(c),address:e(v)},r.applicationId),!0)}catch(J){await Be(J)}finally{s(p,!1)}}var y=li(),O=t(y);da(ri(O,{get address(){return e(v)},set address(o){s(v,u(o))},get familyName(){return e(g)},set familyName(o){s(g,u(o))},get gender(){return e(h)},set gender(o){s(h,u(o))},get givenName(){return e(k)},set givenName(o){s(k,u(o))},get locale(){return e(c)},set locale(o){s(c,u(o))},get middleName(){return e(w)},set middleName(o){s(w,u(o))},get name(){return e(b)},set name(o){s(b,u(o))},get nickname(){return e(C)},set nickname(o){s(C,u(o))},get profilePicture(){return e(A)},set profilePicture(o){s(A,u(o))},get birthdate(){return e(j)},set birthdate(o){s(j,u(o))},get website(){return e(P)},set website(o){s(P,u(o))},get zoneInfo(){return e(q)},set zoneInfo(o){s(q,u(o))},get valid(){return e(x)},set valid(o){s(x,u(o))}}),o=>s(N,u(o)),()=>e(N));var G=l(O,2),V=t(G),E=t(V);{var L=o=>{var z=ii(),J=t(z),te=t(J);je(te),a(J),a(z),M(o,z)};_e(E,o=>{e(p)&&o(L)})}var B=l(E);d(()=>_(B,` ${nr()??""}`)),a(V),a(G),a(y),d(()=>V.disabled=e(I)),Ae("submit",y,f),M(n,y),he()}const si=()=>He((n,r)=>{r.length&&(Je(r),$("username",se(),()=>{ee(n.username).isNotBlank()}),$("active",se(),()=>{ee(n.active).isNotBlank()}))});function Oa(n,r,i){r.add(n.currentTarget.name),i()}var di=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),oi=Z('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div><label for="active" class="m-0"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ui(n,r){xe(r,!0);let i=X(r,"user",15),v=m(u(i().username)),g=m(u(i().active)),h=si(),k=m(u(h.get())),c=m(!1),w=T(()=>e(c)),b=T(()=>Ke(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const C=new Set,A=Ze(()=>{h({username:e(v),active:e(g)},Array.from(C)).done(D=>{s(k,u(D))}),C.clear()},300);function P(){var D;s(v,u((D=e(v))==null?void 0:D.trim())),C.add("username"),C.add("active"),A(),A.flush()}async function j(D){D.preventDefault();try{s(c,!0),P(),e(k).isValid()&&(i(await Ue.updateUser(i().id,{username:e(v),active:e(g)},r.applicationId)),r.onEdit(i()))}catch(Q){await Be(Q)}finally{s(c,!1)}}ya(P);var q=oi(),N=t(q),x=t(N),p=t(x,!0);d(()=>_(p,Ga())),a(x);var I=l(x,2);ae(I);const f=T(()=>`w-full ${e(b)("username")??""}`);d(()=>de(I,"placeholder",Ma())),I.__input=[Oa,C,A];var y=l(I,2);re(y,{name:"username",get result(){return e(k)}}),a(N);var O=l(N,2),G=t(O),V=t(G);d(()=>_(V,`${Ra()??""} `));var E=l(V);ae(E);const L=T(()=>sa(e(b)("active")));E.__input=[Oa,C,A],a(G);var B=l(G,2);re(B,{name:"active",get result(){return e(k)}}),a(O);var o=l(O,2),z=t(o),J=t(z);{var te=D=>{var Q=di(),ve=t(Q),ce=t(ve);je(ce),a(ve),a(Q),M(D,Q)};_e(J,D=>{e(c)&&D(te)})}var H=l(J);d(()=>_(H,` ${sr()??""}`)),a(z),a(o),a(q),d(()=>{ie(I,e(f)),ie(E,e(L)),z.disabled=e(w)}),Ae("submit",q,j),ue(I,()=>e(v),D=>s(v,D)),Re(E,()=>e(g),D=>s(g,D)),M(n,q),he()}Ne(["input"]);var vi=Z('<!> <hr class="my-2"> <!> <hr class="my-2"> <!>',1);function mi(n,r){let i=X(r,"user",15);var v=vi(),g=ke(v);ui(g,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(c){i(c)}});var h=l(g,4);$r(h,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(c){i(c)}});var k=l(h,4);ni(k,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(c){i(c)}}),M(n,v)}const La=20;var _i=Z('<button class="btn secondary icon lg"><!></button>'),fi=Z('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ci=Z('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),bi=Z("<h3> </h3>"),pi=Z("<h3> </h3>"),gi=Z("<h3> </h3>"),xi=Z('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function hi(n,r){xe(r,!0);let i=X(r,"users",31,()=>u([])),v=m(0),g=m(!0),h=m(!1),k=m(void 0);ct(()=>{e(k)!==r.applicationId&&(s(k,u(r.applicationId)),s(v,0),s(g,!0),s(h,!1),i([]),c())});async function c(){if(!e(g)||e(h))return;let F;s(h,!0);try{F=await Ue.allUsers(e(v)*La,La,r.applicationId)}finally{s(h,!1)}s(g,u(F.hasMore)),s(v,e(v)+1),i().push(...F.items)}let w=m(!1);function b(){s(w,!0)}function C(F){i().unshift(F),s(w,!1)}let A=m(void 0),P=m(!1);function j(F){return()=>{s(A,u(F)),s(P,!0)}}function q(F){const U=i().findIndex(R=>R.id===(F==null?void 0:F.id));U!==-1&&i(i()[U]=F,!0)}let N=m(void 0),x=m(!1);function p(F){return()=>{s(N,u(F)),s(x,!0)}}function I(){const F=i().findIndex(U=>{var R;return U.id===((R=e(N))==null?void 0:R.id)});F!==-1&&i().splice(F,1),s(N,void 0),s(x,!1)}var f=xi(),y=ke(f),O=t(y),G=t(O),V=t(G),E=t(V,!0);d(()=>_(E,ur())),a(V);var L=l(V),B=t(L,!0);d(()=>_(B,vr())),a(L);var o=l(L),z=t(o,!0);d(()=>_(z,mr())),a(o);var J=l(o),te=t(J,!0);d(()=>_(te,_r())),a(J);var H=l(J),D=t(H,!0);d(()=>_(D,fr())),a(H),bt(),a(G),a(O);var Q=l(O);Ka(Q,23,i,F=>F.id,(F,U,R)=>{var K=ci(),oe=t(K),Ie=t(oe,!0);a(oe);var S=l(oe),le=t(S,!0);a(S);var Y=l(S),ne=t(Y);{var Ee=be=>{var me=za();d(()=>_(me,cr())),M(be,me)},Qe=be=>{var me=za();d(()=>_(me,br())),M(be,me)};_e(ne,be=>{e(U).active?be(Ee):be(Qe,!1)})}a(Y);var ye=l(Y),We=t(ye,!0);d(()=>_(We,e(U).updatedAt.toLocaleString())),a(ye);var Xe=l(ye),Ce=t(Xe,!0);d(()=>_(Ce,e(U).createdAt.toLocaleString())),a(Xe);var ta=l(Xe),ra=t(ta),Ye=t(ra);Nr(Ye,{position:"top-right",anchorPosition:"bottom-right",button:me=>{var ze=_i(),pe=t(ze);Ir(pe,{}),a(ze),M(me,ze)},children:(me,ze)=>{var pe=fi(),Te=ke(pe),oa=T(()=>j(e(U)));Te.__click=function(...Pe){var De;(De=e(oa))==null||De.apply(this,Pe)};var $e=t(Te);Qa($e,{});var qe=l($e),ua=t(qe,!0);d(()=>_(ua,pr())),a(qe),a(Te);var we=l(Te,2),va=T(()=>p(e(U)));we.__click=function(...Pe){var De;(De=e(va))==null||De.apply(this,Pe)};var ia=t(we);Wa(ia,{});var Ve=l(ia),ea=t(Ve,!0);d(()=>_(ea,gr())),a(Ve),a(we),M(me,pe)},$$slots:{button:!0,default:!0}}),a(ra),a(ta),a(K),d(()=>{ha(K,"border-b",e(R)<i().length-1),_(Ie,e(U).id),_(le,e(U).username)}),M(F,K)}),a(Q),a(y);var ve=l(y,2);na(ve,{get open(){return e(w)},set open(U){s(w,u(U))},title:U=>{var R=bi(),K=t(R,!0);d(()=>_(K,xr())),a(R),M(U,R)},children:(U,R)=>{Sr(U,{get applicationId(){return r.applicationId},onCreate:C})},$$slots:{title:!0,default:!0}});var ce=l(ve,2);na(ce,{get open(){return e(P)},set open(U){s(P,u(U))},title:U=>{var R=pi(),K=t(R,!0);d(()=>{var oe;return _(K,dr({username:((oe=e(A))==null?void 0:oe.username)||""}))}),a(R),M(U,R)},children:(U,R)=>{var K=xa(),oe=ke(K);{var Ie=S=>{mi(S,{get applicationId(){return r.applicationId},get user(){return e(A)},onEdit:q})};_e(oe,S=>{e(A)&&S(Ie)})}M(U,K)},$$slots:{title:!0,default:!0}});var W=l(ce,2);return na(W,{get open(){return e(x)},set open(U){s(x,u(U))},title:U=>{var R=gi(),K=t(R,!0);d(()=>{var oe;return _(K,or({username:((oe=e(N))==null?void 0:oe.username)||""}))}),a(R),M(U,R)},children:(U,R)=>{var K=xa(),oe=ke(K);{var Ie=S=>{Tr(S,{get applicationId(){return r.applicationId},get userId(){return e(N).id},get username(){return e(N).username},onDelete:I})};_e(oe,S=>{e(N)&&S(Ie)})}M(U,K)},$$slots:{title:!0,default:!0}}),M(n,f),he({loadMore:c,onCreate:b})}Ne(["click"]);var yi=Z('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Vi(n,r){xe(r,!0);let i=m(void 0);const v=wr(),[g,h]=v;var k=yi();gt(p=>{d(()=>pt.title=hr())});var c=t(k),w=t(c),b=t(w);d(()=>de(b,"href",g(`${kr}/`,void 0)));var C=t(b),A=t(C);Cr(A,{}),a(C);var P=l(C,2),j=t(P,!0);d(()=>_(j,yr())),a(P),a(b);var q=l(b,2);q.__click=function(...p){var I,f;(f=(I=e(i))==null?void 0:I.onCreate)==null||f.apply(this,p)};var N=t(q);Xa(N,{}),a(q),a(w);var x=l(w,2);da(hi(x,{get applicationId(){return r.data.applicationId}}),p=>s(i,u(p)),()=>e(i)),a(c),a(k),M(n,k),he()}Ne(["click"]);export{Vi as component};
