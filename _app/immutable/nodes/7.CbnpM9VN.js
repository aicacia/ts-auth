import{a as j,t as z,c as me}from"../chunks/disclose-version.BdPpbG8G.js";import{p as X,d as g,g as e,b as n,t as c,a as Y,c as a,r as t,s as i,z as V,f as K,u as ut,ao as _t,$ as ft}from"../chunks/runtime.XTayOKyQ.js";import{d as re,e as ke,s as _,h as mt}from"../chunks/render.CVMVLslR.js";import{e as se,r as ae,s as W,au as Ce,av as Pe,aw as bt,ax as Ke,ay as Ze,az as We,aA as pt,aB as Xe,aC as Ye,H as ht,aD as gt,aE as xt,aF as yt,aG as wt,aH as St,aI as It,aJ as At,aK as kt,aL as Ct,aM as Pt,aN as Dt,aO as Tt,aP as Et,aQ as Nt,aR as jt,b as Mt}from"../chunks/messages.wercaZ5l.js";import{p as x}from"../chunks/proxy.BKNo-OHe.js";import{l as Ot,s as Bt,p as ce,b as Ft}from"../chunks/props.CLxh3Ck6.js";import{g as Lt}from"../chunks/index.BCwrhWKg.js";import{b as Vt}from"../chunks/paths.BeVl75iW.js";import{i as $}from"../chunks/runtime.vqD1BrVN.js";import{d as De,I as oe,b as be,G as Te,m as Ee,C as ee,v as te,S as Ne,h as je,s as pe,a as Me,f as zt,g as Gt,e as Ht,t as Rt}from"../chunks/InputResults.BHVbwuCU.js";import{e as he}from"../chunks/index.B-XEKY0d.js";import{I as qt,s as Jt,M as fe,D as Kt,P as Qt,T as Ut,E as Zt,a as Wt}from"../chunks/trash.C2pZKfXe.js";import{o as $e}from"../chunks/index-client.DhLDVXYR.js";import{P as et}from"../chunks/Password.BmtdOm-v.js";import"../chunks/legacy.AZeTKGhb.js";import{C as Xt}from"../chunks/chevron-left._PPZrqIK.js";const Yt=()=>Te((v,r)=>{r.length&&(Ee(r),ee("name",se(),()=>{te(v.name).isNotBlank()}))});function $t(v,r,l){r.add(v.currentTarget.name),l()}var ea=z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ta=z('<form><div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function aa(v,r){X(r,!0);let l=g(!1),y=g(!1),P=V(()=>e(l)||!e(y)),b=g(""),p=Yt(),f=g(x(p.get())),w=V(()=>Me(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const o=new Set,D=De(()=>{p({name:e(b)},Array.from(o)).done(T=>{n(f,x(T)),n(y,x(e(f).isValid()))}),o.clear()},300);function B(){o.add("name"),D(),D.flush()}$e(B);async function m(T){T.preventDefault();try{n(l,!0),e(y)&&r.onCreate(await he.createServiceAccount({name:e(b)},r.applicationId))}catch(E){await je(E)}finally{n(l,!1)}}var A=ta(),k=a(A),C=a(k),d=a(C,!0);c(()=>_(d,Pe())),t(C);var u=i(C,2);ae(u);const S=V(()=>`w-full ${e(w)("name")??""}`);c(()=>W(u,"placeholder",Ce())),u.__input=[$t,o,D];var F=i(u,2);oe(F,{name:"name",get result(){return e(f)}}),t(k);var L=i(k,2),H=a(L),J=a(H);{var M=T=>{var E=ea(),G=a(E),Q=a(G);Ne(Q),t(G),t(E),j(T,E)};$(J,T=>{e(l)&&T(M)})}var O=i(J);c(()=>_(O,` ${bt()??""}`)),t(H),t(L),t(A),c(()=>{pe(u,e(S)),H.disabled=e(P)}),ke("submit",A,m),be(u,()=>e(b),T=>n(b,T)),j(v,A),Y()}re(["input"]);function Qe(v,r){const l=Ot(r,["children","$$slots","$$events","$$legacy"]);qt(v,Bt({name:"copy"},()=>l,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(P,b)=>{var p=me(),f=K(p);Jt(f,r,"default",{}),j(P,p)},$$slots:{default:!0}}))}var ra=z('<div class="mb-2"><label for="name"> </label> <input class="w-full" type="text" name="name" readonly=""></div> <div class="mb-2"><label for="clientId"> </label> <div class="flex flex-row w-full"><input class="flex-grow" type="text" name="clientId" readonly=""> <button class="btn icon secondary flex flex-shrink"><!></button></div></div> <div class="mb-2"><label for="clientSecret"> </label> <div class="flex flex-row w-full"><!> <button class="btn icon secondary flex flex-shrink"><!></button></div></div>',1);function na(v,r){X(r,!0);let l=g(!1);function y(E){return async()=>{try{n(l,!0),await zt(E),Gt(pt(),"success")}finally{n(l,!1)}}}var P=ra(),b=K(P),p=a(b),f=a(p,!0);c(()=>_(f,Pe())),t(p);var w=i(p,2);ae(w),c(()=>W(w,"placeholder",Ce())),t(b);var o=i(b,2),D=a(o),B=a(D,!0);c(()=>_(B,Xe())),t(D);var m=i(D,2),A=a(m);ae(A),c(()=>W(A,"placeholder",Ze()));var k=i(A,2),C=V(()=>y(r.serviceAccount.clientId));k.__click=function(...E){var G;(G=e(C))==null||G.apply(this,E)};var d=a(k);Qe(d,{}),t(k),t(m),t(o);var u=i(o,2),S=a(u),F=a(S,!0);c(()=>_(F,Ye())),t(S);var L=i(S,2),H=a(L),J=V(()=>We());et(H,{name:"clientSecret",containerClass:"flex-grow",readonly:!0,get placeholder(){return e(J)},get value(){return r.serviceAccount.clientSecret}});var M=i(H,2),O=V(()=>y(r.serviceAccount.clientSecret));M.__click=function(...E){var G;(G=e(O))==null||G.apply(this,E)};var T=a(M);Qe(T,{}),t(M),t(L),t(u),c(()=>{Ke(w,r.serviceAccount.name),Ke(A,r.serviceAccount.clientId),k.disabled=e(l),M.disabled=e(l)}),j(v,P),Y()}re(["click"]);const ia=()=>Te((v={},r)=>{r.length&&(Ee(r),ee("nameConfirm",se(),()=>{te(v.nameConfirm).isNotBlank()}),ee("nameConfirm",ht(),()=>{te(v.name===v.nameConfirm).isTruthy()}))});function la(v,r,l){r.add(v.currentTarget.name),l()}var ca=z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),sa=z('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function oa(v,r){X(r,!0);let l=g(""),y=ia(),P=g(x(y.get())),b=g(!1),p=V(()=>e(b)),f=V(()=>Me(e(P),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const w=new Set,o=De(()=>{y({name:r.name,nameConfirm:e(l)},Array.from(w)).done(O=>{n(P,x(O))}),w.clear()},300);function D(){w.add("name"),o(),o.flush()}async function B(O){O.preventDefault();try{n(b,!0),n(l,x(e(l).trim())),D(),e(P).isValid()&&(await he.deleteServiceAccount(r.serviceAccountId,r.applicationId),r.onDelete())}catch(T){await je(T)}finally{n(b,!1)}}var m=sa(),A=a(m),k=a(A,!0);c(()=>_(k,xt())),t(A);var C=i(A,2),d=a(C);ae(d);const u=V(()=>`w-full ${e(f)("nameConfirm")??""}`);c(()=>W(d,"placeholder",gt({name:r.name}))),d.__input=[la,w,o];var S=i(d,2);oe(S,{name:"nameConfirm",get result(){return e(P)}}),t(C);var F=i(C,2),L=a(F),H=a(L);{var J=O=>{var T=ca(),E=a(T),G=a(E);Ne(G),t(E),t(T),j(O,T)};$(H,O=>{e(b)&&O(J)})}var M=i(H);c(()=>_(M,` ${yt()??""}`)),t(L),t(F),t(m),c(()=>{pe(d,e(u)),L.disabled=e(p)}),ke("submit",m,B),be(d,()=>e(l),O=>n(l,O)),j(v,m),Y()}re(["input"]);const da=()=>Te((v,r)=>{r.length&&(Ee(r),ee("name",se(),()=>{te(v.name).isNotBlank()}),ee("clientId",se(),()=>{te(v.clientId).isNotBlank()}),ee("clientSecret",se(),()=>{te(v.clientSecret).isNotBlank()}))});var va=z('<div class="mb-2"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <!> <!></div>',1);function ua(v,r){X(r,!0);let l=ce(r,"name",15),y=ce(r,"clientId",15),P=ce(r,"clientSecret",15),b=ce(r,"valid",15,!1),p=da(),f=g(x(p.get())),w=V(()=>Me(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const o=new Set,D=De(()=>{p({name:l(),clientId:y(),clientSecret:P()},Array.from(o)).done(U=>{n(f,x(U)),b(e(f).isValid())}),o.clear()},300);function B(){o.add("name"),o.add("clientId"),o.add("clientSecret"),D(),D.flush()}function m(U){o.add(U.currentTarget.name),D()}$e(B);var A=va(),k=K(A),C=a(k),d=a(C,!0);c(()=>_(d,Pe())),t(C);var u=i(C,2);ae(u);const S=V(()=>`w-full ${e(w)("name")??""}`);c(()=>W(u,"placeholder",Ce())),u.__input=m;var F=i(u,2);oe(F,{name:"name",get result(){return e(f)}}),t(k);var L=i(k,2),H=a(L),J=a(H,!0);c(()=>_(J,Xe())),t(H);var M=i(H,2);ae(M);const O=V(()=>`w-full ${e(w)("clientId")??""}`);c(()=>W(M,"placeholder",Ze())),M.__input=m;var T=i(M,2);oe(T,{name:"clientId",get result(){return e(f)}}),t(L);var E=i(L,2),G=a(E),Q=a(G,!0);c(()=>_(Q,Ye())),t(G);var de=i(G,2),ne=V(()=>e(w)("clientSecret")),ge=V(()=>We());et(de,{get class(){return e(ne)},name:"clientSecret",get placeholder(){return e(ge)},oninput:m,get value(){return P()},set value(U){P(U)}});var ie=i(de,2);oe(ie,{name:"clientSecret",get result(){return e(f)}}),t(E),c(()=>{pe(u,e(S)),pe(M,e(O))}),be(u,l),be(M,y),j(v,A),Y()}re(["input"]);var _a=z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),fa=z('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ma(v,r){X(r,!0);let l=g(!1),y=g(!1),P=V(()=>e(l)||!e(y)),b=g(x(r.serviceAccount.name)),p=g(x(r.serviceAccount.clientId)),f=g(x(r.serviceAccount.clientSecret));async function w(d){d.preventDefault();try{n(l,!0),e(y)&&r.onEdit(await he.updateServiceAccount(r.serviceAccount.id,{name:e(b),clientId:e(p)?e(p):void 0,clientSecret:e(f)?e(f):void 0},r.applicationId))}catch(u){await je(u)}finally{n(l,!1)}}var o=fa(),D=a(o);ua(D,{get name(){return e(b)},set name(d){n(b,x(d))},get clientId(){return e(p)},set clientId(d){n(p,x(d))},get clientSecret(){return e(f)},set clientSecret(d){n(f,x(d))},get valid(){return e(y)},set valid(d){n(y,x(d))}});var B=i(D,2),m=a(B),A=a(m);{var k=d=>{var u=_a(),S=a(u),F=a(S);Ne(F),t(S),t(u),j(d,u)};$(A,d=>{e(l)&&d(k)})}var C=i(A);c(()=>_(C,` ${wt()??""}`)),t(m),t(B),t(o),c(()=>m.disabled=e(P)),ke("submit",o,w),j(v,o),Y()}const Ue=20;var ba=z('<button class="btn secondary icon lg"><!></button>'),pa=z('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ha=z('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ga=z("<h3> </h3>"),xa=z("<h3> </h3>"),ya=z("<h3> </h3>"),wa=z("<h3> </h3>"),Sa=z('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!> <!>',1);function Ia(v,r){X(r,!0);let l=ce(r,"serviceAccounts",31,()=>x([])),y=g(0),P=g(!0),b=g(!1),p=g(void 0);ut(()=>{e(p)!==r.applicationId&&(n(p,x(r.applicationId)),n(y,0),n(P,!0),n(b,!1),l([]),f())});async function f(){if(!e(P)||e(b))return;let I;n(b,!0);try{I=await he.allServiceAccounts(e(y)*Ue,Ue,r.applicationId)}finally{n(b,!1)}n(P,x(I.hasMore)),n(y,e(y)+1),l().push(...I.items)}let w=g(!1);function o(){n(w,!0)}function D(I){n(B,!0),n(m,x(I)),n(w,!1)}let B=g(!1),m=g(void 0);function A(){e(m)&&(delete e(m).clientSecret,l().unshift(e(m)),n(m,void 0),n(B,!1))}let k=g(void 0),C=g(!1);function d(I){return()=>{n(k,x(I)),n(C,!0)}}function u(I){const s=l().findIndex(h=>h.id===(I==null?void 0:I.id));s!==-1&&l(l()[s]=I,!0),n(k,void 0),n(C,!1)}let S=g(void 0),F=g(!1);function L(I){return()=>{n(S,x(I)),n(F,!0)}}function H(){const I=l().findIndex(s=>{var h;return s.id===((h=e(S))==null?void 0:h.id)});I!==-1&&l().splice(I,1),n(S,void 0),n(F,!1)}var J=Sa(),M=K(J),O=a(M),T=a(O),E=a(T),G=a(E,!0);c(()=>_(G,At())),t(E);var Q=i(E),de=a(Q,!0);c(()=>_(de,kt())),t(Q);var ne=i(Q),ge=a(ne,!0);c(()=>_(ge,Ct())),t(ne);var ie=i(ne),U=a(ie,!0);c(()=>_(U,Pt())),t(ie);var Oe=i(ie),tt=a(Oe,!0);c(()=>_(tt,Dt())),t(Oe),_t(),t(T),t(O);var Be=i(O);Ht(Be,23,l,I=>I.id,(I,s,h)=>{var N=ha(),R=a(N),Z=a(R,!0);t(R);var q=i(R),rt=a(q,!0);t(q);var xe=i(q),nt=a(xe,!0);t(xe);var ye=i(xe),it=a(ye,!0);c(()=>_(it,e(s).updatedAt.toLocaleString())),t(ye);var we=i(ye),lt=a(we,!0);c(()=>_(lt,e(s).createdAt.toLocaleString())),t(we);var ze=i(we),Ge=a(ze),ct=a(Ge);Kt(ct,{position:"top-right",anchorPosition:"bottom-right",button:Se=>{var ve=ba(),ue=a(ve);Zt(ue,{}),t(ve),j(Se,ve)},children:(Se,ve)=>{var ue=pa(),_e=K(ue),st=V(()=>d(e(s)));_e.__click=function(...Ae){var le;(le=e(st))==null||le.apply(this,Ae)};var He=a(_e);Qt(He,{});var Re=i(He),ot=a(Re,!0);c(()=>_(ot,Tt())),t(Re),t(_e);var Ie=i(_e,2),dt=V(()=>L(e(s)));Ie.__click=function(...Ae){var le;(le=e(dt))==null||le.apply(this,Ae)};var qe=a(Ie);Ut(qe,{});var Je=i(qe),vt=a(Je,!0);c(()=>_(vt,Et())),t(Je),t(Ie),j(Se,ue)},$$slots:{button:!0,default:!0}}),t(Ge),t(ze),t(N),c(()=>{Rt(N,"border-b",e(h)<l().length-1),_(Z,e(s).id),_(rt,e(s).name),_(nt,e(s).clientId)}),j(I,N)}),t(Be),t(M);var Fe=i(M,2);fe(Fe,{get open(){return e(w)},set open(s){n(w,x(s))},title:s=>{var h=ga(),N=a(h,!0);c(()=>_(N,Nt())),t(h),j(s,h)},children:(s,h)=>{aa(s,{get applicationId(){return r.applicationId},onCreate:D})},$$slots:{title:!0,default:!0}});var Le=i(Fe,2);fe(Le,{onClose:A,get open(){return e(B)},set open(s){n(B,x(s))},title:s=>{var h=xa(),N=a(h,!0);c(()=>_(N,jt())),t(h),j(s,h)},children:(s,h)=>{var N=me(),R=K(N);{var Z=q=>{na(q,{get serviceAccount(){return e(m)}})};$(R,q=>{e(m)&&q(Z)})}j(s,N)},$$slots:{title:!0,default:!0}});var Ve=i(Le,2);fe(Ve,{get open(){return e(C)},set open(s){n(C,x(s))},title:s=>{var h=ya(),N=a(h,!0);c(()=>{var R;return _(N,St({name:((R=e(k))==null?void 0:R.name)||""}))}),t(h),j(s,h)},children:(s,h)=>{var N=me(),R=K(N);{var Z=q=>{ma(q,{get applicationId(){return r.applicationId},get serviceAccount(){return e(k)},onEdit:u})};$(R,q=>{e(k)&&q(Z)})}j(s,N)},$$slots:{title:!0,default:!0}});var at=i(Ve,2);return fe(at,{get open(){return e(F)},set open(s){n(F,x(s))},title:s=>{var h=wa(),N=a(h,!0);c(()=>{var R;return _(N,It({name:((R=e(S))==null?void 0:R.name)||""}))}),t(h),j(s,h)},children:(s,h)=>{var N=me(),R=K(N);{var Z=q=>{oa(q,{get applicationId(){return r.applicationId},get serviceAccountId(){return e(S).id},get name(){return e(S).name},onDelete:H})};$(R,q=>{e(S)&&q(Z)})}j(s,N)},$$slots:{title:!0,default:!0}}),j(v,J),Y({onCreate:o})}re(["click"]);var Aa=z('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ra(v,r){X(r,!0);let l=g(void 0);const y=Lt(),[P,b]=y;var p=Aa();mt(S=>{c(()=>ft.title=Mt())});var f=a(p),w=a(f),o=a(w),D=a(o);c(()=>W(D,"href",P(`${Vt}/`,void 0)));var B=a(D),m=a(B);Xt(m,{}),t(B),t(D);var A=i(D,2),k=a(A,!0);t(A),t(o);var C=i(o,2);C.__click=function(...S){var F,L;(L=(F=e(l))==null?void 0:F.onCreate)==null||L.apply(this,S)};var d=a(C);Wt(d,{}),t(C),t(w);var u=i(w,2);Ft(Ia(u,{get applicationId(){return r.data.applicationId}}),S=>n(l,x(S)),()=>e(l)),t(f),t(p),c(()=>_(k,r.data.application.name)),j(v,p),Y()}re(["click"]);export{Ra as component};
