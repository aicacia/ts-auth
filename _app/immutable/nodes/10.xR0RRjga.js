import{f as M,a as O,c as bt,t as xt}from"../chunks/BAGX8FWs.js";import{p as he,b as u,A as J,s as l,c as a,t as le,g as e,B as _e,a as xe,h as s,r as t,f as Ne,u as Ua,a5 as Sa,$ as Da}from"../chunks/9Y3Zi9LS.js";import{d as Ie,i as pe,s as m,e as qe,h as ja}from"../chunks/CdK4JjYi.js";import{f as lt,d as W,b as oe,r as ee,e as Aa,u as Ba}from"../chunks/DBRB63xn.js";import{p as Q,b as nt}from"../chunks/ClwBco7U.js";import"../chunks/DkEC4_bh.js";import{b as za}from"../chunks/Bluxw1Nt.js";import{G as Je,d as Ke,I as ie,aZ as Ct,a_ as Pt,a$ as Ut,b0 as Ta,b as me,an as He,m as Qe,C as Y,g as ne,v as $,i as We,j as Oe,S as Ve,b1 as qa,b2 as Oa,b3 as Va,P as St,b4 as Fa,b5 as La,b6 as Dt,b7 as jt,b8 as Ma,b9 as Ra,ba as Ga,bb as Za,bc as Ha,bd as Ja,o as At,be as Ka,bf as Qa,bg as Wa,bh as Xa,bi as Ya,bj as $a,bk as er,bl as tr,bm as ar,bn as rr,bo as ir,bp as lr,bq as nr,br as sr,bs as dr,bt as or,bu as ur,bv as vr,bw as mr,bx as fr,by as _r,bz as cr,bA as br,bB as pr,bC as gr,bD as hr,bE as xr,bF as yr,bG as wr,N as ge,h as yt,bH as kr,bI as Nr,bJ as Ir,bK as Er,bL as Cr,bM as Pr,bN as Ur,bO as Sr,bP as Dr,bQ as jr,bR as Ar,bS as Br,bT as zr,bU as Tr}from"../chunks/CbLLult4.js";import{u as Ae}from"../chunks/Dyl6cX5U.js";import{P as Bt,T as zt,M as it,a as Tt,D as qr,E as Or}from"../chunks/D7DzHFmv.js";import{o as pt}from"../chunks/pO33VYKk.js";import"../chunks/COB5_kvU.js";import{C as Vr}from"../chunks/B40CaONp.js";const Fr=()=>Je((n={},r)=>{r.length&&(Qe(r),Y("username",ne(),()=>{$(n.username).isNotBlank()}),Y("active",ne(),()=>{$(n.active).isNotBlank()}))});function wt(n,r,i){r.add(n.currentTarget.name),i()}var Lr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Mr=M('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"/> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"/></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Rr(n,r){he(r,!0);let i=u(""),o=u(!0),b=Fr(),_=u(J(b.get())),k=u(!1),f=_e(()=>e(k)),y=_e(()=>We(e(_),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,P=Ke(()=>{b({username:e(i),active:e(o)},Array.from(h)).done(j=>{s(_,j,!0)}),h.clear()},300);function S(){h.add("username"),h.add("active"),P(),P.flush()}async function C(j){j.preventDefault();try{s(k,!0),s(i,e(i).trim(),!0),S(),e(_).isValid()&&r.onCreate(await Ae.createUser({active:e(o),username:e(i)},r.applicationId))}catch(U){await Oe(U)}finally{s(k,!1)}}var A=Mr(),T=a(A),w=a(T),p=a(w,!0);t(w);var N=l(w,2);ee(N),N.__input=[wt,h,P];var I=l(N,2);ie(I,{name:"username",get result(){return e(_)}}),t(T);var v=l(T,2),x=a(v),L=a(x),q=l(L);ee(q),q.__input=[wt,h,P],t(x);var c=l(x,2);ie(c,{name:"active",get result(){return e(_)}}),t(v);var D=l(v,2),B=a(D),E=a(B);{var d=j=>{var U=Lr(),Z=a(U),H=a(Z);Ve(H),t(Z),t(U),O(j,U)};pe(E,j=>{e(k)&&j(d)})}var X=l(E);t(B),t(D),t(A),le((j,U,Z,H,te,ue)=>{m(p,j),W(N,1,`w-full ${U??""}`),oe(N,"placeholder",Z),m(L,`${H??""} `),W(q,1,te),B.disabled=e(f),m(X,` ${ue??""}`)},[()=>Ct(),()=>e(y)("username"),()=>Pt(),()=>Ut(),()=>lt(e(y)("active")),()=>Ta()]),qe("submit",A,C),me(N,()=>e(i),j=>s(i,j)),He(q,()=>e(o),j=>s(o,j)),O(n,A),xe()}Ie(["input"]);const Gr=()=>Je((n={},r)=>{r.length&&(Qe(r),Y("usernameConfirm",ne(),()=>{$(n.usernameConfirm).isNotBlank()}),Y("usernameConfirm",St(),()=>{$(n.username===n.usernameConfirm).isTruthy()}))});function Zr(n,r,i){r.add(n.currentTarget.name),i()}var Hr=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Jr=M('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Kr(n,r){he(r,!0);let i=u(""),o=Gr(),b=u(J(o.get())),_=u(!1),k=_e(()=>e(_)),f=_e(()=>We(e(b),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const y=new Set,h=Ke(()=>{o({username:r.username,usernameConfirm:e(i)},Array.from(y)).done(c=>{s(b,c,!0)}),y.clear()},300);function P(){y.add("name"),h(),h.flush()}async function S(c){c.preventDefault();try{s(_,!0),s(i,e(i).trim(),!0),P(),e(b).isValid()&&(await Ae.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(D){await Oe(D)}finally{s(_,!1)}}var C=Jr(),A=a(C),T=a(A,!0);t(A);var w=l(A,2),p=a(w);ee(p),p.__input=[Zr,y,h];var N=l(p,2);ie(N,{name:"usernameConfirm",get result(){return e(b)}}),t(w);var I=l(w,2),v=a(I),x=a(v);{var L=c=>{var D=Hr(),B=a(D),E=a(B);Ve(E),t(B),t(D),O(c,D)};pe(x,c=>{e(_)&&c(L)})}var q=l(x);t(v),t(I),t(C),le((c,D,B,E)=>{m(T,c),W(p,1,`w-full ${D??""}`),oe(p,"placeholder",B),v.disabled=e(k),m(q,` ${E??""}`)},[()=>qa(),()=>e(f)("usernameConfirm"),()=>Oa({username:r.username}),()=>Va()]),qe("submit",C,S),me(p,()=>e(i),c=>s(i,c)),O(n,C),xe()}Ie(["input"]);const Qr=()=>Je((n,r)=>{r.length&&(Qe(r),Y("email",ne(),()=>{$(n.email).isNotBlank()}),Y("primary",ne(),()=>{$(n.primary).isNotBlank()}),Y("verified",ne(),()=>{$(n.verified).isNotBlank()}))});function ct(n,r,i){r.add(n.currentTarget.name),i()}var Wr=M('<div class="mb-2"><label for="email"> </label> <input type="email" name="email"/> <!></div> <div class="flex flex-row mb-2"><div><label for="primary"> <input type="checkbox" name="primary"/></label> <!></div> <div class="ml-2"><label for="verified"> <input type="checkbox" name="verified"/></label> <!></div></div>',1);function qt(n,r){he(r,!0);let i=Q(r,"email",15,""),o=Q(r,"primary",15,!1),b=Q(r,"verified",15,!1),_=Q(r,"valid",15,!1),k=Qr(),f=u(J(k.get())),y=_e(()=>We(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,P=Ke(()=>{k({email:i(),primary:o(),verified:b()},Array.from(h)).done(j=>{s(f,j,!0),_(e(f).isValid())}),h.clear()},300);function S(){i(i()?.trim()),h.add("email"),h.add("primary"),h.add("verified"),P(),P.flush()}pt(S);var C=Wr(),A=Ne(C),T=a(A),w=a(T,!0);t(T);var p=l(T,2);ee(p),p.__input=[ct,h,P];var N=l(p,2);ie(N,{name:"email",get result(){return e(f)}}),t(A);var I=l(A,2),v=a(I),x=a(v),L=a(x),q=l(L);ee(q),q.__input=[ct,h,P],t(x);var c=l(x,2);ie(c,{name:"primary",get result(){return e(f)}}),t(v);var D=l(v,2),B=a(D),E=a(B),d=l(E);ee(d),d.__input=[ct,h,P],t(B);var X=l(B,2);return ie(X,{name:"verified",get result(){return e(f)}}),t(D),t(I),le((j,U,Z,H,te,ue,fe)=>{m(w,j),W(p,1,`w-full ${U??""}`),oe(p,"placeholder",Z),m(L,`${H??""} `),W(q,1,te),m(E,`${ue??""} `),W(d,1,fe)},[()=>Fa(),()=>e(y)("email"),()=>La(),()=>Dt(),()=>lt(e(y)("primary")),()=>jt(),()=>lt(e(y)("verified"))]),me(p,i),He(q,o),He(d,b),O(n,C),xe({validateAll:S})}Ie(["input"]);const Xr=()=>Je((n={},r)=>{r.length&&(Qe(r),Y("emailConfirm",ne(),()=>{$(n.emailConfirm).isNotBlank()}),Y("emailConfirm",St(),()=>{$(n.email===n.emailConfirm).isTruthy()}))});function Yr(n,r,i){r.add(n.currentTarget.name),i()}var $r=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ei=M('<form><p> </p> <div class="mb-2"><input type="text" name="emailConfirm"/> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ti(n,r){he(r,!0);let i=u(""),o=Xr(),b=u(J(o.get())),_=u(!1),k=_e(()=>e(_)),f=_e(()=>We(e(b),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const y=new Set,h=Ke(()=>{o({email:r.email,emailConfirm:e(i)},Array.from(y)).done(c=>{s(b,c,!0)}),y.clear()},300);function P(){y.add("email"),h(),h.flush()}async function S(c){c.preventDefault();try{s(_,!0),s(i,e(i).trim(),!0),P(),e(b).isValid()&&(await Ae.deleteUserEmail(r.userId,r.emailId,r.applicationId),r.onDelete())}catch(D){await Oe(D)}finally{s(_,!1)}}var C=ei(),A=a(C),T=a(A,!0);t(A);var w=l(A,2),p=a(w);ee(p),p.__input=[Yr,y,h];var N=l(p,2);ie(N,{name:"emailConfirm",get result(){return e(b)}}),t(w);var I=l(w,2),v=a(I),x=a(v);{var L=c=>{var D=$r(),B=a(D),E=a(B);Ve(E),t(B),t(D),O(c,D)};pe(x,c=>{e(_)&&c(L)})}var q=l(x);t(v),t(I),t(C),le((c,D,B,E)=>{m(T,c),W(p,1,`w-full ${D??""}`),oe(p,"placeholder",B),v.disabled=e(k),m(q,` ${E??""}`)},[()=>Ma(),()=>e(f)("emailConfirm"),()=>Ra({email:r.email}),()=>Ga()]),qe("submit",C,S),me(p,()=>e(i),c=>s(i,c)),O(n,C),xe()}Ie(["input"]);function kt(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}function ai(n,r){n.preventDefault(),n.stopPropagation(),s(r,!e(r))}var ri=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ii=M("<h3> </h3>"),li=M('<div><div class="flex flex-col"><p class="m-0"> </p> <div class="flex flex-row items-center"><label for="primary"> <input type="checkbox" name="primary" readonly=""/></label> <label for="verified"> <input type="checkbox" name="verified" readonly=""/></label></div></div> <div class="flex flex-row items-center"><button class="btn primary icon"><!></button> <button class="btn danger icon ms-2"><!></button></div></div> <form><!> <div class="flex flex-row justify-end"><div class="flex flex-row"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></div></form> <!>',1);function Nt(n,r){he(r,!0);let i=Q(r,"user",15),o=Q(r,"email",15),b=u(J(o().email)),_=u(J(o().primary)),k=u(J(o().verified)),f=u(!1),y=u(!1);function h(){if(o().primary)i(i().email=null,!0);else{const F=i().emails.findIndex(V=>V.id===o().id);i().emails.splice(F,1)}}let P=u(void 0),S=u(!1),C=u(!1),A=_e(()=>e(C)||!e(S));async function T(F){if(F.preventDefault(),e(P)?.validateAll(),e(S))try{s(C,!0);const V=await Ae.updateUserEmail(i().id,o().id,{email:e(b),primary:e(_),verified:e(k)},r.applicationId);if(s(f,!1),o().primary!==V.primary){if(i().email&&i().email.id!==V.id){const de=i().emails.findIndex(re=>re.id===V.id);i().emails.splice(de,1),i(i().email.primary=!1,!0),i().emails.push(i().email)}i(i().email=V,!0)}else{const de=i().emails.findIndex(re=>re.id===V.id);de!==-1&&i(i().emails[de]=V,!0)}o(V)}catch(V){Oe(V)}finally{s(C,!1)}}var w=li(),p=Ne(w);let N;var I=a(p),v=a(I),x=a(v,!0);t(v);var L=l(v,2),q=a(L),c=a(q),D=l(c);ee(D),t(q);var B=l(q,2),E=a(B),d=l(E);ee(d),t(B),t(L),t(I);var X=l(I,2),j=a(X);j.__click=[kt,f];var U=a(j);Bt(U,{}),t(j);var Z=l(j,2);Z.__click=[ai,y];var H=a(Z);zt(H,{}),t(Z),t(X),t(p);var te=l(p,2);let ue;var fe=a(te);nt(qt(fe,{get email(){return e(b)},set email(F){s(b,F,!0)},get primary(){return e(_)},set primary(F){s(_,F,!0)},get verified(){return e(k)},set verified(F){s(k,F,!0)},get valid(){return e(S)},set valid(F){s(S,F,!0)}}),F=>s(P,F,!0),()=>e(P));var K=l(fe,2),z=a(K),g=a(z);g.__click=[kt,f];var R=a(g,!0);t(g);var G=l(g,2),ae=a(G);{var ye=F=>{var V=ri(),de=a(V),re=a(de);Ve(re),t(de),t(V),O(F,V)};pe(ae,F=>{e(C)&&F(ye)})}var se=l(ae);t(G),t(z),t(K),t(te);var Be=l(te,2);it(Be,{get open(){return e(y)},set open(V){s(y,V,!0)},title:V=>{var de=ii(),re=a(de,!0);t(de),le(Ee=>m(re,Ee),[()=>Ja({email:o().email})]),O(V,de)},children:(V,de)=>{var re=bt(),Ee=Ne(re);{var we=Ce=>{ti(Ce,{get applicationId(){return r.applicationId},get userId(){return i().id},get emailId(){return o().id},get email(){return o().email},onDelete:h})};pe(Ee,Ce=>{e(y)&&Ce(we)})}O(V,re)},$$slots:{title:!0,default:!0}}),le((F,V,de,re,Ee,we)=>{N=W(p,1,"flex flex-row justify-between items-center mb-2",null,N,F),m(x,o().email),m(c,`${V??""} `),m(E,`${de??""} `),ue=W(te,1,"",null,ue,re),m(R,Ee),G.disabled=e(A),m(se,` ${we??""}`)},[()=>({hidden:e(f)}),()=>Dt(),()=>jt(),()=>({hidden:!e(f)}),()=>Za(),()=>Ha()]),He(D,()=>o().primary,F=>o(o().primary=F,!0)),He(d,()=>o().verified,F=>o(o().verified=F,!0)),qe("submit",te,T),O(n,w),xe()}Ie(["click"]);function ni(n,r){n.preventDefault(),s(r,!0)}function si(n,r){n.stopPropagation(),n.preventDefault(),r()}var di=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),oi=M('<form><!> <div class="flex flex-row justify-end"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>'),ui=M('<div class="flex flex-row justify-between"><h5> </h5> <div class="flex flex-col justify-center"><button class="btn primary icon"><!></button></div></div> <!> <hr class="my-2"/> <div class="flex flex-col"><!> <!></div>',1);function vi(n,r){he(r,!0);let i=Q(r,"user",15),o=u(void 0),b=u(!1),_=u(""),k=u(!1),f=u(!1),y=u(!1),h=u(!1),P=_e(()=>e(h)||!e(y));function S(){s(b,!1),s(_,""),s(k,!1),s(f,!1)}async function C(E){if(E.preventDefault(),e(o)?.validateAll(),e(y))try{s(h,!0);const d=await Ae.createUserEmail(i().id,{email:e(_),primary:e(k),verified:e(f)},r.applicationId);S(),d.primary?(i().email&&i().emails.push(i().email),i(i().email=d,!0)):i().emails.push(d),r.onEdit(i())}catch(d){Oe(d)}finally{s(h,!1)}}var A=ui(),T=Ne(A),w=a(T),p=a(w,!0);t(w);var N=l(w,2),I=a(N);I.__click=[ni,b];var v=a(I);Tt(v,{}),t(I),t(N),t(T);var x=l(T,2);{var L=E=>{var d=oi(),X=a(d);nt(qt(X,{get email(){return e(_)},set email(K){s(_,K,!0)},get primary(){return e(k)},set primary(K){s(k,K,!0)},get verified(){return e(f)},set verified(K){s(f,K,!0)},get valid(){return e(y)},set valid(K){s(y,K,!0)}}),K=>s(o,K,!0),()=>e(o));var j=l(X,2),U=a(j);U.__click=[si,S];var Z=a(U,!0);t(U);var H=l(U,2),te=a(H);{var ue=K=>{var z=di(),g=a(z),R=a(g);Ve(R),t(g),t(z),O(K,z)};pe(te,K=>{e(h)&&K(ue)})}var fe=l(te);t(H),t(j),t(d),le((K,z)=>{m(Z,K),H.disabled=e(P),m(fe,` ${z??""}`)},[()=>Qa(),()=>Wa()]),qe("submit",d,C),O(E,d)};pe(x,E=>{e(b)&&E(L)})}var q=l(x,4),c=a(q);{var D=E=>{Nt(E,{get applicationId(){return r.applicationId},get email(){return i().email},get user(){return i()},set user(d){i(d)}})};pe(c,E=>{i().email&&E(D)})}var B=l(c,2);At(B,17,()=>i().emails,E=>E.id,(E,d)=>{Nt(E,{get applicationId(){return r.applicationId},get email(){return e(d)},get user(){return i()},set user(X){i(X)}})}),t(q),le(E=>m(p,E),[()=>Ka()]),O(n,A),xe()}Ie(["click"]);const mi=()=>Je((n,r)=>{r.length&&(Qe(r),ge(!n.name,()=>{Y("name",ne(),()=>{$(n.name).isNotBlank()})}),ge(!n.givenName,()=>{Y("givenName",ne(),()=>{$(n.givenName).isNotBlank()})}),ge(!n.familyName,()=>{Y("familyName",ne(),()=>{$(n.familyName).isNotBlank()})}),ge(!n.middleName,()=>{Y("middleName",ne(),()=>{$(n.middleName).isNotBlank()})}),ge(!n.nickname,()=>{Y("nickname",ne(),()=>{$(n.nickname).isNotBlank()})}),ge(!n.gender,()=>{Y("gender",ne(),()=>{$(n.gender).isNotBlank()})}),ge(!n.zoneInfo,()=>{Y("zoneInfo",ne(),()=>{$(n.zoneInfo).isNotBlank()})}),ge(!n.locale,()=>{Y("locale",ne(),()=>{$(n.locale).isNotBlank()})}),ge(!n.address,()=>{Y("address",ne(),()=>{$(n.address).isNotBlank()})}),ge(!n.birthdate,()=>{Y("birthdate",ne(),()=>{$(n.birthdate).isNotBlank()})}),ge(!n.profilePicture,()=>{Y("profilePicture",yt(),()=>{$(n.profilePicture).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),ge(!n.website,()=>{Y("website",yt(),()=>{$(n.website).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}))});function ke(n,r,i){r.add(n.currentTarget.name),i()}function fi(n,r,i,o,b){r.add(n.currentTarget.name),i(),o(new Date(e(b)))}var _i=M('<div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="name"> </label> <input type="text" name="name"/> <!></div> <div class="ml-1 flex-grow"><label for="nickname"> </label> <input type="text" name="nickname"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="givenName"> </label> <input type="text" name="givenName"/> <!></div> <div class="mx-1 flex-grow"><label for="middleName"> </label> <input type="text" name="middleName"/> <!></div> <div class="ml-1 flex-grow"><label for="familyName"> </label> <input type="text" name="familyName"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="profilePicture"> </label> <input type="text" name="profilePicture"/> <!></div> <div class="ml-1 flex-grow"><label for="website"> </label> <input type="text" name="website"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="gender"> </label> <select name="gender"><option> </option><option> </option></select> <!></div> <div class="ml-1 flex-grow"><label for="birthdate"> </label> <input type="date" name="birthdate"/> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="zoneInfo"> </label> <input type="text" name="zoneInfo"/> <!></div> <div class="ml-1 flex-grow"><label for="locale"> </label> <input type="text" name="locale"/> <!></div></div> <div class="mb-2"><label for="address"> </label> <input type="text" name="address"/> <!></div>',1);function ci(n,r){he(r,!0);let i=Q(r,"name",15),o=Q(r,"givenName",15),b=Q(r,"familyName",15),_=Q(r,"middleName",15),k=Q(r,"nickname",15),f=Q(r,"profilePicture",15),y=Q(r,"website",15),h=Q(r,"gender",15),P=Q(r,"birthdate",15),S=Q(r,"zoneInfo",15),C=Q(r,"locale",15),A=Q(r,"address",15),T=Q(r,"valid",15,!1),w=u(J(P()?.toISOString().substring(0,10))),p=mi(),N=u(J(p.get())),I=_e(()=>We(e(N),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const v=new Set,x=Ke(()=>{p({name:i(),givenName:o(),familyName:b(),middleName:_(),nickname:k(),profilePicture:f(),website:y(),gender:h(),birthdate:P(),zoneInfo:S(),locale:C(),address:A()},Array.from(v)).done($e=>{s(N,$e,!0),T(e(N).isValid())}),v.clear()},300);function L(){A(A()?.trim()),b(b()?.trim()),h(h()?.trim()),o(o()?.trim()),_(_()?.trim()),k(k()?.trim()),f(f()?.trim()),y(y()?.trim()),S(S()?.trim()),C(C()?.trim()),v.add("name"),v.add("givenName"),v.add("familyName"),v.add("middleName"),v.add("nickname"),v.add("profilePicture"),v.add("website"),v.add("gender"),v.add("birthdate"),v.add("zoneInfo"),v.add("locale"),v.add("address"),x(),x.flush()}pt(L);var q=_i(),c=Ne(q),D=a(c),B=a(D),E=a(B,!0);t(B);var d=l(B,2);ee(d),d.__input=[ke,v,x];var X=l(d,2);ie(X,{name:"name",get result(){return e(N)}}),t(D);var j=l(D,2),U=a(j),Z=a(U,!0);t(U);var H=l(U,2);ee(H),H.__input=[ke,v,x];var te=l(H,2);ie(te,{name:"nickname",get result(){return e(N)}}),t(j),t(c);var ue=l(c,2),fe=a(ue),K=a(fe),z=a(K,!0);t(K);var g=l(K,2);ee(g),g.__input=[ke,v,x];var R=l(g,2);ie(R,{name:"givenName",get result(){return e(N)}}),t(fe);var G=l(fe,2),ae=a(G),ye=a(ae,!0);t(ae);var se=l(ae,2);ee(se),se.__input=[ke,v,x];var Be=l(se,2);ie(Be,{name:"middleName",get result(){return e(N)}}),t(G);var F=l(G,2),V=a(F),de=a(V,!0);t(V);var re=l(V,2);ee(re),re.__input=[ke,v,x];var Ee=l(re,2);ie(Ee,{name:"familyName",get result(){return e(N)}}),t(F),t(ue);var we=l(ue,2),Ce=a(we),ze=a(Ce),st=a(ze,!0);t(ze);var Pe=l(ze,2);ee(Pe),Pe.__input=[ke,v,x];var et=l(Pe,2);ie(et,{name:"profilePicture",get result(){return e(N)}}),t(Ce);var tt=l(Ce,2),ce=a(tt),be=a(ce,!0);t(ce);var ve=l(ce,2);ee(ve),ve.__input=[ke,v,x];var Fe=l(ve,2);ie(Fe,{name:"website",get result(){return e(N)}}),t(tt),t(we);var De=l(we,2),Xe=a(De),Le=a(Xe),at=a(Le,!0);t(Le);var Ue=l(Le,2);Ue.__input=[ke,v,x];var Se=a(Ue);Se.value=Se.__value="male";var dt=a(Se,!0);t(Se);var Te=l(Se);Te.value=Te.__value="female";var rt=a(Te,!0);t(Te),t(Ue);var ot=l(Ue,2);ie(ot,{name:"gender",get result(){return e(N)}}),t(Xe);var je=l(Xe,2),Ye=a(je),Ot=a(Ye,!0);t(Ye);var Me=l(Ye,2);ee(Me),Me.__input=[fi,v,x,P,w];var Vt=l(Me,2);ie(Vt,{name:"birthdate",get result(){return e(N)}}),t(je),t(De);var ut=l(De,2),vt=a(ut),mt=a(vt),Ft=a(mt,!0);t(mt);var Re=l(mt,2);ee(Re),Re.__input=[ke,v,x];var Lt=l(Re,2);ie(Lt,{name:"zoneInfo",get result(){return e(N)}}),t(vt);var gt=l(vt,2),ft=a(gt),Mt=a(ft,!0);t(ft);var Ge=l(ft,2);ee(Ge),Ge.__input=[ke,v,x];var Rt=l(Ge,2);ie(Rt,{name:"locale",get result(){return e(N)}}),t(gt),t(ut);var ht=l(ut,2),_t=a(ht),Gt=a(_t,!0);t(_t);var Ze=l(_t,2);ee(Ze),Ze.__input=[ke,v,x];var Zt=l(Ze,2);return ie(Zt,{name:"address",get result(){return e(N)}}),t(ht),le(($e,Ht,Jt,Kt,Qt,Wt,Xt,Yt,$t,ea,ta,aa,ra,ia,la,na,sa,da,oa,ua,va,ma,fa,_a,ca,ba,pa,ga,ha,xa,ya,wa,ka,Na,Ia,Ea,Ca,Pa)=>{m(E,$e),W(d,1,`w-full ${Ht??""}`),oe(d,"placeholder",Jt),m(Z,Kt),W(H,1,`w-full ${Qt??""}`),oe(H,"placeholder",Wt),m(z,Xt),W(g,1,`w-full ${Yt??""}`),oe(g,"placeholder",$t),m(ye,ea),W(se,1,`w-full ${ta??""}`),oe(se,"placeholder",aa),m(de,ra),W(re,1,`w-full ${ia??""}`),oe(re,"placeholder",la),m(st,na),W(Pe,1,`w-full ${sa??""}`),oe(Pe,"placeholder",da),m(be,oa),W(ve,1,`w-full ${ua??""}`),oe(ve,"placeholder",va),m(at,ma),W(Ue,1,`w-full ${fa??""}`),oe(Ue,"placeholder",_a),m(dt,ca),m(rt,ba),m(Ot,pa),W(Me,1,`w-full ${ga??""}`),oe(Me,"placeholder",ha),m(Ft,xa),W(Re,1,`w-full ${ya??""}`),oe(Re,"placeholder",wa),m(Mt,ka),W(Ge,1,`w-full ${Na??""}`),oe(Ge,"placeholder",Ia),m(Gt,Ea),W(Ze,1,`w-full ${Ca??""}`),oe(Ze,"placeholder",Pa)},[()=>Xa(),()=>e(I)("name"),()=>Ya(),()=>$a(),()=>e(I)("nickname"),()=>er(),()=>tr(),()=>e(I)("givenName"),()=>ar(),()=>rr(),()=>e(I)("middleName"),()=>ir(),()=>lr(),()=>e(I)("familyName"),()=>nr(),()=>sr(),()=>e(I)("profilePicture"),()=>dr(),()=>or(),()=>e(I)("website"),()=>ur(),()=>vr(),()=>e(I)("gender"),()=>mr(),()=>fr(),()=>_r(),()=>cr(),()=>e(I)("birthdate"),()=>br(),()=>pr(),()=>e(I)("zoneInfo"),()=>gr(),()=>hr(),()=>e(I)("locale"),()=>xr(),()=>yr(),()=>e(I)("address"),()=>wr()]),me(d,i),me(H,k),me(g,o),me(se,_),me(re,b),me(Pe,f),me(ve,y),Aa(Ue,h),me(Me,()=>e(w),$e=>s(w,$e)),me(Re,S),me(Ge,C),me(Ze,A),O(n,q),xe({validateAll:L})}Ie(["input"]);var bi=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),pi=M('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function gi(n,r){he(r,!0);let i=Q(r,"user",15),o=u(J(i().info.address)),b=u(J(i().info.familyName)),_=u(J(i().info.gender)),k=u(J(i().info.givenName)),f=u(J(i().info.locale)),y=u(J(i().info.middleName)),h=u(J(i().info.name)),P=u(J(i().info.nickname)),S=u(J(i().info.profilePicture)),C=u(J(i().info.website)),A=u(J(i().info.birthdate)),T=u(J(i().info.zoneInfo)),w=u(void 0),p=u(!1),N=u(!1),I=_e(()=>e(N)||!e(p));async function v(d){d.preventDefault();try{s(N,!0),e(w)?.validateAll(),e(p)&&i(i().info=await Ae.updateUserInfo(i().id,{name:e(h),givenName:e(k),familyName:e(b),middleName:e(y),nickname:e(P),profilePicture:e(S),website:e(C),gender:e(_),birthdate:e(A),zoneInfo:e(T),locale:e(f),address:e(o)},r.applicationId),!0)}catch(X){await Oe(X)}finally{s(N,!1)}}var x=pi(),L=a(x);nt(ci(L,{get address(){return e(o)},set address(d){s(o,d,!0)},get familyName(){return e(b)},set familyName(d){s(b,d,!0)},get gender(){return e(_)},set gender(d){s(_,d,!0)},get givenName(){return e(k)},set givenName(d){s(k,d,!0)},get locale(){return e(f)},set locale(d){s(f,d,!0)},get middleName(){return e(y)},set middleName(d){s(y,d,!0)},get name(){return e(h)},set name(d){s(h,d,!0)},get nickname(){return e(P)},set nickname(d){s(P,d,!0)},get profilePicture(){return e(S)},set profilePicture(d){s(S,d,!0)},get birthdate(){return e(A)},set birthdate(d){s(A,d,!0)},get website(){return e(C)},set website(d){s(C,d,!0)},get zoneInfo(){return e(T)},set zoneInfo(d){s(T,d,!0)},get valid(){return e(p)},set valid(d){s(p,d,!0)}}),d=>s(w,d,!0),()=>e(w));var q=l(L,2),c=a(q),D=a(c);{var B=d=>{var X=bi(),j=a(X),U=a(j);Ve(U),t(j),t(X),O(d,X)};pe(D,d=>{e(N)&&d(B)})}var E=l(D);t(c),t(q),t(x),le(d=>{c.disabled=e(I),m(E,` ${d??""}`)},[()=>kr()]),qe("submit",x,v),O(n,x),xe()}const hi=()=>Je((n,r)=>{r.length&&(Qe(r),Y("username",ne(),()=>{$(n.username).isNotBlank()}),Y("active",ne(),()=>{$(n.active).isNotBlank()}))});function It(n,r,i){r.add(n.currentTarget.name),i()}var xi=M('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),yi=M('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"/> <!></div> <div><label for="active" class="m-0"> <input type="checkbox" name="active"/></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function wi(n,r){he(r,!0);let i=Q(r,"user",15),o=u(J(i().username)),b=u(J(i().active)),_=hi(),k=u(J(_.get())),f=u(!1),y=_e(()=>e(f)),h=_e(()=>We(e(k),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const P=new Set,S=Ke(()=>{_({username:e(o),active:e(b)},Array.from(P)).done(U=>{s(k,U,!0)}),P.clear()},300);function C(){s(o,e(o)?.trim(),!0),P.add("username"),P.add("active"),S(),S.flush()}async function A(U){U.preventDefault();try{s(f,!0),C(),e(k).isValid()&&(i(await Ae.updateUser(i().id,{username:e(o),active:e(b)},r.applicationId)),r.onEdit(i()))}catch(Z){await Oe(Z)}finally{s(f,!1)}}pt(C);var T=yi(),w=a(T),p=a(w),N=a(p,!0);t(p);var I=l(p,2);ee(I),I.__input=[It,P,S];var v=l(I,2);ie(v,{name:"username",get result(){return e(k)}}),t(w);var x=l(w,2),L=a(x),q=a(L),c=l(q);ee(c),c.__input=[It,P,S],t(L);var D=l(L,2);ie(D,{name:"active",get result(){return e(k)}}),t(x);var B=l(x,2),E=a(B),d=a(E);{var X=U=>{var Z=xi(),H=a(Z),te=a(H);Ve(te),t(H),t(Z),O(U,Z)};pe(d,U=>{e(f)&&U(X)})}var j=l(d);t(E),t(B),t(T),le((U,Z,H,te,ue,fe)=>{m(N,U),W(I,1,`w-full ${Z??""}`),oe(I,"placeholder",H),m(q,`${te??""} `),W(c,1,ue),E.disabled=e(y),m(j,` ${fe??""}`)},[()=>Ct(),()=>e(h)("username"),()=>Pt(),()=>Ut(),()=>lt(e(h)("active")),()=>Nr()]),qe("submit",T,A),me(I,()=>e(o),U=>s(o,U)),He(c,()=>e(b),U=>s(b,U)),O(n,T),xe()}Ie(["input"]);var ki=M('<!> <hr class="my-2"/> <!> <hr class="my-2"/> <!>',1);function Ni(n,r){he(r,!0);let i=Q(r,"user",15);var o=ki(),b=Ne(o);wi(b,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}});var _=l(b,4);vi(_,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}});var k=l(_,4);gi(k,{get applicationId(){return r.applicationId},get onEdit(){return r.onEdit},get user(){return i()},set user(f){i(f)}}),O(n,o),xe()}const Et=20;var Ii=M('<button class="btn secondary icon lg"><!></button>'),Ei=M('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Ci=M('<tr><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Pi=M("<h3> </h3>"),Ui=M("<h3> </h3>"),Si=M("<h3> </h3>"),Di=M('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function ji(n,r){he(r,!0);let i=Q(r,"users",31,()=>J([])),o=u(0),b=u(!0),_=u(!1),k=u(void 0);Ua(()=>{e(k)!==r.applicationId&&(s(k,r.applicationId,!0),s(o,0),s(b,!0),s(_,!1),i([]),f())});async function f(){if(!e(b)||e(_))return;let z;s(_,!0);try{z=await Ae.allUsers(e(o)*Et,Et,r.applicationId)}finally{s(_,!1)}s(b,z.hasMore,!0),s(o,e(o)+1),i().push(...z.items)}let y=u(!1);function h(){s(y,!0)}function P(z){i().unshift(z),s(y,!1)}let S=u(void 0),C=u(!1);function A(z){return()=>{s(S,z,!0),s(C,!0)}}function T(z){const g=i().findIndex(R=>R.id===z?.id);g!==-1&&i(i()[g]=z,!0)}let w=u(void 0),p=u(!1);function N(z){return()=>{s(w,z,!0),s(p,!0)}}function I(){const z=i().findIndex(g=>g.id===e(w)?.id);z!==-1&&i().splice(z,1),s(w,void 0),s(p,!1)}var v=Di(),x=Ne(v),L=a(x),q=a(L),c=a(q),D=a(c,!0);t(c);var B=l(c),E=a(B,!0);t(B);var d=l(B),X=a(d,!0);t(d);var j=l(d),U=a(j,!0);t(j);var Z=l(j),H=a(Z,!0);t(Z),Sa(),t(q),t(L);var te=l(L);At(te,23,i,z=>z.id,(z,g,R)=>{var G=Ci();let ae;var ye=a(G),se=a(ye,!0);t(ye);var Be=l(ye),F=a(Be,!0);t(Be);var V=l(Be),de=a(V);{var re=ce=>{var be=xt();le(ve=>m(be,ve),[()=>zr()]),O(ce,be)},Ee=ce=>{var be=xt();le(ve=>m(be,ve),[()=>Tr()]),O(ce,be)};pe(de,ce=>{e(g).active?ce(re):ce(Ee,!1)})}t(V);var we=l(V),Ce=a(we,!0);t(we);var ze=l(we),st=a(ze,!0);t(ze);var Pe=l(ze),et=a(Pe),tt=a(et);qr(tt,{position:"top-right",anchorPosition:"bottom-right",button:be=>{var ve=Ii(),Fe=a(ve);Or(Fe,{}),t(ve),O(be,ve)},children:(be,ve)=>{var Fe=Ei(),De=Ne(Fe),Xe=_e(()=>A(e(g)));De.__click=function(...je){e(Xe)?.apply(this,je)};var Le=a(De);Bt(Le,{});var at=l(Le),Ue=a(at,!0);t(at),t(De);var Se=l(De,2),dt=_e(()=>N(e(g)));Se.__click=function(...je){e(dt)?.apply(this,je)};var Te=a(Se);zt(Te,{});var rt=l(Te),ot=a(rt,!0);t(rt),t(Se),le((je,Ye)=>{m(Ue,je),m(ot,Ye)},[()=>Ar(),()=>Br()]),O(be,Fe)},$$slots:{button:!0,default:!0}}),t(et),t(Pe),t(G),le((ce,be,ve)=>{ae=W(G,1,"group",null,ae,ce),m(se,e(g).id),m(F,e(g).username),m(Ce,be),m(st,ve)},[()=>({"border-b":e(R)<i().length-1}),()=>e(g).updatedAt.toLocaleString(),()=>e(g).createdAt.toLocaleString()]),O(z,G)}),t(te),t(x);var ue=l(x,2);it(ue,{get open(){return e(y)},set open(g){s(y,g,!0)},title:g=>{var R=Pi(),G=a(R,!0);t(R),le(ae=>m(G,ae),[()=>Sr()]),O(g,R)},children:(g,R)=>{Rr(g,{get applicationId(){return r.applicationId},onCreate:P})},$$slots:{title:!0,default:!0}});var fe=l(ue,2);it(fe,{get open(){return e(C)},set open(g){s(C,g,!0)},title:g=>{var R=Ui(),G=a(R,!0);t(R),le(ae=>m(G,ae),[()=>Dr({username:e(S)?.username||""})]),O(g,R)},children:(g,R)=>{var G=bt(),ae=Ne(G);{var ye=se=>{Ni(se,{get applicationId(){return r.applicationId},get user(){return e(S)},onEdit:T})};pe(ae,se=>{e(S)&&se(ye)})}O(g,G)},$$slots:{title:!0,default:!0}});var K=l(fe,2);return it(K,{get open(){return e(p)},set open(g){s(p,g,!0)},title:g=>{var R=Si(),G=a(R,!0);t(R),le(ae=>m(G,ae),[()=>jr({username:e(w)?.username||""})]),O(g,R)},children:(g,R)=>{var G=bt(),ae=Ne(G);{var ye=se=>{Kr(se,{get applicationId(){return r.applicationId},get userId(){return e(w).id},get username(){return e(w).username},onDelete:I})};pe(ae,se=>{e(w)&&se(ye)})}O(g,G)},$$slots:{title:!0,default:!0}}),le((z,g,R,G,ae)=>{m(D,z),m(E,g),m(X,R),m(U,G),m(H,ae)},[()=>Ir(),()=>Er(),()=>Cr(),()=>Pr(),()=>Ur()]),O(n,v),xe({loadMore:f,onCreate:h})}Ie(["click"]);var Ai=M('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ji(n,r){he(r,!0);let i=u(void 0);var o=Ai();ja(w=>{le(p=>Da.title=p,[()=>Ba()])});var b=a(o),_=a(b),k=a(_),f=a(k),y=a(f),h=a(y);Vr(h,{}),t(y),t(f);var P=l(f,2),S=a(P,!0);t(P),t(k);var C=l(k,2);C.__click=function(...w){e(i)?.onCreate?.apply(this,w)};var A=a(C);Tt(A,{}),t(C),t(_);var T=l(_,2);nt(ji(T,{get applicationId(){return r.data.applicationId}}),w=>s(i,w,!0),()=>e(i)),t(b),t(o),le(()=>{oe(f,"href",`${za}/`),m(S,r.data.application.name)}),O(n,o),xe()}Ie(["click"]);export{Ji as component};
