import{a as N,t as G,c as Ze,b as $e}from"../chunks/disclose-version.DajeB4c4.js";import{p as ke,x as c,y as o,j as e,f as Te,t as i,a as Ue,c as r,r as t,s as l,l as M,ah as bt,$ as ft}from"../chunks/runtime.C60yeaJP.js";import{d as Ee,s,e as Ke,h as ht}from"../chunks/render.BbZuB7Dm.js";import{d as et,e as Y,r as ne,s as J,b as Z,aD as mt,l as gt,aE as xt,aF as kt,aG as Ut,aH as yt,aI as wt,aJ as It,aK as Ot,aL as Pt,aM as At,aN as St,aO as Tt,aP as Ct,aQ as Nt,aR as jt,aS as Bt,aT as Dt,aU as Et,aV as Ft,aW as Mt,aX as qt,aY as Gt,aZ as Lt,a_ as Vt,q as zt,a$ as Rt,b0 as Ht,b1 as Jt,b2 as Kt,y as Qt,z as Wt,aq as Xt,ar as Yt,b3 as Zt,b4 as $t,b5 as er,b6 as tr,b7 as rr,b8 as ar,b9 as nr,ay as lr,az as ir,aA as or,aB as dr,aC as vr}from"../chunks/debounce.C_WMaB_z.js";import{p as v}from"../chunks/proxy.B95Q3zQB.js";import{p as H,b as sr}from"../chunks/props.DztJVflq.js";import{D as ur,g as cr}from"../chunks/Dropdown.BnBMSDuX.js";import{b as _r}from"../chunks/paths.BR2SyuFJ.js";import{i as xe}from"../chunks/runtime.Cwx_xcDz.js";import{M as Je,P as pr,T as br,E as fr,a as hr}from"../chunks/Modal.CUdo-sfi.js";import{I as $,c as mr,b as ce,G as tt,m as rt,C as K,v as Q,N as gr,a as at,S as Qe,h as We}from"../chunks/InputResults.DOY8a8ew.js";import{d as Xe}from"../chunks/index.u_6ZM-6x.js";import{b as xr}from"../chunks/select.l6sb6yA8.js";import{o as kr}from"../chunks/index-client.ClR-EJ5X.js";import{C as Ur}from"../chunks/chevron-left.Dc8mGGX_.js";const yr=()=>tt((p,a)=>{a.length&&(rt(a),K("provider",Y(),()=>{Q(p.provider).isNotBlank()}),K("active",Y(),()=>{Q(p.active).isNotBlank()}),K("clientId",Y(),()=>{Q(p.clientId).isNotBlank()}),K("clientSecret",Y(),()=>{Q(p.clientSecret).isNotBlank()}),K("redirectUrl",Y(),()=>{Q(p.redirectUrl).isNotBlank()}),gr(p.isNew,()=>{K("authUrl",Y(),()=>{Q(p.authUrl).isNotBlank()}),K("callbackUrl",Y(),()=>{Q(p.callbackUrl).isNotBlank()}),K("scope",Y(),()=>{Q(p.scope).isNotBlank()}),K("tokenUrl",Y(),()=>{Q(p.tokenUrl).isNotBlank()})}))});function ae(p,a,_){a.add(p.currentTarget.name),_()}var wr=G('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"> <!></div>',1);function nt(p,a){ke(a,!0);let _=H(a,"provider",15),w=H(a,"active",15),S=H(a,"authUrl",15),T=H(a,"callbackUrl",15),C=H(a,"clientId",15),U=H(a,"clientSecret",15),I=H(a,"redirectUrl",15),O=H(a,"scope",15),h=H(a,"tokenUrl",15),k=H(a,"valid",15,!1),q=yr(),f=c(v(q.get())),P=M(()=>at(e(f),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,b=et(()=>{q({provider:_(),active:w(),authUrl:S(),callbackUrl:T(),clientId:C(),clientSecret:U(),redirectUrl:I(),scope:O(),tokenUrl:h(),isNew:a.isNew},Array.from(d)).done(pt=>{o(f,v(pt)),k(e(f).isValid())}),d.clear()},300);function L(){d.add("provider"),d.add("active"),d.add("authUrl"),d.add("callbackUrl"),d.add("clientId"),d.add("clientSecret"),d.add("redirectUrl"),d.add("scope"),d.add("tokenUrl"),b(),b.flush()}kr(L);var y=wr(),B=Te(y),j=r(B),W=r(j,!0);i(()=>s(W,At())),t(j);var n=l(j,2);const D=M(()=>`w-full ${e(P)("provider")??""}`);i(()=>J(n,"placeholder",mt())),n.__input=[ae,d,b];var m=r(n);m.value=(m.__value="google")==null?"":"google";var V=r(m,!0);i(()=>s(V,St())),t(m);var z=l(m);z.value=(z.__value="facebook")==null?"":"facebook";var ye=r(z,!0);i(()=>s(ye,Tt())),t(z);var le=l(z);le.value=(le.__value="github")==null?"":"github";var Ce=r(le,!0);i(()=>s(Ce,Ct())),t(le);var ie=l(le);ie.value=(ie.__value="microsoft")==null?"":"microsoft";var Fe=r(ie,!0);i(()=>s(Fe,Nt())),t(ie);var g=l(ie);g.value=(g.__value="x")==null?"":"x";var u=r(g,!0);i(()=>s(u,jt())),t(g),t(n);var x=l(n,2);$(x,{name:"provider",get result(){return e(f)}}),t(B);var A=l(B,2),E=r(A),oe=r(E);i(()=>s(oe,`${Bt()??""} `));var F=l(oe);ne(F);const Me=M(()=>gt(e(P)("active")));i(()=>J(F,"placeholder",xt())),F.__input=[ae,d,b],t(E);var we=l(E,2);$(we,{name:"active",get result(){return e(f)}}),t(A);var Ie=l(A,2),Oe=r(Ie),qe=r(Oe,!0);i(()=>s(qe,Dt())),t(Oe);var X=l(Oe,2);ne(X);const Ge=M(()=>`w-full ${e(P)("clientId")??""}`);i(()=>J(X,"placeholder",kt())),X.__input=[ae,d,b];var Pe=l(X,2);$(Pe,{name:"clientId",get result(){return e(f)}}),t(Ie);var Ae=l(Ie,2),be=r(Ae),Ne=r(be,!0);i(()=>s(Ne,Et())),t(be);var de=l(be,2);ne(de);const ee=M(()=>`w-full ${e(P)("clientSecret")??""}`);i(()=>J(de,"placeholder",Ut())),de.__input=[ae,d,b];var R=l(de,2);$(R,{name:"clientSecret",get result(){return e(f)}}),t(Ae);var ve=l(Ae,2),se=r(ve),fe=r(se,!0);i(()=>s(fe,Ft())),t(se);var ue=l(se,2);ne(ue);const je=M(()=>`w-full ${e(P)("redirectUrl")??""}`);i(()=>J(ue,"placeholder",yt())),ue.__input=[ae,d,b];var Be=l(ue,2);$(Be,{name:"redirectUrl",get result(){return e(f)}}),t(ve);var Se=l(ve,2),_e=r(Se),Le=r(_e,!0);i(()=>s(Le,Mt())),t(_e);var te=l(_e,2);ne(te);const De=M(()=>`w-full ${e(P)("authUrl")??""}`);i(()=>J(te,"placeholder",wt())),te.__input=[ae,d,b];var Ve=l(te,2);$(Ve,{name:"authUrl",get result(){return e(f)}}),t(Se);var pe=l(Se,2),re=r(pe),lt=r(re,!0);i(()=>s(lt,qt())),t(re);var he=l(re,2);ne(he);const it=M(()=>`w-full ${e(P)("callbackUrl")??""}`);i(()=>J(he,"placeholder",It())),he.__input=[ae,d,b];var ot=l(he,2);$(ot,{name:"callbackUrl",get result(){return e(f)}}),t(pe);var ze=l(pe,2),Re=r(ze),dt=r(Re,!0);i(()=>s(dt,Gt())),t(Re);var me=l(Re,2);ne(me);const vt=M(()=>`w-full ${e(P)("scope")??""}`);i(()=>J(me,"placeholder",Ot())),me.__input=[ae,d,b];var st=l(me,2);$(st,{name:"scope",get result(){return e(f)}}),t(ze);var Ye=l(ze,2),He=r(Ye),ut=r(He,!0);i(()=>s(ut,Lt())),t(He);var ge=l(He,2);ne(ge);const ct=M(()=>`w-full ${e(P)("tokenUrl")??""}`);i(()=>J(ge,"placeholder",Pt())),ge.__input=[ae,d,b];var _t=l(ge,2);$(_t,{name:"tokenUrl",get result(){return e(f)}}),t(Ye),i(()=>{Z(n,e(D)),Z(F,e(Me)),Z(X,e(Ge)),Z(de,e(ee)),Z(ue,e(je)),Z(te,e(De)),Z(he,e(it)),Z(me,e(vt)),Z(ge,e(ct))}),xr(n,_),mr(F,w),ce(X,C),ce(de,U),ce(ue,I),ce(te,S),ce(he,T),ce(me,O),ce(ge,h),N(p,y),Ue()}Ee(["input"]);var Ir=G('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Or=G('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Pr(p,a){ke(a,!0);let _=c("google"),w=c(!0),S=c(void 0),T=c(void 0),C=c(""),U=c(""),I=c(""),O=c(void 0),h=c(void 0),k=c(!1),q=M(()=>e(k)),f=c(!1);async function P(n){n.preventDefault();try{o(k,!0),e(f)&&a.onCreate(await Xe.createTenantOauth2Provider(a.tenantId,{provider:e(_),active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(h)},a.applicationId))}catch(D){await We(D)}finally{o(k,!1)}}var d=Or(),b=r(d);nt(b,{isNew:!0,get valid(){return e(f)},set valid(n){o(f,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(O)},set scope(n){o(O,v(n))},get tokenUrl(){return e(h)},set tokenUrl(n){o(h,v(n))}});var L=l(b,2),y=r(L),B=r(y);{var j=n=>{var D=Ir(),m=r(D),V=r(m);Qe(V),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var W=l(B);i(()=>s(W,` ${Vt()??""}`)),t(y),t(L),t(d),i(()=>y.disabled=e(q)),Ke("submit",d,P),N(p,d),Ue()}const Ar=()=>tt((p={},a)=>{a.length&&(rt(a),K("providerConfirm",Y(),()=>{Q(p.providerConfirm).isNotBlank()}),K("providerConfirm",zt(),()=>{Q(p.provider===p.providerConfirm).isTruthy()}))});function Sr(p,a,_){a.add(p.currentTarget.name),_()}var Tr=G('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Cr=G('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Nr(p,a){ke(a,!0);let _=c(""),w=Ar(),S=c(v(w.get())),T=c(!1),C=M(()=>e(T)),U=M(()=>at(e(S),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,O=et(()=>{w({provider:a.provider,providerConfirm:e(_)},Array.from(I)).done(m=>{o(S,v(m))}),I.clear()},300);function h(){I.add("name"),O(),O.flush()}async function k(m){m.preventDefault();try{o(T,!0),o(_,v(e(_).trim())),h(),e(S).isValid()&&(await Xe.deleteTenantOauth2Provider(a.tenantId,a.tenantOAuth2ProviderId,a.applicationId),a.onDelete())}catch(V){await We(V)}finally{o(T,!1)}}var q=Cr(),f=r(q),P=r(f,!0);i(()=>s(P,Ht())),t(f);var d=l(f,2),b=r(d);ne(b);const L=M(()=>`w-full ${e(U)("providerConfirm")??""}`);i(()=>J(b,"placeholder",Rt({provider:a.provider}))),b.__input=[Sr,I,O];var y=l(b,2);$(y,{name:"providerConfirm",get result(){return e(S)}}),t(d);var B=l(d,2),j=r(B),W=r(j);{var n=m=>{var V=Tr(),z=r(V),ye=r(z);Qe(ye),t(z),t(V),N(m,V)};xe(W,m=>{e(T)&&m(n)})}var D=l(W);i(()=>s(D,` ${Jt()??""}`)),t(j),t(B),t(q),i(()=>{Z(b,e(L)),j.disabled=e(C)}),Ke("submit",q,k),ce(b,()=>e(_),m=>o(_,m)),N(p,q),Ue()}Ee(["input"]);var jr=G('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Br=G('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Dr(p,a){ke(a,!0);let _=c(v(a.tenantOAuth2Provider.provider)),w=c(v(a.tenantOAuth2Provider.active)),S=c(v(a.tenantOAuth2Provider.authUrl)),T=c(v(a.tenantOAuth2Provider.callbackUrl)),C=c(v(a.tenantOAuth2Provider.clientId)),U=c(v(a.tenantOAuth2Provider.clientSecret)),I=c(v(a.tenantOAuth2Provider.redirectUrl)),O=c(v(a.tenantOAuth2Provider.scope)),h=c(v(a.tenantOAuth2Provider.tokenUrl)),k=c(!1),q=M(()=>e(k)),f=c(!1);async function P(n){n.preventDefault();try{o(k,!0),e(f)&&a.onEdit(await Xe.updateTenantOauth2Provider(a.tenantId,a.tenantOAuth2Provider.id,{active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(O),tokenUrl:e(h)},a.applicationId))}catch(D){await We(D)}finally{o(k,!1)}}var d=Br(),b=r(d);nt(b,{isNew:!1,get valid(){return e(f)},set valid(n){o(f,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(O)},set scope(n){o(O,v(n))},get tokenUrl(){return e(h)},set tokenUrl(n){o(h,v(n))}});var L=l(b,2),y=r(L),B=r(y);{var j=n=>{var D=jr(),m=r(D),V=r(m);Qe(V),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var W=l(B);i(()=>s(W,` ${Kt()??""}`)),t(y),t(L),t(d),i(()=>y.disabled=e(q)),Ke("submit",d,P),N(p,d),Ue()}var Er=G('<button class="btn secondary icon lg"><!></button>'),Fr=G('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Mr=G('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),qr=G("<h3> </h3>"),Gr=G("<h3> </h3>"),Lr=G("<h3> </h3>"),Vr=G('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function zr(p,a){ke(a,!0);let _=H(a,"oauth2Providers",7),w=c(!1);function S(){o(w,!0)}function T(g){_().unshift(g),o(w,!1)}let C=c(void 0),U=c(!1);function I(g){return()=>{o(C,v(g)),o(U,!0)}}function O(g){const u=_().findIndex(x=>x.id===(g==null?void 0:g.id));u!==-1&&(_()[u]=g),o(C,void 0),o(U,!1)}let h=c(void 0),k=c(!1);function q(g){return()=>{o(h,v(g)),o(k,!0)}}function f(){const g=_().findIndex(u=>{var x;return u.id===((x=e(h))==null?void 0:x.id)});g!==-1&&_().splice(g,1),o(h,void 0),o(k,!1)}var P=Vr(),d=Te(P),b=r(d),L=r(b),y=r(L),B=r(y,!0);i(()=>s(B,Zt())),t(y);var j=l(y),W=r(j,!0);i(()=>s(W,$t())),t(j);var n=l(j),D=r(n,!0);i(()=>s(D,er())),t(n);var m=l(n),V=r(m,!0);i(()=>s(V,tr())),t(m);var z=l(m),ye=r(z,!0);i(()=>s(ye,rr())),t(z),bt(),t(L),t(b);var le=l(b);Qt(le,23,_,g=>g.id,(g,u,x)=>{var A=Mr(),E=r(A),oe=r(E,!0);t(E);var F=l(E),Me=r(F,!0);t(F);var we=l(F),Ie=r(we);{var Oe=ee=>{var R=$e();i(()=>s(R,ar())),N(ee,R)},qe=ee=>{var R=$e();i(()=>s(R,nr())),N(ee,R)};xe(Ie,ee=>{e(u).active?ee(Oe):ee(qe,!1)})}t(we);var X=l(we),Ge=r(X,!0);i(()=>s(Ge,e(u).updatedAt.toLocaleString())),t(X);var Pe=l(X),Ae=r(Pe,!0);i(()=>s(Ae,e(u).createdAt.toLocaleString())),t(Pe);var be=l(Pe),Ne=r(be),de=r(Ne);ur(de,{position:"top-right",anchorPosition:"bottom-right",button:R=>{var ve=Er(),se=r(ve);fr(se,{}),t(ve),N(R,ve)},children:(R,ve)=>{var se=Fr(),fe=Te(se),ue=M(()=>I(e(u)));fe.__click=function(...pe){var re;(re=e(ue))==null||re.apply(this,pe)};var je=r(fe);pr(je,{});var Be=l(je),Se=r(Be,!0);i(()=>s(Se,lr())),t(Be),t(fe);var _e=l(fe,2),Le=M(()=>q(e(u)));_e.__click=function(...pe){var re;(re=e(Le))==null||re.apply(this,pe)};var te=r(_e);br(te,{});var De=l(te),Ve=r(De,!0);i(()=>s(Ve,ir())),t(De),t(_e),N(R,se)},$$slots:{button:!0,default:!0}}),t(Ne),t(be),t(A),i(()=>{Wt(A,"border-b",e(x)<_().length-1),s(oe,e(u).id),s(Me,e(u).provider)}),N(g,A)}),t(le),t(d);var Ce=l(d,2);Je(Ce,{get open(){return e(w)},set open(u){o(w,v(u))},title:u=>{var x=qr(),A=r(x,!0);i(()=>s(A,or())),t(x),N(u,x)},children:(u,x)=>{Pr(u,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},onCreate:T})},$$slots:{title:!0,default:!0}});var ie=l(Ce,2);Je(ie,{get open(){return e(U)},set open(u){o(U,v(u))},title:u=>{var x=Gr(),A=r(x,!0);i(()=>{var E;return s(A,Xt({issuer:((E=e(C))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var A=Ze(),E=Te(A);{var oe=F=>{Dr(F,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2Provider(){return e(C)},onEdit:O})};xe(E,F=>{e(C)&&F(oe)})}N(u,A)},$$slots:{title:!0,default:!0}});var Fe=l(ie,2);return Je(Fe,{get open(){return e(k)},set open(u){o(k,v(u))},title:u=>{var x=Lr(),A=r(x,!0);i(()=>{var E;return s(A,Yt({issuer:((E=e(h))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var A=Ze(),E=Te(A);{var oe=F=>{Nr(F,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2ProviderId(){return e(h).id},get provider(){return e(h).provider},onDelete:f})};xe(E,F=>{e(h)&&F(oe)})}N(u,A)},$$slots:{title:!0,default:!0}}),N(p,P),Ue({onCreate:S})}Ee(["click"]);var Rr=G('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function ia(p,a){ke(a,!0);let _=c(void 0),w=v(a.data.tenant.oauth2Providers);const S=cr(),[T,C]=S;var U=Rr();ht(y=>{i(()=>ft.title=dr())});var I=r(U),O=r(I),h=r(O);i(()=>J(h,"href",T(`${_r}/applications/${a.data.applicationId}/tenants`,void 0)));var k=r(h),q=r(k);Ur(q,{}),t(k);var f=l(k,2),P=r(f,!0);i(()=>s(P,vr())),t(f),t(h);var d=l(h,2);d.__click=function(...y){var B,j;(j=(B=e(_))==null?void 0:B.onCreate)==null||j.apply(this,y)};var b=r(d);hr(b,{}),t(d),t(O);var L=l(O,2);sr(zr(L,{get applicationId(){return a.data.applicationId},get tenantId(){return a.data.tenantId},get oauth2Providers(){return w}}),y=>o(_,v(y)),()=>e(_)),t(I),t(U),N(p,U),Ue()}Ee(["click"]);export{ia as component};
