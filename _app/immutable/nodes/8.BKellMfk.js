import{a as U,t as A,c as qe}from"../chunks/disclose-version.CyzBF5DE.js";import{p as ee,z as I,w as e,A as i,t as o,a as te,c as a,s as l,r as t,y as $,f as W,$ as ot,ad as dt}from"../chunks/runtime.DCDhZAS9.js";import{d as ae,e as ge,s as m,h as ut}from"../chunks/render.GuxJiPpJ.js";import{i as H}from"../chunks/if.CrJYGNN5.js";import{e as xe,r as ye,a as re,u as Re,l as vt,m as ct,n as _t,o as ft,p as mt,q as pt,t as bt,v as ht,w as gt,x as xt,y as yt,z as wt,A as kt,B as Ct,C as It,D as Ut,E as St,F as At,G as Dt}from"../chunks/messages.DrdQHzfr.js";import{d as we,s as ke,t as Et}from"../chunks/debounce.B0m-GfvZ.js";import{p as x}from"../chunks/proxy.B60m95XX.js";import{o as jt}from"../chunks/index-client.CpYcptp6.js";import{g as Pt}from"../chunks/Icon.D1Cmpmcm.js";import{u as ne}from"../chunks/index.C38_imDu.js";import{D as Tt}from"../chunks/Dropdown.DnCqYh11.js";import{b as Mt}from"../chunks/paths.DBv2nKNz.js";import{P as $t,M as he,a as Ot,T as Bt,E as Ft}from"../chunks/Modal.C3GBZGI0.js";import{I as Ce,b as Ie,G as Ue,m as Se,C as X,v as Y,S as Ae,h as De,a as Ee}from"../chunks/InputResults.ChgnQGK3.js";import{C as Nt}from"../chunks/chevron-left.DB5W1lfA.js";const Gt=()=>Ue((v={},r)=>{r.length&&(Se(r),X("username",xe(),()=>{Y(v.username).isNotBlank()}))});function Lt(v,r,n){r.add(v.currentTarget.name),n()}var Vt=A('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),qt=A('<form><div class="mb-2"><input type="text" name="username"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function zt(v,r){ee(r,!0);let n=I(""),D=Gt(),h=I(x(D.get())),y=I(!1),O=$(()=>e(y)),L=$(()=>Ee(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,w=we(()=>{D({username:e(n)},Array.from(f)).done(d=>{i(h,x(d))}),f.clear()},300);function V(){f.add("username"),w(),w.flush()}async function q(d){d.preventDefault();try{i(y,!0),i(n,x(e(n).trim())),V(),e(h).isValid()&&r.onCreate(await ne.createUser({active:!0,username:e(n)},r.applicationId))}catch(b){await De(b)}finally{i(y,!1)}}var c=qt(),k=a(c),g=a(k);ye(g);const F=$(()=>`w-full ${e(L)("username")??""}`);o(()=>re(g,"placeholder",Re())),g.__input=[Lt,f,w];var E=l(g,2);Ce(E,{name:"username",get result(){return e(h)}}),t(k);var N=l(k,2),B=a(N),j=a(B);{var P=d=>{var b=Vt(),p=a(b),T=a(p);Ae(T),t(p),t(b),U(d,b)};H(j,d=>{e(y)&&d(P)})}var G=l(j);o(()=>m(G,` ${vt()??""}`)),t(B),t(N),t(c),o(()=>{ke(g,e(F)),B.disabled=e(O)}),ge("submit",c,q),Ie(g,()=>e(n),d=>i(n,d)),U(v,c),te()}ae(["input"]);const Rt=()=>Ue((v={},r)=>{r.length&&(Se(r),X("usernameConfirm",xe(),()=>{Y(v.usernameConfirm).isNotBlank()}),X("usernameConfirm",ct(),()=>{Y(v.username===v.usernameConfirm).isTruthy()}))});function Zt(v,r,n){r.add(v.currentTarget.name),n()}var Ht=A('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Jt=A('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Kt(v,r){ee(r,!0);let n=I(""),D=Rt(),h=I(x(D.get())),y=I(!1),O=$(()=>e(y)),L=$(()=>Ee(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,w=we(()=>{D({username:r.username,usernameConfirm:e(n)},Array.from(f)).done(p=>{i(h,x(p))}),f.clear()},300);function V(){f.add("name"),w(),w.flush()}async function q(p){p.preventDefault();try{i(y,!0),i(n,x(e(n).trim())),V(),e(h).isValid()&&(await ne.deleteUser(r.userId,r.applicationId),r.onDelete())}catch(T){await De(T)}finally{i(y,!1)}}var c=Jt(),k=a(c),g=a(k,!0);o(()=>m(g,ft())),t(k);var F=l(k,2),E=a(F);ye(E);const N=$(()=>`w-full ${e(L)("usernameConfirm")??""}`);o(()=>re(E,"placeholder",_t({username:r.username}))),E.__input=[Zt,f,w];var B=l(E,2);Ce(B,{name:"usernameConfirm",get result(){return e(h)}}),t(F);var j=l(F,2),P=a(j),G=a(P);{var d=p=>{var T=Ht(),z=a(T),se=a(z);Ae(se),t(z),t(T),U(p,T)};H(G,p=>{e(y)&&p(d)})}var b=l(G);o(()=>m(b,` ${mt()??""}`)),t(P),t(j),t(c),o(()=>{ke(E,e(N)),P.disabled=e(O)}),ge("submit",c,q),Ie(E,()=>e(n),p=>i(n,p)),U(v,c),te()}ae(["input"]);const Qt=()=>Ue((v={},r)=>{r.length&&(Se(r),X("username",xe(),()=>{Y(v.username).isNotBlank()}))});function Wt(v,r,n){r.add(v.currentTarget.name),n()}var Xt=A('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Yt=A('<form><div class="mb-2"><input type="text" name="username"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function ea(v,r){ee(r,!0);let n=I(x(r.user.username)),D=Qt(),h=I(x(D.get())),y=I(!1),O=$(()=>e(y)),L=$(()=>Ee(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const f=new Set,w=we(()=>{D({username:e(n)},Array.from(f)).done(d=>{i(h,x(d))}),f.clear()},300);function V(){f.add("username"),w(),w.flush()}async function q(d){d.preventDefault();try{i(y,!0),i(n,x(e(n).trim())),V(),e(h).isValid()&&r.onEdit(await ne.updateUser(r.user.id,{username:e(n)},r.applicationId))}catch(b){await De(b)}finally{i(y,!1)}}var c=Yt(),k=a(c),g=a(k);ye(g);const F=$(()=>`w-full ${e(L)("username")??""}`);o(()=>re(g,"placeholder",Re())),g.__input=[Wt,f,w];var E=l(g,2);Ce(E,{name:"username",get result(){return e(h)}}),t(k);var N=l(k,2),B=a(N),j=a(B);{var P=d=>{var b=Xt(),p=a(b),T=a(p);Ae(T),t(p),t(b),U(d,b)};H(j,d=>{e(y)&&d(P)})}var G=l(j);o(()=>m(G,` ${pt()??""}`)),t(B),t(N),t(c),o(()=>{ke(g,e(F)),B.disabled=e(O)}),ge("submit",c,q),Ie(g,()=>e(n),d=>i(n,d)),U(v,c),te()}ae(["input"]);const ze=20;function ta(v,r){i(r,!0)}var aa=A('<button class="btn secondary icon lg"><!></button>'),ra=A('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),na=A('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),sa=A("<h3> </h3>"),ia=A("<h3> </h3>"),la=A("<h3> </h3>"),oa=A('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table></div></div> <!> <!> <!>',1);function Ia(v,r){ee(r,!0);let n=x([]),D=I(0),h=I(!0);jt(y);async function y(){if(!e(h))return;const u=await ne.allUsers(e(D)*ze,ze,r.data.applicationId);i(h,x(u.hasMore)),i(D,e(D)+1),n.push(...u.items)}let O=I(!1);function L(u){n.unshift(u),i(O,!1)}let f=I(void 0),w=I(!1);function V(u){return()=>{i(f,x(u)),i(w,!0)}}function q(u){const s=n.findIndex(_=>_.id===(u==null?void 0:u.id));s!==-1&&(n[s]=u),i(f,void 0),i(w,!1)}let c=I(void 0),k=I(!1);function g(u){return()=>{i(c,x(u)),i(k,!0)}}function F(){const u=n.findIndex(s=>{var _;return s.id===((_=e(c))==null?void 0:_.id)});u!==-1&&n.splice(u,1),i(c,void 0),i(k,!1)}const E=Pt(),[N,B]=E;var j=oa();ut(u=>{o(()=>ot.title=ht())});var P=W(j),G=a(P),d=a(G),b=a(d);o(()=>re(b,"href",N(`${Mt}/`,void 0)));var p=a(b),T=a(p);Nt(T,{}),t(p);var z=l(p,2),se=a(z,!0);o(()=>m(se,yt())),t(z),t(b);var ie=l(b,2);ie.__click=[ta,O];var Ze=a(ie);$t(Ze,{}),t(ie),t(d);var je=l(d,2),le=a(je),Pe=a(le),oe=a(Pe),He=a(oe,!0);o(()=>m(He,wt())),t(oe);var de=l(oe),Je=a(de,!0);o(()=>m(Je,kt())),t(de);var ue=l(de),Ke=a(ue,!0);o(()=>m(Ke,Ct())),t(ue);var ve=l(ue),Qe=a(ve,!0);o(()=>m(Qe,It())),t(ve);var Te=l(ve),We=a(Te,!0);o(()=>m(We,Ut())),t(Te),dt(),t(Pe),t(le);var Me=l(le);bt(Me,23,()=>n,u=>u.id,(u,s,_)=>{var C=na(),S=a(C),R=a(S,!0);t(S);var M=l(S),Ye=a(M,!0);t(M);var ce=l(M),et=a(ce,!0);t(ce);var _e=l(ce),tt=a(_e,!0);o(()=>m(tt,e(s).updatedAt.toLocaleString())),t(_e);var fe=l(_e),at=a(fe,!0);o(()=>m(at,e(s).createdAt.toLocaleString())),t(fe);var Be=l(fe),Fe=a(Be),rt=a(Fe);Tt(rt,{position:"top-right",anchorPosition:"bottom-right",button:me=>{var J=aa(),K=a(J);Ft(K,{}),t(J),U(me,J)},children:(me,J)=>{var K=ra(),Q=W(K),nt=$(()=>V(e(s)));Q.__click=function(...be){var Z;(Z=e(nt))==null||Z.apply(this,be)};var Ne=a(Q);Ot(Ne,{});var Ge=l(Ne),st=a(Ge,!0);o(()=>m(st,St())),t(Ge),t(Q);var pe=l(Q,2),it=$(()=>g(e(s)));pe.__click=function(...be){var Z;(Z=e(it))==null||Z.apply(this,be)};var Le=a(pe);Bt(Le,{});var Ve=l(Le),lt=a(Ve,!0);o(()=>m(lt,At())),t(Ve),t(pe),U(me,K)},$$slots:{button:!0,default:!0}}),t(Fe),t(Be),t(C),o(()=>{Et(C,"border-b",e(_)<n.length-1),m(R,e(s).id),m(Ye,e(s).username),m(et,e(s).active)}),U(u,C)}),t(Me),t(je),t(G),t(P);var $e=l(P,2);he($e,{get open(){return e(O)},set open(s){i(O,x(s))},title:s=>{var _=sa(),C=a(_,!0);o(()=>m(C,Dt())),t(_),U(s,_)},children:(s,_)=>{zt(s,{get applicationId(){return r.data.applicationId},onCreate:L})},$$slots:{title:!0,default:!0}});var Oe=l($e,2);he(Oe,{get open(){return e(w)},set open(s){i(w,x(s))},title:s=>{var _=ia(),C=a(_,!0);o(()=>{var S;return m(C,gt({username:((S=e(f))==null?void 0:S.username)||""}))}),t(_),U(s,_)},children:(s,_)=>{var C=qe(),S=W(C);{var R=M=>{ea(M,{get applicationId(){return r.data.applicationId},get user(){return e(f)},onEdit:q})};H(S,M=>{e(f)&&M(R)})}U(s,C)},$$slots:{title:!0,default:!0}});var Xe=l(Oe,2);he(Xe,{get open(){return e(k)},set open(s){i(k,x(s))},title:s=>{var _=la(),C=a(_,!0);o(()=>{var S;return m(C,xt({username:((S=e(c))==null?void 0:S.username)||""}))}),t(_),U(s,_)},children:(s,_)=>{var C=qe(),S=W(C);{var R=M=>{Kt(M,{get applicationId(){return r.data.applicationId},get userId(){return e(c).id},get username(){return e(c).username},onDelete:F})};H(S,M=>{e(c)&&M(R)})}U(s,C)},$$slots:{title:!0,default:!0}}),U(v,j),te()}ae(["click"]);export{Ia as component};
