import{a as P,t as H,c as at}from"../chunks/disclose-version.BdPpbG8G.js";import{p as ge,d as u,b as s,g as e,f as Ee,t as l,a as xe,c as a,r as t,s as i,z as O,u as _t,ao as ft,$ as pt}from"../chunks/runtime.XTayOKyQ.js";import{d as Me,s as _,e as $e,h as bt}from"../chunks/render.CVMVLslR.js";import{e as te,r as ve,s as W,m as mt,n as ht,o as gt,p as xt,q as yt,v as It,w as wt,x as St,y as Kt,z as kt,A as Et,B as Tt,C as Ct,D as Nt,E as At,F as jt,G as Dt,H as Pt,I as Bt,J as Ot,K as Mt,L as Ht,M as Ft,N as Lt,O as Gt,P as Rt,Q as Ut,R as Vt,S as qt,T as zt,U as Jt,V as Qt,W as Wt,t as Yt}from"../chunks/messages.wercaZ5l.js";import{p as d}from"../chunks/proxy.BKNo-OHe.js";import{p as V,b as Zt}from"../chunks/props.CLxh3Ck6.js";import{g as nt}from"../chunks/index.BCwrhWKg.js";import{b as it}from"../chunks/paths.BeVl75iW.js";import{i as Te}from"../chunks/runtime.vqD1BrVN.js";import{d as st,e as lt,I as ae,b as _e,G as dt,m as ot,C as J,v as Q,N as Ye,s as se,a as ut,S as et,h as tt,t as Xt}from"../chunks/InputResults.BHVbwuCU.js";import{A as Xe,t as He}from"../chunks/index.B-XEKY0d.js";import{M as Ze,D as $t,P as ea,T as ta,E as aa,a as ra}from"../chunks/trash.C2pZKfXe.js";import{b as na}from"../chunks/select.BIw2ICCz.js";import{o as ia}from"../chunks/index-client.DhLDVXYR.js";import{P as sa}from"../chunks/Password.BmtdOm-v.js";import{E as la}from"../chunks/external-link.CMSSYsYq.js";import{C as da}from"../chunks/chevron-left._PPZrqIK.js";const ct=["HS256","HS384","HS512"],oa=()=>dt((f,r)=>{r.length&&(ot(r),J("algorithm",te(),()=>{Q(f.algorithm).isNotBlank()}),Ye(!f.audience,()=>{J("audience",te(),()=>{Q(f.audience).isNotBlank()})}),J("expiresInSeconds",te(),()=>{Q(f.expiresInSeconds).isNotBlank()}),J("issuer",te(),()=>{Q(f.issuer).isNotBlank()}),Ye(f.isNew,()=>{J("clientId",te(),()=>{Q(f.clientId).isNotBlank()}),J("privateKey",te(),()=>{Q(f.privateKey).isNotBlank()})}),Ye(ct.includes(f.algorithm),()=>{J("publicKey",te(),()=>{Q(f.publicKey).isNotBlank()})}),J("refreshExpiresInSeconds",te(),()=>{Q(f.refreshExpiresInSeconds).isNotBlank()}))});var ua=H("<option> </option>"),ca=H('<div class="mb-2"><label for="algorithm"> </label> <select name="algorithm"></select> <!></div> <div class="mb-2"><label for="audience"> </label> <input type="text" name="audience"> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="expiresInSeconds"> </label> <input type="number" min="0" name="expiresInSeconds"> <!></div> <div class="mb-2"><label for="issuer"> </label> <input type="text" name="issuer"> <!></div> <div class="mb-2"><label for="publicKey"> </label> <input type="text" name="publicKey"> <!></div> <div class="mb-2"><label for="privateKey"> </label> <!> <!></div> <div class="mb-2"><label for="refreshExpiresInSeconds"> </label> <input type="number" min="0" name="refreshExpiresInSeconds"> <!></div>',1);function vt(f,r){ge(r,!0);let o=V(r,"algorithm",31,()=>d(Xe.Hs256)),I=V(r,"audience",15),B=V(r,"clientId",15),K=V(r,"expiresInSeconds",15,86400),C=V(r,"issuer",15,""),k=V(r,"privateKey",15,""),m=V(r,"publicKey",15),E=V(r,"refreshExpiresInSeconds",15,604800),T=V(r,"isNew",3,!1),w=V(r,"valid",15,!1),S=oa(),h=u(d(S.get())),g=O(()=>ut(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const c=new Set,x=st(()=>{S({algorithm:o(),audience:I(),clientId:B(),expiresInSeconds:K(),issuer:C(),privateKey:k(),publicKey:m(),refreshExpiresInSeconds:E(),isNew:T()},Array.from(c)).done(U=>{s(h,d(U)),w(e(h).isValid())}),c.clear()},300);function F(){c.add("algorithm"),c.add("audience"),c.add("clientId"),c.add("expiresInSeconds"),c.add("issuer"),c.add("privateKey"),c.add("publicKey"),c.add("refreshExpiresInSeconds"),x(),x.flush()}function y(U){c.add(U.currentTarget.name),x()}ia(F);var R=ca(),M=Ee(R),n=a(M),j=a(n,!0);l(()=>_(j,Kt())),t(n);var N=i(n,2);const A=O(()=>`w-full ${e(g)("algorithm")??""}`);l(()=>W(N,"placeholder",mt())),N.__input=y,lt(N,20,()=>Object.values(Xe),U=>U,(U,he)=>{var ie=ua(),Ke={},Qe=a(ie,!0);t(ie),l(()=>{Ke!==(Ke=he)&&(ie.value=(ie.__value=he)==null?"":he),_(Qe,he)}),P(U,ie)}),t(N);var re=i(N,2);ae(re,{name:"algorithm",get result(){return e(h)}}),t(M);var le=i(M,2),de=a(le),Fe=a(de,!0);l(()=>_(Fe,kt())),t(de);var q=i(de,2);ve(q);const Le=O(()=>`w-full ${e(g)("audience")??""}`);l(()=>W(q,"placeholder",ht())),q.__input=y;var ye=i(q,2);ae(ye,{name:"audience",get result(){return e(h)}}),t(le);var Ie=i(le,2),fe=a(Ie),Ge=a(fe,!0);l(()=>_(Ge,Et())),t(fe);var Z=i(fe,2);ve(Z);const Ce=O(()=>`w-full ${e(g)("clientId")??""}`);l(()=>W(Z,"placeholder",gt())),Z.__input=y;var Ne=i(Z,2);ae(Ne,{name:"clientId",get result(){return e(h)}}),t(Ie);var we=i(Ie,2),p=a(we),v=a(p,!0);l(()=>_(v,Tt())),t(p);var b=i(p,2);ve(b);const D=O(()=>`w-full ${e(g)("expiresInSeconds")??""}`);l(()=>W(b,"placeholder",xt())),b.__input=y;var L=i(b,2);ae(L,{name:"expiresInSeconds",get result(){return e(h)}}),t(we);var X=i(we,2),G=a(X),Re=a(G,!0);l(()=>_(Re,Ct())),t(G);var z=i(G,2);ve(z);const Ue=O(()=>`w-full ${e(g)("issuer")??""}`);l(()=>W(z,"placeholder",yt())),z.__input=y;var Se=i(z,2);ae(Se,{name:"issuer",get result(){return e(h)}}),t(X);var pe=i(X,2);l(()=>pe.hidden=ct.includes(o()));var oe=a(pe),Ve=a(oe,!0);l(()=>_(Ve,Nt())),t(oe);var $=i(oe,2);ve($);const Ae=O(()=>`w-full ${e(g)("publicKey")??""}`);l(()=>W($,"placeholder",It())),$.__input=y;var qe=i($,2);ae(qe,{name:"publicKey",get result(){return e(h)}}),t(pe);var je=i(pe,2),ue=a(je),be=a(ue,!0);l(()=>_(be,At())),t(ue);var ce=i(ue,2),me=O(()=>`w-full ${e(g)("privateKey")??""}`),De=O(()=>wt());sa(ce,{get class(){return e(me)},name:"privateKey",get placeholder(){return e(De)},oninput:y,get value(){return k()},set value(U){k(U)}});var Pe=i(ce,2);ae(Pe,{name:"privateKey",get result(){return e(h)}}),t(je);var Be=i(je,2),ne=a(Be),ze=a(ne,!0);l(()=>_(ze,jt())),t(ne);var ee=i(ne,2);ve(ee);const Oe=O(()=>`w-full ${e(g)("refreshExpiresInSeconds")??""}`);l(()=>W(ee,"placeholder",St())),ee.__input=y;var Je=i(ee,2);ae(Je,{name:"refreshExpiresInSeconds",get result(){return e(h)}}),t(Be),l(()=>{se(N,e(A)),se(q,e(Le)),se(Z,e(Ce)),se(b,e(D)),se(z,e(Ue)),se($,e(Ae)),se(ee,e(Oe))}),na(N,o),_e(q,I),_e(Z,B),_e(b,K),_e(z,C),_e($,m),_e(ee,E),P(f,R),xe()}Me(["input"]);var va=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),_a=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function fa(f,r){ge(r,!0);let o=u(!1),I=u(!1),B=O(()=>e(o)||!e(I)),K=u(d(Xe.Hs256)),C=u(""),k=u(""),m=u(86400),E=u(""),T=u(""),w=u(""),S=u(604800);async function h(n){n.preventDefault();try{s(o,!0),e(I)&&r.onCreate(await He.createTenant({algorithm:e(K),audience:e(C),clientId:e(k)?e(k):void 0,expiresInSeconds:e(m),issuer:e(E),privateKey:e(T)?e(T):void 0,publicKey:e(w)?e(w):void 0,refreshExpiresInSeconds:e(S)},r.applicationId))}catch(j){await tt(j)}finally{s(o,!1)}}var g=_a(),c=a(g);vt(c,{isNew:!0,get algorithm(){return e(K)},set algorithm(n){s(K,d(n))},get audience(){return e(C)},set audience(n){s(C,d(n))},get clientId(){return e(k)},set clientId(n){s(k,d(n))},get expiresInSeconds(){return e(m)},set expiresInSeconds(n){s(m,d(n))},get issuer(){return e(E)},set issuer(n){s(E,d(n))},get privateKey(){return e(T)},set privateKey(n){s(T,d(n))},get publicKey(){return e(w)},set publicKey(n){s(w,d(n))},get refreshExpiresInSeconds(){return e(S)},set refreshExpiresInSeconds(n){s(S,d(n))},get valid(){return e(I)},set valid(n){s(I,d(n))}});var x=i(c,2),F=a(x),y=a(F);{var R=n=>{var j=va(),N=a(j),A=a(N);et(A),t(N),t(j),P(n,j)};Te(y,n=>{e(o)&&n(R)})}var M=i(y);l(()=>_(M,` ${Dt()??""}`)),t(F),t(x),t(g),l(()=>F.disabled=e(B)),$e("submit",g,h),P(f,g),xe()}const pa=()=>dt((f={},r)=>{r.length&&(ot(r),J("issuerConfirm",te(),()=>{Q(f.issuerConfirm).isNotBlank()}),J("issuerConfirm",Pt(),()=>{Q(f.issuer===f.issuerConfirm).isTruthy()}))});function ba(f,r,o){r.add(f.currentTarget.name),o()}var ma=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ha=H('<form><p> </p> <div class="mb-2"><input type="text" name="issuerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ga(f,r){ge(r,!0);let o=u(""),I=pa(),B=u(d(I.get())),K=u(!1),C=O(()=>e(K)),k=O(()=>ut(e(B),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const m=new Set,E=st(()=>{I({issuer:r.issuer,issuerConfirm:e(o)},Array.from(m)).done(A=>{s(B,d(A))}),m.clear()},300);function T(){m.add("name"),E(),E.flush()}async function w(A){A.preventDefault();try{s(K,!0),s(o,d(e(o).trim())),T(),e(B).isValid()&&(await He.deleteTenant(r.tenantId,r.applicationId),r.onDelete())}catch(Y){await tt(Y)}finally{s(K,!1)}}var S=ha(),h=a(S),g=a(h,!0);l(()=>_(g,Ot())),t(h);var c=i(h,2),x=a(c);ve(x);const F=O(()=>`w-full ${e(k)("issuerConfirm")??""}`);l(()=>W(x,"placeholder",Bt({issuer:r.issuer}))),x.__input=[ba,m,E];var y=i(x,2);ae(y,{name:"issuerConfirm",get result(){return e(B)}}),t(c);var R=i(c,2),M=a(R),n=a(M);{var j=A=>{var Y=ma(),re=a(Y),le=a(re);et(le),t(re),t(Y),P(A,Y)};Te(n,A=>{e(K)&&A(j)})}var N=i(n);l(()=>_(N,` ${Mt()??""}`)),t(M),t(R),t(S),l(()=>{se(x,e(F)),M.disabled=e(C)}),$e("submit",S,w),_e(x,()=>e(o),A=>s(o,A)),P(f,S),xe()}Me(["input"]);var xa=H('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ya=H('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ia(f,r){ge(r,!0);let o=u(!1),I=u(!1),B=O(()=>e(o)||!e(I)),K=u(d(r.tenant.algorithm)),C=u(d(r.tenant.audience)),k=u(d(r.tenant.clientId)),m=u(d(r.tenant.expiresInSeconds)),E=u(d(r.tenant.issuer)),T=u(d(r.tenant.privateKey)),w=u(d(r.tenant.publicKey)),S=u(d(r.tenant.refreshExpiresInSeconds));async function h(n){n.preventDefault();try{s(o,!0),e(I)&&r.onEdit(await He.updateTenant(r.tenant.id,{algorithm:e(K),audience:e(C),clientId:e(k)?e(k):void 0,expiresInSeconds:e(m),issuer:e(E),privateKey:e(T)?e(T):void 0,publicKey:e(w)?e(w):void 0,refreshExpiresInSeconds:e(S)},r.applicationId))}catch(j){await tt(j)}finally{s(o,!1)}}var g=ya(),c=a(g);vt(c,{get algorithm(){return e(K)},set algorithm(n){s(K,d(n))},get audience(){return e(C)},set audience(n){s(C,d(n))},get clientId(){return e(k)},set clientId(n){s(k,d(n))},get expiresInSeconds(){return e(m)},set expiresInSeconds(n){s(m,d(n))},get issuer(){return e(E)},set issuer(n){s(E,d(n))},get privateKey(){return e(T)},set privateKey(n){s(T,d(n))},get publicKey(){return e(w)},set publicKey(n){s(w,d(n))},get refreshExpiresInSeconds(){return e(S)},set refreshExpiresInSeconds(n){s(S,d(n))},get valid(){return e(I)},set valid(n){s(I,d(n))}});var x=i(c,2),F=a(x),y=a(F);{var R=n=>{var j=xa(),N=a(j),A=a(N);et(A),t(N),t(j),P(n,j)};Te(y,n=>{e(o)&&n(R)})}var M=i(y);l(()=>_(M,` ${Ht()??""}`)),t(F),t(x),t(g),l(()=>F.disabled=e(B)),$e("submit",g,h),P(f,g),xe()}const rt=20;var wa=H('<button class="btn secondary icon lg"><!></button>'),Sa=H('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Ka=H('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ka=H("<h3> </h3>"),Ea=H("<h3> </h3>"),Ta=H("<h3> </h3>"),Ca=H('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Na(f,r){ge(r,!0);let o=V(r,"tenants",31,()=>d([])),I=u(0),B=u(!0),K=u(!1),C=u(void 0);_t(()=>{e(C)!==r.applicationId&&(s(C,d(r.applicationId)),s(I,0),s(B,!0),s(K,!1),o([]),k())});async function k(){if(!e(B)||e(K))return;let p;s(K,!0);try{p=await He.allTenants(e(I)*rt,rt,!0,r.applicationId)}finally{s(K,!1)}s(B,d(p.hasMore)),s(I,e(I)+1),o().push(...p.items)}let m=u(!1);function E(){s(m,!0)}function T(p){o().unshift(p),s(m,!1)}let w=u(void 0),S=u(!1);function h(p){return()=>{s(w,d(p)),s(S,!0)}}function g(p){const v=o().findIndex(b=>b.id===(p==null?void 0:p.id));v!==-1&&o(o()[v]=p,!0),s(w,void 0),s(S,!1)}let c=u(void 0),x=u(!1);function F(p){return()=>{s(c,d(p)),s(x,!0)}}function y(){const p=o().findIndex(v=>{var b;return v.id===((b=e(c))==null?void 0:b.id)});p!==-1&&o().splice(p,1),s(c,void 0),s(x,!1)}const R=nt(),[M,n]=R;var j=Ca(),N=Ee(j),A=a(N),Y=a(A),re=a(Y),le=a(re,!0);l(()=>_(le,Gt())),t(re);var de=i(re),Fe=a(de,!0);l(()=>_(Fe,Rt())),t(de);var q=i(de),Le=a(q,!0);l(()=>_(Le,Ut())),t(q);var ye=i(q),Ie=a(ye,!0);l(()=>_(Ie,Vt())),t(ye);var fe=i(ye),Ge=a(fe,!0);l(()=>_(Ge,qt())),t(fe),ft(),t(Y),t(A);var Z=i(A);lt(Z,23,o,p=>p.id,(p,v,b)=>{var D=Ka(),L=a(D),X=a(L,!0);t(L);var G=i(L),Re=a(G,!0);t(G);var z=i(G),Ue=a(z,!0);t(z);var Se=i(z),pe=a(Se,!0);l(()=>_(pe,e(v).updatedAt.toLocaleString())),t(Se);var oe=i(Se),Ve=a(oe,!0);l(()=>_(Ve,e(v).createdAt.toLocaleString())),t(oe);var $=i(oe),Ae=a($),qe=a(Ae);$t(qe,{position:"top-right",anchorPosition:"bottom-right",button:ue=>{var be=wa(),ce=a(be);aa(ce,{}),t(be),P(ue,be)},children:(ue,be)=>{var ce=Sa(),me=Ee(ce);l(()=>W(me,"href",M(`${it}/applications/${r.applicationId}/tenants/${e(v).id}/oauth2-providers`,void 0)));var De=a(me);la(De,{});var Pe=i(De),Be=a(Pe,!0);l(()=>_(Be,zt())),t(Pe),t(me);var ne=i(me,2),ze=O(()=>h(e(v)));ne.__click=function(...We){var ke;(ke=e(ze))==null||ke.apply(this,We)};var ee=a(ne);ea(ee,{});var Oe=i(ee),Je=a(Oe,!0);l(()=>_(Je,Jt())),t(Oe),t(ne);var U=i(ne,2),he=O(()=>F(e(v)));U.__click=function(...We){var ke;(ke=e(he))==null||ke.apply(this,We)};var ie=a(U);ta(ie,{});var Ke=i(ie),Qe=a(Ke,!0);l(()=>_(Qe,Qt())),t(Ke),t(U),P(ue,ce)},$$slots:{button:!0,default:!0}}),t(Ae),t($),t(D),l(()=>{Xt(D,"border-b",e(b)<o().length-1),_(X,e(v).id),_(Re,e(v).issuer),_(Ue,e(v).clientId)}),P(p,D)}),t(Z),t(N);var Ce=i(N,2);Ze(Ce,{get open(){return e(m)},set open(v){s(m,d(v))},title:v=>{var b=ka(),D=a(b,!0);l(()=>_(D,Wt())),t(b),P(v,b)},children:(v,b)=>{fa(v,{get applicationId(){return r.applicationId},onCreate:T})},$$slots:{title:!0,default:!0}});var Ne=i(Ce,2);Ze(Ne,{get open(){return e(S)},set open(v){s(S,d(v))},title:v=>{var b=Ea(),D=a(b,!0);l(()=>{var L;return _(D,Ft({issuer:((L=e(w))==null?void 0:L.issuer)||""}))}),t(b),P(v,b)},children:(v,b)=>{var D=at(),L=Ee(D);{var X=G=>{Ia(G,{get applicationId(){return r.applicationId},get tenant(){return e(w)},onEdit:g})};Te(L,G=>{e(w)&&G(X)})}P(v,D)},$$slots:{title:!0,default:!0}});var we=i(Ne,2);return Ze(we,{get open(){return e(x)},set open(v){s(x,d(v))},title:v=>{var b=Ta(),D=a(b,!0);l(()=>{var L;return _(D,Lt({issuer:((L=e(c))==null?void 0:L.issuer)||""}))}),t(b),P(v,b)},children:(v,b)=>{var D=at(),L=Ee(D);{var X=G=>{ga(G,{get applicationId(){return r.applicationId},get tenantId(){return e(c).id},get issuer(){return e(c).issuer},onDelete:y})};Te(L,G=>{e(c)&&G(X)})}P(v,D)},$$slots:{title:!0,default:!0}}),P(f,j),xe({onCreate:E})}Me(["click"]);var Aa=H('<div class="container mx-auto"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg m-4"><div class="flex flex-grow justify-between"><div class="flex flex-row items-center"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button></a> <h3 class="m-0 ms-2"> </h3></div> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Wa(f,r){ge(r,!0);let o=u(void 0);const I=nt(),[B,K]=I;var C=Aa();bt(y=>{l(()=>pt.title=Yt())});var k=a(C),m=a(k),E=a(m),T=a(E);l(()=>W(T,"href",B(`${it}/`,void 0)));var w=a(T),S=a(w);da(S,{}),t(w),t(T);var h=i(T,2),g=a(h,!0);t(h),t(E);var c=i(E,2);c.__click=function(...y){var R,M;(M=(R=e(o))==null?void 0:R.onCreate)==null||M.apply(this,y)};var x=a(c);ra(x,{}),t(c),t(m);var F=i(m,2);Zt(Na(F,{get applicationId(){return r.data.applicationId}}),y=>s(o,d(y)),()=>e(o)),t(k),t(C),l(()=>_(g,r.data.application.name)),P(f,C),xe()}Me(["click"]);export{Wa as component};
