import{a as N,t as L,c as Ze,b as $e}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as ke,x as c,y as o,j as e,f as Te,t as i,a as Ue,c as r,r as t,s as l,l as F,aj as ft,$ as ht}from"../chunks/runtime.psM0e5Y8.js";import{d as Ee,s,e as Re,h as bt}from"../chunks/render.Cjq5XT8C.js";import{d as et,e as X,r as ne,s as $,c as Y,af as mt,ag as gt,ah as xt,ai as kt,aj as Ut,ak as yt,al as wt,am as It,an as At,ao as Ot,ap as Pt,aq as St,ar as Tt,as as Ct,at as Nt,au as jt,av as Bt,aw as Dt,ax as Et,ay as Ft,az as Mt,aA as Gt,aB as Lt,aC as qt,n as Vt,aD as zt,aE as Ht,aF as Jt,aG as Kt,u as Rt,v as Qt,a2 as Wt,a3 as Xt,aH as Yt,aI as Zt,aJ as $t,aK as er,aL as tr,aM as rr,aN as ar,aa as nr,ab as lr,ac as ir,ad as or,ae as dr}from"../chunks/debounce.B2AM-79h.js";import{p as v}from"../chunks/proxy.BhkZ7AL-.js";import{p as J,b as vr}from"../chunks/props.DuEunOx7.js";import{D as sr,g as ur}from"../chunks/Dropdown.DLBKEX9f.js";import{b as cr}from"../chunks/paths.Cvfw2cHb.js";import{i as xe}from"../chunks/runtime.CsaQGn2V.js";import{M as Ke,P as _r,T as pr,E as fr,a as hr}from"../chunks/Modal.D2ORI96r.js";import{I as Z,c as br,b as ce,G as tt,m as rt,C as K,v as R,N as mr,a as at,S as Qe,h as We}from"../chunks/InputResults.BVJUMeon.js";import{d as Xe}from"../chunks/index.BFBrPiR5.js";import{b as gr}from"../chunks/select.Cn-LvQI6.js";import{o as xr}from"../chunks/index-client.DYF3A4K-.js";import{C as kr}from"../chunks/chevron-left.Dv7CjkCi.js";const Ur=()=>tt((p,a)=>{a.length&&(rt(a),K("provider",X(),()=>{R(p.provider).isNotBlank()}),K("active",X(),()=>{R(p.active).isNotBlank()}),K("clientId",X(),()=>{R(p.clientId).isNotBlank()}),K("clientSecret",X(),()=>{R(p.clientSecret).isNotBlank()}),K("redirectUrl",X(),()=>{R(p.redirectUrl).isNotBlank()}),mr(p.isNew,()=>{K("authUrl",X(),()=>{R(p.authUrl).isNotBlank()}),K("callbackUrl",X(),()=>{R(p.callbackUrl).isNotBlank()}),K("scope",X(),()=>{R(p.scope).isNotBlank()}),K("tokenUrl",X(),()=>{R(p.tokenUrl).isNotBlank()})}))});function ae(p,a,_){a.add(p.currentTarget.name),_()}var yr=L('<div class="mb-2"><label for="provider"> </label> <select name="provider"><option> </option><option> </option><option> </option><option> </option><option> </option></select> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="mb-2"><label for="clientId"> </label> <input type="text" name="clientId"> <!></div> <div class="mb-2"><label for="clientSecret"> </label> <input type="text" name="clientSecret"> <!></div> <div class="mb-2"><label for="redirectUrl"> </label> <input type="text" name="redirectUrl"> <!></div> <div class="mb-2"><label for="authUrl"> </label> <input type="text" name="authUrl"> <!></div> <div class="mb-2"><label for="callbackUrl"> </label> <input type="text" name="callbackUrl"> <!></div> <div class="mb-2"><label for="scope"> </label> <input type="text" name="scope"> <!></div> <div class="mb-2"><label for="tokenUrl"> </label> <input type="text" name="tokenUrl"> <!></div>',1);function nt(p,a){ke(a,!0);let _=J(a,"provider",15),w=J(a,"active",15),S=J(a,"authUrl",15),T=J(a,"callbackUrl",15),C=J(a,"clientId",15),U=J(a,"clientSecret",15),I=J(a,"redirectUrl",15),A=J(a,"scope",15),b=J(a,"tokenUrl",15),k=J(a,"valid",15,!1),G=Ur(),h=c(v(G.get())),O=F(()=>at(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const d=new Set,f=et(()=>{G({provider:_(),active:w(),authUrl:S(),callbackUrl:T(),clientId:C(),clientSecret:U(),redirectUrl:I(),scope:A(),tokenUrl:b(),isNew:a.isNew},Array.from(d)).done(pt=>{o(h,v(pt)),k(e(h).isValid())}),d.clear()},300);function q(){d.add("provider"),d.add("active"),d.add("authUrl"),d.add("callbackUrl"),d.add("clientId"),d.add("clientSecret"),d.add("redirectUrl"),d.add("scope"),d.add("tokenUrl"),f(),f.flush()}xr(q);var y=yr(),B=Te(y),j=r(B),Q=r(j,!0);i(()=>s(Q,Ot())),t(j);var n=l(j,2);const D=F(()=>`w-full ${e(O)("provider")??""}`);i(()=>$(n,"placeholder",mt())),n.__input=[ae,d,f];var m=r(n);m.value=(m.__value="google")==null?"":"google";var V=r(m,!0);i(()=>s(V,Pt())),t(m);var z=l(m);z.value=(z.__value="facebook")==null?"":"facebook";var ye=r(z,!0);i(()=>s(ye,St())),t(z);var le=l(z);le.value=(le.__value="github")==null?"":"github";var Ce=r(le,!0);i(()=>s(Ce,Tt())),t(le);var ie=l(le);ie.value=(ie.__value="microsoft")==null?"":"microsoft";var Fe=r(ie,!0);i(()=>s(Fe,Ct())),t(ie);var g=l(ie);g.value=(g.__value="x")==null?"":"x";var u=r(g,!0);i(()=>s(u,Nt())),t(g),t(n);var x=l(n,2);Z(x,{name:"provider",get result(){return e(h)}}),t(B);var P=l(B,2),E=r(P),oe=r(E);i(()=>s(oe,`${jt()??""} `));var M=l(oe);ne(M);const Me=F(()=>gt(e(O)("active")));M.__input=[ae,d,f],t(E);var we=l(E,2);Z(we,{name:"active",get result(){return e(h)}}),t(P);var Ie=l(P,2),Ae=r(Ie),Ge=r(Ae,!0);i(()=>s(Ge,Bt())),t(Ae);var W=l(Ae,2);ne(W);const Le=F(()=>`w-full ${e(O)("clientId")??""}`);i(()=>$(W,"placeholder",xt())),W.__input=[ae,d,f];var Oe=l(W,2);Z(Oe,{name:"clientId",get result(){return e(h)}}),t(Ie);var Pe=l(Ie,2),fe=r(Pe),Ne=r(fe,!0);i(()=>s(Ne,Dt())),t(fe);var de=l(fe,2);ne(de);const ee=F(()=>`w-full ${e(O)("clientSecret")??""}`);i(()=>$(de,"placeholder",kt())),de.__input=[ae,d,f];var H=l(de,2);Z(H,{name:"clientSecret",get result(){return e(h)}}),t(Pe);var ve=l(Pe,2),se=r(ve),he=r(se,!0);i(()=>s(he,Et())),t(se);var ue=l(se,2);ne(ue);const je=F(()=>`w-full ${e(O)("redirectUrl")??""}`);i(()=>$(ue,"placeholder",Ut())),ue.__input=[ae,d,f];var Be=l(ue,2);Z(Be,{name:"redirectUrl",get result(){return e(h)}}),t(ve);var Se=l(ve,2),_e=r(Se),qe=r(_e,!0);i(()=>s(qe,Ft())),t(_e);var te=l(_e,2);ne(te);const De=F(()=>`w-full ${e(O)("authUrl")??""}`);i(()=>$(te,"placeholder",yt())),te.__input=[ae,d,f];var Ve=l(te,2);Z(Ve,{name:"authUrl",get result(){return e(h)}}),t(Se);var pe=l(Se,2),re=r(pe),lt=r(re,!0);i(()=>s(lt,Mt())),t(re);var be=l(re,2);ne(be);const it=F(()=>`w-full ${e(O)("callbackUrl")??""}`);i(()=>$(be,"placeholder",wt())),be.__input=[ae,d,f];var ot=l(be,2);Z(ot,{name:"callbackUrl",get result(){return e(h)}}),t(pe);var ze=l(pe,2),He=r(ze),dt=r(He,!0);i(()=>s(dt,Gt())),t(He);var me=l(He,2);ne(me);const vt=F(()=>`w-full ${e(O)("scope")??""}`);i(()=>$(me,"placeholder",It())),me.__input=[ae,d,f];var st=l(me,2);Z(st,{name:"scope",get result(){return e(h)}}),t(ze);var Ye=l(ze,2),Je=r(Ye),ut=r(Je,!0);i(()=>s(ut,Lt())),t(Je);var ge=l(Je,2);ne(ge);const ct=F(()=>`w-full ${e(O)("tokenUrl")??""}`);i(()=>$(ge,"placeholder",At())),ge.__input=[ae,d,f];var _t=l(ge,2);Z(_t,{name:"tokenUrl",get result(){return e(h)}}),t(Ye),i(()=>{Y(n,e(D)),Y(M,e(Me)),Y(W,e(Le)),Y(de,e(ee)),Y(ue,e(je)),Y(te,e(De)),Y(be,e(it)),Y(me,e(vt)),Y(ge,e(ct))}),gr(n,_),br(M,w),ce(W,C),ce(de,U),ce(ue,I),ce(te,S),ce(be,T),ce(me,A),ce(ge,b),N(p,y),Ue()}Ee(["input"]);var wr=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ir=L('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Ar(p,a){ke(a,!0);let _=c("google"),w=c(!0),S=c(void 0),T=c(void 0),C=c(""),U=c(""),I=c(""),A=c(void 0),b=c(void 0),k=c(!1),G=F(()=>e(k)),h=c(!1);async function O(n){n.preventDefault();try{o(k,!0),e(h)&&a.onCreate(await Xe.createTenantOauth2Provider(a.tenantId,{provider:e(_),active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(A),tokenUrl:e(b)},a.applicationId))}catch(D){await We(D)}finally{o(k,!1)}}var d=Ir(),f=r(d);nt(f,{isNew:!0,get valid(){return e(h)},set valid(n){o(h,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(A)},set scope(n){o(A,v(n))},get tokenUrl(){return e(b)},set tokenUrl(n){o(b,v(n))}});var q=l(f,2),y=r(q),B=r(y);{var j=n=>{var D=wr(),m=r(D),V=r(m);Qe(V),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var Q=l(B);i(()=>s(Q,` ${qt()??""}`)),t(y),t(q),t(d),i(()=>y.disabled=e(G)),Re("submit",d,O),N(p,d),Ue()}const Or=()=>tt((p={},a)=>{a.length&&(rt(a),K("providerConfirm",X(),()=>{R(p.providerConfirm).isNotBlank()}),K("providerConfirm",Vt(),()=>{R(p.provider===p.providerConfirm).isTruthy()}))});function Pr(p,a,_){a.add(p.currentTarget.name),_()}var Sr=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Tr=L('<form><p> </p> <div class="mb-2"><input type="text" name="providerConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Cr(p,a){ke(a,!0);let _=c(""),w=Or(),S=c(v(w.get())),T=c(!1),C=F(()=>e(T)),U=F(()=>at(e(S),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const I=new Set,A=et(()=>{w({provider:a.provider,providerConfirm:e(_)},Array.from(I)).done(m=>{o(S,v(m))}),I.clear()},300);function b(){I.add("name"),A(),A.flush()}async function k(m){m.preventDefault();try{o(T,!0),o(_,v(e(_).trim())),b(),e(S).isValid()&&(await Xe.deleteTenantOauth2Provider(a.tenantId,a.tenantOAuth2ProviderId,a.applicationId),a.onDelete())}catch(V){await We(V)}finally{o(T,!1)}}var G=Tr(),h=r(G),O=r(h,!0);i(()=>s(O,Ht())),t(h);var d=l(h,2),f=r(d);ne(f);const q=F(()=>`w-full ${e(U)("providerConfirm")??""}`);i(()=>$(f,"placeholder",zt({provider:a.provider}))),f.__input=[Pr,I,A];var y=l(f,2);Z(y,{name:"providerConfirm",get result(){return e(S)}}),t(d);var B=l(d,2),j=r(B),Q=r(j);{var n=m=>{var V=Sr(),z=r(V),ye=r(z);Qe(ye),t(z),t(V),N(m,V)};xe(Q,m=>{e(T)&&m(n)})}var D=l(Q);i(()=>s(D,` ${Jt()??""}`)),t(j),t(B),t(G),i(()=>{Y(f,e(q)),j.disabled=e(C)}),Re("submit",G,k),ce(f,()=>e(_),m=>o(_,m)),N(p,G),Ue()}Ee(["input"]);var Nr=L('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),jr=L('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Br(p,a){ke(a,!0);let _=c(v(a.tenantOAuth2Provider.provider)),w=c(v(a.tenantOAuth2Provider.active)),S=c(v(a.tenantOAuth2Provider.authUrl)),T=c(v(a.tenantOAuth2Provider.callbackUrl)),C=c(v(a.tenantOAuth2Provider.clientId)),U=c(v(a.tenantOAuth2Provider.clientSecret)),I=c(v(a.tenantOAuth2Provider.redirectUrl)),A=c(v(a.tenantOAuth2Provider.scope)),b=c(v(a.tenantOAuth2Provider.tokenUrl)),k=c(!1),G=F(()=>e(k)),h=c(!1);async function O(n){n.preventDefault();try{o(k,!0),e(h)&&a.onEdit(await Xe.updateTenantOauth2Provider(a.tenantId,a.tenantOAuth2Provider.id,{active:e(w),authUrl:e(S),callbackUrl:e(T),clientId:e(C),clientSecret:e(U),redirectUrl:e(I),scope:e(A),tokenUrl:e(b)},a.applicationId))}catch(D){await We(D)}finally{o(k,!1)}}var d=jr(),f=r(d);nt(f,{isNew:!1,get valid(){return e(h)},set valid(n){o(h,v(n))},get provider(){return e(_)},set provider(n){o(_,v(n))},get active(){return e(w)},set active(n){o(w,v(n))},get authUrl(){return e(S)},set authUrl(n){o(S,v(n))},get callbackUrl(){return e(T)},set callbackUrl(n){o(T,v(n))},get clientId(){return e(C)},set clientId(n){o(C,v(n))},get clientSecret(){return e(U)},set clientSecret(n){o(U,v(n))},get redirectUrl(){return e(I)},set redirectUrl(n){o(I,v(n))},get scope(){return e(A)},set scope(n){o(A,v(n))},get tokenUrl(){return e(b)},set tokenUrl(n){o(b,v(n))}});var q=l(f,2),y=r(q),B=r(y);{var j=n=>{var D=Nr(),m=r(D),V=r(m);Qe(V),t(m),t(D),N(n,D)};xe(B,n=>{e(k)&&n(j)})}var Q=l(B);i(()=>s(Q,` ${Kt()??""}`)),t(y),t(q),t(d),i(()=>y.disabled=e(G)),Re("submit",d,O),N(p,d),Ue()}var Dr=L('<button class="btn secondary icon lg"><!></button>'),Er=L('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),Fr=L('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),Mr=L("<h3> </h3>"),Gr=L("<h3> </h3>"),Lr=L("<h3> </h3>"),qr=L('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function Vr(p,a){ke(a,!0);let _=J(a,"oauth2Providers",7),w=c(!1);function S(){o(w,!0)}function T(g){_().unshift(g),o(w,!1)}let C=c(void 0),U=c(!1);function I(g){return()=>{o(C,v(g)),o(U,!0)}}function A(g){const u=_().findIndex(x=>x.id===(g==null?void 0:g.id));u!==-1&&(_()[u]=g),o(C,void 0),o(U,!1)}let b=c(void 0),k=c(!1);function G(g){return()=>{o(b,v(g)),o(k,!0)}}function h(){const g=_().findIndex(u=>{var x;return u.id===((x=e(b))==null?void 0:x.id)});g!==-1&&_().splice(g,1),o(b,void 0),o(k,!1)}var O=qr(),d=Te(O),f=r(d),q=r(f),y=r(q),B=r(y,!0);i(()=>s(B,Yt())),t(y);var j=l(y),Q=r(j,!0);i(()=>s(Q,Zt())),t(j);var n=l(j),D=r(n,!0);i(()=>s(D,$t())),t(n);var m=l(n),V=r(m,!0);i(()=>s(V,er())),t(m);var z=l(m),ye=r(z,!0);i(()=>s(ye,tr())),t(z),ft(),t(q),t(f);var le=l(f);Rt(le,23,_,g=>g.id,(g,u,x)=>{var P=Fr(),E=r(P),oe=r(E,!0);t(E);var M=l(E),Me=r(M,!0);t(M);var we=l(M),Ie=r(we);{var Ae=ee=>{var H=$e();i(()=>s(H,rr())),N(ee,H)},Ge=ee=>{var H=$e();i(()=>s(H,ar())),N(ee,H)};xe(Ie,ee=>{e(u).active?ee(Ae):ee(Ge,!1)})}t(we);var W=l(we),Le=r(W,!0);i(()=>s(Le,e(u).updatedAt.toLocaleString())),t(W);var Oe=l(W),Pe=r(Oe,!0);i(()=>s(Pe,e(u).createdAt.toLocaleString())),t(Oe);var fe=l(Oe),Ne=r(fe),de=r(Ne);sr(de,{position:"top-right",anchorPosition:"bottom-right",button:H=>{var ve=Dr(),se=r(ve);fr(se,{}),t(ve),N(H,ve)},children:(H,ve)=>{var se=Er(),he=Te(se),ue=F(()=>I(e(u)));he.__click=function(...pe){var re;(re=e(ue))==null||re.apply(this,pe)};var je=r(he);_r(je,{});var Be=l(je),Se=r(Be,!0);i(()=>s(Se,nr())),t(Be),t(he);var _e=l(he,2),qe=F(()=>G(e(u)));_e.__click=function(...pe){var re;(re=e(qe))==null||re.apply(this,pe)};var te=r(_e);pr(te,{});var De=l(te),Ve=r(De,!0);i(()=>s(Ve,lr())),t(De),t(_e),N(H,se)},$$slots:{button:!0,default:!0}}),t(Ne),t(fe),t(P),i(()=>{Qt(P,"border-b",e(x)<_().length-1),s(oe,e(u).id),s(Me,e(u).provider)}),N(g,P)}),t(le),t(d);var Ce=l(d,2);Ke(Ce,{get open(){return e(w)},set open(u){o(w,v(u))},title:u=>{var x=Mr(),P=r(x,!0);i(()=>s(P,ir())),t(x),N(u,x)},children:(u,x)=>{Ar(u,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},onCreate:T})},$$slots:{title:!0,default:!0}});var ie=l(Ce,2);Ke(ie,{get open(){return e(U)},set open(u){o(U,v(u))},title:u=>{var x=Gr(),P=r(x,!0);i(()=>{var E;return s(P,Wt({issuer:((E=e(C))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var P=Ze(),E=Te(P);{var oe=M=>{Br(M,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2Provider(){return e(C)},onEdit:A})};xe(E,M=>{e(C)&&M(oe)})}N(u,P)},$$slots:{title:!0,default:!0}});var Fe=l(ie,2);return Ke(Fe,{get open(){return e(k)},set open(u){o(k,v(u))},title:u=>{var x=Lr(),P=r(x,!0);i(()=>{var E;return s(P,Xt({issuer:((E=e(b))==null?void 0:E.provider)||""}))}),t(x),N(u,x)},children:(u,x)=>{var P=Ze(),E=Te(P);{var oe=M=>{Cr(M,{get applicationId(){return a.applicationId},get tenantId(){return a.tenantId},get tenantOAuth2ProviderId(){return e(b).id},get provider(){return e(b).provider},onDelete:h})};xe(E,M=>{e(b)&&M(oe)})}N(u,P)},$$slots:{title:!0,default:!0}}),N(p,O),Ue({onCreate:S})}Ee(["click"]);var zr=L('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function la(p,a){ke(a,!0);let _=c(void 0),w=v(a.data.tenant.oauth2Providers);const S=ur(),[T,C]=S;var U=zr();bt(y=>{i(()=>ht.title=or())});var I=r(U),A=r(I),b=r(A);i(()=>$(b,"href",T(`${cr}/applications/${a.data.applicationId}/tenants`,void 0)));var k=r(b),G=r(k);kr(G,{}),t(k);var h=l(k,2),O=r(h,!0);i(()=>s(O,dr())),t(h),t(b);var d=l(b,2);d.__click=function(...y){var B,j;(j=(B=e(_))==null?void 0:B.onCreate)==null||j.apply(this,y)};var f=r(d);hr(f,{}),t(d),t(A);var q=l(A,2);vr(Vr(q,{get applicationId(){return a.data.applicationId},get tenantId(){return a.data.tenantId},get oauth2Providers(){return w}}),y=>o(_,v(y)),()=>e(_)),t(I),t(U),N(p,U),Ue()}Ee(["click"]);export{la as component};
