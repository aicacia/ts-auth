import{a as $,t as E,c as qt}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as G,x as A,y as s,j as t,t as o,a as L,c as a,s as l,r as e,l as O,f as nt,aj as ce,$ as pe}from"../chunks/runtime.psM0e5Y8.js";import{d as ot,e as gt,s as x,h as fe}from"../chunks/render.Cjq5XT8C.js";import{p as C}from"../chunks/proxy.BhkZ7AL-.js";import{p as it,b as _e}from"../chunks/props.DuEunOx7.js";import{d as zt,e as xt,r as Ht,s as J,c as Rt,l as me,m as be,n as he,o as ge,p as xe,q as ye,t as we,u as Ae,v as ke,w as $e,x as Ce,y as je,z as Ee,A as Se,B as De,C as Ie,D as Te,E as Pe,F as Me,G as Fe,H as Oe,I as Be}from"../chunks/debounce.BaQmhekd.js";import{i as K}from"../chunks/runtime.CsaQGn2V.js";import{o as Ut}from"../chunks/index-client.DYF3A4K-.js";import{g as Ne,D as Ge}from"../chunks/Dropdown.DEEn-y_3.js";import{a as dt}from"../chunks/index.BFBrPiR5.js";import{b as mt}from"../chunks/paths.O-eWMSOt.js";import{M as bt,P as Le,T as qe,E as Ve,a as ze}from"../chunks/Modal.DtHF1rvO.js";import{I as Zt,b as Jt,G as yt,m as wt,C as st,v as lt,a as Kt,S as At,h as kt}from"../chunks/InputResults.CgtxMCGx.js";import{E as ht}from"../chunks/external-link.CNCMC4XC.js";const He=()=>yt((u={},r)=>{r.length&&(wt(r),st("name",xt(),()=>{lt(u.name).isNotBlank()}))});function Re(u,r,n){r.add(u.currentTarget.name),n()}var Ue=E('<div class="mb-2"><input type="text" name="name"> <!></div>');function Qt(u,r){G(r,!0);let n=it(r,"name",15),y=it(r,"valid",15,!1),c=He(),p=A(C(c.get())),S=O(()=>Kt(t(p),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const h=new Set,g=zt(()=>{c({name:n()},Array.from(h)).done(_=>{s(p,C(_)),y(t(p).isValid())}),h.clear()},300);function w(){h.add("name"),g(),g.flush()}Ut(w);var m=Ue(),f=a(m);Ht(f);const D=O(()=>`w-full ${t(S)("name")??""}`);o(()=>J(f,"placeholder",me())),f.__input=[Re,h,g];var P=l(f,2);Zt(P,{name:"name",get result(){return t(p)}}),e(m),o(()=>Rt(f,t(D))),Jt(f,n),$(u,m),L()}ot(["input"]);const Ze=()=>yt((u={},r)=>{r.length&&(wt(r),st("name",xt(),()=>{lt(u.name).isNotBlank()}))});var Je=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Ke=E('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Qe(u,r){G(r,!0);let n=A(""),y=Ze();C(y.get());let c=A(!1),p=A(!1),S=O(()=>t(p)||!t(c));async function h(d){d.preventDefault();try{s(p,!0),t(c)&&r.onCreate(await dt.createApplication({name:t(n)}))}catch(k){await kt(k)}finally{s(p,!1)}}var g=Ke(),w=a(g);Qt(w,{get name(){return t(n)},set name(d){s(n,C(d))},get valid(){return t(c)},set valid(d){s(c,C(d))}});var m=l(w,2),f=a(m),D=a(f);{var P=d=>{var k=Je(),B=a(k),q=a(B);At(q),e(B),e(k),$(d,k)};K(D,d=>{t(p)&&d(P)})}var _=l(D);o(()=>x(_,` ${be()??""}`)),e(f),e(m),e(g),o(()=>f.disabled=t(S)),gt("submit",g,h),$(u,g),L()}const We=()=>yt((u={},r)=>{r.length&&(wt(r),st("nameConfirm",xt(),()=>{lt(u.nameConfirm).isNotBlank()}),st("nameConfirm",he(),()=>{lt(u.name===u.nameConfirm).isTruthy()}))});function Xe(u,r,n){r.add(u.currentTarget.name),n()}var Ye=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ta=E('<form><p> </p> <div class="mb-2"><input type="text" name="nameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function ea(u,r){G(r,!0);let n=A(""),y=We(),c=A(C(y.get())),p=A(!1),S=O(()=>t(p)),h=O(()=>Kt(t(c),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const g=new Set,w=zt(()=>{y({name:r.name,nameConfirm:t(n)},Array.from(g)).done(T=>{s(c,C(T))}),g.clear()},300);function m(){g.add("name"),w(),w.flush()}async function f(T){T.preventDefault();try{s(p,!0),s(n,C(t(n).trim())),m(),t(c).isValid()&&(await dt.deleteApplication(r.applicationId),r.onDelete())}catch(F){await kt(F)}finally{s(p,!1)}}var D=ta(),P=a(D),_=a(P,!0);o(()=>x(_,xe())),e(P);var d=l(P,2),k=a(d);Ht(k);const B=O(()=>`w-full ${t(h)("nameConfirm")??""}`);o(()=>J(k,"placeholder",ge({name:r.name}))),k.__input=[Xe,g,w];var q=l(k,2);Zt(q,{name:"nameConfirm",get result(){return t(c)}}),e(d);var N=l(d,2),Q=a(N),V=a(Q);{var z=T=>{var F=Ye(),W=a(F),R=a(W);At(R),e(W),e(F),$(T,F)};K(V,T=>{t(p)&&T(z)})}var H=l(V);o(()=>x(H,` ${ye()??""}`)),e(Q),e(N),e(D),o(()=>{Rt(k,t(B)),Q.disabled=t(S)}),gt("submit",D,f),Jt(k,()=>t(n),T=>s(n,T)),$(u,D),L()}ot(["input"]);var aa=E('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),ra=E('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function na(u,r){G(r,!0);let n=it(r,"name",15,""),y=A(!1),c=A(!1),p=O(()=>t(c)||!t(y));async function S(_){_.preventDefault();try{s(c,!0),t(y)&&r.onEdit(await dt.updateApplication(r.applicationId,{name:n()}))}catch(d){await kt(d)}finally{s(c,!1)}}var h=ra(),g=a(h);Qt(g,{get name(){return n()},set name(_){n(_)},get valid(){return t(y)},set valid(_){s(y,C(_))}});var w=l(g,2),m=a(w),f=a(m);{var D=_=>{var d=aa(),k=a(d),B=a(k);At(B),e(k),e(d),$(_,d)};K(f,_=>{t(c)&&_(D)})}var P=l(f);o(()=>x(P,` ${we()??""}`)),e(m),e(w),e(h),o(()=>m.disabled=t(p)),gt("submit",h,S),$(u,h),L()}const Vt=20;var ia=E('<button class="btn secondary icon lg"><!></button>'),sa=E('<a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <a class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></a> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),la=E('<tr class="group"><td> </td><td> </td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),oa=E("<h3> </h3>"),da=E("<h3> </h3>"),va=E("<h3> </h3>"),ua=E('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function ca(u,r){G(r,!0);let n=it(r,"applications",31,()=>C([])),y=A(0),c=A(!0),p=A(!1);Ut(S);async function S(){if(!t(c))return;let v;s(p,!0);try{v=await dt.allApplications(t(y)*Vt,Vt)}finally{s(p,!1)}s(c,C(v.hasMore)),s(y,t(y)+1),n().push(...v.items)}let h=A(!1);function g(){s(h,!0)}function w(v){n().unshift(v),s(h,!1)}let m=A(void 0),f=A(!1);function D(v){return()=>{s(m,C(v)),s(f,!0)}}function P(v){const i=n().findIndex(b=>b.id===(v==null?void 0:v.id));i!==-1&&n(n()[i]=v,!0),s(m,void 0),s(f,!1)}let _=A(void 0),d=A(!1);function k(v){return()=>{s(_,C(v)),s(d,!0)}}function B(){const v=n().findIndex(i=>{var b;return i.id===((b=t(_))==null?void 0:b.id)});v!==-1&&n().splice(v,1),s(_,void 0),s(d,!1)}const q=Ne(),[N,Q]=q;var V=ua(),z=nt(V),H=a(z),T=a(H),F=a(T),W=a(F,!0);o(()=>x(W,je())),e(F);var R=l(F),Wt=a(R,!0);o(()=>x(Wt,Ee())),e(R);var vt=l(R),Xt=a(vt,!0);o(()=>x(Xt,Se())),e(vt);var $t=l(vt),Yt=a($t,!0);o(()=>x(Yt,De())),e($t),ce(),e(T),e(H);var Ct=l(H);Ae(Ct,23,n,v=>v.id,(v,i,b)=>{var j=la(),I=a(j),U=a(I,!0);e(I);var M=l(I),ee=a(M,!0);e(M);var ut=l(M),ae=a(ut,!0);o(()=>x(ae,t(i).updatedAt.toLocaleString())),e(ut);var ct=l(ut),re=a(ct,!0);o(()=>x(re,t(i).createdAt.toLocaleString())),e(ct);var St=l(ct),Dt=a(St),ne=a(Dt);Ge(ne,{position:"top-right",anchorPosition:"bottom-right",button:pt=>{var X=ia(),Y=a(X);Ve(Y,{}),e(X),$(pt,X)},children:(pt,X)=>{var Y=sa(),tt=nt(Y);o(()=>J(tt,"href",N(`${mt}/applications/${t(i).id}/users`,void 0)));var It=a(tt);ht(It,{});var Tt=l(It),ie=a(Tt,!0);o(()=>x(ie,Ie())),e(Tt),e(tt);var et=l(tt,2);o(()=>J(et,"href",N(`${mt}/applications/${t(i).id}/service-accounts`,void 0)));var Pt=a(et);ht(Pt,{});var Mt=l(Pt),se=a(Mt,!0);o(()=>x(se,Te())),e(Mt),e(et);var at=l(et,2);o(()=>J(at,"href",N(`${mt}/applications/${t(i).id}/tenants`,void 0)));var Ft=a(at);ht(Ft,{});var Ot=l(Ft),le=a(Ot,!0);o(()=>x(le,Pe())),e(Ot),e(at);var rt=l(at,2),oe=O(()=>D(t(i)));rt.__click=function(..._t){var Z;(Z=t(oe))==null||Z.apply(this,_t)};var Bt=a(rt);Le(Bt,{});var Nt=l(Bt),de=a(Nt,!0);o(()=>x(de,Me())),e(Nt),e(rt);var ft=l(rt,2),ve=O(()=>k(t(i)));ft.__click=function(..._t){var Z;(Z=t(ve))==null||Z.apply(this,_t)};var Gt=a(ft);qe(Gt,{});var Lt=l(Gt),ue=a(Lt,!0);o(()=>x(ue,Fe())),e(Lt),e(ft),$(pt,Y)},$$slots:{button:!0,default:!0}}),e(Dt),e(St),e(j),o(()=>{ke(j,"border-b",t(b)<n().length-1),x(U,t(i).id),x(ee,t(i).name)}),$(v,j)}),e(Ct),e(z);var jt=l(z,2);bt(jt,{get open(){return t(h)},set open(i){s(h,C(i))},title:i=>{var b=oa(),j=a(b,!0);o(()=>x(j,Oe())),e(b),$(i,b)},children:(i,b)=>{Qe(i,{onCreate:w})},$$slots:{title:!0,default:!0}});var Et=l(jt,2);bt(Et,{get open(){return t(f)},set open(i){s(f,C(i))},title:i=>{var b=da(),j=a(b,!0);o(()=>{var I;return x(j,$e({name:((I=t(m))==null?void 0:I.name)||""}))}),e(b),$(i,b)},children:(i,b)=>{var j=qt(),I=nt(j);{var U=M=>{na(M,{get applicationId(){return t(m).id},get name(){return t(m).name},onEdit:P})};K(I,M=>{t(m)&&M(U)})}$(i,j)},$$slots:{title:!0,default:!0}});var te=l(Et,2);return bt(te,{get open(){return t(d)},set open(i){s(d,C(i))},title:i=>{var b=va(),j=a(b,!0);o(()=>{var I;return x(j,Ce({name:((I=t(_))==null?void 0:I.name)||""}))}),e(b),$(i,b)},children:(i,b)=>{var j=qt(),I=nt(j);{var U=M=>{ea(M,{get applicationId(){return t(_).id},get name(){return t(_).name},onDelete:B})};K(I,M=>{t(_)&&M(U)})}$(i,j)},$$slots:{title:!0,default:!0}}),$(u,V),L({onCreate:g})}ot(["click"]);var pa=E('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-end"><button class="btn primary icon lg"><!></button></div> <!></div></div>');function Sa(u,r){G(r,!0);let n=A(void 0);var y=pa();fe(w=>{o(()=>pe.title=Be())});var c=a(y),p=a(c),S=a(p);S.__click=function(...w){var m,f;(f=(m=t(n))==null?void 0:m.onCreate)==null||f.apply(this,w)};var h=a(S);ze(h,{}),e(S),e(p);var g=l(p,2);_e(ca(g,{}),w=>s(n,C(w)),()=>t(n)),e(c),e(y),$(u,y),L()}ot(["click"]);export{Sa as component};
