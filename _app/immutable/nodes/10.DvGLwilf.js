import{a as L,t as Z,c as ga,b as Na}from"../chunks/disclose-version.B1Ir2FOR.js";import{p as ye,x as _,j as e,y as n,t as s,a as we,c as t,r as a,s as l,l as A,f as ke,aj as nt,$ as st}from"../chunks/runtime.psM0e5Y8.js";import{d as Ne,e as ze,s as f,h as dt}from"../chunks/render.Cjq5XT8C.js";import{d as Re,e as De,r as te,s as se,c as re,bh as ja,ag as ia,bi as Aa,bj as za,bk as ot,n as Ta,bl as ut,bm as vt,bn as _t,b as Ea,bo as mt,bp as ft,bq as ct,br as bt,bs as pt,bt as gt,bu as xt,bv as ht,bw as yt,bx as wt,by as kt,bz as It,bA as Nt,bB as Et,bC as Ct,bD as Ut,bE as Pt,bF as St,bG as Dt,bH as jt,bI as At,bJ as zt,bK as Tt,bL as qt,bM as Bt,bN as Vt,bO as Ft,bP as Ot,bQ as qa,bR as Ba,bS as Lt,bT as Mt,bU as Rt,bV as Gt,v as xa,bW as Zt,bX as Ht,u as Va,bY as Jt,bZ as Kt,b_ as Qt,b$ as Wt,c0 as Xt,c1 as Yt,c2 as $t,c3 as er,c4 as ar,c5 as tr,c6 as rr,c7 as ir,c8 as lr,c9 as nr,ca as sr,cb as dr,cc as or,cd as ur,ce as vr}from"../chunks/debounce.B2AM-79h.js";import{p as d}from"../chunks/proxy.BhkZ7AL-.js";import{p as $,b as la}from"../chunks/props.DuEunOx7.js";import{D as _r,g as mr}from"../chunks/Dropdown.DLBKEX9f.js";import{b as fr}from"../chunks/paths.Cvfw2cHb.js";import{i as me}from"../chunks/runtime.CsaQGn2V.js";import{o as ha}from"../chunks/index-client.DYF3A4K-.js";import{u as Ie}from"../chunks/index.BFBrPiR5.js";import{P as Fa,T as Oa,M as ra,a as La,E as cr}from"../chunks/Modal.D2ORI96r.js";import{I as ie,b as oe,c as Me,G as Ge,m as Ze,C as ce,v as be,S as Te,h as qe,a as He,N as ba}from"../chunks/InputResults.BVJUMeon.js";import{b as br}from"../chunks/select.Cn-LvQI6.js";import"../chunks/isURL.production.DVigo7xw.js";import{C as pr}from"../chunks/chevron-left.Dv7CjkCi.js";const gr=()=>Ge((u={},i)=>{i.length&&(Ze(i),ce("username",De(),()=>{be(u.username).isNotBlank()}),ce("active",De(),()=>{be(u.active).isNotBlank()}))});function Ca(u,i,r){i.add(u.currentTarget.name),r()}var xr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),hr=Z('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function yr(u,i){ye(i,!0);let r=_(""),v=_(!0),h=gr(),N=_(d(h.get())),j=_(!1),E=A(()=>e(j)),k=A(()=>He(e(N),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const g=new Set,C=Re(()=>{h({username:e(r),active:e(v)},Array.from(g)).done(R=>{n(N,d(R))}),g.clear()},300);function V(){g.add("username"),g.add("active"),C(),C.flush()}async function z(R){R.preventDefault();try{n(j,!0),n(r,d(e(r).trim())),V(),e(N).isValid()&&i.onCreate(await Ie.createUser({active:e(v),username:e(r)},i.applicationId))}catch(W){await qe(W)}finally{n(j,!1)}}var T=hr(),S=t(T),D=t(S),y=t(D,!0);s(()=>f(y,Aa())),a(D);var c=l(D,2);te(c);const w=A(()=>`w-full ${e(k)("username")??""}`);s(()=>se(c,"placeholder",ja())),c.__input=[Ca,g,C];var m=l(c,2);ie(m,{name:"username",get result(){return e(N)}}),a(S);var p=l(S,2),O=t(p),F=t(O);s(()=>f(F,`${za()??""} `));var q=l(F);te(q);const I=A(()=>ia(e(k)("active")));q.__input=[Ca,g,C],a(O);var M=l(O,2);ie(M,{name:"active",get result(){return e(N)}}),a(p);var U=l(p,2),o=t(U),P=t(o);{var Q=R=>{var W=xr(),le=t(W),ue=t(le);Te(ue),a(le),a(W),L(R,W)};me(P,R=>{e(j)&&R(Q)})}var ee=l(P);s(()=>f(ee,` ${ot()??""}`)),a(o),a(U),a(T),s(()=>{re(c,e(w)),re(q,e(I)),o.disabled=e(E)}),ze("submit",T,z),oe(c,()=>e(r),R=>n(r,R)),Me(q,()=>e(v),R=>n(v,R)),L(u,T),we()}Ne(["input"]);const wr=()=>Ge((u={},i)=>{i.length&&(Ze(i),ce("usernameConfirm",De(),()=>{be(u.usernameConfirm).isNotBlank()}),ce("usernameConfirm",Ta(),()=>{be(u.username===u.usernameConfirm).isTruthy()}))});function kr(u,i,r){i.add(u.currentTarget.name),r()}var Ir=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Nr=Z('<form><p> </p> <div class="mb-2"><input type="text" name="usernameConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Er(u,i){ye(i,!0);let r=_(""),v=wr(),h=_(d(v.get())),N=_(!1),j=A(()=>e(N)),E=A(()=>He(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const k=new Set,g=Re(()=>{v({username:i.username,usernameConfirm:e(r)},Array.from(k)).done(I=>{n(h,d(I))}),k.clear()},300);function C(){k.add("name"),g(),g.flush()}async function V(I){I.preventDefault();try{n(N,!0),n(r,d(e(r).trim())),C(),e(h).isValid()&&(await Ie.deleteUser(i.userId,i.applicationId),i.onDelete())}catch(M){await qe(M)}finally{n(N,!1)}}var z=Nr(),T=t(z),S=t(T,!0);s(()=>f(S,vt())),a(T);var D=l(T,2),y=t(D);te(y);const c=A(()=>`w-full ${e(E)("usernameConfirm")??""}`);s(()=>se(y,"placeholder",ut({username:i.username}))),y.__input=[kr,k,g];var w=l(y,2);ie(w,{name:"usernameConfirm",get result(){return e(h)}}),a(D);var m=l(D,2),p=t(m),O=t(p);{var F=I=>{var M=Ir(),U=t(M),o=t(U);Te(o),a(U),a(M),L(I,M)};me(O,I=>{e(N)&&I(F)})}var q=l(O);s(()=>f(q,` ${_t()??""}`)),a(p),a(m),a(z),s(()=>{re(y,e(c)),p.disabled=e(j)}),ze("submit",z,V),oe(y,()=>e(r),I=>n(r,I)),L(u,z),we()}Ne(["input"]);const Cr=()=>Ge((u,i)=>{i.length&&(Ze(i),ba(!u.profilePicture,()=>{ce("profilePicture",Ea(),()=>{be(u.profilePicture).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),ba(!u.website,()=>{ce("website",Ea(),()=>{be(u.website).isURL({require_tld:!1,require_protocol:!1,require_host:!1,require_port:!1,require_valid_protocol:!1,allow_underscores:!0,allow_trailing_dot:!0,allow_protocol_relative_urls:!0,allow_fragments:!0,allow_query_components:!0})})}),ba(!u.birthdate,()=>{ce("birthdate",De(),()=>{be(u.birthdate).isNotBlank()})}))});function he(u,i,r){i.add(u.currentTarget.name),r()}function Ur(u,i,r,v,h){i.add(u.currentTarget.name),r(),v(new Date(e(h)))}var Pr=Z('<div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="name"> </label> <input type="text" name="name"> <!></div> <div class="ml-1 flex-grow"><label for="nickname"> </label> <input type="text" name="nickname"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="givenName"> </label> <input type="text" name="givenName"> <!></div> <div class="mx-1 flex-grow"><label for="middleName"> </label> <input type="text" name="middleName"> <!></div> <div class="ml-1 flex-grow"><label for="familyName"> </label> <input type="text" name="familyName"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="profilePicture"> </label> <input type="text" name="profilePicture"> <!></div> <div class="ml-1 flex-grow"><label for="website"> </label> <input type="text" name="website"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="gender"> </label> <select name="gender"><option> </option><option> </option></select> <!></div> <div class="ml-1 flex-grow"><label for="birthdate"> </label> <input type="date" name="birthdate"> <!></div></div> <div class="flex flex-row mb-2"><div class="mr-1 flex-grow"><label for="zoneInfo"> </label> <input type="text" name="zoneInfo"> <!></div> <div class="ml-1 flex-grow"><label for="locale"> </label> <input type="text" name="locale"> <!></div></div> <div class="mb-2"><label for="address"> </label> <input type="text" name="address"> <!></div>',1);function Sr(u,i){var Ia;ye(i,!0);let r=$(i,"name",15),v=$(i,"givenName",15),h=$(i,"familyName",15),N=$(i,"middleName",15),j=$(i,"nickname",15),E=$(i,"profilePicture",15),k=$(i,"website",15),g=$(i,"gender",15),C=$(i,"birthdate",15),V=$(i,"zoneInfo",15),z=$(i,"locale",15),T=$(i,"address",15),S=$(i,"valid",15,!1),D=_(d((Ia=C())==null?void 0:Ia.toISOString().substring(0,10))),y=Cr(),c=_(d(y.get())),w=A(()=>He(e(c),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const m=new Set,p=Re(()=>{y({name:r(),givenName:v(),familyName:h(),middleName:N(),nickname:j(),profilePicture:E(),website:k(),gender:g(),birthdate:C(),zoneInfo:V(),locale:z(),address:T()},Array.from(m)).done(ca=>{n(c,d(ca)),S(e(c).isValid())}),m.clear()},300);function O(){m.add("name"),m.add("givenName"),m.add("familyName"),m.add("middleName"),m.add("nickname"),m.add("profilePicture"),m.add("website"),m.add("gender"),m.add("birthdate"),m.add("zoneInfo"),m.add("locale"),m.add("address"),p(),p.flush()}ha(O);var F=Pr(),q=ke(F),I=t(q),M=t(I),U=t(M,!0);s(()=>f(U,Nt())),a(M);var o=l(M,2);te(o);const P=A(()=>`w-full ${e(w)("name")??""}`);s(()=>se(o,"placeholder",mt())),o.__input=[he,m,p];var Q=l(o,2);ie(Q,{name:"name",get result(){return e(c)}}),a(I);var ee=l(I,2),R=t(ee),W=t(R,!0);s(()=>f(W,Et())),a(R);var le=l(R,2);te(le);const ue=A(()=>`w-full ${e(w)("nickname")??""}`);s(()=>se(le,"placeholder",ft())),le.__input=[he,m,p];var fe=l(le,2);ie(fe,{name:"nickname",get result(){return e(c)}}),a(ee),a(q);var b=l(q,2),x=t(b),B=t(x),H=t(B,!0);s(()=>f(H,Ct())),a(B);var J=l(B,2);te(J);const ve=A(()=>`w-full ${e(w)("givenName")??""}`);s(()=>se(J,"placeholder",ct())),J.__input=[he,m,p];var ne=l(J,2);ie(ne,{name:"givenName",get result(){return e(c)}}),a(x);var G=l(x,2),X=t(G),Y=t(X,!0);s(()=>f(Y,Ut())),a(X);var ae=l(X,2);te(ae);const K=A(()=>`w-full ${e(w)("middleName")??""}`);s(()=>se(ae,"placeholder",bt())),ae.__input=[he,m,p];var de=l(ae,2);ie(de,{name:"middleName",get result(){return e(c)}}),a(G);var pe=l(G,2),Ee=t(pe),na=t(Ee,!0);s(()=>f(na,Pt())),a(Ee);var Ce=l(Ee,2);te(Ce);const Ye=A(()=>`w-full ${e(w)("familyName")??""}`);s(()=>se(Ce,"placeholder",pt())),Ce.__input=[he,m,p];var sa=l(Ce,2);ie(sa,{name:"familyName",get result(){return e(c)}}),a(pe),a(b);var ge=l(b,2),_e=t(ge),Pe=t(_e),Be=t(Pe,!0);s(()=>f(Be,St())),a(Pe);var xe=l(Pe,2);te(xe);const da=A(()=>`w-full ${e(w)("profilePicture")??""}`);s(()=>se(xe,"placeholder",gt())),xe.__input=[he,m,p];var $e=l(xe,2);ie($e,{name:"profilePicture",get result(){return e(c)}}),a(_e);var Je=l(_e,2),Ke=t(Je),Qe=t(Ke,!0);s(()=>f(Qe,Dt())),a(Ke);var Se=l(Ke,2);te(Se);const ea=A(()=>`w-full ${e(w)("website")??""}`);s(()=>se(Se,"placeholder",xt())),Se.__input=[he,m,p];var aa=l(Se,2);ie(aa,{name:"website",get result(){return e(c)}}),a(Je),a(ge);var We=l(ge,2),je=t(We),Ue=t(je),Ra=t(Ue,!0);s(()=>f(Ra,jt())),a(Ue);var Ae=l(Ue,2);const Ga=A(()=>`w-full ${e(w)("gender")??""}`);s(()=>se(Ae,"placeholder",ht())),Ae.__input=[he,m,p];var Xe=t(Ae);Xe.value=(Xe.__value="male")==null?"":"male";var Za=t(Xe,!0);s(()=>f(Za,At())),a(Xe);var ta=l(Xe);ta.value=(ta.__value="female")==null?"":"female";var Ha=t(ta,!0);s(()=>f(Ha,zt())),a(ta),a(Ae);var Ja=l(Ae,2);ie(Ja,{name:"gender",get result(){return e(c)}}),a(je);var ya=l(je,2),oa=t(ya),Ka=t(oa,!0);s(()=>f(Ka,Tt())),a(oa);var Ve=l(oa,2);te(Ve);const Qa=A(()=>`w-full ${e(w)("birthdate")??""}`);s(()=>se(Ve,"placeholder",yt())),Ve.__input=[Ur,m,p,C,D];var Wa=l(Ve,2);ie(Wa,{name:"birthdate",get result(){return e(c)}}),a(ya),a(We);var ua=l(We,2),va=t(ua),_a=t(va),Xa=t(_a,!0);s(()=>f(Xa,qt())),a(_a);var Fe=l(_a,2);te(Fe);const Ya=A(()=>`w-full ${e(w)("zoneInfo")??""}`);s(()=>se(Fe,"placeholder",wt())),Fe.__input=[he,m,p];var $a=l(Fe,2);ie($a,{name:"zoneInfo",get result(){return e(c)}}),a(va);var wa=l(va,2),ma=t(wa),et=t(ma,!0);s(()=>f(et,Bt())),a(ma);var Oe=l(ma,2);te(Oe);const at=A(()=>`w-full ${e(w)("locale")??""}`);s(()=>se(Oe,"placeholder",kt())),Oe.__input=[he,m,p];var tt=l(Oe,2);ie(tt,{name:"locale",get result(){return e(c)}}),a(wa),a(ua);var ka=l(ua,2),fa=t(ka),rt=t(fa,!0);s(()=>f(rt,Vt())),a(fa);var Le=l(fa,2);te(Le);const it=A(()=>`w-full ${e(w)("address")??""}`);s(()=>se(Le,"placeholder",It())),Le.__input=[he,m,p];var lt=l(Le,2);return ie(lt,{name:"address",get result(){return e(c)}}),a(ka),s(()=>{re(o,e(P)),re(le,e(ue)),re(J,e(ve)),re(ae,e(K)),re(Ce,e(Ye)),re(xe,e(da)),re(Se,e(ea)),re(Ae,e(Ga)),re(Ve,e(Qa)),re(Fe,e(Ya)),re(Oe,e(at)),re(Le,e(it))}),oe(o,r),oe(le,j),oe(J,v),oe(ae,N),oe(Ce,h),oe(xe,E),oe(Se,k),br(Ae,g),oe(Ve,()=>e(D),ca=>n(D,ca)),oe(Fe,V),oe(Oe,z),oe(Le,T),L(u,F),we({validateAll:O})}Ne(["input"]);const Dr=()=>Ge((u,i)=>{i.length&&(Ze(i),ce("email",De(),()=>{be(u.email).isNotBlank()}))});function pa(u,i,r){i.add(u.currentTarget.name),r()}var jr=Z('<div class="mb-2"><label for="email"> </label> <input type="email" name="email"> <!></div> <div class="flex flex-row mb-2"><div><label for="primary"> <input type="checkbox" name="primary"></label> <!></div> <div class="ml-2"><label for="verified"> <input type="checkbox" name="verified"></label> <!></div></div>',1);function Ma(u,i){ye(i,!0);let r=$(i,"email",15,""),v=$(i,"primary",15,!1),h=$(i,"verified",15,!1),N=$(i,"valid",15,!1),j=Dr(),E=_(d(j.get())),k=A(()=>He(e(E),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const g=new Set,C=Re(()=>{j({email:r(),primary:v(),verified:h()},Array.from(g)).done(W=>{n(E,d(W)),N(e(E).isValid())}),g.clear()},300);function V(){g.add("email"),g.add("primary"),g.add("verified"),C(),C.flush()}ha(V);var z=jr(),T=ke(z),S=t(T),D=t(S,!0);s(()=>f(D,Ot())),a(S);var y=l(S,2);te(y);const c=A(()=>`w-full ${e(k)("email")??""}`);s(()=>se(y,"placeholder",Ft())),y.__input=[pa,g,C];var w=l(y,2);ie(w,{name:"email",get result(){return e(E)}}),a(T);var m=l(T,2),p=t(m),O=t(p),F=t(O);s(()=>f(F,`${qa()??""} `));var q=l(F);te(q);const I=A(()=>ia(e(k)("primary")));q.__input=[pa,g,C],a(O);var M=l(O,2);ie(M,{name:"primary",get result(){return e(E)}}),a(p);var U=l(p,2),o=t(U),P=t(o);s(()=>f(P,`${Ba()??""} `));var Q=l(P);te(Q);const ee=A(()=>ia(e(k)("verified")));Q.__input=[pa,g,C],a(o);var R=l(o,2);return ie(R,{name:"verified",get result(){return e(E)}}),a(U),a(m),s(()=>{re(y,e(c)),re(q,e(I)),re(Q,e(ee))}),oe(y,r),Me(q,v),Me(Q,h),L(u,z),we({validateAll:V})}Ne(["input"]);const Ar=()=>Ge((u={},i)=>{i.length&&(Ze(i),ce("emailConfirm",De(),()=>{be(u.emailConfirm).isNotBlank()}),ce("emailConfirm",Ta(),()=>{be(u.email===u.emailConfirm).isTruthy()}))});function zr(u,i,r){i.add(u.currentTarget.name),r()}var Tr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),qr=Z('<form><p> </p> <div class="mb-2"><input type="text" name="emailConfirm"> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn danger flex flex-shrink"><!> </button></div></form>');function Br(u,i){ye(i,!0);let r=_(""),v=Ar(),h=_(d(v.get())),N=_(!1),j=A(()=>e(N)),E=A(()=>He(e(h),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const k=new Set,g=Re(()=>{v({email:i.email,emailConfirm:e(r)},Array.from(k)).done(I=>{n(h,d(I))}),k.clear()},300);function C(){k.add("email"),g(),g.flush()}async function V(I){I.preventDefault();try{n(N,!0),n(r,d(e(r).trim())),C(),e(h).isValid()&&(await Ie.deleteUserEmail(i.userId,i.emailId,i.applicationId),i.onDelete())}catch(M){await qe(M)}finally{n(N,!1)}}var z=qr(),T=t(z),S=t(T,!0);s(()=>f(S,Mt())),a(T);var D=l(T,2),y=t(D);te(y);const c=A(()=>`w-full ${e(E)("emailConfirm")??""}`);s(()=>se(y,"placeholder",Lt({email:i.email}))),y.__input=[zr,k,g];var w=l(y,2);ie(w,{name:"emailConfirm",get result(){return e(h)}}),a(D);var m=l(D,2),p=t(m),O=t(p);{var F=I=>{var M=Tr(),U=t(M),o=t(U);Te(o),a(U),a(M),L(I,M)};me(O,I=>{e(N)&&I(F)})}var q=l(O);s(()=>f(q,` ${Rt()??""}`)),a(p),a(m),a(z),s(()=>{re(y,e(c)),p.disabled=e(j)}),ze("submit",z,V),oe(y,()=>e(r),I=>n(r,I)),L(u,z),we()}Ne(["input"]);function Ua(u,i){u.preventDefault(),u.stopPropagation(),n(i,!e(i))}function Vr(u,i){u.preventDefault(),u.stopPropagation(),n(i,!e(i))}var Fr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Or=Z("<h3> </h3>"),Lr=Z('<div class="flex flex-row justify-between items-center mb-2"><div class="flex flex-col"><p class="m-0"> </p> <div class="flex flex-row items-center"><label for="primary"> <input type="checkbox" name="primary" readonly=""></label> <label for="verified"> <input type="checkbox" name="verified" readonly=""></label></div></div> <div class="flex flex-row items-center"><button class="btn primary icon"><!></button> <button class="btn danger icon ms-2"><!></button></div></div> <form><!> <div class="flex flex-row justify-end"><div class="flex flex-row"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></div></form> <!>',1);function Pa(u,i){ye(i,!0);let r=$(i,"user",15),v=$(i,"email",15),h=_(d(v().email)),N=_(d(v().primary)),j=_(d(v().verified)),E=_(!1),k=_(!1);function g(){if(v().primary)r(r().email=null,!0);else{const G=r().emails.findIndex(X=>X.id===v().id);r().emails.splice(G,1)}}let C=_(void 0),V=_(!1),z=_(!1),T=A(()=>e(z)||!e(V));async function S(G){var X;if(G.preventDefault(),(X=e(C))==null||X.validateAll(),e(V))try{n(z,!0);const Y=await Ie.updateUserEmail(r().id,v().id,{email:e(h),primary:e(N),verified:e(j)},i.applicationId);if(n(E,!1),v().primary!==Y.primary){if(r().email&&r().email.id!==Y.id){const ae=r().emails.findIndex(K=>K.id===Y.id);r().emails.splice(ae,1),r(r().email.primary=!1,!0),r().emails.push(r().email)}r(r().email=Y,!0)}else{const ae=r().emails.findIndex(K=>K.id===Y.id);ae!==-1&&r(r().emails[ae]=Y,!0)}v(Y)}catch(Y){qe(Y)}finally{n(z,!1)}}var D=Lr(),y=ke(D),c=t(y),w=t(c),m=t(w,!0);a(w);var p=l(w,2),O=t(p),F=t(O);s(()=>f(F,`${qa()??""} `));var q=l(F);te(q),a(O);var I=l(O,2),M=t(I);s(()=>f(M,`${Ba()??""} `));var U=l(M);te(U),a(I),a(p),a(c);var o=l(c,2),P=t(o);P.__click=[Ua,E];var Q=t(P);Fa(Q,{}),a(P);var ee=l(P,2);ee.__click=[Vr,k];var R=t(ee);Oa(R,{}),a(ee),a(o),a(y);var W=l(y,2),le=t(W);la(Ma(le,{get email(){return e(h)},set email(G){n(h,d(G))},get primary(){return e(N)},set primary(G){n(N,d(G))},get verified(){return e(j)},set verified(G){n(j,d(G))},get valid(){return e(V)},set valid(G){n(V,d(G))}}),G=>n(C,d(G)),()=>e(C));var ue=l(le,2),fe=t(ue),b=t(fe);b.__click=[Ua,E];var x=t(b,!0);s(()=>f(x,Zt())),a(b);var B=l(b,2),H=t(B);{var J=G=>{var X=Fr(),Y=t(X),ae=t(Y);Te(ae),a(Y),a(X),L(G,X)};me(H,G=>{e(z)&&G(J)})}var ve=l(H);s(()=>f(ve,` ${Ht()??""}`)),a(B),a(fe),a(ue),a(W);var ne=l(W,2);ra(ne,{get open(){return e(k)},set open(X){n(k,d(X))},title:X=>{var Y=Or(),ae=t(Y,!0);s(()=>f(ae,Gt({email:v().email}))),a(Y),L(X,Y)},children:(X,Y)=>{var ae=ga(),K=ke(ae);{var de=pe=>{Br(pe,{get applicationId(){return i.applicationId},get userId(){return r().id},get emailId(){return v().id},get email(){return v().email},onDelete:g})};me(K,pe=>{e(k)&&pe(de)})}L(X,ae)},$$slots:{title:!0,default:!0}}),s(()=>{xa(y,"hidden",e(E)),f(m,v().email),xa(W,"hidden",!e(E)),B.disabled=e(T)}),Me(q,()=>v().primary,G=>v(v().primary=G,!0)),Me(U,()=>v().verified,G=>v(v().verified=G,!0)),ze("submit",W,S),L(u,D),we()}Ne(["click"]);function Mr(u,i){u.preventDefault(),n(i,!0)}function Rr(u,i){u.stopPropagation(),u.preventDefault(),i()}var Gr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Zr=Z('<form><!> <div class="flex flex-row justify-end"><button class="btn secondary flex flex-shrink"> </button> <button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>'),Hr=Z('<div class="flex flex-row justify-between"><h5> </h5> <div class="flex flex-col justify-center"><button class="btn primary icon"><!></button></div></div> <!> <hr class="my-2"> <div class="flex flex-col"><!> <!></div>',1);function Jr(u,i){ye(i,!0);let r=$(i,"user",15),v=_(void 0),h=_(!1),N=_(""),j=_(!1),E=_(!1),k=_(!1),g=_(!1),C=A(()=>e(g)||!e(k));function V(){n(h,!1),n(N,""),n(j,!1),n(E,!1)}async function z(U){var o;if(U.preventDefault(),(o=e(v))==null||o.validateAll(),e(k))try{n(g,!0);const P=await Ie.createUserEmail(r().id,{email:e(N),primary:e(j),verified:e(E)},i.applicationId);V(),P.primary?(r().email&&r().emails.push(r().email),r(r().email=P,!0)):r().emails.push(P)}catch(P){qe(P)}finally{n(g,!1)}}var T=Hr(),S=ke(T),D=t(S),y=t(D,!0);s(()=>f(y,Jt())),a(D);var c=l(D,2),w=t(c);w.__click=[Mr,h];var m=t(w);La(m,{}),a(w),a(c),a(S);var p=l(S,2);{var O=U=>{var o=Zr(),P=t(o);la(Ma(P,{get email(){return e(N)},set email(b){n(N,d(b))},get primary(){return e(j)},set primary(b){n(j,d(b))},get verified(){return e(E)},set verified(b){n(E,d(b))},get valid(){return e(k)},set valid(b){n(k,d(b))}}),b=>n(v,d(b)),()=>e(v));var Q=l(P,2),ee=t(Q);ee.__click=[Rr,V];var R=t(ee,!0);s(()=>f(R,Kt())),a(ee);var W=l(ee,2),le=t(W);{var ue=b=>{var x=Gr(),B=t(x),H=t(B);Te(H),a(B),a(x),L(b,x)};me(le,b=>{e(g)&&b(ue)})}var fe=l(le);s(()=>f(fe,` ${Qt()??""}`)),a(W),a(Q),a(o),s(()=>W.disabled=e(C)),ze("submit",o,z),L(U,o)};me(p,U=>{e(h)&&U(O)})}var F=l(p,4),q=t(F);{var I=U=>{Pa(U,{get applicationId(){return i.applicationId},get email(){return r().email},get user(){return r()},set user(o){r(o)}})};me(q,U=>{r().email&&U(I)})}var M=l(q,2);Va(M,17,()=>r().emails,U=>U.id,(U,o)=>{Pa(U,{get applicationId(){return i.applicationId},get email(){return e(o)},get user(){return r()},set user(P){r(P)}})}),a(F),L(u,T),we()}Ne(["click"]);var Kr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),Qr=Z('<form><!> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form>');function Wr(u,i){ye(i,!0);let r=$(i,"user",15),v=_(d(r().info.address)),h=_(d(r().info.familyName)),N=_(d(r().info.gender)),j=_(d(r().info.givenName)),E=_(d(r().info.locale)),k=_(d(r().info.middleName)),g=_(d(r().info.name)),C=_(d(r().info.nickname)),V=_(d(r().info.profilePicture)),z=_(d(r().info.website)),T=_(d(r().info.birthdate)),S=_(d(r().info.zoneInfo)),D=_(void 0),y=_(!1),c=_(!1),w=A(()=>e(c)||!e(y));async function m(o){var P;o.preventDefault();try{n(c,!0),(P=e(D))==null||P.validateAll(),e(y)&&r(r().info=await Ie.updateUserInfo(r().id,{name:e(g),givenName:e(j),familyName:e(h),middleName:e(k),nickname:e(C),profilePicture:e(V),website:e(z),gender:e(N),birthdate:e(T),zoneInfo:e(S),locale:e(E),address:e(v)},i.applicationId),!0)}catch(Q){await qe(Q)}finally{n(c,!1)}}var p=Qr(),O=t(p);la(Sr(O,{get address(){return e(v)},set address(o){n(v,d(o))},get familyName(){return e(h)},set familyName(o){n(h,d(o))},get gender(){return e(N)},set gender(o){n(N,d(o))},get givenName(){return e(j)},set givenName(o){n(j,d(o))},get locale(){return e(E)},set locale(o){n(E,d(o))},get middleName(){return e(k)},set middleName(o){n(k,d(o))},get name(){return e(g)},set name(o){n(g,d(o))},get nickname(){return e(C)},set nickname(o){n(C,d(o))},get profilePicture(){return e(V)},set profilePicture(o){n(V,d(o))},get birthdate(){return e(T)},set birthdate(o){n(T,d(o))},get website(){return e(z)},set website(o){n(z,d(o))},get zoneInfo(){return e(S)},set zoneInfo(o){n(S,d(o))},get valid(){return e(y)},set valid(o){n(y,d(o))}}),o=>n(D,d(o)),()=>e(D));var F=l(O,2),q=t(F),I=t(q);{var M=o=>{var P=Kr(),Q=t(P),ee=t(Q);Te(ee),a(Q),a(P),L(o,P)};me(I,o=>{e(c)&&o(M)})}var U=l(I);s(()=>f(U,` ${Wt()??""}`)),a(q),a(F),a(p),s(()=>q.disabled=e(w)),ze("submit",p,m),L(u,p),we()}const Xr=()=>Ge((u,i)=>{i.length&&(Ze(i),ce("username",De(),()=>{be(u.username).isNotBlank()}),ce("active",De(),()=>{be(u.active).isNotBlank()}))});function Sa(u,i,r){i.add(u.currentTarget.name),r()}var Yr=Z('<div class="mr-2 flex flex-row justify-center"><div class="inline-block h-6 w-6"><!></div></div>'),$r=Z('<form><div class="mb-2"><label for="username"> </label> <input type="text" name="username"> <!></div> <div class="mb-2"><label for="active" class="m-0"> <input type="checkbox" name="active"></label> <!></div> <div class="flex flex-row justify-end"><button type="submit" class="btn primary flex flex-shrink"><!> </button></div></form> <hr class="my-2"> <!> <hr class="my-2"> <!>',1);function ei(u,i){ye(i,!0);let r=$(i,"user",15),v=_(d(r().username)),h=_(d(r().active)),N=d(r().info.address),j=d(r().info.familyName),E=d(r().info.gender),k=d(r().info.givenName),g=d(r().info.locale),C=d(r().info.middleName),V=d(r().info.name),z=d(r().info.nickname),T=d(r().info.profilePicture),S=d(r().info.website),D=d(r().info.birthdate),y=d(r().info.zoneInfo),c=Xr(),w=_(d(c.get())),m=_(!1),p=A(()=>e(m)),O=A(()=>He(e(w),{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}));const F=new Set,q=Re(()=>{c({username:e(v),active:e(h)},Array.from(F)).done(K=>{n(w,d(K))}),F.clear()},300);function I(){F.add("username"),F.add("active"),q(),q.flush()}async function M(K){K.preventDefault();try{if(n(m,!0),n(v,d(e(v).trim())),I(),e(w).isValid()){const de=await Ie.updateUser(r().id,{username:e(v),active:e(h)},i.applicationId);de.info=await Ie.updateUserInfo(de.id,{name:V,givenName:k,familyName:j,middleName:C,nickname:z,profilePicture:T,website:S,gender:E,birthdate:D,zoneInfo:y,locale:g,address:N},i.applicationId),i.onEdit(await Ie.updateUser(r().id,{username:e(v),active:e(h)},i.applicationId))}}catch(de){await qe(de)}finally{n(m,!1)}}var U=$r(),o=ke(U),P=t(o),Q=t(P),ee=t(Q,!0);s(()=>f(ee,Aa())),a(Q);var R=l(Q,2);te(R);const W=A(()=>`w-full ${e(O)("username")??""}`);s(()=>se(R,"placeholder",ja())),R.__input=[Sa,F,q];var le=l(R,2);ie(le,{name:"username",get result(){return e(w)}}),a(P);var ue=l(P,2),fe=t(ue),b=t(fe);s(()=>f(b,`${za()??""} `));var x=l(b);te(x);const B=A(()=>ia(e(O)("active")));x.__input=[Sa,F,q],a(fe);var H=l(fe,2);ie(H,{name:"active",get result(){return e(w)}}),a(ue);var J=l(ue,2),ve=t(J),ne=t(ve);{var G=K=>{var de=Yr(),pe=t(de),Ee=t(pe);Te(Ee),a(pe),a(de),L(K,de)};me(ne,K=>{e(m)&&K(G)})}var X=l(ne);s(()=>f(X,` ${Xt()??""}`)),a(ve),a(J),a(o);var Y=l(o,4);Jr(Y,{get applicationId(){return i.applicationId},get user(){return r()},set user(K){r(K)}});var ae=l(Y,4);Wr(ae,{get applicationId(){return i.applicationId},get user(){return r()},set user(K){r(K)}}),s(()=>{re(R,e(W)),re(x,e(B)),ve.disabled=e(p)}),ze("submit",o,M),oe(R,()=>e(v),K=>n(v,K)),Me(x,()=>e(h),K=>n(h,K)),L(u,U),we()}Ne(["input"]);const Da=20;var ai=Z('<button class="btn secondary icon lg"><!></button>'),ti=Z('<button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button> <button class="flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"><!><span class="ms-4"> </span></button>',1),ri=Z('<tr class="group"><td> </td><td> </td><td><!></td><td> </td><td> </td><td class="flex justify-end"><div class="flex flex-shrink"><!></div></td></tr>'),ii=Z("<h3> </h3>"),li=Z("<h3> </h3>"),ni=Z("<h3> </h3>"),si=Z('<table class="table-auto w-full"><thead><tr class="text-left border-b"><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody></tbody></table> <!> <!> <!>',1);function di(u,i){ye(i,!0);let r=$(i,"users",31,()=>d([])),v=_(0),h=_(!0),N=_(!1);ha(j);async function j(){if(!e(h)||e(N))return;let b;n(N,!0);try{b=await Ie.allUsers(e(v)*Da,Da,i.applicationId)}finally{n(N,!1)}n(h,d(b.hasMore)),n(v,e(v)+1),r().push(...b.items)}let E=_(!1);function k(){n(E,!0)}function g(b){r().unshift(b),n(E,!1)}let C=_(void 0),V=_(!1);function z(b){return()=>{n(C,d(b)),n(V,!0)}}function T(b){const x=r().findIndex(B=>B.id===(b==null?void 0:b.id));x!==-1&&r(r()[x]=b,!0),n(C,void 0),n(V,!1)}let S=_(void 0),D=_(!1);function y(b){return()=>{n(S,d(b)),n(D,!0)}}function c(){const b=r().findIndex(x=>{var B;return x.id===((B=e(S))==null?void 0:B.id)});b!==-1&&r().splice(b,1),n(S,void 0),n(D,!1)}var w=si(),m=ke(w),p=t(m),O=t(p),F=t(O),q=t(F,!0);s(()=>f(q,er())),a(F);var I=l(F),M=t(I,!0);s(()=>f(M,ar())),a(I);var U=l(I),o=t(U,!0);s(()=>f(o,tr())),a(U);var P=l(U),Q=t(P,!0);s(()=>f(Q,rr())),a(P);var ee=l(P),R=t(ee,!0);s(()=>f(R,ir())),a(ee),nt(),a(O),a(p);var W=l(p);Va(W,23,r,b=>b.id,(b,x,B)=>{var H=ri(),J=t(H),ve=t(J,!0);a(J);var ne=l(J),G=t(ne,!0);a(ne);var X=l(ne),Y=t(X);{var ae=ge=>{var _e=Na();s(()=>f(_e,lr())),L(ge,_e)},K=ge=>{var _e=Na();s(()=>f(_e,nr())),L(ge,_e)};me(Y,ge=>{e(x).active?ge(ae):ge(K,!1)})}a(X);var de=l(X),pe=t(de,!0);s(()=>f(pe,e(x).updatedAt.toLocaleString())),a(de);var Ee=l(de),na=t(Ee,!0);s(()=>f(na,e(x).createdAt.toLocaleString())),a(Ee);var Ce=l(Ee),Ye=t(Ce),sa=t(Ye);_r(sa,{position:"top-right",anchorPosition:"bottom-right",button:_e=>{var Pe=ai(),Be=t(Pe);cr(Be,{}),a(Pe),L(_e,Pe)},children:(_e,Pe)=>{var Be=ti(),xe=ke(Be),da=A(()=>z(e(x)));xe.__click=function(...je){var Ue;(Ue=e(da))==null||Ue.apply(this,je)};var $e=t(xe);Fa($e,{});var Je=l($e),Ke=t(Je,!0);s(()=>f(Ke,sr())),a(Je),a(xe);var Qe=l(xe,2),Se=A(()=>y(e(x)));Qe.__click=function(...je){var Ue;(Ue=e(Se))==null||Ue.apply(this,je)};var ea=t(Qe);Oa(ea,{});var aa=l(ea),We=t(aa,!0);s(()=>f(We,dr())),a(aa),a(Qe),L(_e,Be)},$$slots:{button:!0,default:!0}}),a(Ye),a(Ce),a(H),s(()=>{xa(H,"border-b",e(B)<r().length-1),f(ve,e(x).id),f(G,e(x).username)}),L(b,H)}),a(W),a(m);var le=l(m,2);ra(le,{get open(){return e(E)},set open(x){n(E,d(x))},title:x=>{var B=ii(),H=t(B,!0);s(()=>f(H,or())),a(B),L(x,B)},children:(x,B)=>{yr(x,{get applicationId(){return i.applicationId},onCreate:g})},$$slots:{title:!0,default:!0}});var ue=l(le,2);ra(ue,{get open(){return e(V)},set open(x){n(V,d(x))},title:x=>{var B=li(),H=t(B,!0);s(()=>{var J;return f(H,Yt({username:((J=e(C))==null?void 0:J.username)||""}))}),a(B),L(x,B)},children:(x,B)=>{var H=ga(),J=ke(H);{var ve=ne=>{ei(ne,{get applicationId(){return i.applicationId},get user(){return e(C)},onEdit:T})};me(J,ne=>{e(C)&&ne(ve)})}L(x,H)},$$slots:{title:!0,default:!0}});var fe=l(ue,2);return ra(fe,{get open(){return e(D)},set open(x){n(D,d(x))},title:x=>{var B=ni(),H=t(B,!0);s(()=>{var J;return f(H,$t({username:((J=e(S))==null?void 0:J.username)||""}))}),a(B),L(x,B)},children:(x,B)=>{var H=ga(),J=ke(H);{var ve=ne=>{Er(ne,{get applicationId(){return i.applicationId},get userId(){return e(S).id},get username(){return e(S).username},onDelete:c})};me(J,ne=>{e(S)&&ne(ve)})}L(x,H)},$$slots:{title:!0,default:!0}}),L(u,w),we({loadMore:j,onCreate:k})}Ne(["click"]);var oi=Z('<div class="container mx-auto my-4"><div class="bg-white dark:bg-gray-800 shadow-lg p-4 rounded-lg"><div class="flex flex-grow justify-between"><a class="flex flex-row items-center"><button class="btn primary icon"><!></button> <span class="ms-2"> </span></a> <button class="btn primary icon lg"><!></button></div> <!></div></div>');function Ei(u,i){ye(i,!0);let r=_(void 0);const v=mr(),[h,N]=v;var j=oi();dt(c=>{s(()=>st.title=ur())});var E=t(j),k=t(E),g=t(k);s(()=>se(g,"href",h(`${fr}/`,void 0)));var C=t(g),V=t(C);pr(V,{}),a(C);var z=l(C,2),T=t(z,!0);s(()=>f(T,vr())),a(z),a(g);var S=l(g,2);S.__click=function(...c){var w,m;(m=(w=e(r))==null?void 0:w.onCreate)==null||m.apply(this,c)};var D=t(S);La(D,{}),a(S),a(k);var y=l(k,2);la(di(y,{get applicationId(){return i.data.applicationId}}),c=>n(r,d(c)),()=>e(r)),a(E),a(j),L(u,j),we()}Ne(["click"]);export{Ei as component};
