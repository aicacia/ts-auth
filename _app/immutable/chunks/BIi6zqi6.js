var j=Object.defineProperty;var q=(r,e,t)=>e in r?j(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var h=(r,e,t)=>q(r,typeof e!="symbol"?e+"":e,t);import{b as P,F as v,h as g,e as C,g as b,u as $}from"./wkzzbBdv.js";const T=!0,F=T,I="http://localhost:3000".replace(/\/+$/,"");class O{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:I}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||S}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const U=new O,w=class w{constructor(e=U){h(this,"middleware");h(this,"fetchApi",async(e,t)=>{let n={url:e,init:t};for(const s of this.middleware)s.pre&&(n=await s.pre({fetch:this.fetchApi,...n})||n);let o;try{o=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(s){for(const u of this.middleware)u.onError&&(o=await u.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:s,response:o?o.clone():void 0})||o);if(o===void 0)throw s instanceof Error?new K(s,"The request failed and the interceptors did not return an alternative response"):s}for(const s of this.middleware)s.post&&(o=await s.post({fetch:this.fetchApi,url:n.url,init:n.init,response:o.clone()})||o);return o});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){const t=e.map(n=>({pre:n}));return this.withMiddleware(...t)}withPostMiddleware(...e){const t=e.map(n=>({post:n}));return this.withMiddleware(...t)}isJsonMime(e){return e?w.jsonRegex.test(e):!1}async request(e,t){const{url:n,init:o}=await this.createFetchParams(e,t),s=await this.fetchApi(n,o);if(s&&s.status>=200&&s.status<300)return s;throw new D(s,"Response returned an error code")}async createFetchParams(e,t){let n=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(n+="?"+this.configuration.queryParamsStringify(e.query));const o=Object.assign({},this.configuration.headers,e.headers);Object.keys(o).forEach(c=>o[c]===void 0?delete o[c]:{});const s=typeof t=="function"?t:async()=>t,u={method:e.method,headers:o,body:e.body,credentials:this.configuration.credentials},a={...u,...await s({init:u,context:e})};let d;J(a.body)||a.body instanceof URLSearchParams||M(a.body)?d=a.body:this.isJsonMime(o["Content-Type"])?d=JSON.stringify(a.body):d=a.body;const m={...a,body:d};return{url:n,init:m}}clone(){const e=this.constructor,t=new e(this.configuration);return t.middleware=this.middleware.slice(),t}};h(w,"jsonRegex",new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i"));let R=w;function M(r){return typeof Blob<"u"&&r instanceof Blob}function J(r){return typeof FormData<"u"&&r instanceof FormData}class D extends Error{constructor(t,n){super(n);h(this,"name","ResponseError");this.response=t}}class K extends Error{constructor(t,n){super(n);h(this,"name","FetchError");this.cause=t}}class N extends Error{constructor(t,n){super(n);h(this,"name","RequiredError");this.field=t}}function S(r,e=""){return Object.keys(r).map(t=>E(t,r[t],e)).filter(t=>t.length>0).join("&")}function E(r,e,t=""){const n=t+(t.length?`[${r}]`:r);if(e instanceof Array){const o=e.map(s=>encodeURIComponent(String(s))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${o}`}if(e instanceof Set){const o=Array.from(e);return E(r,o,t)}return e instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?S(e,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(e))}`}class W{constructor(e,t=n=>n){this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}class L{constructor(e){this.raw=e}async value(){}}class z{constructor(e){this.raw=e}async value(){return await this.raw.text()}}function B(r,e,t={}){const{storage:n="local",serializer:o=JSON,syncTabs:s=!0,onWriteError:u=console.error,onParseError:a=console.error,beforeRead:d=i=>i,beforeWrite:m=i=>i}=t,c=n==="local"?localStorage:sessionStorage;let y;try{const i=c==null?void 0:c.getItem(r);y=i?d(o.parse(i)):e}catch(i){a(i),y=e}let f=P(v(y));function A(i){try{const l=m(i);c==null||c.setItem(r,o.stringify(l))}catch(l){u(l)}}return s&&F&&n==="local"&&window.addEventListener("storage",i=>{if(i.key===r&&i.storageArea===localStorage)try{const l=i.newValue?o.parse(i.newValue):e;g(f,d(l),!0)}catch(l){a(l)}}),C(()=>($(()=>{A(b(f))}),()=>{})),{get value(){return b(f)},set value(i){g(f,i,!0)},update(i){g(f,i(b(f)),!0)},reset(){g(f,e,!0)}}}const p=B("api",null),H={get url(){var r;return(r=p.value)==null?void 0:r.url},get tenant(){var r;return(r=p.value)==null?void 0:r.tenant},get connected(){var r,e;return!!((r=p.value)!=null&&r.url)&&!!((e=p.value)!=null&&e.tenant)}};function _(){p.reset()}function G(r){p.value=r}export{R as B,O as C,W as J,N as R,z as T,L as V,H as a,D as b,_ as c,B as l,G as s};
