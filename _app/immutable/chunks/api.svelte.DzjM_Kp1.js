var q=Object.defineProperty;var P=(r,e,t)=>e in r?q(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var l=(r,e,t)=>P(r,typeof e!="symbol"?e+"":e,t);import{an as C,d as $,b,e as T,g as R,u as I}from"./runtime.XTayOKyQ.js";import{p as g}from"./proxy.BKNo-OHe.js";const O=!0,F=O,L=C,U="http://localhost:3000".replace(/\/+$/,"");class M{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:U}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||E}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const D=new M,w=class w{constructor(e=D){l(this,"middleware");l(this,"fetchApi",async(e,t)=>{let n={url:e,init:t};for(const o of this.middleware)o.pre&&(n=await o.pre({fetch:this.fetchApi,...n})||n);let s;try{s=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(o){for(const u of this.middleware)u.onError&&(s=await u.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:o,response:s?s.clone():void 0})||s);if(s===void 0)throw o instanceof Error?new v(o,"The request failed and the interceptors did not return an alternative response"):o}for(const o of this.middleware)o.post&&(s=await o.post({fetch:this.fetchApi,url:n.url,init:n.init,response:s.clone()})||s);return s});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){const t=e.map(n=>({pre:n}));return this.withMiddleware(...t)}withPostMiddleware(...e){const t=e.map(n=>({post:n}));return this.withMiddleware(...t)}isJsonMime(e){return e?w.jsonRegex.test(e):!1}async request(e,t){const{url:n,init:s}=await this.createFetchParams(e,t),o=await this.fetchApi(n,s);if(o&&o.status>=200&&o.status<300)return o;throw new V(o,"Response returned an error code")}async createFetchParams(e,t){let n=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(n+="?"+this.configuration.queryParamsStringify(e.query));const s=Object.assign({},this.configuration.headers,e.headers);Object.keys(s).forEach(c=>s[c]===void 0?delete s[c]:{});const o=typeof t=="function"?t:async()=>t,u={method:e.method,headers:s,body:e.body,credentials:this.configuration.credentials},a={...u,...await o({init:u,context:e})};let d;K(a.body)||a.body instanceof URLSearchParams||J(a.body)?d=a.body:this.isJsonMime(s["Content-Type"])?d=JSON.stringify(a.body):d=a.body;const m={...a,body:d};return{url:n,init:m}}clone(){const e=this.constructor,t=new e(this.configuration);return t.middleware=this.middleware.slice(),t}};l(w,"jsonRegex",new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i"));let S=w;function J(r){return typeof Blob<"u"&&r instanceof Blob}function K(r){return typeof FormData<"u"&&r instanceof FormData}class V extends Error{constructor(t,n){super(n);l(this,"name","ResponseError");this.response=t}}class v extends Error{constructor(t,n){super(n);l(this,"name","FetchError");this.cause=t}}class z extends Error{constructor(t,n){super(n);l(this,"name","RequiredError");this.field=t}}function E(r,e=""){return Object.keys(r).map(t=>A(t,r[t],e)).filter(t=>t.length>0).join("&")}function A(r,e,t=""){const n=t+(t.length?`[${r}]`:r);if(e instanceof Array){const s=e.map(o=>encodeURIComponent(String(o))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${s}`}if(e instanceof Set){const s=Array.from(e);return A(r,s,t)}return e instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?E(e,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(e))}`}class H{constructor(e,t=n=>n){this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}class _{constructor(e){this.raw=e}async value(){}}class G{constructor(e){this.raw=e}async value(){return await this.raw.text()}}function B(r,e,t={}){const{storage:n="local",serializer:s=JSON,syncTabs:o=!0,onWriteError:u=console.error,onParseError:a=console.error,beforeRead:d=i=>i,beforeWrite:m=i=>i}=t,c=n==="local"?localStorage:sessionStorage;let y;try{const i=c==null?void 0:c.getItem(r);y=i?d(s.parse(i)):e}catch(i){a(i),y=e}let p=$(g(y));function j(i){try{const f=m(i);c==null||c.setItem(r,s.stringify(f))}catch(f){u(f)}}return o&&F&&n==="local"&&window.addEventListener("storage",i=>{if(i.key===r&&i.storageArea===localStorage)try{const f=i.newValue?s.parse(i.newValue):e;b(p,g(d(f)))}catch(f){a(f)}}),T(()=>(I(()=>{j(R(p))}),()=>{})),{get value(){return R(p)},set value(i){b(p,g(i))},reset(){b(p,g(e))}}}const h=B("api",null),Q={get url(){var r;return(r=h.value)==null?void 0:r.url},get tenant(){var r;return(r=h.value)==null?void 0:r.tenant},get connected(){var r,e;return!!((r=h.value)!=null&&r.url)&&!!((e=h.value)!=null&&e.tenant)}};function X(){h.reset()}function Y(r){h.value=r}export{S as B,M as C,H as J,V as R,G as T,_ as V,Q as a,z as b,X as c,L as d,B as l,Y as s};
