import{k as ue,r as oe}from"../chunks/scheduler.1587348c.js";import{S as de,i as fe,s as C,g,r as Q,m as ce,I as me,f as p,c as M,h as w,j as T,G as le,u as W,n as pe,k as r,a as z,C as o,J as R,v as X,D as B,K as he,d as O,t as H,b as _e,w as Y,p as ve}from"../chunks/index.1e570738.js";import{I as te,d as ge,i as we,S as be,K as ye,V as ke,v as se,w as ae}from"../chunks/Spinner.55af249c.js";import{g as $e}from"../chunks/navigation.40667790.js";import{b as ie}from"../chunks/paths.b340fad0.js";import{j as Se}from"../chunks/user.5c70c963.js";import{h as Ie}from"../chunks/errors.7cec09bb.js";import"../chunks/system.db9bdf7a.js";const Ee=async s=>{const{signUpMethods:e}=await s.parent();return{signUpMethods:e}},xe=Object.freeze(Object.defineProperty({__proto__:null,load:Ee},Symbol.toStringTag,{value:"Module"}));function ne(s){let e,a=`<span>Not a member?</span> <a href="${`${ie}/signup`}" class="underline text-blue-500">Sign up</a>`;return{c(){e=g("p"),e.innerHTML=a,this.h()},l(t){e=w(t,"P",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1ve39ne"&&(e.innerHTML=a),this.h()},h(){r(e,"class","py-2")},m(t,u){z(t,e,u)},d(t){t&&p(e)}}}function re(s){let e,a,t,u;return t=new be({}),{c(){e=g("div"),a=g("div"),Q(t.$$.fragment),this.h()},l(c){e=w(c,"DIV",{class:!0});var y=T(e);a=w(y,"DIV",{class:!0});var h=T(a);W(t.$$.fragment,h),h.forEach(p),y.forEach(p),this.h()},h(){r(a,"class","inline-block w-6 h-6"),r(e,"class","flex flex-row justify-center mr-2")},m(c,y){z(c,e,y),o(e,a),X(t,a,null),u=!0},i(c){u||(O(t.$$.fragment,c),u=!0)},o(c){H(t.$$.fragment,c),u=!1},d(c){c&&p(e),Y(t)}}}function Te(s){let e,a,t,u,c="Sign in",y,h,d,_,l,V,q,$,j,S,f,U,v,I,F,N,k,K,D,G,Z,m=s[0].signUpMethods.enabled&&ne();$=new te({props:{name:"username",result:s[1]}}),I=new te({props:{name:"password",result:s[1]}});let i=s[2]&&re();return{c(){e=C(),a=g("div"),t=g("div"),u=g("h1"),u.textContent=c,y=C(),m&&m.c(),h=C(),d=g("form"),_=g("div"),l=g("input"),q=C(),Q($.$$.fragment),j=C(),S=g("div"),f=g("input"),v=C(),Q(I.$$.fragment),F=C(),N=g("div"),k=g("button"),i&&i.c(),K=ce(`
					Sign in`),this.h()},l(n){me("svelte-kxjkt8",document.head).forEach(p),e=M(n),a=w(n,"DIV",{class:!0});var x=T(a);t=w(x,"DIV",{class:!0});var E=T(t);u=w(E,"H1",{class:!0,"data-svelte-h":!0}),le(u)!=="svelte-8d2tmk"&&(u.textContent=c),y=M(E),m&&m.l(E),h=M(E),d=w(E,"FORM",{});var P=T(d);_=w(P,"DIV",{class:!0});var A=T(_);l=w(A,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),q=M(A),W($.$$.fragment,A),A.forEach(p),j=M(P),S=w(P,"DIV",{class:!0});var L=T(S);f=w(L,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),v=M(L),W(I.$$.fragment,L),L.forEach(p),F=M(P),N=w(P,"DIV",{class:!0});var ee=T(N);k=w(ee,"BUTTON",{type:!0,class:!0});var J=T(k);i&&i.l(J),K=pe(J,`
					Sign in`),J.forEach(p),ee.forEach(p),P.forEach(p),E.forEach(p),x.forEach(p),this.h()},h(){document.title="Sign in",r(u,"class","mb-1"),r(l,"class",V="w-full "+s[5]("username")),r(l,"type","text"),r(l,"name","username"),r(l,"autocomplete","username"),r(l,"placeholder","Username/Email"),r(_,"class","mb-2"),r(f,"class",U="w-full "+s[5]("password")),r(f,"type","password"),r(f,"name","password"),r(f,"autocomplete","current-password"),r(f,"placeholder","Password"),r(S,"class","mb-2"),r(k,"type","submit"),r(k,"class","btn primary flex flex-shrink"),k.disabled=s[6],r(N,"class","flex flex-row justify-end"),r(t,"class","flex flex-col flex-shrink md:w-72 w-full mx-auto my-10 bg-white dark:bg-gray-800 shadow p-4"),r(a,"class","flex flex-col flex-grow justify-end md:justify-start")},m(n,b){z(n,e,b),z(n,a,b),o(a,t),o(t,u),o(t,y),m&&m.m(t,null),o(t,h),o(t,d),o(d,_),o(_,l),R(l,s[3]),o(_,q),X($,_,null),o(d,j),o(d,S),o(S,f),R(f,s[4]),o(S,v),X(I,S,null),o(d,F),o(d,N),o(N,k),i&&i.m(k,null),o(k,K),D=!0,G||(Z=[B(l,"input",s[9]),B(l,"input",s[7]),B(f,"input",s[10]),B(f,"input",s[7]),B(d,"submit",he(s[8]))],G=!0)},p(n,[b]){n[0].signUpMethods.enabled?m||(m=ne(),m.c(),m.m(t,h)):m&&(m.d(1),m=null),(!D||b&32&&V!==(V="w-full "+n[5]("username")))&&r(l,"class",V),b&8&&l.value!==n[3]&&R(l,n[3]);const x={};b&2&&(x.result=n[1]),$.$set(x),(!D||b&32&&U!==(U="w-full "+n[5]("password")))&&r(f,"class",U),b&16&&f.value!==n[4]&&R(f,n[4]);const E={};b&2&&(E.result=n[1]),I.$set(E),n[2]?i?b&4&&O(i,1):(i=re(),i.c(),O(i,1),i.m(k,K)):i&&(ve(),H(i,1,1,()=>{i=null}),_e()),(!D||b&64)&&(k.disabled=n[6])},i(n){D||(O($.$$.fragment,n),O(I.$$.fragment,n),O(i),D=!0)},o(n){H($.$$.fragment,n),H(I.$$.fragment,n),H(i),D=!1},d(n){n&&(p(e),p(a)),m&&m.d(),Y($),Y(I),i&&i.d(),G=!1,oe(Z)}}}const Ve=()=>ye((s={},e)=>{e.length&&(ke(e),se("username","required",()=>{ae(s.username).isNotBlank()}),se("password","required",()=>{ae(s.password).isNotBlank()}))});function je(s,e,a){let t,u,{data:c}=e;const y=Ve();let h="",d="",_=y.get();const l=new Set,V=ge(()=>{y({username:h,password:d},Array.from(l)).done(v=>{a(1,_=v)}),l.clear()},300);function q(){l.add("username"),l.add("password"),V(),V.flush()}function $(v){v.currentTarget.value=v.currentTarget.value.trim(),l.add(v.currentTarget.name),V()}let j=!1;async function S(v){try{a(2,j=!0),q(),_.isValid()&&(await Se(h,d),await $e(`${ie}/`))}catch(I){await Ie(I)}finally{a(2,j=!1)}}function f(){h=this.value,a(3,h)}function U(){d=this.value,a(4,d)}return s.$$set=v=>{"data"in v&&a(0,c=v.data)},s.$$.update=()=>{s.$$.dirty&4&&a(6,t=j),s.$$.dirty&2&&a(5,u=we(_,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[c,_,j,h,d,u,t,$,S,f,U]}class Be extends de{constructor(e){super(),fe(this,e,je,Te,ue,{data:0})}}export{Be as component,xe as universal};
