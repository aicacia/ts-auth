import{r as Ce}from"../chunks/index.qPAo0Isn.js";import{b as ue}from"../chunks/paths.eUxvDbcf.js";import{c as Ie}from"../chunks/notifications.-K1MDeUC.js";import{j as Se,r as ke}from"../chunks/utils.C9MzFJhm.js";import{S as Ee,i as Te,s as k,g as f,r as Z,m as Ve,I as De,f as g,c as E,h as d,j as T,G as $e,u as x,n as Ne,k as t,a as ve,C as a,J as O,v as ee,D as j,K as Pe,d as z,t as K,b as je,w as te,p as Ue}from"../chunks/index.Cgbm_bxH.js";import{I as oe,d as qe,i as Ae,S as Be,K as Me,V as Oe,v as X,w as Y}from"../chunks/Spinner.tRxFEDtF.js";import{g as be}from"../chunks/navigation.8QQJ154a.js";import{k as ze}from"../chunks/user.KYivON0R.js";import{h as He}from"../chunks/errors.21Pt_TCp.js";import{i as Ke}from"../chunks/oauth2.VZ5-nowa.js";const Le=async e=>{const{signUpMethods:r}=await e.parent();if(!r.enabled)Ie("Sign up is not enabled"),Ce(302,`${ue}/signin`);else return{signUpMethods:r}},at=Object.freeze(Object.defineProperty({__proto__:null,load:Le},Symbol.toStringTag,{value:"Module"}));function ye(e){let r,n,l,v;return l=new Be({}),{c(){r=f("div"),n=f("div"),Z(l.$$.fragment),this.h()},l(w){r=d(w,"DIV",{class:!0});var $=T(r);n=d($,"DIV",{class:!0});var c=T(n);x(l.$$.fragment,c),c.forEach(g),$.forEach(g),this.h()},h(){t(n,"class","inline-block w-6 h-6"),t(r,"class","flex flex-row justify-center mr-2")},m(w,$){ve(w,r,$),a(r,n),ee(l,n,null),v=!0},i(w){v||(z(l.$$.fragment,w),v=!0)},o(w){K(l.$$.fragment,w),v=!1},d(w){w&&g(r),te(l)}}}function Re(e){let r,n,l,v,w="Sign in",$,c,U=`<span>Already a member?</span> <a href="${`${ue}/signin`}" class="underline text-blue-500">Sign in</a>`,D,i,m,u,L,G,C,J,V,h,R,Q,_,pe,q,b,se,me,A,fe,B,y,ae,de,M,ce,F,S,ne,N,he,we;C=new oe({props:{name:"email",result:e[0]}}),_=new oe({props:{name:"username",result:e[0]}}),A=new oe({props:{name:"password",result:e[0]}}),M=new oe({props:{name:"passwordConfirmation",result:e[0]}});let o=e[1]&&ye();return{c(){r=k(),n=f("div"),l=f("div"),v=f("h1"),v.textContent=w,$=k(),c=f("p"),c.innerHTML=U,D=k(),i=f("form"),m=f("div"),u=f("input"),G=k(),Z(C.$$.fragment),J=k(),V=f("div"),h=f("input"),Q=k(),Z(_.$$.fragment),pe=k(),q=f("div"),b=f("input"),me=k(),Z(A.$$.fragment),fe=k(),B=f("div"),y=f("input"),de=k(),Z(M.$$.fragment),ce=k(),F=f("div"),S=f("button"),o&&o.c(),ne=Ve(`
					Sign up`),this.h()},l(s){De("svelte-10iwm6u",document.head).forEach(g),r=E(s),n=d(s,"DIV",{class:!0});var W=T(n);l=d(W,"DIV",{class:!0});var P=T(l);v=d(P,"H1",{class:!0,"data-svelte-h":!0}),$e(v)!=="svelte-8d2tmk"&&(v.textContent=w),$=E(P),c=d(P,"P",{class:!0,"data-svelte-h":!0}),$e(c)!=="svelte-462v3q"&&(c.innerHTML=U),D=E(P),i=d(P,"FORM",{});var I=T(i);m=d(I,"DIV",{class:!0});var H=T(m);u=d(H,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),G=E(H),x(C.$$.fragment,H),H.forEach(g),J=E(I),V=d(I,"DIV",{class:!0});var re=T(V);h=d(re,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),Q=E(re),x(_.$$.fragment,re),re.forEach(g),pe=E(I),q=d(I,"DIV",{class:!0});var le=T(q);b=d(le,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),me=E(le),x(A.$$.fragment,le),le.forEach(g),fe=E(I),B=d(I,"DIV",{class:!0});var ie=T(B);y=d(ie,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),de=E(ie),x(M.$$.fragment,ie),ie.forEach(g),ce=E(I),F=d(I,"DIV",{class:!0});var ge=T(F);S=d(ge,"BUTTON",{type:!0,class:!0});var _e=T(S);o&&o.l(_e),ne=Ne(_e,`
					Sign up`),_e.forEach(g),ge.forEach(g),I.forEach(g),P.forEach(g),W.forEach(g),this.h()},h(){document.title="Sign up",t(v,"class","mb-1"),t(c,"class","py-2"),t(u,"class",L="w-full "+e[6]("email")),t(u,"type","email"),t(u,"name","email"),t(u,"autocomplete","email"),t(u,"placeholder","Email"),t(m,"class","mb-2"),t(h,"class",R="w-full "+e[6]("username")),t(h,"type","text"),t(h,"name","username"),t(h,"autocomplete","username"),t(h,"placeholder","Username"),t(V,"class","mb-2"),t(b,"class",se="w-full "+e[6]("password")),t(b,"type","password"),t(b,"name","password"),t(b,"autocomplete","new-password"),t(b,"placeholder","Password"),t(q,"class","mb-2"),t(y,"class",ae="w-full "+e[6]("passwordConfirmation")),t(y,"type","password"),t(y,"name","passwordConfirmation"),t(y,"autocomplete","new-password"),t(y,"placeholder","Password Confirmation"),t(B,"class","mb-2"),t(S,"type","submit"),t(S,"class","btn primary flex flex-shrink"),S.disabled=e[7],t(F,"class","flex flex-row justify-end"),t(l,"class","flex flex-col flex-shrink md:w-72 w-full mx-auto my-10 bg-white dark:bg-gray-800 shadow p-4"),t(n,"class","flex flex-col flex-grow justify-end md:justify-start")},m(s,p){ve(s,r,p),ve(s,n,p),a(n,l),a(l,v),a(l,$),a(l,c),a(l,D),a(l,i),a(i,m),a(m,u),O(u,e[3]),a(m,G),ee(C,m,null),a(i,J),a(i,V),a(V,h),O(h,e[2]),a(V,Q),ee(_,V,null),a(i,pe),a(i,q),a(q,b),O(b,e[4]),a(q,me),ee(A,q,null),a(i,fe),a(i,B),a(B,y),O(y,e[5]),a(B,de),ee(M,B,null),a(i,ce),a(i,F),a(F,S),o&&o.m(S,null),a(S,ne),N=!0,he||(we=[j(u,"input",e[10]),j(u,"input",e[8]),j(h,"input",e[11]),j(h,"input",e[8]),j(b,"input",e[12]),j(b,"input",e[8]),j(y,"input",e[13]),j(y,"input",e[8]),j(i,"submit",Pe(e[9]))],he=!0)},p(s,[p]){(!N||p&64&&L!==(L="w-full "+s[6]("email")))&&t(u,"class",L),p&8&&u.value!==s[3]&&O(u,s[3]);const W={};p&1&&(W.result=s[0]),C.$set(W),(!N||p&64&&R!==(R="w-full "+s[6]("username")))&&t(h,"class",R),p&4&&h.value!==s[2]&&O(h,s[2]);const P={};p&1&&(P.result=s[0]),_.$set(P),(!N||p&64&&se!==(se="w-full "+s[6]("password")))&&t(b,"class",se),p&16&&b.value!==s[4]&&O(b,s[4]);const I={};p&1&&(I.result=s[0]),A.$set(I),(!N||p&64&&ae!==(ae="w-full "+s[6]("passwordConfirmation")))&&t(y,"class",ae),p&32&&y.value!==s[5]&&O(y,s[5]);const H={};p&1&&(H.result=s[0]),M.$set(H),s[1]?o?p&2&&z(o,1):(o=ye(),o.c(),z(o,1),o.m(S,ne)):o&&(Ue(),K(o,1,1,()=>{o=null}),je()),(!N||p&128)&&(S.disabled=s[7])},i(s){N||(z(C.$$.fragment,s),z(_.$$.fragment,s),z(A.$$.fragment,s),z(M.$$.fragment,s),z(o),N=!0)},o(s){K(C.$$.fragment,s),K(_.$$.fragment,s),K(A.$$.fragment,s),K(M.$$.fragment,s),K(o),N=!1},d(s){s&&(g(r),g(n)),te(C),te(_),te(A),te(M),o&&o.d(),he=!1,ke(we)}}}const Fe=()=>Me((e={},r)=>{r.size&&(Oe(Array.from(r)),X("email","required",()=>{Y(e.email).isNotBlank()}),X("username","required",()=>{Y(e.username).isNotBlank()}),X("password","required",()=>{Y(e.password).isNotBlank()}),X("passwordConfirmation","required",()=>{Y(e.passwordConfirmation).isNotBlank()}),X("passwordConfirmation","password_confirmation_mismatch",()=>{Y(e.passwordConfirmation).equals(e.password)}))});function Ge(e,r,n){let l,v;const w=Fe();let $="",c="",U="",D="",i=w.get();const m=new Set,u=qe(()=>{w({username:$,password:U,passwordConfirmation:D,email:c},m).done(_=>{n(0,i=_)}),m.clear()},300);function L(){m.add("username"),m.add("password"),m.add("passwordConfirmation"),m.add("email"),m.add("countryId"),u(),u.flush()}function G(_){_.currentTarget.value=_.currentTarget.value.trim(),m.add(_.currentTarget.name),u()}let C=!1;async function J(){try{n(1,C=!0),L(),i.isValid()&&(await ze($,U,D,c),Ke()?await be(`${ue}/oauth2/authorize`):await be(`${ue}/`))}catch(_){await He(_)}finally{n(1,C=!1)}}function V(){c=this.value,n(3,c)}function h(){$=this.value,n(2,$)}function R(){U=this.value,n(4,U)}function Q(){D=this.value,n(5,D)}return e.$$.update=()=>{e.$$.dirty&2&&n(7,l=C),e.$$.dirty&1&&n(6,v=Ae(i,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[i,C,$,c,U,D,v,l,G,J,V,h,R,Q]}class nt extends Ee{constructor(r){super(),Te(this,r,Ge,Re,Se,{})}}export{nt as component,at as universal};
