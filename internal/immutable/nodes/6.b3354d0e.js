import{b as ue}from"../chunks/index.6dc2cd99.js";import{k as se,r as pe,b as ce,p as de,n as Ze,s as _e,e as W,f as ee,g as he,u as ge,h as ve,j as we}from"../chunks/scheduler.0fc17c76.js";import{S as Z,i as Q,g as w,m as le,s as R,r as x,h as b,j as A,n as re,f as m,c as L,u as S,k as f,a as q,C as _,J as ne,v as B,D as J,K as ie,o as Ke,d as C,p as je,t as V,b as Ue,w as M,H as me,G as ae,I as Qe}from"../chunks/index.734baa98.js";import{b as Ce}from"../chunks/paths.41c4970f.js";import{A as Xe}from"../chunks/ApplicationEditor.5daa82e5.js";import{M as Ye}from"../chunks/Modal.73a80218.js";import{I as Ve,d as Ne,i as Te,S as xe,K as Se,V as Be,v as Ie,w as De}from"../chunks/Spinner.d43ed761.js";import{h as Me}from"../chunks/errors.e44f2348.js";import{i as et,g as tt}from"../chunks/navigation.5c63806d.js";import{I as be,g as $e,a as ye}from"../chunks/Icon.1c7886f7.js";import{f as nt,c as lt}from"../chunks/notifications.4d71840f.js";const rt=async r=>{const{user:e}=await r.parent(),l=parseInt(r.params.application_id),n=await ue.show(l),i=(await ue.config(l)).reduce((t,a)=>(t[a.key]=a,t),{});return{user:e,application:n,configs:i}},bn=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"}));function Pe(r){let e,l,n,i;return n=new xe({}),{c(){e=w("div"),l=w("div"),x(n.$$.fragment),this.h()},l(t){e=b(t,"DIV",{class:!0});var a=A(e);l=b(a,"DIV",{class:!0});var s=A(l);S(n.$$.fragment,s),s.forEach(m),a.forEach(m),this.h()},h(){f(l,"class","inline-block w-6 h-6"),f(e,"class","flex flex-row justify-center mr-2")},m(t,a){q(t,e,a),_(e,l),B(n,l,null),i=!0},i(t){i||(C(n.$$.fragment,t),i=!0)},o(t){V(n.$$.fragment,t),i=!1},d(t){t&&m(e),M(n)}}}function it(r){let e,l,n,i,t,a,s,p,$,d,g,j,v,y,D,U,k,I,O,c=r[2]&&Pe();return U=new Ve({props:{name:"uri",result:r[1]}}),{c(){e=w("form"),l=w("label"),n=le("Enter `"),i=le(r[0]),t=le("` to confirm delete."),a=R(),s=w("div"),p=w("div"),$=w("input"),g=R(),j=w("div"),v=w("button"),c&&c.c(),y=le(`
				Delete`),D=R(),x(U.$$.fragment),this.h()},l(h){e=b(h,"FORM",{class:!0});var u=A(e);l=b(u,"LABEL",{for:!0});var o=A(l);n=re(o,"Enter `"),i=re(o,r[0]),t=re(o,"` to confirm delete."),o.forEach(m),a=L(u),s=b(u,"DIV",{class:!0});var E=A(s);p=b(E,"DIV",{class:!0});var N=A(p);$=b(N,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),N.forEach(m),g=L(E),j=b(E,"DIV",{class:!0});var H=A(j);v=b(H,"BUTTON",{type:!0,class:!0});var z=A(v);c&&c.l(z),y=re(z,`
				Delete`),z.forEach(m),H.forEach(m),E.forEach(m),D=L(u),S(U.$$.fragment,u),u.forEach(m),this.h()},h(){f(l,"for","uri"),f($,"id","uri"),f($,"class",d="flex flex-grow "+r[4]("uri")),f($,"type","text"),f($,"name","uri"),f($,"placeholder","URI"),f(p,"class","flex flex-grow relative"),f(v,"type","submit"),f(v,"class","btn danger flex flex-shrink"),v.disabled=r[5],f(j,"class","flex flex-shrink"),f(s,"class","flex flex-row"),f(e,"class","flex flex-col flex-grow")},m(h,u){q(h,e,u),_(e,l),_(l,n),_(l,i),_(l,t),_(e,a),_(e,s),_(s,p),_(p,$),ne($,r[3]),_(s,g),_(s,j),_(j,v),c&&c.m(v,null),_(v,y),_(e,D),B(U,e,null),k=!0,I||(O=[J($,"input",r[9]),J($,"input",r[6]),J(e,"submit",ie(r[7]))],I=!0)},p(h,[u]){(!k||u&1)&&Ke(i,h[0]),(!k||u&16&&d!==(d="flex flex-grow "+h[4]("uri")))&&f($,"class",d),u&8&&$.value!==h[3]&&ne($,h[3]),h[2]?c?u&4&&C(c,1):(c=Pe(),c.c(),C(c,1),c.m(v,y)):c&&(je(),V(c,1,1,()=>{c=null}),Ue()),(!k||u&32)&&(v.disabled=h[5]);const o={};u&2&&(o.result=h[1]),U.$set(o)},i(h){k||(C(c),C(U.$$.fragment,h),k=!0)},o(h){V(c),V(U.$$.fragment,h),k=!1},d(h){h&&m(e),c&&c.d(),M(U),I=!1,pe(O)}}}const at=()=>Se((r={},e)=>{e.length&&(Be(e),Ie("uri","required",()=>{De(r.uri).isNotBlank()}),Ie("uri","mismatch",()=>{De(r.uri).equals(r.originalUri)}))});function st(r,e,l){let n,i,{id:t}=e,{originalUri:a}=e;const s=at();let p=s.get(),$="";const d=new Set,g=Ne(()=>{s({uri:$,originalUri:a},Array.from(d)).done(k=>{l(1,p=k)}),d.clear()},300);function j(){d.add("uri"),g(),g.flush()}function v(k){d.add(k.currentTarget.name),g()}let y=!1;async function D(){try{l(2,y=!0),j(),p.isValid()&&(await ue.remove(t),await et(`${Ce}/applications`),await tt(`${Ce}/applications`))}catch(k){await Me(k)}finally{l(2,y=!1)}}function U(){$=this.value,l(3,$)}return r.$$set=k=>{"id"in k&&l(8,t=k.id),"originalUri"in k&&l(0,a=k.originalUri)},r.$$.update=()=>{r.$$.dirty&4&&l(5,n=y),r.$$.dirty&2&&l(4,i=Te(p,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[a,p,y,$,i,n,v,D,t,U]}class ot extends Z{constructor(e){super(),Q(this,e,st,it,se,{id:8,originalUri:0})}}function ft(r){let e,l;return e=new ot({props:{id:r[0],originalUri:r[1]}}),{c(){x(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){B(e,n,i),l=!0},p(n,i){const t={};i&1&&(t.id=n[0]),i&2&&(t.originalUri=n[1]),e.$set(t)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function ut(r){let e,l="Delete Application?";return{c(){e=w("h4"),e.textContent=l,this.h()},l(n){e=b(n,"H4",{slot:!0,"data-svelte-h":!0}),ae(e)!=="svelte-5jrkmv"&&(e.textContent=l),this.h()},h(){f(e,"slot","title")},m(n,i){q(n,e,i)},p:Ze,d(n){n&&m(e)}}}function ct(r){let e,l,n="Danger Zone",i,t,a,s,p=`This operation is permanent and will delete all permissions and data associated with
		application.`,$,d,g,j="Delete Application",v,y,D,U,k,I;function O(h){r[4](h)}let c={$$slots:{title:[ut],default:[ft]},$$scope:{ctx:r}};return r[2]!==void 0&&(c.open=r[2]),y=new Ye({props:c}),ce.push(()=>me(y,"open",O)),{c(){e=w("div"),l=w("h4"),l.textContent=n,i=R(),t=w("hr"),a=R(),s=w("p"),s.textContent=p,$=R(),d=w("div"),g=w("button"),g.textContent=j,v=R(),x(y.$$.fragment),this.h()},l(h){e=b(h,"DIV",{});var u=A(e);l=b(u,"H4",{"data-svelte-h":!0}),ae(l)!=="svelte-z25y9f"&&(l.textContent=n),i=L(u),t=b(u,"HR",{class:!0}),a=L(u),s=b(u,"P",{"data-svelte-h":!0}),ae(s)!=="svelte-1cenlwm"&&(s.textContent=p),$=L(u),d=b(u,"DIV",{class:!0});var o=A(d);g=b(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(g)!=="svelte-13zijuj"&&(g.textContent=j),o.forEach(m),u.forEach(m),v=L(h),S(y.$$.fragment,h),this.h()},h(){f(t,"class","mb-1"),f(g,"class","btn danger"),f(d,"class","flex flex-row justify-end")},m(h,u){q(h,e,u),_(e,l),_(e,i),_(e,t),_(e,a),_(e,s),_(e,$),_(e,d),_(d,g),q(h,v,u),B(y,h,u),U=!0,k||(I=J(g,"click",r[3]),k=!0)},p(h,[u]){const o={};u&35&&(o.$$scope={dirty:u,ctx:h}),!D&&u&4&&(D=!0,o.open=h[2],de(()=>D=!1)),y.$set(o)},i(h){U||(C(y.$$.fragment,h),U=!0)},o(h){V(y.$$.fragment,h),U=!1},d(h){h&&(m(e),m(v)),M(y,h),k=!1,I()}}}function dt(r,e,l){let{id:n}=e,{originalUri:i}=e,t=!1;function a(){l(2,t=!0)}function s(p){t=p,l(2,t)}return r.$$set=p=>{"id"in p&&l(0,n=p.id),"originalUri"in p&&l(1,i=p.originalUri)},[n,i,t,a,s]}class mt extends Z{constructor(e){super(),Q(this,e,dt,ct,se,{id:0,originalUri:1})}}function pt(r){let e;const l=r[2].default,n=he(l,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,t){n&&n.m(i,t),e=!0},p(i,t){n&&n.p&&(!e||t&8)&&ge(n,l,i,i[3],e?we(l,i[3],t,null):ve(i[3]),null)},i(i){e||(C(n,i),e=!0)},o(i){V(n,i),e=!1},d(i){n&&n.d(i)}}}function _t(r){let e,l;const n=[{name:"undo-2"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[pt]},$$scope:{ctx:r}};for(let t=0;t<n.length;t+=1)i=W(i,n[t]);return e=new be({props:i}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p(t,[a]){const s=a&3?$e(n,[n[0],a&2&&ye(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function ht(r,e,l){let{$$slots:n={},$$scope:i}=e;const t=[["path",{d:"M9 14 4 9l5-5"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"}]];return r.$$set=a=>{l(1,e=W(W({},e),ee(a))),"$$scope"in a&&l(3,i=a.$$scope)},e=ee(e),[t,e,n,i]}class gt extends Z{constructor(e){super(),Q(this,e,ht,_t,_e,{})}}const We=gt;function vt(r){let e;const l=r[2].default,n=he(l,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,t){n&&n.m(i,t),e=!0},p(i,t){n&&n.p&&(!e||t&8)&&ge(n,l,i,i[3],e?we(l,i[3],t,null):ve(i[3]),null)},i(i){e||(C(n,i),e=!0)},o(i){V(n,i),e=!1},d(i){n&&n.d(i)}}}function wt(r){let e,l;const n=[{name:"eye-off"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[vt]},$$scope:{ctx:r}};for(let t=0;t<n.length;t+=1)i=W(i,n[t]);return e=new be({props:i}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p(t,[a]){const s=a&3?$e(n,[n[0],a&2&&ye(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function bt(r,e,l){let{$$slots:n={},$$scope:i}=e;const t=[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22"}]];return r.$$set=a=>{l(1,e=W(W({},e),ee(a))),"$$scope"in a&&l(3,i=a.$$scope)},e=ee(e),[t,e,n,i]}class $t extends Z{constructor(e){super(),Q(this,e,bt,wt,_e,{})}}const yt=$t;function Et(r){let e;const l=r[2].default,n=he(l,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,t){n&&n.m(i,t),e=!0},p(i,t){n&&n.p&&(!e||t&8)&&ge(n,l,i,i[3],e?we(l,i[3],t,null):ve(i[3]),null)},i(i){e||(C(n,i),e=!0)},o(i){V(n,i),e=!1},d(i){n&&n.d(i)}}}function kt(r){let e,l;const n=[{name:"eye"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Et]},$$scope:{ctx:r}};for(let t=0;t<n.length;t+=1)i=W(i,n[t]);return e=new be({props:i}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p(t,[a]){const s=a&3?$e(n,[n[0],a&2&&ye(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function jt(r,e,l){let{$$slots:n={},$$scope:i}=e;const t=[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}],["circle",{cx:"12",cy:"12",r:"3"}]];return r.$$set=a=>{l(1,e=W(W({},e),ee(a))),"$$scope"in a&&l(3,i=a.$$scope)},e=ee(e),[t,e,n,i]}class Ut extends Z{constructor(e){super(),Q(this,e,jt,kt,_e,{})}}const It=Ut;function Dt(r){let e;const l=r[2].default,n=he(l,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,t){n&&n.m(i,t),e=!0},p(i,t){n&&n.p&&(!e||t&8)&&ge(n,l,i,i[3],e?we(l,i[3],t,null):ve(i[3]),null)},i(i){e||(C(n,i),e=!0)},o(i){V(n,i),e=!1},d(i){n&&n.d(i)}}}function At(r){let e,l;const n=[{name:"rotate-ccw"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[Dt]},$$scope:{ctx:r}};for(let t=0;t<n.length;t+=1)i=W(i,n[t]);return e=new be({props:i}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p(t,[a]){const s=a&3?$e(n,[n[0],a&2&&ye(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function Ct(r,e,l){let{$$slots:n={},$$scope:i}=e;const t=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];return r.$$set=a=>{l(1,e=W(W({},e),ee(a))),"$$scope"in a&&l(3,i=a.$$scope)},e=ee(e),[t,e,n,i]}class Vt extends Z{constructor(e){super(),Q(this,e,Ct,At,_e,{})}}const Nt=Vt,Tt=typeof btoa=="function",Ge=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fe=Array.prototype.slice.call(xt);(r=>{let e={};return r.forEach((l,n)=>e[l]=n),e})(fe);const St=String.fromCharCode.bind(String);typeof Uint8Array.from=="function"&&Uint8Array.from.bind(Uint8Array);const Bt=r=>r.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Mt=r=>{let e,l,n,i,t="";const a=r.length%3;for(let s=0;s<r.length;){if((l=r.charCodeAt(s++))>255||(n=r.charCodeAt(s++))>255||(i=r.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=l<<16|n<<8|i,t+=fe[e>>18&63]+fe[e>>12&63]+fe[e>>6&63]+fe[e&63]}return a?t.slice(0,a-3)+"===".substring(a):t},Ot=Tt?r=>btoa(r):Ge?r=>Buffer.from(r,"binary").toString("base64"):Mt,He=Ge?r=>Buffer.from(r).toString("base64"):r=>{let l=[];for(let n=0,i=r.length;n<i;n+=4096)l.push(St.apply(null,r.subarray(n,n+4096)));return Ot(l.join(""))},Rt=(r,e=!1)=>e?Bt(He(r)):He(r);function Lt(r){let e,l,n,i;return{c(){e=w("input"),this.h()},l(t){e=b(t,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),this.h()},h(){f(e,"id","application-jwt"),f(e,"class",l="flex flex-grow "+r[4]("jwt")+" pe-8"),f(e,"type","password"),f(e,"name","jwt"),f(e,"placeholder","URL")},m(t,a){q(t,e,a),ne(e,r[0]),n||(i=[J(e,"input",r[13]),J(e,"input",r[7])],n=!0)},p(t,a){a&16&&l!==(l="flex flex-grow "+t[4]("jwt")+" pe-8")&&f(e,"class",l),a&1&&e.value!==t[0]&&ne(e,t[0])},d(t){t&&m(e),n=!1,pe(i)}}}function qt(r){let e,l,n,i;return{c(){e=w("input"),this.h()},l(t){e=b(t,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),this.h()},h(){f(e,"id","application-jwt"),f(e,"class",l="flex flex-grow "+r[4]("jwt")+" pe-8"),f(e,"type","text"),f(e,"name","jwt"),f(e,"placeholder","URL")},m(t,a){q(t,e,a),ne(e,r[0]),n||(i=[J(e,"input",r[12]),J(e,"input",r[7])],n=!0)},p(t,a){a&16&&l!==(l="flex flex-grow "+t[4]("jwt")+" pe-8")&&f(e,"class",l),a&1&&e.value!==t[0]&&ne(e,t[0])},d(t){t&&m(e),n=!1,pe(i)}}}function Pt(r){let e,l;return e=new It({}),{c(){x(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){B(e,n,i),l=!0},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Ht(r){let e,l;return e=new yt({}),{c(){x(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,i){B(e,n,i),l=!0},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Fe(r){let e,l,n,i;return n=new xe({}),{c(){e=w("div"),l=w("div"),x(n.$$.fragment),this.h()},l(t){e=b(t,"DIV",{class:!0});var a=A(e);l=b(a,"DIV",{class:!0});var s=A(l);S(n.$$.fragment,s),s.forEach(m),a.forEach(m),this.h()},h(){f(l,"class","inline-block w-6 h-6"),f(e,"class","flex flex-row justify-center mr-2")},m(t,a){q(t,e,a),_(e,l),B(n,l,null),i=!0},i(t){i||(C(n.$$.fragment,t),i=!0)},o(t){V(n.$$.fragment,t),i=!1},d(t){t&&m(e),M(n)}}}function Ft(r){let e,l,n="JWT Secret",i,t,a,s,p,$,d,g,j,v,y,D,U,k,I,O,c,h,u,o,E,N,H;p=new We({});function z(T,K){return T[3]?qt:Lt}let G=z(r),F=G(r);const te=[Ht,Pt],X=[];function Oe(T,K){return T[3]?0:1}v=Oe(r),y=X[v]=te[v](r),I=new Nt({});let P=r[2]&&Fe();return o=new Ve({props:{name:"jwt",result:r[1]}}),{c(){e=w("form"),l=w("label"),l.textContent=n,i=R(),t=w("div"),a=w("div"),s=w("button"),x(p.$$.fragment),$=R(),d=w("div"),F.c(),g=R(),j=w("button"),y.c(),D=R(),U=w("div"),k=w("button"),x(I.$$.fragment),O=R(),c=w("button"),P&&P.c(),h=le(`
				Update`),u=R(),x(o.$$.fragment),this.h()},l(T){e=b(T,"FORM",{class:!0});var K=A(e);l=b(K,"LABEL",{for:!0,"data-svelte-h":!0}),ae(l)!=="svelte-1tlsnj1"&&(l.textContent=n),i=L(K),t=b(K,"DIV",{class:!0});var Y=A(t);a=b(Y,"DIV",{class:!0});var oe=A(a);s=b(oe,"BUTTON",{type:!0,class:!0});var Re=A(s);S(p.$$.fragment,Re),Re.forEach(m),oe.forEach(m),$=L(Y),d=b(Y,"DIV",{class:!0});var Ee=A(d);F.l(Ee),g=L(Ee),j=b(Ee,"BUTTON",{type:!0,class:!0});var Le=A(j);y.l(Le),Le.forEach(m),Ee.forEach(m),D=L(Y),U=b(Y,"DIV",{class:!0});var ke=A(U);k=b(ke,"BUTTON",{type:!0,class:!0});var qe=A(k);S(I.$$.fragment,qe),qe.forEach(m),O=L(ke),c=b(ke,"BUTTON",{type:!0,class:!0});var Ae=A(c);P&&P.l(Ae),h=re(Ae,`
				Update`),Ae.forEach(m),ke.forEach(m),Y.forEach(m),u=L(K),S(o.$$.fragment,K),K.forEach(m),this.h()},h(){f(l,"for","application-jwt"),f(s,"type","submit"),f(s,"class","btn icon secondary"),f(a,"class","flex flex-shrink"),f(j,"type","submit"),f(j,"class","btn icon absolute inset-y-0 right-0"),f(d,"class","flex flex-grow relative"),f(k,"type","submit"),f(k,"class","btn icon secondary"),f(c,"type","submit"),f(c,"class","btn primary"),c.disabled=r[5],f(U,"class","flex flex-shrink"),f(t,"class","flex flex-row"),f(e,"class","flex flex-col flex-grow")},m(T,K){q(T,e,K),_(e,l),_(e,i),_(e,t),_(t,a),_(a,s),B(p,s,null),_(t,$),_(t,d),F.m(d,null),_(d,g),_(d,j),X[v].m(j,null),_(t,D),_(t,U),_(U,k),B(I,k,null),_(U,O),_(U,c),P&&P.m(c,null),_(c,h),_(e,u),B(o,e,null),E=!0,N||(H=[J(s,"click",ie(r[8])),J(j,"click",ie(r[6])),J(k,"click",ie(r[9])),J(e,"submit",ie(r[10]))],N=!0)},p(T,[K]){G===(G=z(T))&&F?F.p(T,K):(F.d(1),F=G(T),F&&(F.c(),F.m(d,g)));let Y=v;v=Oe(T),v!==Y&&(je(),V(X[Y],1,1,()=>{X[Y]=null}),Ue(),y=X[v],y||(y=X[v]=te[v](T),y.c()),C(y,1),y.m(j,null)),T[2]?P?K&4&&C(P,1):(P=Fe(),P.c(),C(P,1),P.m(c,h)):P&&(je(),V(P,1,1,()=>{P=null}),Ue()),(!E||K&32)&&(c.disabled=T[5]);const oe={};K&2&&(oe.result=T[1]),o.$set(oe)},i(T){E||(C(p.$$.fragment,T),C(y),C(I.$$.fragment,T),C(P),C(o.$$.fragment,T),E=!0)},o(T){V(p.$$.fragment,T),V(y),V(I.$$.fragment,T),V(P),V(o.$$.fragment,T),E=!1},d(T){T&&m(e),M(p),F.d(),X[v].d(),M(I),P&&P.d(),M(o),N=!1,pe(H)}}}const zt=()=>Se((r={},e)=>{e.length&&(Be(e),Ie("jwt","required",()=>{De(r.jwt).isNotBlank()}))});function Jt(r,e,l){let n,i,{id:t}=e,{jwt:a=""}=e,s=a;const p=zt();let $=!1;function d(){l(3,$=!$)}let g=p.get();const j=new Set,v=Ne(()=>{p({jwt:a},Array.from(j)).done(u=>{l(1,g=u)}),j.clear()},300);function y(){j.add("jwt"),v(),v.flush()}function D(u){j.add(u.currentTarget.name),v()}function U(){l(0,a=s),p.reset()}function k(){l(0,a=Rt(nt(new Uint8Array(256))))}let I=!1;async function O(){try{l(2,I=!0),y(),g.isValid()&&(await ue.updateConfig(t,{key:"jwt.secret",value:a}),s=a,p.reset(),lt("invalidated_jwt","info"))}catch(u){await Me(u)}finally{l(2,I=!1)}}function c(){a=this.value,l(0,a)}function h(){a=this.value,l(0,a)}return r.$$set=u=>{"id"in u&&l(11,t=u.id),"jwt"in u&&l(0,a=u.jwt)},r.$$.update=()=>{r.$$.dirty&4&&l(5,n=I),r.$$.dirty&2&&l(4,i=Te(g,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[a,g,I,$,i,n,d,D,U,k,O,t,c,h]}class Kt extends Z{constructor(e){super(),Q(this,e,Jt,Ft,se,{id:11,jwt:0})}}function ze(r){let e,l,n,i;return n=new xe({}),{c(){e=w("div"),l=w("div"),x(n.$$.fragment),this.h()},l(t){e=b(t,"DIV",{class:!0});var a=A(e);l=b(a,"DIV",{class:!0});var s=A(l);S(n.$$.fragment,s),s.forEach(m),a.forEach(m),this.h()},h(){f(l,"class","inline-block w-6 h-6"),f(e,"class","flex flex-row justify-center mr-2")},m(t,a){q(t,e,a),_(e,l),B(n,l,null),i=!0},i(t){i||(C(n.$$.fragment,t),i=!0)},o(t){V(n.$$.fragment,t),i=!1},d(t){t&&m(e),M(n)}}}function Wt(r){let e,l,n="URI",i,t,a,s,p,$,d,g,j,v,y,D,U,k,I,O,c,h;p=new We({});let u=r[2]&&ze();return I=new Ve({props:{name:"uri",result:r[1]}}),{c(){e=w("form"),l=w("label"),l.textContent=n,i=R(),t=w("div"),a=w("div"),s=w("button"),x(p.$$.fragment),$=R(),d=w("div"),g=w("input"),v=R(),y=w("div"),D=w("button"),u&&u.c(),U=le(`
				Update`),k=R(),x(I.$$.fragment),this.h()},l(o){e=b(o,"FORM",{class:!0});var E=A(e);l=b(E,"LABEL",{for:!0,"data-svelte-h":!0}),ae(l)!=="svelte-1btr72"&&(l.textContent=n),i=L(E),t=b(E,"DIV",{class:!0});var N=A(t);a=b(N,"DIV",{class:!0});var H=A(a);s=b(H,"BUTTON",{type:!0,class:!0});var z=A(s);S(p.$$.fragment,z),z.forEach(m),H.forEach(m),$=L(N),d=b(N,"DIV",{class:!0});var G=A(d);g=b(G,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),G.forEach(m),v=L(N),y=b(N,"DIV",{class:!0});var F=A(y);D=b(F,"BUTTON",{type:!0,class:!0});var te=A(D);u&&u.l(te),U=re(te,`
				Update`),te.forEach(m),F.forEach(m),N.forEach(m),k=L(E),S(I.$$.fragment,E),E.forEach(m),this.h()},h(){f(l,"for","uri"),f(s,"type","submit"),f(s,"class","btn icon secondary flex flex-shrink"),f(a,"class","flex flex-shrink"),f(g,"id","uri"),f(g,"class",j="flex flex-grow "+r[3]("uri")),f(g,"type","text"),f(g,"name","uri"),f(g,"placeholder","URI"),f(d,"class","flex flex-grow relative"),f(D,"type","submit"),f(D,"class","btn primary flex flex-shrink"),D.disabled=r[4],f(y,"class","flex flex-shrink"),f(t,"class","flex flex-row"),f(e,"class","flex flex-col flex-grow")},m(o,E){q(o,e,E),_(e,l),_(e,i),_(e,t),_(t,a),_(a,s),B(p,s,null),_(t,$),_(t,d),_(d,g),ne(g,r[0]),_(t,v),_(t,y),_(y,D),u&&u.m(D,null),_(D,U),_(e,k),B(I,e,null),O=!0,c||(h=[J(s,"click",ie(r[6])),J(g,"input",r[9]),J(g,"input",r[5]),J(e,"submit",ie(r[7]))],c=!0)},p(o,[E]){(!O||E&8&&j!==(j="flex flex-grow "+o[3]("uri")))&&f(g,"class",j),E&1&&g.value!==o[0]&&ne(g,o[0]),o[2]?u?E&4&&C(u,1):(u=ze(),u.c(),C(u,1),u.m(D,U)):u&&(je(),V(u,1,1,()=>{u=null}),Ue()),(!O||E&16)&&(D.disabled=o[4]);const N={};E&2&&(N.result=o[1]),I.$set(N)},i(o){O||(C(p.$$.fragment,o),C(u),C(I.$$.fragment,o),O=!0)},o(o){V(p.$$.fragment,o),V(u),V(I.$$.fragment,o),O=!1},d(o){o&&m(e),M(p),u&&u.d(),M(I),c=!1,pe(h)}}}const Gt=()=>Se((r={},e)=>{e.length&&(Be(e),Ie("uri","required",()=>{De(r.uri).isNotBlank()}))});function Zt(r,e,l){let n,i,{id:t}=e,{uri:a=""}=e,s=a;const p=Gt();let $=p.get();const d=new Set,g=Ne(()=>{p({uri:a},Array.from(d)).done(I=>{l(1,$=I)}),d.clear()},300);function j(){d.add("uri"),g(),g.flush()}function v(I){d.add(I.currentTarget.name),g()}function y(){l(0,a=s),p.reset()}let D=!1;async function U(){try{l(2,D=!0),j(),$.isValid()&&(await ue.updateConfig(t,{key:"uri",value:a}),s=a,p.reset())}catch(I){await Me(I)}finally{l(2,D=!1)}}function k(){a=this.value,l(0,a)}return r.$$set=I=>{"id"in I&&l(8,t=I.id),"uri"in I&&l(0,a=I.uri)},r.$$.update=()=>{r.$$.dirty&4&&l(4,n=D),r.$$.dirty&2&&l(3,i=Te($,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[a,$,D,i,n,v,y,U,t,k]}class Qt extends Z{constructor(e){super(),Q(this,e,Zt,Wt,se,{id:8,uri:0})}}function Xt(r){let e,l,n,i,t,a,s,p,$,d,g,j,v,y,D,U,k,I;n=new Xe({props:{id:r[0].id,name:r[0].name,uri:r[0].uri,onDone:r[3]}});function O(o){r[5](o)}let c={id:r[0].id};r[2].value!==void 0&&(c.uri=r[2].value),s=new Qt({props:c}),ce.push(()=>me(s,"uri",O));function h(o){r[6](o)}let u={id:r[0].id};return r[1].value!==void 0&&(u.jwt=r[1].value),j=new Kt({props:u}),ce.push(()=>me(j,"jwt",h)),k=new mt({props:{id:r[0].id,originalUri:r[0].uri}}),{c(){e=w("div"),l=w("div"),x(n.$$.fragment),i=R(),t=w("div"),a=w("div"),x(s.$$.fragment),$=R(),d=w("div"),g=w("div"),x(j.$$.fragment),y=R(),D=w("div"),U=w("div"),x(k.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0});var E=A(e);l=b(E,"DIV",{class:!0});var N=A(l);S(n.$$.fragment,N),N.forEach(m),E.forEach(m),i=L(o),t=b(o,"DIV",{class:!0});var H=A(t);a=b(H,"DIV",{class:!0});var z=A(a);S(s.$$.fragment,z),z.forEach(m),H.forEach(m),$=L(o),d=b(o,"DIV",{class:!0});var G=A(d);g=b(G,"DIV",{class:!0});var F=A(g);S(j.$$.fragment,F),F.forEach(m),G.forEach(m),y=L(o),D=b(o,"DIV",{class:!0});var te=A(D);U=b(te,"DIV",{class:!0});var X=A(U);S(k.$$.fragment,X),X.forEach(m),te.forEach(m),this.h()},h(){f(l,"class","flex flex-col flex-shrink w-full max-w-6xl mx-auto mt-4 bg-white dark:bg-gray-800 shadow p-4"),f(e,"class","flex flex-col justify-end md:justify-start px-4"),f(a,"class","flex flex-col flex-shrink w-full max-w-6xl mx-auto mt-4 bg-white dark:bg-gray-800 shadow p-4"),f(t,"class","flex flex-col justify-end md:justify-start px-4"),f(g,"class","flex flex-col flex-shrink w-full max-w-6xl mx-auto mt-4 bg-white dark:bg-gray-800 shadow p-4"),f(d,"class","flex flex-col justify-end md:justify-start px-4"),f(U,"class","flex flex-col flex-shrink w-full max-w-6xl mx-auto mt-4 bg-white dark:bg-gray-800 shadow p-4"),f(D,"class","flex flex-col justify-end md:justify-start px-4")},m(o,E){q(o,e,E),_(e,l),B(n,l,null),q(o,i,E),q(o,t,E),_(t,a),B(s,a,null),q(o,$,E),q(o,d,E),_(d,g),B(j,g,null),q(o,y,E),q(o,D,E),_(D,U),B(k,U,null),I=!0},p(o,[E]){const N={};E&1&&(N.id=o[0].id),E&1&&(N.name=o[0].name),E&1&&(N.uri=o[0].uri),n.$set(N);const H={};E&1&&(H.id=o[0].id),!p&&E&4&&(p=!0,H.uri=o[2].value,de(()=>p=!1)),s.$set(H);const z={};E&1&&(z.id=o[0].id),!v&&E&2&&(v=!0,z.jwt=o[1].value,de(()=>v=!1)),j.$set(z);const G={};E&1&&(G.id=o[0].id),E&1&&(G.originalUri=o[0].uri),k.$set(G)},i(o){I||(C(n.$$.fragment,o),C(s.$$.fragment,o),C(j.$$.fragment,o),C(k.$$.fragment,o),I=!0)},o(o){V(n.$$.fragment,o),V(s.$$.fragment,o),V(j.$$.fragment,o),V(k.$$.fragment,o),I=!1},d(o){o&&(m(e),m(i),m(t),m($),m(d),m(y),m(D)),M(n),M(s),M(j),M(k)}}}function Je(r,e,l){return{application_id:r,key:e,value:l,created_at:new Date,updated_at:new Date}}function Yt(r,e,l){let n,i,{application:t}=e,{configs:a}=e;function s(d){l(0,t=d)}function p(d){r.$$.not_equal(n.value,d)&&(n.value=d,l(2,n),l(4,a),l(0,t))}function $(d){r.$$.not_equal(i.value,d)&&(i.value=d,l(1,i),l(4,a),l(0,t))}return r.$$set=d=>{"application"in d&&l(0,t=d.application),"configs"in d&&l(4,a=d.configs)},r.$$.update=()=>{r.$$.dirty&17&&l(2,n=a.uri||l(4,a.uri=Je(t.id,"uri"),a)),r.$$.dirty&17&&l(1,i=a["jwt.secret"]||l(4,a["jwt.secret"]=Je(t.id,"uri"),a))},[t,i,n,s,a,p,$]}class en extends Z{constructor(e){super(),Q(this,e,Yt,Xt,se,{application:0,configs:4})}}function tn(r){let e;const l=r[2].default,n=he(l,r,r[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,t){n&&n.m(i,t),e=!0},p(i,t){n&&n.p&&(!e||t&8)&&ge(n,l,i,i[3],e?we(l,i[3],t,null):ve(i[3]),null)},i(i){e||(C(n,i),e=!0)},o(i){V(n,i),e=!1},d(i){n&&n.d(i)}}}function nn(r){let e,l;const n=[{name:"arrow-left"},r[1],{iconNode:r[0]}];let i={$$slots:{default:[tn]},$$scope:{ctx:r}};for(let t=0;t<n.length;t+=1)i=W(i,n[t]);return e=new be({props:i}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p(t,[a]){const s=a&3?$e(n,[n[0],a&2&&ye(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function ln(r,e,l){let{$$slots:n={},$$scope:i}=e;const t=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return r.$$set=a=>{l(1,e=W(W({},e),ee(a))),"$$scope"in a&&l(3,i=a.$$scope)},e=ee(e),[t,e,n,i]}class rn extends Z{constructor(e){super(),Q(this,e,ln,nn,_e,{})}}const an=rn;function sn(r){let e,l,n,i,t,a,s,p,$,d=r[1].name+"",g,j,v,y,D,U;document.title=e=r[1].name,s=new an({});function k(c){r[3](c)}function I(c){r[4](c)}let O={};return r[1]!==void 0&&(O.application=r[1]),r[0]!==void 0&&(O.configs=r[0]),v=new en({props:O}),ce.push(()=>me(v,"application",k)),ce.push(()=>me(v,"configs",I)),{c(){l=R(),n=w("div"),i=w("div"),t=w("div"),a=w("a"),x(s.$$.fragment),p=R(),$=w("h4"),g=le(d),j=R(),x(v.$$.fragment),this.h()},l(c){Qe("svelte-btu2at",document.head).forEach(m),l=L(c),n=b(c,"DIV",{class:!0});var u=A(n);i=b(u,"DIV",{class:!0});var o=A(i);t=b(o,"DIV",{class:!0});var E=A(t);a=b(E,"A",{class:!0,href:!0});var N=A(a);S(s.$$.fragment,N),N.forEach(m),p=L(E),$=b(E,"H4",{});var H=A($);g=re(H,d),H.forEach(m),E.forEach(m),o.forEach(m),u.forEach(m),j=L(c),S(v.$$.fragment,c),this.h()},h(){f(a,"class","btn icon primary me-2"),f(a,"href",`${Ce}/applications`),f(t,"class","flex flex-row"),f(i,"class","flex flex-col flex-shrink w-full max-w-6xl mx-auto mt-4 bg-white dark:bg-gray-800 shadow p-4"),f(n,"class","flex flex-col justify-end md:justify-start px-4")},m(c,h){q(c,l,h),q(c,n,h),_(n,i),_(i,t),_(t,a),B(s,a,null),_(t,p),_(t,$),_($,g),q(c,j,h),B(v,c,h),U=!0},p(c,[h]){(!U||h&2)&&e!==(e=c[1].name)&&(document.title=e),(!U||h&2)&&d!==(d=c[1].name+"")&&Ke(g,d);const u={};!y&&h&2&&(y=!0,u.application=c[1],de(()=>y=!1)),!D&&h&1&&(D=!0,u.configs=c[0],de(()=>D=!1)),v.$set(u)},i(c){U||(C(s.$$.fragment,c),C(v.$$.fragment,c),U=!0)},o(c){V(s.$$.fragment,c),V(v.$$.fragment,c),U=!1},d(c){c&&(m(l),m(n),m(j)),M(s),M(v,c)}}}function on(r,e,l){let n,i,{data:t}=e;function a(p){n=p,l(1,n),l(2,t)}function s(p){i=p,l(0,i),l(2,t)}return r.$$set=p=>{"data"in p&&l(2,t=p.data)},r.$$.update=()=>{r.$$.dirty&4&&l(1,n=t.application),r.$$.dirty&4&&l(0,i=t.configs)},[i,n,t,a,s]}class $n extends Z{constructor(e){super(),Q(this,e,on,sn,se,{data:2})}}export{$n as component,bn as universal};
